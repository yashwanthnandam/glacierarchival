var Jn=Object.defineProperty,Zn=Object.defineProperties;var Qn=Object.getOwnPropertyDescriptors;var vr=Object.getOwnPropertySymbols;var Es=Object.prototype.hasOwnProperty,Cs=Object.prototype.propertyIsEnumerable;var wr=Math.pow,Ss=(r,t,s)=>t in r?Jn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,C=(r,t)=>{for(var s in t||(t={}))Es.call(t,s)&&Ss(r,s,t[s]);if(vr)for(var s of vr(t))Cs.call(t,s)&&Ss(r,s,t[s]);return r},ve=(r,t)=>Zn(r,Qn(t));var ks=(r,t)=>{var s={};for(var n in r)Es.call(r,n)&&t.indexOf(n)<0&&(s[n]=r[n]);if(r!=null&&vr)for(var n of vr(r))t.indexOf(n)<0&&Cs.call(r,n)&&(s[n]=r[n]);return s};var ei=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var j=(r,t,s)=>new Promise((n,i)=>{var a=c=>{try{u(s.next(c))}catch(h){i(h)}},o=c=>{try{u(s.throw(c))}catch(h){i(h)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((s=s.apply(r,t)).next())});import{j as e,B as p,C as Zt,a as ct,P as ce,T as l,A as be,b as ot,c as U,L as at,d as He,I as Ye,R as Qt,G as F,e as Le,f as Oe,g as pe,h as rt,S as Ut,i as $e,k as St,l as gt,u as Et,m as ps,n as Kt,o as re,p as v,q as ts,D as jt,r as vt,s as wt,t as tr,v as Dr,w as er,x as on,y as $r,F as Tr,z as hr,E as dt,H as yt,J as De,K as Te,M as Fe,N as Xt,O as _t,Q as ti,U as ri,V as ft,W as ln,X as si,Y as Fr,Z as fs,_ as Br,$ as Gt,a0 as rs,a1 as ni,a2 as ii,a3 as cn,a4 as Pr,a5 as ai,a6 as dn,a7 as kt,a8 as _r,a9 as Ps,aa as oi,ab as Is,ac as li,ad as ci,ae as di,af as un,ag as ui,ah as dr,ai as Rs,aj as Sr,ak as Ds,al as Ar,am as hi,an as Xr,ao as pi,ap as fi,aq as gi,ar as xi,as as Ts,at as Pt,au as mi,av as Fs,aw as As,ax as Ws,ay as Us,az as Jr,aA as bi,aB as ss,aC as yi,aD as ji,aE as vi,aF as hn,aG as wi,aH as _i,aI as pn,aJ as Si,aK as Ei,aL as Ci,aM as ki,aN as zs,aO as Pi,aP as Ii,aQ as Ls,aR as Ri,aS as Di,aT as Ti,aU as Fi,aV as Ai,aW as Wi,aX as Ui,aY as zi}from"./ui-ab1cfd0d.js";import{c as Li,r as d,a as Wr}from"./vendor-950dbbc1.js";import{a as Ur}from"./utils-76a9f601.js";var dl=ei(q=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var fn,Os=Li;fn=Os.createRoot,Os.hydrateRoot;/**
 * @remix-run/router v1.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pr(){return pr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},pr.apply(this,arguments)}var Ft;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ft||(Ft={}));const $s="popstate";function Oi(r){r===void 0&&(r={});function t(n,i){let{pathname:a,search:o,hash:u}=n.location;return ns("",{pathname:a,search:o,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:zr(i)}return Bi(t,s,null,r)}function Ae(r,t){if(r===!1||r===null||typeof r=="undefined")throw new Error(t)}function gs(r,t){if(!r){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(s){}}}function $i(){return Math.random().toString(36).substr(2,8)}function Bs(r,t){return{usr:r.state,key:r.key,idx:t}}function ns(r,t,s,n){return s===void 0&&(s=null),pr({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?rr(t):t,{state:s,key:t&&t.key||n||$i()})}function zr(r){let{pathname:t="/",search:s="",hash:n=""}=r;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function rr(r){let t={};if(r){let s=r.indexOf("#");s>=0&&(t.hash=r.substr(s),r=r.substr(0,s));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function Bi(r,t,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,u=Ft.Pop,c=null,h=g();h==null&&(h=0,o.replaceState(pr({},o.state,{idx:h}),""));function g(){return(o.state||{idx:null}).idx}function x(){u=Ft.Pop;let S=g(),A=S==null?null:S-h;h=S,c&&c({action:u,location:b.location,delta:A})}function f(S,A){u=Ft.Push;let y=ns(b.location,S,A);s&&s(y,S),h=g()+1;let $=Bs(y,h),w=b.createHref(y);try{o.pushState($,"",w)}catch(P){i.location.assign(w)}a&&c&&c({action:u,location:b.location,delta:1})}function E(S,A){u=Ft.Replace;let y=ns(b.location,S,A);s&&s(y,S),h=g();let $=Bs(y,h),w=b.createHref(y);o.replaceState($,"",w),a&&c&&c({action:u,location:b.location,delta:0})}function m(S){let A=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof S=="string"?S:zr(S);return Ae(A,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,A)}let b={get action(){return u},get location(){return r(i,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener($s,x),c=S,()=>{i.removeEventListener($s,x),c=null}},createHref(S){return t(i,S)},createURL:m,encodeLocation(S){let A=m(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:f,replace:E,go(S){return o.go(S)}};return b}var Ms;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ms||(Ms={}));function Mi(r,t,s){s===void 0&&(s="/");let n=typeof t=="string"?rr(t):t,i=xs(n.pathname||"/",s);if(i==null)return null;let a=gn(r);Ni(a);let o=null;for(let u=0;o==null&&u<a.length;++u)o=Zi(a[u],ta(i));return o}function gn(r,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(a,o,u)=>{let c={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Ae(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let h=Wt([n,c.relativePath]),g=s.concat(c);a.children&&a.children.length>0&&(Ae(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),gn(a.children,t,g,h)),!(a.path==null&&!a.index)&&t.push({path:h,score:Xi(h,a.index),routesMeta:g})};return r.forEach((a,o)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,o);else for(let c of xn(a.path))i(a,o,c)}),t}function xn(r){let t=r.split("/");if(t.length===0)return[];let[s,...n]=t,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=xn(n.join("/")),u=[];return u.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&u.push(...o),u.map(c=>r.startsWith("/")&&c===""?"/":c)}function Ni(r){r.sort((t,s)=>t.score!==s.score?s.score-t.score:Ji(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const Gi=/^:\w+$/,Hi=3,qi=2,Vi=1,Yi=10,Ki=-2,Ns=r=>r==="*";function Xi(r,t){let s=r.split("/"),n=s.length;return s.some(Ns)&&(n+=Ki),t&&(n+=qi),s.filter(i=>!Ns(i)).reduce((i,a)=>i+(Gi.test(a)?Hi:a===""?Vi:Yi),n)}function Ji(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function Zi(r,t){let{routesMeta:s}=r,n={},i="/",a=[];for(let o=0;o<s.length;++o){let u=s[o],c=o===s.length-1,h=i==="/"?t:t.slice(i.length)||"/",g=Qi({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h);if(!g)return null;Object.assign(n,g.params);let x=u.route;a.push({params:n,pathname:Wt([i,g.pathname]),pathnameBase:ia(Wt([i,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(i=Wt([i,g.pathnameBase]))}return a}function Qi(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[s,n]=ea(r.path,r.caseSensitive,r.end),i=t.match(s);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((h,g,x)=>{if(g==="*"){let f=u[x]||"";o=a.slice(0,a.length-f.length).replace(/(.)\/+$/,"$1")}return h[g]=ra(u[x]||"",g),h},{}),pathname:a,pathnameBase:o,pattern:r}}function ea(r,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),gs(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,u)=>(n.push(u),"/([^\\/]+)"));return r.endsWith("*")?(n.push("*"),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function ta(r){try{return decodeURI(r)}catch(t){return gs(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function ra(r,t){try{return decodeURIComponent(r)}catch(s){return gs(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+r+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),r}}function xs(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=r.charAt(s);return n&&n!=="/"?null:r.slice(s)||"/"}function sa(r,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:i=""}=typeof r=="string"?rr(r):r;return{pathname:s?s.startsWith("/")?s:na(s,t):t,search:aa(n),hash:oa(i)}}function na(r,t){let s=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Zr(r,t,s,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mn(r){return r.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function bn(r,t,s,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=rr(r):(i=pr({},r),Ae(!i.pathname||!i.pathname.includes("?"),Zr("?","pathname","search",i)),Ae(!i.pathname||!i.pathname.includes("#"),Zr("#","pathname","hash",i)),Ae(!i.search||!i.search.includes("#"),Zr("#","search","hash",i)));let a=r===""||i.pathname==="",o=a?"/":i.pathname,u;if(n||o==null)u=s;else{let x=t.length-1;if(o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),x-=1;i.pathname=f.join("/")}u=x>=0?t[x]:"/"}let c=sa(i,u),h=o&&o!=="/"&&o.endsWith("/"),g=(a||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(h||g)&&(c.pathname+="/"),c}const Wt=r=>r.join("/").replace(/\/\/+/g,"/"),ia=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),aa=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,oa=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function la(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const yn=["post","put","patch","delete"];new Set(yn);const ca=["get",...yn];new Set(ca);/**
 * React Router v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lr(){return Lr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},Lr.apply(this,arguments)}const ms=d.createContext(null),jn=d.createContext(null),sr=d.createContext(null),Mr=d.createContext(null),nr=d.createContext({outlet:null,matches:[]}),vn=d.createContext(null);function da(r,t){let{relative:s}=t===void 0?{}:t;ir()||Ae(!1);let{basename:n,navigator:i}=d.useContext(sr),{hash:a,pathname:o,search:u}=_n(r,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:Wt([n,o])),i.createHref({pathname:c,search:u,hash:a})}function ir(){return d.useContext(Mr)!=null}function ar(){return ir()||Ae(!1),d.useContext(Mr).location}function wn(r){d.useContext(sr).static||d.useLayoutEffect(r)}function Ct(){return d.useContext(ms)!=null?_a():ua()}function ua(){ir()||Ae(!1);let{basename:r,navigator:t}=d.useContext(sr),{matches:s}=d.useContext(nr),{pathname:n}=ar(),i=JSON.stringify(mn(s).map(u=>u.pathnameBase)),a=d.useRef(!1);return wn(()=>{a.current=!0}),d.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){t.go(u);return}let h=bn(u,JSON.parse(i),n,c.relative==="path");r!=="/"&&(h.pathname=h.pathname==="/"?r:Wt([r,h.pathname])),(c.replace?t.replace:t.push)(h,c.state,c)},[r,t,i,n])}function _n(r,t){let{relative:s}=t===void 0?{}:t,{matches:n}=d.useContext(nr),{pathname:i}=ar(),a=JSON.stringify(mn(n).map(o=>o.pathnameBase));return d.useMemo(()=>bn(r,JSON.parse(a),i,s==="path"),[r,a,i,s])}function ha(r,t){return pa(r,t)}function pa(r,t,s){ir()||Ae(!1);let{navigator:n}=d.useContext(sr),{matches:i}=d.useContext(nr),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=ar(),h;if(t){var g;let b=typeof t=="string"?rr(t):t;u==="/"||(g=b.pathname)!=null&&g.startsWith(u)||Ae(!1),h=b}else h=c;let x=h.pathname||"/",f=u==="/"?x:x.slice(u.length)||"/",E=Mi(r,{pathname:f}),m=ba(E&&E.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:Wt([u,n.encodeLocation?n.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:Wt([u,n.encodeLocation?n.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,s);return t&&m?d.createElement(Mr.Provider,{value:{location:Lr({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ft.Pop}},m):m}function fa(){let r=wa(),t=la(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),s=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),s?d.createElement("pre",{style:i},s):null,a)}const ga=d.createElement(fa,null);class xa extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error?d.createElement(nr.Provider,{value:this.props.routeContext},d.createElement(vn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ma(r){let{routeContext:t,match:s,children:n}=r,i=d.useContext(ms);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),d.createElement(nr.Provider,{value:t},n)}function ba(r,t,s){var n;if(t===void 0&&(t=[]),s===void 0&&(s=null),r==null){var i;if((i=s)!=null&&i.errors)r=s.matches;else return null}let a=r,o=(n=s)==null?void 0:n.errors;if(o!=null){let u=a.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id]));u>=0||Ae(!1),a=a.slice(0,Math.min(a.length,u+1))}return a.reduceRight((u,c,h)=>{let g=c.route.id?o==null?void 0:o[c.route.id]:null,x=null;s&&(x=c.route.errorElement||ga);let f=t.concat(a.slice(0,h+1)),E=()=>{let m;return g?m=x:c.route.element?m=c.route.element:m=u,d.createElement(ma,{match:c,routeContext:{outlet:u,matches:f},children:m})};return s&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?d.createElement(xa,{location:s.location,revalidation:s.revalidation,component:x,error:g,children:E(),routeContext:{outlet:null,matches:f}}):E()},null)}var is;(function(r){r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate"})(is||(is={}));var fr;(function(r){r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId"})(fr||(fr={}));function ya(r){let t=d.useContext(ms);return t||Ae(!1),t}function ja(r){let t=d.useContext(jn);return t||Ae(!1),t}function va(r){let t=d.useContext(nr);return t||Ae(!1),t}function Sn(r){let t=va(),s=t.matches[t.matches.length-1];return s.route.id||Ae(!1),s.route.id}function wa(){var r;let t=d.useContext(vn),s=ja(fr.UseRouteError),n=Sn(fr.UseRouteError);return t||((r=s.errors)==null?void 0:r[n])}function _a(){let{router:r}=ya(is.UseNavigateStable),t=Sn(fr.UseNavigateStable),s=d.useRef(!1);return wn(()=>{s.current=!0}),d.useCallback(function(i,a){a===void 0&&(a={}),s.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,Lr({fromRouteId:t},a)))},[r,t])}function Sa(r){let{to:t,replace:s,state:n,relative:i}=r;ir()||Ae(!1);let a=d.useContext(jn),o=Ct();return d.useEffect(()=>{a&&a.navigation.state!=="idle"||o(t,{replace:s,state:n,relative:i})}),null}function lt(r){Ae(!1)}function Ea(r){let{basename:t="/",children:s=null,location:n,navigationType:i=Ft.Pop,navigator:a,static:o=!1}=r;ir()&&Ae(!1);let u=t.replace(/^\/*/,"/"),c=d.useMemo(()=>({basename:u,navigator:a,static:o}),[u,a,o]);typeof n=="string"&&(n=rr(n));let{pathname:h="/",search:g="",hash:x="",state:f=null,key:E="default"}=n,m=d.useMemo(()=>{let b=xs(h,u);return b==null?null:{location:{pathname:b,search:g,hash:x,state:f,key:E},navigationType:i}},[u,h,g,x,f,E,i]);return m==null?null:d.createElement(sr.Provider,{value:c},d.createElement(Mr.Provider,{children:s,value:m}))}function Ca(r){let{children:t,location:s}=r;return ha(as(t),s)}var Gs;(function(r){r[r.pending=0]="pending",r[r.success=1]="success",r[r.error=2]="error"})(Gs||(Gs={}));new Promise(()=>{});function as(r,t){t===void 0&&(t=[]);let s=[];return d.Children.forEach(r,(n,i)=>{if(!d.isValidElement(n))return;let a=[...t,i];if(n.type===d.Fragment){s.push.apply(s,as(n.props.children,a));return}n.type!==lt&&Ae(!1),!n.props.index||!n.props.children||Ae(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=as(n.props.children,a)),s.push(o)}),s}/**
 * React Router DOM v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function os(){return os=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},os.apply(this,arguments)}function ka(r,t){if(r==null)return{};var s={},n=Object.keys(r),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(s[i]=r[i]);return s}function Pa(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Ia(r,t){return r.button===0&&(!t||t==="_self")&&!Pa(r)}function ls(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,s)=>{let n=r[s];return t.concat(Array.isArray(n)?n.map(i=>[s,i]):[[s,n]])},[]))}function Ra(r,t){let s=ls(r);if(t)for(let n of t.keys())s.has(n)||t.getAll(n).forEach(i=>{s.append(n,i)});return s}const Da=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Ta(r){let{basename:t,children:s,window:n}=r,i=d.useRef();i.current==null&&(i.current=Oi({window:n,v5Compat:!0}));let a=i.current,[o,u]=d.useState({action:a.action,location:a.location});return d.useLayoutEffect(()=>a.listen(u),[a]),d.createElement(Ea,{basename:t,children:s,location:o.location,navigationType:o.action,navigator:a})}const Fa=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Aa=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gr=d.forwardRef(function(t,s){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:u,target:c,to:h,preventScrollReset:g}=t,x=ka(t,Da),{basename:f}=d.useContext(sr),E,m=!1;if(typeof h=="string"&&Aa.test(h)&&(E=h,Fa))try{let y=new URL(window.location.href),$=h.startsWith("//")?new URL(y.protocol+h):new URL(h),w=xs($.pathname,f);$.origin===y.origin&&w!=null?h=w+$.search+$.hash:m=!0}catch(y){}let b=da(h,{relative:i}),S=Wa(h,{replace:o,state:u,target:c,preventScrollReset:g,relative:i});function A(y){n&&n(y),y.defaultPrevented||S(y)}return d.createElement("a",os({},x,{href:E||b,onClick:m||a?n:A,ref:s,target:c}))});var Hs;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmitImpl="useSubmitImpl",r.UseFetcher="useFetcher"})(Hs||(Hs={}));var qs;(function(r){r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(qs||(qs={}));function Wa(r,t){let{target:s,replace:n,state:i,preventScrollReset:a,relative:o}=t===void 0?{}:t,u=Ct(),c=ar(),h=_n(r,{relative:o});return d.useCallback(g=>{if(Ia(g,s)){g.preventDefault();let x=n!==void 0?n:zr(c)===zr(h);u(r,{replace:x,state:i,preventScrollReset:a,relative:o})}},[c,u,h,n,i,s,r,a,o])}function En(r){let t=d.useRef(ls(r)),s=d.useRef(!1),n=ar(),i=d.useMemo(()=>Ra(n.search,s.current?null:t.current),[n.search]),a=Ct(),o=d.useCallback((u,c)=>{const h=ls(typeof u=="function"?u(i):u);s.current=!0,a("?"+h,c)},[a,i]);return[i,o]}const xr={baseURL:"https://datahibernate.in/api/",timeout:3e4,withCredentials:!0},Er=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent),Cr=navigator.deviceMemory&&navigator.deviceMemory<4,ur={timeout:3e5,bulkBatchSize:Er||Cr?1e3:1500,webWorkerBatchSize:Er||Cr?1e3:1500,mainBatchSize:Er||Cr?1e3:1500,maxConcurrentUploads:Er?12:Cr?16:24,minConcurrentUploads:6,maxConcurrentWorkers:4},Vs={ENABLE_CLIENT_STORAGE_PRECHECK:!1,SHOW_DIRECTORY_TOTAL_SIZES:!1},mt={TOKEN:"token",REFRESH_TOKEN:"refreshToken",USER:"user"},qe={MAX_FILE_SIZE:5*1024*1024*1024,MAX_TOTAL_SIZE:15*1024*1024*1024,MAX_FILES:1e5,MAX_SESSION_SIZE:50*1024*1024*1024,CHUNK_SIZE:8*1024*1024,MEMORY_LIMIT:100*1024*1024},Jt={UPLOAD_SUCCESS:"Files uploaded successfully",UPLOAD_FAILED:"Upload failed",ARCHIVE_SUCCESS:"File archived successfully",ARCHIVE_FAILED:"Archive failed",RESTORE_SUCCESS:"File restored successfully",RESTORE_FAILED:"Restore failed",DOWNLOAD_SUCCESS:"Download started",DOWNLOAD_FAILED:"Download failed",S3_CONFIG_REQUIRED:"S3 configuration required. Please configure S3 settings first.",FILE_TOO_LARGE:"File too large",NETWORK_ERROR:"Network error. Please check your connection.",UNAUTHORIZED:"Unauthorized access",FORBIDDEN:"Access forbidden",NOT_FOUND:"Resource not found",SERVER_ERROR:"Server error. Please try again later.",FILE_SIZE_EXCEEDED:"File size exceeds the maximum limit of 5GB",TOTAL_SIZE_EXCEEDED:"Total upload size exceeds the limit of 15GB",SESSION_SIZE_EXCEEDED:"Upload session size exceeds the limit of 50GB",STORAGE_LIMIT_EXCEEDED:"Storage limit exceeded. Please subscribe to a hibernation plan to continue.",MEMORY_LIMIT_EXCEEDED:"File processing exceeds memory limit. Please upload smaller files.",TOO_MANY_FILES:"Too many files selected. Maximum 100,000 files per upload.",INVALID_FILE_TYPE:"File type not allowed. Please check allowed file types.",UPLOAD_CANCELLED:"Upload cancelled by user",UPLOAD_TIMEOUT:"Upload timeout. Please try again with smaller files.",NETWORK_TIMEOUT:"Network timeout. Please check your connection.",PARTIAL_UPLOAD_FAILED:"Some files failed to upload. Please retry failed files.",CONCURRENT_UPLOAD_LIMIT:"Too many concurrent uploads. Please wait for current uploads to complete."},Xe={EMAIL_REGEX:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,USERNAME_MIN_LENGTH:3,USERNAME_MAX_LENGTH:30,PASSWORD_MIN_LENGTH:8,PASSWORD_MAX_LENGTH:128},pt={isValidJWT:r=>{if(!r||typeof r!="string")return!1;try{const t=r.split(".");if(t.length!==3)return!1;const s=JSON.parse(atob(t[1])),n=Date.now()/1e3;return s.exp&&s.exp<n?!1:!!(s.user_id&&s.exp)}catch(t){return!1}},getTokenPayload:r=>{if(!r)return null;try{const t=r.split(".");return t.length!==3?null:JSON.parse(atob(t[1]))}catch(t){return null}},isTokenExpired:r=>{const t=pt.getTokenPayload(r);return!t||!t.exp?!0:t.exp<Date.now()/1e3}};class Ua{constructor(){this.isProduction=!0,this.useHttpOnly=this.supportsHttpOnly(),this.csrfToken=null}supportsHttpOnly(){return!1}setCSRFToken(t){this.csrfToken=t}getCSRFToken(){return this.csrfToken}setAccessToken(t){if(!pt.isValidJWT(t))throw new Error("Invalid token format");this.useHttpOnly?console.log("Access token validated and stored in httpOnly cookie"):this.setSecureLocalStorage(mt.TOKEN,t)}setRefreshToken(t){if(!pt.isValidJWT(t))throw new Error("Invalid refresh token format");this.useHttpOnly?console.log("Refresh token validated and stored in httpOnly cookie"):this.setSecureLocalStorage(mt.REFRESH_TOKEN,t)}getAccessToken(){if(this.useHttpOnly)return"httpOnly_cookie";{const t=localStorage.getItem(mt.TOKEN);return pt.isValidJWT(t)?t:null}}getRefreshToken(){if(this.useHttpOnly)return"httpOnly_cookie";{const t=localStorage.getItem(mt.REFRESH_TOKEN);return pt.isValidJWT(t)?t:null}}clearTokens(){this.useHttpOnly?console.log("Clearing httpOnly cookies via logout endpoint"):(localStorage.removeItem(mt.TOKEN),localStorage.removeItem(mt.REFRESH_TOKEN),localStorage.removeItem(mt.USER))}isAuthenticated(){return j(this,null,function*(){if(this.useHttpOnly)try{return(yield fetch("https://datahibernate.in/api/auth/secure/user/",{method:"GET",credentials:"include",headers:this.getAuthHeaders()})).ok}catch(t){return console.error("Authentication check failed:",t),!1}else{const t=this.getAccessToken();return t&&pt.isValidJWT(t)&&!pt.isTokenExpired(t)}})}setSecureLocalStorage(t,s){try{if((t===mt.TOKEN||t===mt.REFRESH_TOKEN)&&!pt.isValidJWT(s))throw new Error("Invalid token format");if(localStorage.setItem(t,s),localStorage.getItem(t)!==s)throw new Error("Failed to store token securely")}catch(n){throw console.error("Failed to store token:",n),n}}getTokenPayload(){if(this.useHttpOnly)return null;{const t=this.getAccessToken();return t?pt.getTokenPayload(t):null}}isTokenExpired(){if(this.useHttpOnly)return!1;{const t=this.getAccessToken();return t?pt.isTokenExpired(t):!0}}getAuthHeaders(){const t={};if(this.useHttpOnly)this.csrfToken&&(t["X-CSRFToken"]=this.csrfToken);else{const s=this.getAccessToken();s&&(t.Authorization=`Bearer ${s}`)}return t}}const st=new Ua,Qr=({children:r})=>{const[t,s]=d.useState(!0),[n,i]=d.useState(!1);return d.useEffect(()=>{(()=>j(q,null,function*(){try{const o=yield st.isAuthenticated();i(o),o||st.clearTokens()}catch(o){console.error("Authentication check failed:",o),i(!1),st.clearTokens()}finally{s(!1)}}))()},[]),t?e.jsx(p,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",sx:{bgcolor:"background.default"},children:e.jsx(Zt,{})}):n?r:e.jsx(Sa,{to:"/login",replace:!0})},B=Ur.create(xr);B.interceptors.request.use(r=>{const t=st.getAuthHeaders();return Object.assign(r.headers,t),r},r=>Promise.reject(r));B.interceptors.response.use(r=>r,r=>j(q,null,function*(){var s,n;const t=r.config;if(((s=r.response)==null?void 0:s.status)===401&&!t._retry){t._retry=!0;try{const i=st.getRefreshToken();if(i){const a=yield Ur.post(`${xr.baseURL}auth/refresh/`,{refresh:i}),{access:o}=a.data;return st.setAccessToken(o),t.headers.Authorization=`Bearer ${o}`,B(t)}}catch(i){return st.clearTokens(),window.location.href="/login",Promise.reject(i)}}if(((n=r.response)==null?void 0:n.status)===402){const i=r.response.data;if(i.plan_required){if(i.free_tier_used&&i.free_tier_limit){const a=(i.free_tier_used/1073741824).toFixed(1),o=(i.free_tier_limit/wr(1024,3)).toFixed(0);alert(`Free tier limit exceeded!

You have used ${a}GB of your ${o}GB free allowance.

Please subscribe to a hibernation plan to continue uploading files.`)}else window.location.href="/plans";return Promise.reject(r)}else if(i.plan_expired)return alert(`Your hibernation plan has expired. Please renew your subscription.
Expired on: ${new Date(i.expires_at).toLocaleDateString()}`),window.location.href="/plans",Promise.reject(r)}return Promise.reject(r)}));const zt={secureLogin:r=>B.post("auth/secure/login/",r),secureRefresh:()=>B.post("auth/secure/refresh/"),secureLogout:()=>B.post("auth/secure/logout/"),secureGetUser:()=>B.get("auth/secure/user/"),secureRegister:r=>B.post("auth/secure/register/",r),login:r=>B.post("auth/login/",r),register:r=>B.post("auth/register/",r),refresh:()=>B.post("auth/refresh/"),getUser:()=>B.get("auth/user/"),verifyEmail:r=>B.post("auth/verify-email/",r),resendVerification:r=>B.post("auth/resend-verification/",r),requestPasswordReset:r=>B.post("auth/request-password-reset/",r),resetPassword:r=>B.post("auth/reset-password/",r)},Ee={getFiles:(r={})=>{const t=new URLSearchParams;return r.folder!==void 0&&t.set("folder",r.folder),r.search&&t.set("search",r.search),r.paginate===!1&&t.set("paginate","false"),r.cacheBust&&t.set("_t",r.cacheBust),B.get("media-files/list_optimized/",{params:Object.fromEntries(t)})},archiveFile:r=>B.post(`media-files/${r}/archive/`),restoreFile:(r,t="Standard")=>B.post(`media-files/${r}/restore/`,{restore_tier:t}),downloadFile:r=>B.get(`media-files/${r}/download/`),bulkDownloadFiles:r=>B.post("media-files/bulk_download/",{file_ids:r}),deleteFile:r=>B.delete(`media-files/${r}/`),bulkArchiveFiles:r=>B.post("media-files/bulk_archive/",{file_ids:r}),bulkRestoreFiles:(r,t="Standard")=>B.post("media-files/bulk_restore/",{file_ids:r,restore_tier:t}),bulkDeleteFiles:r=>{const t=Ur.create(ve(C({},xr),{timeout:3e5}));return t.interceptors.request.use(s=>{const n=st.getAuthHeaders();return Object.assign(s.headers,n),s},s=>Promise.reject(s)),t.post("media-files/bulk_delete/",{file_ids:r})},deleteAllFiles:(r=!0)=>B.post("media-files/delete_all/",{confirm_delete_all:r}),getRestoreTiers:()=>B.get("media-files/restore_tiers/"),getSmartTierSuggestion:(r,t)=>B.post("media-files/get_smart_tier_suggestion/",{file_size:r,file_type:t}),getStorageCosts:()=>B.get("media-files/get_storage_costs/"),getStorageCostsINR:()=>B.get("media-files/get_storage_costs_inr/"),autoHibernateFiles:r=>B.post("media-files/auto_hibernate_files/",r),createFolder:(r,t="")=>B.post("create-folder/",{folder_name:r,parent_path:t}),getPresignedUrls:r=>{const t=Ur.create(ve(C({},xr),{timeout:6e4}));return t.interceptors.request.use(s=>{const n=st.getAuthHeaders();return Object.assign(s.headers,n),s},s=>Promise.reject(s)),t.post("media-files/get_presigned_urls/",r)},markUploadComplete:r=>B.post("media-files/mark_upload_complete/",{file_ids:r}),completeUploadBatch:r=>B.post("media-files/complete_upload_batch/",{completed_files:r||0}),getFolderStructure:(r=!1)=>{const t=r?{_t:Date.now()}:{};return B.get("media-files/folder_structure/",{params:t})}},za={getJobs:()=>B.get("archive-jobs/"),getJobStats:()=>B.get("archive-jobs/stats/")},La={getConfig:()=>B.get("s3-config/"),saveConfig:r=>B.post("s3-config/",r)},Lt={getPlans:()=>B.get("hibernation-plans/"),getPlansGroupedByTier:()=>B.get("hibernation-plans/grouped_by_tier/"),getCurrentPlan:()=>B.get("user-hibernation-plans/current_plan/"),getStorageUsage:()=>B.get("user-hibernation-plans/storage_usage/"),subscribe:r=>B.post("user-hibernation-plans/subscribe/",{plan_id:r}),cancelSubscription:()=>B.post("user-hibernation-plans/cancel_subscription/"),getUsageStats:()=>B.get("user-hibernation-plans/usage_stats/")},Ir={createOrder:(r,t)=>B.post("/payments/create_order/",{plan_id:r,amount_inr:t,currency:"INR"}),verifyPayment:(r,t,s,n)=>B.post("/payments/verify_payment/",{payment_id:r,razorpay_order_id:t,razorpay_payment_id:s,razorpay_signature:n}),getPaymentStatus:r=>B.get(`/payments/status/?payment_id=${r}`),getAll:()=>B.get("/payments/"),getStats:()=>B.get("/payments/stats/")},Cn={getPresignedUrl:r=>B.post("uppy/presigned-url/",r),markUploadComplete:r=>B.post("uppy/upload-complete/",r),createSession:r=>B.post("uppy/create-session/",r),getProgress:r=>B.get(`uppy/upload-progress/?sessionId=${r}`),listFiles:()=>B.get("uppy/files/")},Ys=Object.freeze(Object.defineProperty({__proto__:null,authAPI:zt,default:B,hibernationAPI:Lt,jobAPI:za,mediaAPI:Ee,paymentAPI:Ir,s3ConfigAPI:La,uppyAPI:Cn},Symbol.toStringTag,{value:"Module"}));class Oa{constructor(){this.measurementId="G-EH6V4R00H3",this.isInitialized=!1,this.init()}init(){typeof window!="undefined"&&window.gtag?(this.isInitialized=!0,console.log("Google Analytics initialized")):console.warn("Google Analytics not loaded")}trackPageView(t,s){this.isInitialized&&window.gtag("config",this.measurementId,{page_title:t,page_location:window.location.href,page_path:s})}trackRegistration(t="email"){this.isInitialized&&window.gtag("event","sign_up",{method:t,event_category:"engagement",event_label:"user_registration"})}trackLogin(t="email"){this.isInitialized&&window.gtag("event","login",{method:t,event_category:"engagement",event_label:"user_login"})}trackFileUpload(t,s,n="web"){this.isInitialized&&window.gtag("event","file_upload",{event_category:"file_management",event_label:"upload",value:t,custom_parameters:{file_count:t,total_size_mb:Math.round(s/(1024*1024)),upload_method:n}})}trackFileDownload(t,s){this.isInitialized&&window.gtag("event","file_download",{event_category:"file_management",event_label:"download",value:t,custom_parameters:{file_count:t,total_size_mb:Math.round(s/(1024*1024))}})}trackFileDeletion(t,s){this.isInitialized&&window.gtag("event","file_deletion",{event_category:"file_management",event_label:"delete",value:t,custom_parameters:{file_count:t,total_size_mb:Math.round(s/(1024*1024))}})}trackPlanSubscription(t,s,n){this.isInitialized&&window.gtag("event","purchase",{event_category:"ecommerce",event_label:"plan_subscription",value:s,currency:"INR",custom_parameters:{plan_name:t,plan_price:s,plan_storage_gb:n}})}trackPayment(t,s,n="INR"){this.isInitialized&&window.gtag("event","purchase",{event_category:"ecommerce",event_label:"payment",value:s,currency:n,custom_parameters:{payment_method:t,amount:s}})}trackSearch(t,s){this.isInitialized&&window.gtag("event","search",{event_category:"engagement",event_label:"file_search",search_term:t,custom_parameters:{result_count:s}})}trackError(t,s,n){this.isInitialized&&window.gtag("event","exception",{event_category:"error",event_label:t,description:s,custom_parameters:{error_location:n,error_type:t}})}trackCustomEvent(t,s,n,i=null,a={}){if(!this.isInitialized)return;const o=C({event_category:s,event_label:n},a);i!==null&&(o.value=i),window.gtag("event",t,o)}trackEngagementTime(t,s){this.isInitialized&&window.gtag("event","engagement_time",{event_category:"engagement",event_label:s,value:t,custom_parameters:{time_spent_seconds:t,page_name:s}})}trackFeatureUsage(t,s="used"){this.isInitialized&&window.gtag("event","feature_usage",{event_category:"engagement",event_label:t,custom_parameters:{feature_name:t,action:s}})}}const Ht=new Oa,$a=Object.prototype.toString;function Ba(r,t){return $a.call(r)===`[object ${t}]`}function kn(r){return Ba(r,"Object")}function bs(r){return!!(r&&r.then&&typeof r.then=="function")}function kr(r){return r&&r.Math==Math?r:void 0}const ut=typeof globalThis=="object"&&kr(globalThis)||typeof window=="object"&&kr(window)||typeof self=="object"&&kr(self)||typeof global=="object"&&kr(global)||function(){return this}()||{};function Pn(r,t,s){const n=s||ut,i=n.__SENTRY__=n.__SENTRY__||{};return i[r]||(i[r]=t())}const Ma=typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__,Na="Sentry Logger ",Ks=["debug","info","warn","error","log","assert","trace"],Xs={};function In(r){if(!("console"in ut))return r();const t=ut.console,s={},n=Object.keys(Xs);n.forEach(i=>{const a=Xs[i];s[i]=t[i],t[i]=a});try{return r()}finally{n.forEach(i=>{t[i]=s[i]})}}function Ga(){let r=!1;const t={enable:()=>{r=!0},disable:()=>{r=!1},isEnabled:()=>r};return Ma?Ks.forEach(s=>{t[s]=(...n)=>{r&&In(()=>{ut.console[s](`${Na}[${s}]:`,...n)})}}):Ks.forEach(s=>{t[s]=()=>{}}),t}const At=Ga();function Mt(r){return cs(r,new Map)}function cs(r,t){if(Ha(r)){const s=t.get(r);if(s!==void 0)return s;const n={};t.set(r,n);for(const i of Object.keys(r))typeof r[i]!="undefined"&&(n[i]=cs(r[i],t));return n}if(Array.isArray(r)){const s=t.get(r);if(s!==void 0)return s;const n=[];return t.set(r,n),r.forEach(i=>{n.push(cs(i,t))}),n}return r}function Ha(r){if(!kn(r))return!1;try{const t=Object.getPrototypeOf(r).constructor.name;return!t||t==="Object"}catch(t){return!0}}function xt(){const r=ut,t=r.crypto||r.msCrypto;let s=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(s=()=>{const n=new Uint8Array(1);return t.getRandomValues(n),n[0]})}catch(n){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,n=>(n^(s()&15)>>n/4).toString(16))}function qa(r){return Array.isArray(r)?r:[r]}var bt;(function(r){r[r.PENDING=0]="PENDING";const s=1;r[r.RESOLVED=s]="RESOLVED";const n=2;r[r.REJECTED=n]="REJECTED"})(bt||(bt={}));class Dt{constructor(t){Dt.prototype.__init.call(this),Dt.prototype.__init2.call(this),Dt.prototype.__init3.call(this),Dt.prototype.__init4.call(this),this._state=bt.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(s){this._reject(s)}}then(t,s){return new Dt((n,i)=>{this._handlers.push([!1,a=>{if(!t)n(a);else try{n(t(a))}catch(o){i(o)}},a=>{if(!s)i(a);else try{n(s(a))}catch(o){i(o)}}]),this._executeHandlers()})}catch(t){return this.then(s=>s,t)}finally(t){return new Dt((s,n)=>{let i,a;return this.then(o=>{a=!1,i=o,t&&t()},o=>{a=!0,i=o,t&&t()}).then(()=>{if(a){n(i);return}s(i)})})}__init(){this._resolve=t=>{this._setResult(bt.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(bt.REJECTED,t)}}__init3(){this._setResult=(t,s)=>{if(this._state===bt.PENDING){if(bs(s)){s.then(this._resolve,this._reject);return}this._state=t,this._value=s,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===bt.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(s=>{s[0]||(this._state===bt.RESOLVED&&s[1](this._value),this._state===bt.REJECTED&&s[2](this._value),s[0]=!0)})}}}const Rn=1e3;function ys(){return Date.now()/Rn}function Va(){const{performance:r}=ut;if(!r||!r.now)return ys;const t=Date.now()-r.now(),s=r.timeOrigin==null?t:r.timeOrigin;return()=>(s+r.now())/Rn}const Dn=Va();(()=>{const{performance:r}=ut;if(!r||!r.now)return;const t=3600*1e3,s=r.now(),n=Date.now(),i=r.timeOrigin?Math.abs(r.timeOrigin+s-n):t,a=i<t,o=r.timing&&r.timing.navigationStart,c=typeof o=="number"?Math.abs(o+s-n):t,h=c<t;return a||h?i<=c?r.timeOrigin:o:n})();const Rr=typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__,Tn="production";function Ya(){return Pn("globalEventProcessors",()=>[])}function ds(r,t,s,n=0){return new Dt((i,a)=>{const o=r[n];if(t===null||typeof o!="function")i(t);else{const u=o(C({},t),s);Rr&&o.id&&u===null&&At.log(`Event processor "${o.id}" dropped event`),bs(u)?u.then(c=>ds(r,c,s,n+1).then(i)).then(null,a):ds(r,u,s,n+1).then(i).then(null,a)}})}function Ka(r){const t=Dn(),s={sid:xt(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Ja(s)};return r&&Nr(s,r),s}function Nr(r,t={}){if(t.user&&(!r.ipAddress&&t.user.ip_address&&(r.ipAddress=t.user.ip_address),!r.did&&!t.did&&(r.did=t.user.id||t.user.email||t.user.username)),r.timestamp=t.timestamp||Dn(),t.abnormal_mechanism&&(r.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(r.ignoreDuration=t.ignoreDuration),t.sid&&(r.sid=t.sid.length===32?t.sid:xt()),t.init!==void 0&&(r.init=t.init),!r.did&&t.did&&(r.did=`${t.did}`),typeof t.started=="number"&&(r.started=t.started),r.ignoreDuration)r.duration=void 0;else if(typeof t.duration=="number")r.duration=t.duration;else{const s=r.timestamp-r.started;r.duration=s>=0?s:0}t.release&&(r.release=t.release),t.environment&&(r.environment=t.environment),!r.ipAddress&&t.ipAddress&&(r.ipAddress=t.ipAddress),!r.userAgent&&t.userAgent&&(r.userAgent=t.userAgent),typeof t.errors=="number"&&(r.errors=t.errors),t.status&&(r.status=t.status)}function Xa(r,t){let s={};t?s={status:t}:r.status==="ok"&&(s={status:"exited"}),Nr(r,s)}function Ja(r){return Mt({sid:`${r.sid}`,init:r.init,started:new Date(r.started*1e3).toISOString(),timestamp:new Date(r.timestamp*1e3).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}const Za=1;function Qa(r){const{spanId:t,traceId:s}=r.spanContext(),{data:n,op:i,parent_span_id:a,status:o,tags:u,origin:c}=Or(r);return Mt({data:n,op:i,parent_span_id:a,span_id:t,status:o,tags:u,trace_id:s,origin:c})}function Or(r){return eo(r)?r.getSpanJSON():typeof r.toJSON=="function"?r.toJSON():{}}function eo(r){return typeof r.getSpanJSON=="function"}function to(r){const{traceFlags:t}=r.spanContext();return!!(t&Za)}function ro(r){if(r)return so(r)?{captureContext:r}:io(r)?{captureContext:r}:r}function so(r){return r instanceof Nt||typeof r=="function"}const no=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function io(r){return Object.keys(r).some(t=>no.includes(t))}function ao(r,t){return or().captureException(r,ro(t))}function oo(r,t){or().addBreadcrumb(r,t)}function lo(r){or().setUser(r)}function co(...r){const t=or();if(r.length===2){const[s,n]=r;return s?t.withScope(()=>(t.getStackTop().scope=s,n(s))):t.withScope(n)}return t.withScope(r[0])}function uo(){return or().getClient()}function ho(){return or().getScope()}function Fn(r){return r.transaction}function po(r,t,s){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:a}=s&&s.getUser()||{},o=Mt({environment:n.environment||Tn,release:n.release,user_segment:a,public_key:i,trace_id:r});return t.emit&&t.emit("createDsc",o),o}function fo(r){const t=uo();if(!t)return{};const s=po(Or(r).trace_id||"",t,ho()),n=Fn(r);if(!n)return s;const i=n&&n._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:a,source:o}=n.metadata;a!=null&&(s.sample_rate=`${a}`);const u=Or(n);return o&&o!=="url"&&(s.transaction=u.description),s.sampled=String(to(n)),t.emit&&t.emit("createDsc",s),s}function go(r,t){const{fingerprint:s,span:n,breadcrumbs:i,sdkProcessingMetadata:a}=t;xo(r,t),n&&yo(r,n),jo(r,s),mo(r,i),bo(r,a)}function xo(r,t){const{extra:s,tags:n,user:i,contexts:a,level:o,transactionName:u}=t,c=Mt(s);c&&Object.keys(c).length&&(r.extra=C(C({},c),r.extra));const h=Mt(n);h&&Object.keys(h).length&&(r.tags=C(C({},h),r.tags));const g=Mt(i);g&&Object.keys(g).length&&(r.user=C(C({},g),r.user));const x=Mt(a);x&&Object.keys(x).length&&(r.contexts=C(C({},x),r.contexts)),o&&(r.level=o),u&&(r.transaction=u)}function mo(r,t){const s=[...r.breadcrumbs||[],...t];r.breadcrumbs=s.length?s:void 0}function bo(r,t){r.sdkProcessingMetadata=C(C({},r.sdkProcessingMetadata),t)}function yo(r,t){r.contexts=C({trace:Qa(t)},r.contexts);const s=Fn(t);if(s){r.sdkProcessingMetadata=C({dynamicSamplingContext:fo(t)},r.sdkProcessingMetadata);const n=Or(s).description;n&&(r.tags=C({transaction:n},r.tags))}}function jo(r,t){r.fingerprint=r.fingerprint?qa(r.fingerprint):[],t&&(r.fingerprint=r.fingerprint.concat(t)),r.fingerprint&&!r.fingerprint.length&&delete r.fingerprint}const vo=100;class Nt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Js()}static clone(t){return t?t.clone():new Nt}clone(){const t=new Nt;return t._breadcrumbs=[...this._breadcrumbs],t._tags=C({},this._tags),t._extra=C({},this._extra),t._contexts=C({},this._contexts),t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata=C({},this._sdkProcessingMetadata),t._propagationContext=C({},this._propagationContext),t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Nr(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags=C(C({},this._tags),t),this._notifyScopeListeners(),this}setTag(t,s){return this._tags=ve(C({},this._tags),{[t]:s}),this._notifyScopeListeners(),this}setExtras(t){return this._extra=C(C({},this._extra),t),this._notifyScopeListeners(),this}setExtra(t,s){return this._extra=ve(C({},this._extra),{[t]:s}),this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,s){return s===null?delete this._contexts[t]:this._contexts[t]=s,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const s=typeof t=="function"?t(this):t;if(s instanceof Nt){const n=s.getScopeData();this._tags=C(C({},this._tags),n.tags),this._extra=C(C({},this._extra),n.extra),this._contexts=C(C({},this._contexts),n.contexts),n.user&&Object.keys(n.user).length&&(this._user=n.user),n.level&&(this._level=n.level),n.fingerprint.length&&(this._fingerprint=n.fingerprint),s.getRequestSession()&&(this._requestSession=s.getRequestSession()),n.propagationContext&&(this._propagationContext=n.propagationContext)}else if(kn(s)){const n=t;this._tags=C(C({},this._tags),n.tags),this._extra=C(C({},this._extra),n.extra),this._contexts=C(C({},this._contexts),n.contexts),n.user&&(this._user=n.user),n.level&&(this._level=n.level),n.fingerprint&&(this._fingerprint=n.fingerprint),n.requestSession&&(this._requestSession=n.requestSession),n.propagationContext&&(this._propagationContext=n.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Js(),this}addBreadcrumb(t,s){const n=typeof s=="number"?s:vo;if(n<=0)return this;const i=C({timestamp:ys()},t),a=this._breadcrumbs;return a.push(i),this._breadcrumbs=a.length>n?a.slice(-n):a,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:s,_contexts:n,_tags:i,_extra:a,_user:o,_level:u,_fingerprint:c,_eventProcessors:h,_propagationContext:g,_sdkProcessingMetadata:x,_transactionName:f,_span:E}=this;return{breadcrumbs:t,attachments:s,contexts:n,tags:i,extra:a,user:o,level:u,fingerprint:c||[],eventProcessors:h,propagationContext:g,sdkProcessingMetadata:x,transactionName:f,span:E}}applyToEvent(t,s={},n=[]){go(t,this.getScopeData());const i=[...n,...Ya(),...this._eventProcessors];return ds(i,t,s)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=C(C({},this._sdkProcessingMetadata),t),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,s){const n=s&&s.event_id?s.event_id:xt();if(!this._client)return At.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(t,ve(C({originalException:t,syntheticException:i},s),{event_id:n}),this),n}captureMessage(t,s,n){const i=n&&n.event_id?n.event_id:xt();if(!this._client)return At.warn("No client configured on scope - will not capture message!"),i;const a=new Error(t);return this._client.captureMessage(t,s,ve(C({originalException:t,syntheticException:a},n),{event_id:i}),this),i}captureEvent(t,s){const n=s&&s.event_id?s.event_id:xt();return this._client?(this._client.captureEvent(t,ve(C({},s),{event_id:n}),this),n):(At.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Js(){return{traceId:xt(),spanId:xt().substring(16)}}const wo="7.120.4",An=parseFloat(wo),_o=100;class Wn{constructor(t,s,n,i=An){this._version=i;let a;s?a=s:(a=new Nt,a.setClient(t));let o;n?o=n:(o=new Nt,o.setClient(t)),this._stack=[{scope:a}],t&&this.bindClient(t),this._isolationScope=o}isOlderThan(t){return this._version<t}bindClient(t){const s=this.getStackTop();s.client=t,s.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const s=this.pushScope();let n;try{n=t(s)}catch(i){throw this.popScope(),i}return bs(n)?n.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,s){const n=this._lastEventId=s&&s.event_id?s.event_id:xt(),i=new Error("Sentry syntheticException");return this.getScope().captureException(t,ve(C({originalException:t,syntheticException:i},s),{event_id:n})),n}captureMessage(t,s,n){const i=this._lastEventId=n&&n.event_id?n.event_id:xt(),a=new Error(t);return this.getScope().captureMessage(t,s,ve(C({originalException:t,syntheticException:a},n),{event_id:i})),i}captureEvent(t,s){const n=s&&s.event_id?s.event_id:xt();return t.type||(this._lastEventId=n),this.getScope().captureEvent(t,ve(C({},s),{event_id:n})),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,s){const{scope:n,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:o=_o}=i.getOptions&&i.getOptions()||{};if(o<=0)return;const u=ys(),c=C({timestamp:u},t),h=a?In(()=>a(c,s)):c;h!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",h,s),n.addBreadcrumb(h,o))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,s){this.getScope().setTag(t,s),this.getIsolationScope().setTag(t,s)}setExtra(t,s){this.getScope().setExtra(t,s),this.getIsolationScope().setExtra(t,s)}setContext(t,s){this.getScope().setContext(t,s),this.getIsolationScope().setContext(t,s)}configureScope(t){const{scope:s,client:n}=this.getStackTop();n&&t(s)}run(t){const s=Zs(this);try{t(this)}finally{Zs(s)}}getIntegration(t){const s=this.getClient();if(!s)return null;try{return s.getIntegration(t)}catch(n){return Rr&&At.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,s){const n=this._callExtensionMethod("startTransaction",t,s);return Rr&&!n&&(this.getClient()?At.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):At.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const s=this.getStackTop().scope,n=s.getSession();n&&Xa(n),this._sendSessionUpdate(),s.setSession()}startSession(t){const{scope:s,client:n}=this.getStackTop(),{release:i,environment:a=Tn}=n&&n.getOptions()||{},{userAgent:o}=ut.navigator||{},u=Ka(C(C({release:i,environment:a,user:s.getUser()},o&&{userAgent:o}),t)),c=s.getSession&&s.getSession();return c&&c.status==="ok"&&Nr(c,{status:"exited"}),this.endSession(),s.setSession(u),u}shouldSendDefaultPii(){const t=this.getClient(),s=t&&t.getOptions();return!!(s&&s.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:s}=this.getStackTop(),n=t.getSession();n&&s&&s.captureSession&&s.captureSession(n)}_callExtensionMethod(t,...s){const i=Gr().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,s);Rr&&At.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function Gr(){return ut.__SENTRY__=ut.__SENTRY__||{extensions:{},hub:void 0},ut}function Zs(r){const t=Gr(),s=us(t);return Un(t,r),s}function or(){const r=Gr();if(r.__SENTRY__&&r.__SENTRY__.acs){const t=r.__SENTRY__.acs.getCurrentHub();if(t)return t}return So(r)}function So(r=Gr()){return(!Eo(r)||us(r).isOlderThan(An))&&Un(r,new Wn),us(r)}function Eo(r){return!!(r&&r.__SENTRY__&&r.__SENTRY__.hub)}function us(r){return Pn("hub",()=>new Wn,r)}function Un(r,t){if(!r)return!1;const s=r.__SENTRY__=r.__SENTRY__||{};return s.hub=t,!0}try{console.log("Sentry temporarily disabled to avoid 403 errors")}catch(r){console.warn("Sentry initialization failed:",r)}const Co=r=>{try{lo({id:r==null?void 0:r.id,username:r==null?void 0:r.username,email:r==null?void 0:r.email})}catch(t){console.warn("Failed to set Sentry user context:",t)}},zn=(r,t={})=>{try{co(s=>{Object.keys(t).forEach(n=>{s.setContext(n,t[n])}),ao(r)})}catch(s){console.warn("Failed to capture exception in Sentry:",s),console.error("Original error:",r)}},ko=(r,t="custom",s="info",n={})=>{try{oo({message:r,category:t,level:s,data:n,timestamp:Date.now()/1e3})}catch(i){console.warn("Failed to add Sentry breadcrumb:",i)}},Po=()=>{const[r,t]=d.useState(""),[s,n]=d.useState(""),[i,a]=d.useState(""),[o,u]=d.useState(!1),c=Ct(),h=()=>{const f={};return r.trim()?r.length<Xe.USERNAME_MIN_LENGTH?f.username=`Username must be at least ${Xe.USERNAME_MIN_LENGTH} characters`:r.length>Xe.USERNAME_MAX_LENGTH&&(f.username=`Username must be less than ${Xe.USERNAME_MAX_LENGTH} characters`):f.username="Username is required",s?s.length<Xe.PASSWORD_MIN_LENGTH&&(f.password=`Password must be at least ${Xe.PASSWORD_MIN_LENGTH} characters`):f.password="Password is required",f},g=f=>{var E,m,b;return((E=f.response)==null?void 0:E.status)===401?"Invalid username or password. Please check your credentials.":((m=f.response)==null?void 0:m.status)===429?"Too many login attempts. Please try again later.":((b=f.response)==null?void 0:b.status)>=500?"Server error. Please try again later.":f.code==="NETWORK_ERROR"||!f.response?"Network error. Please check your connection.":"Login failed. Please try again."},x=f=>j(q,null,function*(){f.preventDefault(),u(!0),a("");const E=h();if(Object.keys(E).length>0){a(Object.values(E)[0]),u(!1);return}try{{const b=yield zt.login({username:r,password:s}),{access:S,refresh:A}=b.data;st.setAccessToken(S),st.setRefreshToken(A),Ht.trackLogin("email"),Co({username:r}),c("/dashboard")}}catch(m){const b=g(m);a(b),Ht.trackError("login_error",b,"login_form"),zn(m,{tags:{component:"Login",action:"login_attempt"},extra:{username:r,error_message:b}}),{}.VITE_DEBUG==="true"&&console.error("Login error:",m)}finally{u(!1)}});return e.jsx(p,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(ct,{maxWidth:"sm",children:e.jsxs(ce,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Welcome back! Login to your account"})]}),i&&e.jsx(be,{severity:"error",sx:{mb:3,borderRadius:2},children:i}),e.jsxs(p,{component:"form",onSubmit:x,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(ot,{label:"Username",value:r,onChange:f=>t(f.target.value),required:!0,fullWidth:!0,autoComplete:"username",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(ot,{type:"password",label:"Password",value:s,onChange:f=>n(f.target.value),required:!0,fullWidth:!0,autoComplete:"current-password",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(U,{type:"submit",variant:"contained",fullWidth:!0,disabled:o,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"}},children:o?"Logging in...":"Login"})]}),e.jsxs(p,{sx:{mt:4,textAlign:"center"},children:[e.jsx(l,{variant:"body2",sx:{color:"#64748b",mb:1},children:e.jsx(at,{component:gr,to:"/forgot-password",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Forgot your password?"})}),e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Don't have an account?"," ",e.jsx(at,{component:gr,to:"/register",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Register here"})]})]})]})})})},Io=()=>{const[r,t]=d.useState({username:"",email:"",password:""}),[s,n]=d.useState(""),[i,a]=d.useState(!1),o=Ct(),u=()=>{const f={};return r.username.trim()?r.username.length<Xe.USERNAME_MIN_LENGTH?f.username=`Username must be at least ${Xe.USERNAME_MIN_LENGTH} characters`:r.username.length>Xe.USERNAME_MAX_LENGTH&&(f.username=`Username must be less than ${Xe.USERNAME_MAX_LENGTH} characters`):f.username="Username is required",r.email.trim()?Xe.EMAIL_REGEX.test(r.email)||(f.email="Please enter a valid email address"):f.email="Email is required",r.password?r.password.length<Xe.PASSWORD_MIN_LENGTH?f.password=`Password must be at least ${Xe.PASSWORD_MIN_LENGTH} characters`:r.password.length>Xe.PASSWORD_MAX_LENGTH&&(f.password=`Password must be less than ${Xe.PASSWORD_MAX_LENGTH} characters`):f.password="Password is required",f},c=f=>{var E,m,b,S,A,y;return((E=f.response)==null?void 0:E.status)===400?((m=f.response.data)==null?void 0:m.error)||"Invalid registration data. Please check your input.":((b=f.response)==null?void 0:b.status)===409?"Username or email already exists. Please choose different credentials.":((S=f.response)==null?void 0:S.status)===201?((A=f.response.data)==null?void 0:A.error)||"Registration successful but email verification failed.":((y=f.response)==null?void 0:y.status)>=500?"Server error. Please try again later.":f.code==="NETWORK_ERROR"||!f.response?"Network error. Please check your connection.":"Registration failed. Please try again."},h=f=>{var E;return(E=f.data)!=null&&E.message?f.data.message:"Registration successful! Please check your email to verify your account."},g=f=>{t(ve(C({},r),{[f.target.name]:f.target.value}))},x=f=>j(q,null,function*(){f.preventDefault(),a(!0),n("");const E=u();if(Object.keys(E).length>0){n(Object.values(E)[0]),a(!1);return}try{const m=yield zt.register(r),b=h(m);n(b),t({username:"",email:"",password:""}),Ht.trackRegistration("email"),setTimeout(()=>{o("/login")},4e3)}catch(m){const b=c(m);n(b),Ht.trackError("registration_error",b,"register_form"),{}.VITE_DEBUG==="true"&&console.error("Registration error:",m)}finally{a(!1)}});return e.jsx(p,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(ct,{maxWidth:"sm",children:e.jsxs(ce,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Join us! Create your account"})]}),s&&e.jsx(be,{severity:s.includes("successful")||s.includes("Registration successful")||s.includes("check your email")?"success":"error",sx:{mb:3,borderRadius:2},children:s}),e.jsxs(p,{component:"form",onSubmit:x,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(ot,{name:"username",label:"Username",value:r.username,onChange:g,required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(ot,{name:"email",label:"Email",type:"email",value:r.email,onChange:g,required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(ot,{name:"password",type:"password",label:"Password",value:r.password,onChange:g,required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(U,{type:"submit",variant:"contained",fullWidth:!0,disabled:i,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(25, 118, 210, 0.3)",color:"rgba(255, 255, 255, 0.7)"}},children:i?"Creating Account...":"Create Account"})]}),e.jsx(p,{sx:{mt:4,textAlign:"center"},children:e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Already have an account?"," ",e.jsx(at,{component:gr,to:"/login",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Login here"})]})})]})})})},Ro=()=>{const[r,t]=d.useState(""),[s,n]=d.useState(!1),[i,a]=d.useState(""),[o,u]=d.useState(""),c=Ct(),h=g=>j(q,null,function*(){var x,f,E;if(g.preventDefault(),n(!0),u(""),a(""),!r){u("Email is required"),n(!1);return}try{const m=yield zt.requestPasswordReset({email:r});a(m.data.message||"Password reset email sent successfully. Please check your email."),t(""),setTimeout(()=>{c("/login")},3e3)}catch(m){((x=m.response)==null?void 0:x.status)===200?(a("If an account with this email exists, a password reset email has been sent."),setTimeout(()=>{c("/login")},3e3)):u(((E=(f=m.response)==null?void 0:f.data)==null?void 0:E.error)||"Failed to send password reset email. Please try again.")}finally{n(!1)}});return e.jsx(p,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(ct,{maxWidth:"sm",children:e.jsxs(ce,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Reset your password"})]}),o&&e.jsx(be,{severity:"error",sx:{mb:3,borderRadius:2},children:o}),i&&e.jsx(be,{severity:"success",sx:{mb:3,borderRadius:2},children:i}),e.jsxs(p,{component:"form",onSubmit:h,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(ot,{name:"email",label:"Email Address",type:"email",value:r,onChange:g=>t(g.target.value),required:!0,fullWidth:!0,disabled:s,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(U,{type:"submit",variant:"contained",fullWidth:!0,disabled:s,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(25, 118, 210, 0.3)",color:"rgba(255, 255, 255, 0.7)"}},children:s?"Sending...":"Send Reset Email"})]}),e.jsx(p,{sx:{mt:4,textAlign:"center"},children:e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Remember your password?"," ",e.jsx(at,{component:gr,to:"/login",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Login here"})]})})]})})})},Do=()=>{const[r,t]=d.useState(""),[s,n]=d.useState(""),[i,a]=d.useState(!1),[o,u]=d.useState(""),[c,h]=d.useState(""),[g]=En(),x=Ct(),f=g.get("token");d.useEffect(()=>{f||h("Invalid reset link. Please request a new password reset.")},[f]);const E=m=>j(q,null,function*(){var b,S;if(m.preventDefault(),a(!0),h(""),u(""),!r){h("Password is required"),a(!1);return}if(r.length<8){h("Password must be at least 8 characters long"),a(!1);return}if(r!==s){h("Passwords do not match"),a(!1);return}if(!f){h("Invalid reset token"),a(!1);return}try{const A=yield zt.resetPassword({token:f,password:r});u(A.data.message||"Password reset successfully. You can now login with your new password."),t(""),n(""),setTimeout(()=>{x("/login")},3e3)}catch(A){h(((S=(b=A.response)==null?void 0:b.data)==null?void 0:S.error)||"Failed to reset password. Please try again.")}finally{a(!1)}});return e.jsx(p,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(ct,{maxWidth:"sm",children:e.jsxs(ce,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Set your new password"})]}),c&&e.jsx(be,{severity:"error",sx:{mb:3,borderRadius:2},children:c}),o&&e.jsx(be,{severity:"success",sx:{mb:3,borderRadius:2},children:o}),e.jsxs(p,{component:"form",onSubmit:E,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(ot,{name:"password",label:"New Password",type:"password",value:r,onChange:m=>t(m.target.value),required:!0,fullWidth:!0,disabled:i,variant:"outlined",helperText:"Password must be at least 8 characters long",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(ot,{name:"confirmPassword",label:"Confirm New Password",type:"password",value:s,onChange:m=>n(m.target.value),required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(U,{type:"submit",variant:"contained",fullWidth:!0,disabled:i||!f,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(25, 118, 210, 0.3)",color:"rgba(255, 255, 255, 0.7)"}},children:i?"Resetting...":"Reset Password"})]}),e.jsx(p,{sx:{mt:4,textAlign:"center"},children:e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Remember your password?"," ",e.jsx(at,{component:gr,to:"/login",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Login here"})]})})]})})})},To=(r,t={})=>{if(!r)return"N/A";const n=C(C({},{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),t);return new Date(r).toLocaleString(void 0,n)},Fo=(r,t=2)=>r===0?"0 GB":`${(r/(1024*1024*1024)).toFixed(t)} GB`,Qs=()=>{var b,S,A,y,$,w,P;const[r,t]=d.useState(null),[s,n]=d.useState(null),[i,a]=d.useState(!0),[o,u]=d.useState(null);d.useEffect(()=>{c()},[]);const c=()=>j(q,null,function*(){try{a(!0),u(null);const[W,D]=yield Promise.all([Lt.getCurrentPlan(),Lt.getUsageStats()]);t(W.data),n(D.data)}catch(W){console.error("Error loading overview data:",W),u("Failed to load overview data")}finally{a(!1)}}),h=()=>{if(!r||!r.plan)return{name:"Free Tier",storage:"15 GB",color:"info",icon:e.jsx(gt,{}),description:"Free storage allowance"};const W=r.plan,ie={"100gb":{storage:"100 GB",color:"primary"},"500gb":{storage:"500 GB",color:"warning"},"1tb":{storage:"1 TB",color:"error"}}[W.storage_tier]||{storage:"Unknown",color:"primary"};return{name:W.name.replace("_"," ").replace(/\b\w/g,ue=>ue.toUpperCase()),storage:ie.storage,color:ie.color,icon:e.jsx(St,{}),description:W.description}},g=()=>{var ue,fe,We,he;if(!s)return 0;const D=((he=(We=(fe=(ue=s.current_storage)==null?void 0:ue.bytes)!=null?fe:s.storage_used_bytes)!=null?We:s.total_storage_bytes)!=null?he:0)/wr(1024,3),ie=r&&r.plan?r.plan.storage_tier==="100gb"?100:r.plan.storage_tier==="500gb"?500:1024:15;return Math.min(D/ie*100,100)},x=()=>{const W=g();return W>=90?"error":W>=75?"warning":"primary"};if(i)return e.jsx(p,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(He,{sx:{width:"100%",maxWidth:400}})});if(o)return e.jsx(be,{severity:"error",action:e.jsx(U,{color:"inherit",size:"small",onClick:c,children:"Retry"}),children:o});const f=h(),E=g(),m=x();return e.jsxs(p,{sx:{maxWidth:1200,mx:"auto",p:4},children:[e.jsxs(p,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:[e.jsx(l,{variant:"h4",sx:{fontWeight:800,color:"text.primary"},children:"Storage Overview"}),e.jsx(Ye,{onClick:c,sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary","&:hover":{bgcolor:"grey.200",transform:"scale(1.05)"},transition:"all 0.3s ease"},children:e.jsx(Qt,{})})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,md:4,children:e.jsx(Le,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}},children:e.jsxs(Oe,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(p,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(p,{sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary",mr:2},children:f.icon}),e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:"Current Plan"})]}),e.jsx(pe,{label:f.name,color:f.color,size:"large",sx:{mb:3,fontWeight:600,fontSize:"0.9rem",height:32}}),e.jsxs(p,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(l,{variant:"h3",sx:{fontWeight:800,color:"text.primary",mb:2},children:f.storage}),e.jsx(l,{variant:"body1",sx:{color:"text.secondary",mb:3,lineHeight:1.6},children:f.description})]}),r&&e.jsx(p,{sx:{p:2,bgcolor:"grey.50",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(l,{variant:"caption",sx:{color:"text.secondary",fontWeight:500},children:["Expires: ",To(r.expires_at)]})})]})})}),e.jsx(F,{item:!0,xs:12,md:4,children:e.jsx(Le,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}},children:e.jsxs(Oe,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(p,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(p,{sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary",mr:2},children:e.jsx(rt,{})}),e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:"Storage Usage"})]}),e.jsxs(p,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(l,{variant:"h3",sx:{fontWeight:800,color:"text.primary",mb:2},children:Fo((y=(A=(S=(b=s==null?void 0:s.current_storage)==null?void 0:b.bytes)!=null?S:s==null?void 0:s.storage_used_bytes)!=null?A:s==null?void 0:s.total_storage_bytes)!=null?y:0)}),e.jsxs(p,{sx:{mb:3},children:[e.jsx(He,{variant:"determinate",value:E,color:m,sx:{height:10,borderRadius:5,mb:2,bgcolor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:5}}}),e.jsxs(l,{variant:"body1",sx:{color:"text.secondary",fontWeight:500},children:[E.toFixed(1),"% of ",f.storage," used"]})]})]}),s&&e.jsx(p,{sx:{p:2,bgcolor:"grey.50",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(l,{variant:"caption",sx:{color:"text.secondary",fontWeight:500},children:[((P=(w=($=s.current_storage)==null?void 0:$.gb)!=null?w:s.storage_used_gb)!=null?P:0).toFixed(1)," GB stored"]})})]})})}),e.jsx(F,{item:!0,xs:12,md:4,children:e.jsx(Le,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}},children:e.jsxs(Oe,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(p,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(p,{sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary",mr:2},children:e.jsx(Ut,{})}),e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:"Account Status"})]}),e.jsx(p,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:e.jsxs(p,{sx:{mb:3},children:[e.jsxs(p,{display:"flex",alignItems:"center",mb:2,children:[e.jsx($e,{sx:{color:"text.secondary",mr:1}}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:"Storage Active"})]}),e.jsxs(p,{display:"flex",alignItems:"center",mb:2,children:[e.jsx($e,{sx:{color:"text.secondary",mr:1}}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:"Encryption Enabled"})]}),e.jsxs(p,{display:"flex",alignItems:"center",children:[e.jsx($e,{sx:{color:"text.secondary",mr:1}}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:"Backup Secure"})]})]})}),e.jsx(p,{sx:{p:2,bgcolor:"grey.50",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:e.jsx(l,{variant:"caption",sx:{color:"text.secondary",fontWeight:600},children:"✓ All systems operational"})})]})})}),e.jsx(F,{item:!0,xs:12,children:e.jsxs(ce,{sx:{p:4,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)"},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,mb:3,color:"text.primary"},children:"Quick Actions"}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(U,{variant:"contained",fullWidth:!0,startIcon:e.jsx(rt,{}),onClick:()=>window.location.href="/upload",sx:{py:2,borderRadius:2,fontSize:"1rem",fontWeight:600,boxShadow:"0 4px 12px rgba(0,0,0,0.15)","&:hover":{boxShadow:"0 6px 16px rgba(0,0,0,0.2)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"Upload Files"})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(U,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(St,{}),onClick:()=>{window.location.href="/dashboard#hibernate"},sx:{py:2,borderRadius:2,fontSize:"1rem",fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"Manage Files"})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(U,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(gt,{}),onClick:()=>window.location.href="/plans",sx:{py:2,borderRadius:2,fontSize:"1rem",fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"View Plans"})})]})]})}),!r&&E>50&&e.jsx(F,{item:!0,xs:12,children:e.jsx(be,{severity:"warning",sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)"},action:e.jsx(U,{color:"inherit",size:"small",onClick:()=>window.location.href="/plans",sx:{fontWeight:600,borderRadius:2,px:2,py:1},children:"View Plans"}),children:e.jsxs(l,{variant:"body1",sx:{fontWeight:500},children:["You're using ",E.toFixed(1),"% of your free storage. Consider upgrading to a hibernation plan for more space and features."]})})})]})]})};class Ao{constructor(){this.razorpay=null}initializeRazorpay(t){if(typeof window!="undefined"){if(!t)throw new Error("Razorpay key ID is required");if(typeof window.Razorpay=="undefined")throw new Error("Razorpay script not loaded. Please refresh the page and try again.");const s={}.VITE_ENVIRONMENT==="production",n=s?"production":"development";this.razorpay=new window.Razorpay(C({key:t,currency:"INR",name:"Glacier Archival",description:"Hibernation Plan Subscription",image:"/logo.png",theme:{color:"#6b7280"}},s&&{modal:{ondismiss:()=>{console.log("Payment modal dismissed")}}})),console.log(`Razorpay initialized in ${n} mode with key: ${t.substring(0,10)}...`)}else throw new Error("Razorpay can only be initialized in browser environment")}createPaymentOrder(t,s){return j(this,null,function*(){var n,i,a,o;try{return(yield Ir.createOrder(t,s)).data}catch(u){throw console.error("Error creating payment order:",u),((n=u.response)==null?void 0:n.status)===500?new Error("Payment system is temporarily unavailable. Please contact support at support@datahibernate.in"):((i=u.response)==null?void 0:i.status)===400?new Error("Invalid payment request. Please refresh the page and try again."):u.response?new Error(((o=(a=u.response)==null?void 0:a.data)==null?void 0:o.error)||"Payment system is currently unavailable. Please contact support."):new Error("Network error. Please check your internet connection and try again.")}})}processPayment(t){return j(this,null,function*(){return new Promise((s,n)=>{if(!this.razorpay){n(new Error("Payment system is not initialized. Please refresh the page and try again."));return}const i={order_id:t.razorpay_order_id,amount:t.amount,currency:t.currency,name:t.plan.name,description:`${t.plan.storage_tier} - ${t.plan.name}`,prefill:{name:"",email:""},notes:{plan_id:t.plan.id,payment_id:t.payment_id},handler:a=>j(this,null,function*(){try{const o=yield Ir.verifyPayment(t.payment_id,a.razorpay_order_id,a.razorpay_payment_id,a.razorpay_signature);s({success:!0,paymentData:o.data,razorpayResponse:a})}catch(o){console.error("Payment verification failed:",o),n(new Error("Payment verification failed. Please contact support at support@datahibernate.in for assistance."))}}),modal:{ondismiss:()=>{n(new Error("Payment was cancelled. You can try again when ready."))}}};this.razorpay.open(i)})})}getPaymentStatus(t){return j(this,null,function*(){var s,n;try{return(yield Ir.getPaymentStatus(t)).data}catch(i){throw console.error("Error getting payment status:",i),new Error(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to get payment status")}})}formatAmount(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}getPaymentMethods(){return[{id:"card",name:"Credit/Debit Card",icon:"💳"},{id:"upi",name:"UPI",icon:"📱"},{id:"netbanking",name:"Net Banking",icon:"🏦"},{id:"wallet",name:"Wallet",icon:"👛"}]}}const es=({onPlanSelect:r,currentPlan:t,onClose:s})=>{var Ze,M,Be;Et();const[n,i]=d.useState({}),[a,o]=d.useState(!0),[u,c]=d.useState(null),[h,g]=d.useState(null),[x,f]=d.useState(!1),[E]=d.useState(()=>new Ao),[m,b]=d.useState(!1),[S,A]=d.useState(null);d.useState(!1);const[y,$]=d.useState(0);d.useEffect(()=>{w()},[]);const w=()=>j(q,null,function*(){try{o(!0);const T=yield Lt.getPlansGroupedByTier();i(T.data.plans||T.data)}catch(T){c("Failed to load hibernation plans"),console.error("Error loading plans:",T)}finally{o(!1)}}),P=T=>j(q,null,function*(){try{b(!0),A(null);const se=(yield Lt.getPlansGroupedByTier()).data.razorpay_key_id,nt=window.location.hostname==="localhost";if(!se)throw new Error("Payment system is currently unavailable. Please contact support at support@datahibernate.in");if(!nt&&se==="rzp_test_1234567890")throw new Error("Payment system is not properly configured. Please contact support at support@datahibernate.in");E.initializeRazorpay(se);const Me=yield E.createPaymentOrder(T.id,parseFloat(T.annual_price_inr)),qt=yield E.processPayment(Me);qt.success&&(r(qt.paymentData.plan),f(!1),alert("Payment successful! Your hibernation plan has been activated."))}catch(ye){console.error("Payment error:",ye);let se="Payment is currently unavailable. Please try again later or contact support.";ye.message.includes("Razorpay")?se="Payment system is temporarily unavailable. Please contact support at support@datahibernate.in for assistance.":ye.message.includes("network")||ye.message.includes("Network")?se="Network error occurred. Please check your internet connection and try again.":ye.message.includes("cancelled")?se="Payment was cancelled. You can try again when ready.":ye.message.includes("verification")&&(se="Payment verification failed. Please contact support at support@datahibernate.in."),A(se)}finally{b(!1)}}),W=T=>{switch(T){case"deep_freeze":return e.jsx(St,{sx:{fontSize:40,color:"#4f46e5"}});case"flexible_archive":return e.jsx(Dr,{sx:{fontSize:40,color:"#2563eb"}});default:return e.jsx(gt,{sx:{fontSize:40,color:"#4f46e5"}})}},D=T=>{switch(T){case"deep_freeze":return"#4f46e5";case"flexible_archive":return"#2563eb";default:return"#4f46e5"}},ie=T=>{switch(T){case"deep_freeze":return"Deep Hibernate";case"flexible_archive":return"Smart Hibernate";default:return"Hibernation Plan"}},ue=T=>{const ye={deep_freeze:{title:"Deep Hibernate",subtitle:"🌙 Long-term archival storage",description:"Perfect for memories, backups, and data you rarely need",icon:e.jsx(St,{}),color:"#4f46e5",gradient:"linear-gradient(135deg, #4f46e5 0%, #3730a3 100%)",lightColor:"#e0e7ff",darkColor:"#312e81",bgColor:"#f8fafc",textColor:"#1e293b"},flexible_archive:{title:"Smart Hibernate",subtitle:"🌤️ Flexible retrieval storage",description:"Balance between cost and accessibility for regular backups",icon:e.jsx(Dr,{}),color:"#2563eb",gradient:"linear-gradient(135deg, #2563eb 0%, #1e40af 100%)",lightColor:"#dbeafe",darkColor:"#1e3a8a",bgColor:"#f8fafc",textColor:"#1e293b"}};return ye[T]||ye.deep_freeze},fe=T=>T===0?"Instant":T<1?"Minutes":`${T} hours`,We=T=>{if(T==null||T==="NaN"||isNaN(T))return"0 GB";const ye=T/wr(1024,3);return ye>=1e3?`${(ye/1024).toFixed(1)} TB`:`${ye.toFixed(0)} GB`};if(a)return e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(Zt,{})});if(u)return e.jsx(be,{severity:"error",sx:{mb:2},children:u});const he=["deep_freeze","flexible_archive"],it=he[y],Ce=n[it]||[],z=ue(it);return e.jsxs(p,{sx:{p:4,maxWidth:1200,mx:"auto"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:6},children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Choose Your Hibernation Plan"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",maxWidth:700,mx:"auto",lineHeight:1.6},children:"Select the perfect storage solution for your data needs. Each plan offers different balance between cost, storage capacity, and retrieval speed."})]}),e.jsx(ce,{sx:{mb:6,borderRadius:3,overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:e.jsx(ps,{value:y,onChange:(T,ye)=>$(ye),variant:"fullWidth",sx:{"& .MuiTab-root":{py:3,px:4,fontSize:"1.1rem",fontWeight:700,textTransform:"none",transition:"all 0.3s ease"},"& .MuiTabs-indicator":{height:4,borderRadius:"2px 2px 0 0"}},children:he.map((T,ye)=>{const se=ue(T),nt=n[T]||[],Me=t&&nt.some(qt=>{var Vt;return qt.id===((Vt=t.plan)==null?void 0:Vt.id)});return e.jsx(Kt,{label:e.jsxs(re,{direction:"row",alignItems:"center",spacing:1,children:[se.icon,e.jsxs(p,{children:[e.jsx(l,{variant:"subtitle1",sx:{fontWeight:600},children:se.title}),e.jsx(l,{variant:"caption",sx:{color:"text.secondary"},children:se.subtitle})]}),Me&&e.jsx(pe,{label:"Active",size:"small",color:"success",sx:{ml:1}})]}),sx:{background:y===ye?se.bgColor:"transparent",color:y===ye?se.textColor:"text.primary",border:y===ye?`2px solid ${se.color}`:"2px solid transparent","&:hover":{background:y===ye?se.bgColor:v(se.color,.05),border:`2px solid ${v(se.color,.3)}`}}},T)})})}),e.jsx(ce,{sx:{p:4,mb:6,background:z.bgColor,color:z.textColor,borderRadius:3,boxShadow:`0 8px 24px ${v(z.color,.1)}`,border:`1px solid ${v(z.color,.2)}`},children:e.jsxs(re,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(p,{sx:{p:3,borderRadius:"50%",bgcolor:z.lightColor,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${z.color}`},children:Wr.cloneElement(z.icon,{sx:{fontSize:48,color:z.color}})}),e.jsxs(p,{children:[e.jsx(l,{variant:"h4",sx:{fontWeight:800,mb:2,color:z.textColor},children:z.title}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",lineHeight:1.5},children:z.description})]})]})}),e.jsx(F,{container:!0,spacing:4,children:Ce.map((T,ye)=>{var Me;const se=((Me=t==null?void 0:t.plan)==null?void 0:Me.id)===T.id,nt=ye===1;return e.jsx(F,{item:!0,xs:12,md:4,children:e.jsxs(Le,{sx:C(C({height:"100%",position:"relative",border:`2px solid ${v(z.color,.15)}`,borderRadius:4,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)","&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:`0 20px 60px ${v(z.color,.25)}`,borderColor:z.color}},se&&{borderColor:z.color,background:`linear-gradient(145deg, ${v(z.color,.05)} 0%, ${v(z.color,.02)} 100%)`,boxShadow:`0 8px 32px ${v(z.color,.15)}`}),nt&&!se&&{borderColor:z.color,boxShadow:`0 8px 32px ${v(z.color,.2)}`,background:`linear-gradient(145deg, ${v(z.color,.02)} 0%, #ffffff 100%)`}),children:[nt&&!se&&e.jsx(pe,{label:"★ Most Popular",sx:{position:"absolute",top:20,right:20,zIndex:1,bgcolor:z.color,color:"white",fontWeight:700,fontSize:"0.875rem",borderRadius:2,boxShadow:`0 4px 12px ${v(z.color,.3)}`}}),se&&e.jsx(pe,{label:"✓ Current Plan",sx:{position:"absolute",top:20,right:20,zIndex:1,bgcolor:"#10b981",color:"white",fontWeight:700,fontSize:"0.875rem",borderRadius:2,boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"}}),e.jsx(Oe,{sx:{p:4},children:e.jsxs(re,{spacing:4,children:[e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h2",sx:{fontWeight:800,color:z.color,mb:2},children:We(T.storage_size_bytes)}),e.jsx(l,{variant:"h6",color:"text.secondary",sx:{fontWeight:600},children:"Storage Capacity"})]}),e.jsxs(p,{sx:{textAlign:"center",p:3,bgcolor:z.lightColor,borderRadius:3,border:`1px solid ${v(z.color,.2)}`},children:[e.jsxs(l,{variant:"h3",sx:{fontWeight:800,mb:1,color:z.textColor},children:["₹",T.annual_price_inr]}),e.jsxs(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:["per year (₹",T.user_cost_inr,"/month)"]})]}),e.jsx(U,{fullWidth:!0,variant:se?"outlined":"contained",onClick:()=>P(T),disabled:se,sx:{bgcolor:se?"transparent":z.color,color:se?z.textColor:"white",borderColor:z.color,borderRadius:3,py:3,fontSize:"1.1rem",fontWeight:700,textTransform:"none",boxShadow:se?"none":`0 4px 16px ${v(z.color,.2)}`,transition:"all 0.3s ease","&:hover":{bgcolor:se?z.lightColor:z.darkColor,transform:se?"none":"translateY(-2px)",boxShadow:se?"none":`0 8px 24px ${v(z.color,.3)}`},"&:disabled":{bgcolor:"transparent",color:z.color,borderColor:z.color}},children:se?"✓ Current Plan":"Select Plan"})]})})]})},T.id)})}),e.jsxs(ce,{sx:{p:4,mt:6,background:z.bgColor,borderRadius:3,boxShadow:`0 4px 16px ${v(z.color,.08)}`,border:`1px solid ${v(z.color,.15)}`},children:[e.jsxs(l,{variant:"h5",sx:{fontWeight:700,mb:4,color:z.textColor,textAlign:"center"},children:[z.title," Features"]}),e.jsxs(F,{container:!0,spacing:4,children:[e.jsx(F,{item:!0,xs:12,md:4,children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2,p:3,bgcolor:v(z.color,.05),borderRadius:3,height:"100%"},children:[e.jsx(p,{sx:{p:2,bgcolor:z.lightColor,borderRadius:2},children:e.jsx(ts,{sx:{fontSize:32,color:z.color}})}),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,mb:1,color:"text.primary"},children:"Restore Time"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:fe(((Ze=Ce[0])==null?void 0:Ze.restore_time_hours)||12)})]})]})}),e.jsx(F,{item:!0,xs:12,md:4,children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2,p:3,bgcolor:v(z.color,.05),borderRadius:3,height:"100%"},children:[e.jsx(p,{sx:{p:2,bgcolor:z.lightColor,borderRadius:2},children:e.jsx(Ut,{sx:{fontSize:32,color:z.color}})}),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,mb:1,color:"text.primary"},children:"Retrieval Allowance"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:((M=Ce[0])==null?void 0:M.free_retrieval_gb)>0?`${Ce[0].free_retrieval_gb} GB free every ${Ce[0].retrieval_period_months} months`:"Unlimited retrievals"})]})]})}),e.jsx(F,{item:!0,xs:12,md:4,children:e.jsx(p,{sx:{p:3,bgcolor:v(z.color,.08),borderRadius:3,border:`1px solid ${v(z.color,.2)}`,textAlign:"center",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(l,{variant:"body1",sx:{fontStyle:"italic",fontWeight:500,color:z.textColor},children:['"',((Be=Ce[0])==null?void 0:Be.user_message)||"Your data sleeps safely — wake it only when needed.",'"']})})})]})]}),e.jsxs(jt,{open:x,onClose:()=>f(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(vt,{sx:{textAlign:"center",pb:1},children:e.jsx(l,{variant:"h5",sx:{fontWeight:700},children:"Confirm Subscription"})}),e.jsx(wt,{children:h&&e.jsxs(re,{spacing:3,children:[e.jsx(ce,{sx:{p:3,background:ue(h.name).gradient,color:"white",borderRadius:2},children:e.jsxs(re,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(p,{sx:{p:2,borderRadius:"50%",bgcolor:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:W(h.name)}),e.jsxs(p,{children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:700},children:[ie(h.name)," - ",We(h.storage_size_bytes)]}),e.jsx(l,{variant:"body2",sx:{opacity:.9},children:h.description})]})]})}),S&&e.jsxs(be,{severity:"error",sx:{mb:2,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)"},action:e.jsx(U,{color:"inherit",size:"small",onClick:()=>A(null),sx:{fontWeight:600,borderRadius:2,px:2,py:1},children:"Dismiss"}),children:[e.jsx(l,{variant:"body1",sx:{fontWeight:500},children:S}),S.includes("support@datahibernate.in")&&e.jsx(l,{variant:"body2",sx:{mt:1,opacity:.8},children:"We apologize for the inconvenience. Our team is working to resolve this issue."})]}),e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsxs(l,{variant:"h4",sx:{fontWeight:700,color:D(h.name)},children:["₹",h.annual_price_inr]}),e.jsxs(l,{variant:"body1",color:"text.secondary",children:["per year (₹",h.user_cost_inr,"/month)"]})]}),e.jsxs(re,{spacing:2,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ts,{sx:{fontSize:20,color:D(h.name)}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Restore Time:"})," ",fe(h.restore_time_hours)]})]}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ut,{sx:{fontSize:20,color:D(h.name)}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Retrieval:"})," ",h.free_retrieval_gb>0?`${h.free_retrieval_gb} GB free every ${h.retrieval_period_months} months`:"Unlimited retrievals"]})]})]}),e.jsx(be,{severity:"info",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Subscription Terms:"})," This plan will be active for 1 year from the date of purchase. You can cancel anytime, but no refunds will be provided for unused time."]})})]})}),e.jsxs(tr,{sx:{p:3,pt:1},children:[e.jsx(U,{onClick:()=>f(!1),variant:"outlined",fullWidth:!0,sx:{mr:1},children:"Cancel"}),e.jsx(U,{onClick:()=>P(h),variant:"contained",disabled:m,startIcon:m?e.jsx(Zt,{size:20}):e.jsx($e,{}),fullWidth:!0,sx:{ml:1},children:m?"Processing Payment...":"Pay & Subscribe"})]})]})]})},Ln=()=>{const r=Et(),[t,s]=d.useState(null),[n,i]=d.useState(null),[a,o]=d.useState(!0),[u,c]=d.useState(null),[h,g]=d.useState(!1),[x,f]=d.useState(!1);d.useEffect(()=>{E()},[]);const E=()=>j(q,null,function*(){try{o(!0),c(null);const[D,ie]=yield Promise.allSettled([Lt.getCurrentPlan().catch(ue=>{var fe;if(((fe=ue.response)==null?void 0:fe.status)===404)return{data:null};throw ue}),Lt.getUsageStats()]);if(D.status==="fulfilled"){const ue=D.value.data;ue&&ue.is_free_tier?s(null):s(ue)}else D.status==="rejected"&&(console.error("Error loading current plan:",D.reason),s(null));ie.status==="fulfilled"?i(ie.value.data):ie.status==="rejected"&&(console.error("Error loading usage stats:",ie.reason),i(null))}catch(D){console.error("Error loading plan data:",D),c("Failed to load plan information")}finally{o(!1)}}),m=()=>j(q,null,function*(){f(!0),yield E(),f(!1)}),b=D=>{s({plan:D}),g(!1),E()},S=D=>{switch(D){case"deep_freeze":return e.jsx(St,{sx:{fontSize:32,color:"#94a3b8"}});case"flexible_archive":return e.jsx(Dr,{sx:{fontSize:32,color:"#60a5fa"}});case"instant_archive":return e.jsx($r,{sx:{fontSize:32,color:"#34d399"}});default:return e.jsx(gt,{sx:{fontSize:32}})}},A=D=>{switch(D){case"deep_freeze":return"#94a3b8";case"flexible_archive":return"#60a5fa";case"instant_archive":return"#34d399";default:return r.palette.primary.main}},y=D=>{switch(D){case"deep_freeze":return"🌙 Hibernate (Deep Freeze Tier)";case"flexible_archive":return"🌤️ Smart Hibernate (Flexible Archive Tier)";case"instant_archive":return"⚡ Quick Hibernate (Instant Archive Tier)";default:return"Hibernation Plan"}},$=D=>{const ie=D/1073741824;return ie>=1e3?`${(ie/1024).toFixed(1)} TB`:`${ie.toFixed(1)} GB`},w=D=>{const ie=D/1073741824;return ie>=1e3?`${(ie/1024).toFixed(2)} TB`:`${ie.toFixed(2)} GB`};if(a)return e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(Zt,{})});if(u)return e.jsx(be,{severity:"error",sx:{mb:2},children:u});if(!t)return e.jsxs(p,{sx:{p:3},children:[e.jsx(l,{variant:"h4",sx:{mb:3,textAlign:"center",fontWeight:700},children:"Storage Dashboard"}),(n==null?void 0:n.is_free_tier)&&e.jsxs(ce,{elevation:3,sx:{p:4,mb:4,borderRadius:2,border:"2px solid #6b7280",bgcolor:"rgba(107, 114, 128, 0.05)"},children:[e.jsxs(re,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsxs(re,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(gt,{sx:{fontSize:40,color:"#6b7280"}}),e.jsxs(p,{children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,color:"#6b7280"},children:"Free Tier - 15GB"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Upload and manage files up to 15GB for free"})]})]}),e.jsx(pe,{label:"Free Tier",color:"primary",icon:e.jsx($e,{}),sx:{fontSize:"1rem",height:32,px:1}})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Storage Usage"}),e.jsxs(re,{spacing:1,children:[e.jsxs(l,{variant:"body1",children:["Used: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_gb)||0," GB"]})," / ",(n==null?void 0:n.storage_limit_gb)||15," GB"]}),e.jsxs(l,{variant:"body1",children:["Percentage: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_percentage)||0,"%"]})]}),e.jsxs(p,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Storage Usage"}),e.jsx(He,{variant:"determinate",value:(n==null?void 0:n.storage_used_percentage)||0,sx:{height:8,borderRadius:4,bgcolor:"rgba(107, 114, 128, 0.1)","& .MuiLinearProgress-bar":{bgcolor:"#6b7280"}}})]})]})]}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Upgrade Options"}),e.jsxs(re,{spacing:1,children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Up to 1TB storage capacity"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Advanced hibernation features"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Priority support"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Cost-effective archival storage"})]})]})]}),e.jsx(p,{mt:4,display:"flex",justifyContent:"center",children:e.jsx(U,{variant:"contained",size:"large",onClick:()=>g(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5,bgcolor:"#6b7280","&:hover":{bgcolor:"#4b5563"}},children:"Upgrade to Hibernation Plan"})})]}),!(n!=null&&n.is_free_tier)&&e.jsx(be,{severity:"info",sx:{mb:3},children:"You don't have an active hibernation plan. Choose a plan to start storing your data efficiently."}),e.jsx(p,{sx:{textAlign:"center",mb:4},children:e.jsx(U,{variant:"contained",size:"large",onClick:()=>g(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5},children:"View Available Plans"})}),e.jsxs(jt,{open:h,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(vt,{children:"Choose Your Hibernation Plan"}),e.jsx(wt,{children:e.jsx(es,{onPlanSelect:b,onClose:()=>g(!1)})})]})]});if(a)return e.jsx(p,{sx:{p:3,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsx(Zt,{size:60})});if(!t)return e.jsxs(p,{sx:{p:3},children:[e.jsx(l,{variant:"h4",sx:{mb:3,textAlign:"center",fontWeight:700},children:"Storage Dashboard"}),(n==null?void 0:n.is_free_tier)&&e.jsxs(ce,{elevation:3,sx:{p:4,mb:4,borderRadius:2,border:"2px solid #6b7280",bgcolor:"rgba(107, 114, 128, 0.05)"},children:[e.jsxs(re,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsxs(re,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(gt,{sx:{fontSize:40,color:"#6b7280"}}),e.jsxs(p,{children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,color:"#6b7280"},children:"Free Tier - 15GB"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Upload and manage files up to 15GB for free"})]})]}),e.jsx(pe,{label:"Free Tier",color:"primary",icon:e.jsx($e,{}),sx:{fontSize:"1rem",height:32,px:1}})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Storage Usage"}),e.jsxs(re,{spacing:1,children:[e.jsxs(l,{variant:"body1",children:["Used: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_gb)||0," GB"]})," / ",(n==null?void 0:n.storage_limit_gb)||15," GB"]}),e.jsxs(l,{variant:"body1",children:["Percentage: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_percentage)||0,"%"]})]}),e.jsxs(p,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Storage Usage"}),e.jsx(He,{variant:"determinate",value:(n==null?void 0:n.storage_used_percentage)||0,sx:{height:8,borderRadius:4,bgcolor:"rgba(107, 114, 128, 0.1)","& .MuiLinearProgress-bar":{bgcolor:"#6b7280"}}})]})]})]}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Upgrade Options"}),e.jsxs(re,{spacing:1,children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Up to 1TB storage capacity"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Advanced hibernation features"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Priority support"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Cost-effective archival storage"})]})]})]}),e.jsx(p,{mt:4,display:"flex",justifyContent:"center",children:e.jsx(U,{variant:"contained",size:"large",onClick:()=>g(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5,bgcolor:"#6b7280","&:hover":{bgcolor:"#4b5563"}},children:"Upgrade to Hibernation Plan"})})]}),!(n!=null&&n.is_free_tier)&&e.jsx(be,{severity:"info",sx:{mb:3},children:"You don't have an active hibernation plan. Choose a plan to start storing your data efficiently."}),e.jsx(p,{sx:{textAlign:"center",mb:4},children:e.jsx(U,{variant:"contained",size:"large",onClick:()=>g(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5},children:"View Available Plans"})}),e.jsxs(jt,{open:h,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(vt,{children:e.jsx(l,{variant:"h5",sx:{fontWeight:700},children:"Choose Your Hibernation Plan"})}),e.jsx(wt,{children:e.jsx(es,{onPlanSelect:b,currentPlan:t,onClose:()=>g(!1)})})]})]});const P=t.plan,W=A(P.name);return e.jsxs(p,{sx:{p:3},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:700},children:"Hibernation Plan Dashboard"}),e.jsx(U,{startIcon:e.jsx(Qt,{}),onClick:m,disabled:x,sx:{textTransform:"none"},children:x?"Refreshing...":"Refresh"})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsx(Oe,{sx:{p:3},children:e.jsxs(re,{spacing:2,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(p,{sx:{p:1.5,borderRadius:"50%",bgcolor:v(W,.1)},children:S(P.name)}),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600},children:y(P.name)}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[$(P.storage_size_bytes)," Storage"]})]})]}),e.jsx(er,{}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Annual Price"}),e.jsxs(l,{variant:"h6",sx:{fontWeight:600},children:["₹",P.annual_price_inr]})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Monthly Cost"}),e.jsxs(l,{variant:"body1",children:["₹",P.user_cost_inr]})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Restore Time"}),e.jsx(pe,{label:P.restore_time_hours===0?"Instant":`${P.restore_time_hours} hours`,size:"small",sx:{bgcolor:v(W,.1),color:W}})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Free Retrieval"}),e.jsx(l,{variant:"body2",children:P.free_retrieval_gb>0?`${P.free_retrieval_gb} GB/${P.retrieval_period_months===1?"month":`${P.retrieval_period_months} months`}`:"Unlimited"})]}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(on,{}),onClick:()=>g(!0),sx:{textTransform:"none",borderColor:W,color:W},children:"Change Plan"})]})})})}),n&&e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{p:3},children:[e.jsx(l,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Usage Statistics"}),e.jsxs(re,{spacing:3,children:[e.jsxs(p,{children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Storage Used"}),e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:[w(n.storage_used_bytes)," / ",w(n.storage_limit_bytes)]})]}),e.jsx(He,{variant:"determinate",value:n.storage_used_percentage,sx:{height:8,borderRadius:4,bgcolor:v(W,.1),"& .MuiLinearProgress-bar":{bgcolor:W,borderRadius:4}}}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[n.storage_used_percentage.toFixed(1),"% used"]})]}),P.free_retrieval_gb>0&&e.jsxs(p,{children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Retrieval Used"}),e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:[n.retrieval_used_gb.toFixed(1)," / ",n.retrieval_limit_gb," GB"]})]}),e.jsx(He,{variant:"determinate",value:n.retrieval_used_gb/n.retrieval_limit_gb*100,sx:{height:8,borderRadius:4,bgcolor:v("#f59e0b",.1),"& .MuiLinearProgress-bar":{bgcolor:"#f59e0b",borderRadius:4}}}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[n.retrieval_remaining_gb.toFixed(1)," GB remaining"]})]}),e.jsxs(p,{sx:{p:2,bgcolor:v("#f59e0b",.05),borderRadius:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Plan Expires"}),e.jsx(l,{variant:"body1",sx:{fontWeight:600},children:new Date(n.plan_expires_at).toLocaleDateString()}),n.is_expired&&e.jsx(be,{severity:"warning",sx:{mt:1},children:"Plan has expired"})]})]})]})})})]}),e.jsxs(jt,{open:h,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(vt,{children:"Change Hibernation Plan"}),e.jsx(wt,{children:e.jsx(es,{currentPlan:t,onPlanSelect:b,onClose:()=>g(!1)})})]})]})},Wo="modulepreload",Uo=function(r){return"/"+r},en={},hs=function(t,s,n){if(!s||s.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=Uo(a),a in en)return;en[a]=!0;const o=a.endsWith(".css"),u=o?'[rel="stylesheet"]':"";if(!!n)for(let g=i.length-1;g>=0;g--){const x=i[g];if(x.href===a&&(!o||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${u}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":Wo,o||(h.as="script",h.crossOrigin=""),h.href=a,document.head.appendChild(h),o)return new Promise((g,x)=>{h.addEventListener("load",g),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())},Rt={UPLOADED:"uploaded",UPLOADING:"uploading",ARCHIVING:"archiving",ARCHIVED:"archived",RESTORING:"restoring",RESTORED:"restored",FAILED:"failed"},tn={[Rt.UPLOADING]:{name:"Uploading",emoji:"📤",color:"#3B82F6",description:"File is being uploaded",actionText:"Cancel",actionIcon:"Stop",canArchive:!1,canRestore:!1,canDownload:!1,canDelete:!1,isProcessing:!0,label:"Uploading"},[Rt.UPLOADED]:{name:"Awake",emoji:"☀️",color:"#3B82F6",description:"File is active and accessible",actionText:"Archive",actionIcon:"AcUnit",canArchive:!0,canRestore:!1,canDownload:!0,canDelete:!0,icon:"CheckCircle",label:"Active"},[Rt.ARCHIVING]:{name:"Falling Asleep",emoji:"🌙",color:"#FF9800",description:"File is being archived to cold storage",actionText:"Cancel",actionIcon:"Stop",canArchive:!1,canRestore:!1,canDownload:!1,canDelete:!1,isProcessing:!0,icon:"Schedule",label:"Archiving"},[Rt.ARCHIVED]:{name:"Hibernating",emoji:"❄️",color:"#2196F3",description:"File is in cold storage (cheaper)",actionText:"Restore",actionIcon:"CloudUpload",canArchive:!1,canRestore:!0,canDownload:!1,canDelete:!0,icon:"AcUnit",label:"Hibernated"},[Rt.RESTORING]:{name:"Waking Up",emoji:"🌅",color:"#9C27B0",description:"File is being restored from cold storage",actionText:"Cancel",actionIcon:"Stop",canArchive:!1,canRestore:!1,canDownload:!1,canDelete:!1,isProcessing:!0,icon:"WbSunny",label:"Restoring"},[Rt.RESTORED]:{name:"Awake",emoji:"☀️",color:"#3B82F6",description:"File is restored and accessible",actionText:"Archive",actionIcon:"AcUnit",canArchive:!0,canRestore:!1,canDownload:!0,canDelete:!0,icon:"CheckCircle",label:"Active"},[Rt.FAILED]:{name:"Error",emoji:"⚠️",color:"#F44336",description:"Operation failed",actionText:"Retry",actionIcon:"Refresh",canArchive:!0,canRestore:!0,canDownload:!1,canDelete:!0,isError:!0,icon:"Error",label:"Failed"}},cr=r=>tn[r]||tn[Rt.UPLOADED];class zo{constructor(){this.algorithm="AES-GCM",this.keyLength=256,this.ivLength=12,this.pbkdf2Iterations=1e5,this.saltLength=32}deriveKey(t,s){return j(this,null,function*(){const i=new TextEncoder().encode(t),a=yield crypto.subtle.importKey("raw",i,"PBKDF2",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"PBKDF2",salt:s,iterations:this.pbkdf2Iterations,hash:"SHA-256"},a,{name:this.algorithm,length:this.keyLength},!1,["encrypt","decrypt"])})}generateSalt(){return crypto.getRandomValues(new Uint8Array(this.saltLength))}generateIV(){return crypto.getRandomValues(new Uint8Array(this.ivLength))}encryptFile(t,s){return j(this,null,function*(){try{const n=this.generateSalt(),i=this.generateIV(),a=yield this.deriveKey(s,n),o=yield crypto.subtle.encrypt({name:this.algorithm,iv:i},a,t),u={algorithm:this.algorithm,keyLength:this.keyLength,ivLength:this.ivLength,pbkdf2Iterations:this.pbkdf2Iterations,salt:Array.from(n),iv:Array.from(i),version:"1.0",timestamp:Date.now()};return{encryptedData:o,metadata:u}}catch(n){throw console.error("Encryption failed:",n),new Error(`Encryption failed: ${n.message}`)}})}decryptFile(t,s,n){return j(this,null,function*(){try{if(!s||!s.salt||!s.iv)throw new Error("Invalid encryption metadata");const i=new Uint8Array(s.salt),a=new Uint8Array(s.iv),o=yield this.deriveKey(n,i);return yield crypto.subtle.decrypt({name:this.algorithm,iv:a},o,t)}catch(i){throw console.error("Decryption failed:",i),new Error(`Decryption failed: ${i.message}`)}})}encryptFileObject(t,s){return j(this,null,function*(){try{const n=yield t.arrayBuffer(),{encryptedData:i,metadata:a}=yield this.encryptFile(n,s);return{encryptedFile:new File([i],`encrypted_${t.name}`,{type:"application/octet-stream",lastModified:t.lastModified}),metadata:a}}catch(n){throw console.error("File encryption failed:",n),new Error(`File encryption failed: ${n.message}`)}})}decryptFileObject(t,s,n){return j(this,null,function*(){try{const i=yield t.arrayBuffer(),a=yield this.decryptFile(i,s,n),o=t.name.replace("encrypted_","");return new File([a],o,{type:s.originalType||"application/octet-stream",lastModified:t.lastModified})}catch(i){throw console.error("File decryption failed:",i),new Error(`File decryption failed: ${i.message}`)}})}verifyEncryption(t){return j(this,null,function*(){try{const s=new TextEncoder().encode("Glacier Archival E2E Encryption Test"),{encryptedData:n,metadata:i}=yield this.encryptFile(s,t),a=yield this.decryptFile(n,i,t),o=new TextDecoder().decode(s),u=new TextDecoder().decode(a);return o===u}catch(s){return console.error("Encryption verification failed:",s),!1}})}getEncryptionInfo(){return{algorithm:this.algorithm,keyLength:this.keyLength,pbkdf2Iterations:this.pbkdf2Iterations,features:["AES-GCM 256-bit encryption","PBKDF2 key derivation (100,000 iterations)","Random IV for each file","Authentication tags for integrity","Zero-knowledge architecture","Open source implementation"],securityLevel:"Military-grade",compliance:["FIPS 140-2","Common Criteria"]}}}class Lo{constructor(){this.encryption=new zo,this.isEncryptionEnabled=!1,this.masterPassword=null,this.encryptionCache=new Map}ensureInitialized(){return j(this,null,function*(){try{if(this.isEnabled())return!0;let t=null;try{t=window.localStorage.getItem("dh_master_key")}catch(s){}if(!t){const s=new Uint8Array(32);(window.crypto||window.msCrypto).getRandomValues(s),t=Array.from(s).map(n=>n.toString(16).padStart(2,"0")).join("");try{window.localStorage.setItem("dh_master_key",t)}catch(n){}}return yield this.initializeEncryption(t),!0}catch(t){return!1}})}initializeEncryption(t){return j(this,null,function*(){try{if(!t||t.length<8)throw new Error("Master password must be at least 8 characters");if(!(yield this.encryption.verifyEncryption(t)))throw new Error("Encryption verification failed");return this.masterPassword=t,this.isEncryptionEnabled=!0,console.log("E2E Encryption initialized successfully"),!0}catch(s){throw console.error("Encryption initialization failed:",s),this.isEncryptionEnabled=!1,this.masterPassword=null,s}})}disableEncryption(){this.isEncryptionEnabled=!1,this.masterPassword=null,this.encryptionCache.clear(),console.log("E2E Encryption disabled")}isEnabled(){return this.isEncryptionEnabled&&!!this.masterPassword}encryptFileForUpload(t,s=null){return j(this,null,function*(){if(!this.isEnabled())throw new Error("Encryption not initialized");try{s&&s(0,"Starting encryption...");const n={originalName:t.name,originalType:t.type,originalSize:t.size,originalLastModified:t.lastModified};s&&s(25,"Reading file data...");const{encryptedFile:i,metadata:a}=yield this.encryption.encryptFileObject(t,this.masterPassword);return s&&s(75,"Finalizing encryption..."),a.originalMetadata=n,this.encryptionCache.set(t.name,a),s&&s(100,"Encryption complete"),console.log(`File encrypted: ${t.name} (${t.size} → ${i.size} bytes)`),{encryptedFile:i,metadata:a}}catch(n){throw console.error("File encryption failed:",n),new Error(`Encryption failed: ${n.message}`)}})}decryptFileAfterDownload(t,s,n=null){return j(this,null,function*(){if(!this.isEnabled())throw new Error("Encryption not initialized");try{n&&n(0,"Starting decryption..."),n&&n(25,"Reading encrypted data...");const i=yield this.encryption.decryptFileObject(t,s,this.masterPassword);if(n&&n(75,"Restoring file properties..."),s.originalMetadata){const a=s.originalMetadata;Object.defineProperty(i,"name",{value:a.originalName,writable:!1}),Object.defineProperty(i,"type",{value:a.originalType,writable:!1})}return n&&n(100,"Decryption complete"),console.log(`File decrypted: ${t.name} (${t.size} → ${i.size} bytes)`),i}catch(i){throw console.error("File decryption failed:",i),new Error(`Decryption failed: ${i.message}`)}})}getEncryptionMetadata(t){return this.encryptionCache.get(t)||null}storeEncryptionMetadata(t,s){this.encryptionCache.set(t,s)}clearEncryptionMetadata(t){this.encryptionCache.delete(t)}getEncryptionStatus(){const t=this.encryption.getEncryptionInfo();return{enabled:this.isEnabled(),initialized:!!this.masterPassword,algorithm:t.algorithm,keyLength:t.keyLength,features:t.features,securityLevel:t.securityLevel,compliance:t.compliance,cachedFiles:this.encryptionCache.size}}testEncryption(){return j(this,null,function*(){if(!this.isEnabled())throw new Error("Encryption not initialized");try{const t=Date.now(),s="Glacier Archival E2E Encryption Test - "+new Date().toISOString(),n=new File([s],"test.txt",{type:"text/plain"}),{encryptedFile:i,metadata:a}=yield this.encryptFileForUpload(n),o=yield this.decryptFileAfterDownload(i,a),c=Date.now()-t,g=(yield o.text())===s;return{success:g,duration:c,originalSize:n.size,encryptedSize:i.size,decryptedSize:o.size,compressionRatio:(i.size/n.size).toFixed(2),message:g?"Encryption test passed":"Encryption test failed"}}catch(t){return{success:!1,error:t.message,message:"Encryption test failed"}}})}getMemoryUsage(){return{cacheSize:this.encryptionCache.size,cacheKeys:Array.from(this.encryptionCache.keys()),memoryEstimate:this.encryptionCache.size*1024}}clearCache(){this.encryptionCache.clear(),console.log("Encryption cache cleared")}}const Je=new Lo,Oo={EXPEDITED:{label:"Quick Wake-Up",emoji:"⚡",time:"1-5 minutes",description:"Fastest restore option",cost:"High",technical:"Expedited"},STANDARD:{label:"Standard Wake-Up",emoji:"🌅",time:"3-5 hours",description:"Default restore option",cost:"Standard",technical:"Standard"},BULK:{label:"Slow Wake-Up",emoji:"🌄",time:"5-12 hours",description:"Cheapest restore option",cost:"Lowest",technical:"Bulk"}},$o=(r,t=!1)=>{const[s,n]=d.useState(!1),[i,a]=d.useState(!1),[o,u]=d.useState(null),[c,h]=d.useState(!1),[g,x]=d.useState(null),f=w=>j(q,null,function*(){try{const P=yield Ee.downloadFile(w.id),{download_url:W,filename:D,file_size:ie,is_encrypted:ue,encryption_metadata:fe}=P.data;x({filename:D,file_size:ie,is_encrypted:ue,encryption_metadata:fe}),h(!0);const We=yield fetch(W);if(!We.ok)throw new Error(`Failed to download file: ${We.status}`);const he=yield We.blob();let it=he,Ce=D;if(ue&&fe&&Je.isEnabled())try{const Be=new File([he],D,{type:he.type}),T=yield Je.decryptFileAfterDownload(Be,fe,(ye,se)=>{});it=T,Ce=T.name}catch(Be){throw console.error(`Decryption failed for ${D}:`,Be),new Error(`Decryption failed: ${Be.message}`)}else if(ue&&!Je.isEnabled())throw new Error("File is encrypted but encryption service is not enabled. Please set up your master password first.");const z=window.URL.createObjectURL(it),Ze=document.createElement("a");return Ze.href=z,Ze.download=Ce,document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze),window.URL.revokeObjectURL(z),h(!1),{success:!0,message:`Download started for ${Ce}${ue?" (decrypted)":""}`}}catch(P){throw console.error("Download failed:",P),h(!1),P}}),E=w=>j(q,null,function*(){var P,W;try{return w.status==="archived"?{success:!1,message:"File is already hibernated ❄️"}:w.status==="archiving"?{success:!1,message:"File is already hibernating... 🌙"}:w.status!=="uploaded"&&w.status!=="restored"?{success:!1,message:`Cannot hibernate file in ${w.status} state`}:(yield Ee.archiveFile(w.id),{success:!0,message:`❄️ ${w.original_filename} is now hibernating!`})}catch(D){console.error("Archive failed:",D);const ie=((W=(P=D.response)==null?void 0:P.data)==null?void 0:W.error)||D.message||"Archive failed";throw alert(`Failed to hibernate file: ${ie}`),D}}),m=w=>j(q,null,function*(){return u(w),a(!0),{success:!0,message:"Restore dialog opened"}}),b=w=>j(q,null,function*(){try{const P=yield Ee.restoreFile(o.id,w),D=`🌅 Wake-up initiated! Your file will be ready in ${Oo[w.toUpperCase()].time}.`;return a(!1),u(null),r&&(yield r()),{success:!0,message:D}}catch(P){throw console.error("Error restoring file:",P),P}}),S=(w,P=!1)=>j(q,null,function*(){if(!P&&!window.confirm(`🗑️ Delete "${w.original_filename}"?

This will permanently delete the file from:
• Database records
• S3 storage
• Glacier archives (if any)

This action cannot be undone.`))return{success:!1,message:"Delete cancelled"};try{return yield Ee.deleteFile(w.id),r&&(yield r()),{success:!0,message:`🗑️ ${w.original_filename} deleted successfully`}}catch(W){throw console.error("Delete failed:",W),W}});return{loading:s,restoreDialogOpen:i,restoreFile:o,setRestoreDialogOpen:a,setRestoreFile:u,downloadDialogOpen:c,downloadInfo:g,setDownloadDialogOpen:h,setDownloadInfo:x,handleDownload:f,handleArchive:E,handleRestore:m,handleConfirmRestore:b,handleDelete:S,handleBulkAction:(w,P)=>j(q,null,function*(){try{switch(n(!0),w){case"archive":yield Promise.all(P.map(D=>Ee.archiveFile(D.id)));break;case"restore":yield Promise.all(P.map(D=>Ee.restoreFile(D.id,"Standard")));break;case"download":for(const D of P)yield f(D);break;case"delete":window.confirm(`Are you sure you want to delete ${P.length} files?

This will permanently delete all selected files from:
• Database records
• S3 storage
• Glacier archives (if any)

This action cannot be undone.`)&&(yield Promise.all(P.map(D=>S(D,!0))));break;default:console.warn("Unknown bulk action:",w)}return r&&(yield r(t)),{success:!0,message:`Bulk ${w} completed`}}catch(W){throw console.error(`Error performing bulk ${w}:`,W),W}finally{n(!1)}}),handleHibernationSuggestion:w=>j(q,null,function*(){try{yield Ee.archiveFile(w.id);const P=`❄️ ${w.original_filename} is now hibernating! You'll save money on storage costs.`;return r&&(yield r(t)),{success:!0,message:P}}catch(P){throw console.error("Error hibernating file:",P),P}}),handleFileAction:(w,P)=>j(q,null,function*(){try{n(!0);let W;switch(P){case"download":W=yield f(w);break;case"archive":W=yield E(w);break;case"restore":W=yield m(w);break;case"delete":W=yield S(w);break;default:console.warn("Unknown action:",P),W={success:!1,message:`Unknown action: ${P}`}}return W}catch(W){throw console.error(`Error performing ${P} action:`,W),W}finally{n(!1)}})}},Bo=({error:r,onDismiss:t,onUpgrade:s})=>{const n=Ct(),i=()=>{s?s():n("/plans")},a=()=>{t&&t()};if(!r)return null;const o=r.type==="STORAGE_LIMIT_EXCEEDED",u=r.currentPlan||r.plan_required;return e.jsx(be,{severity:"error",sx:{mb:3,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)"},action:e.jsxs(re,{direction:"row",spacing:1,children:[e.jsx(U,{color:"inherit",size:"small",onClick:a,sx:{fontWeight:600,borderRadius:2,px:2,py:1},children:"Dismiss"}),(o||u)&&e.jsx(U,{variant:"contained",size:"small",onClick:i,sx:{fontWeight:600,borderRadius:2,px:2,py:1,bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:"Upgrade Plan"})]}),children:e.jsxs(p,{children:[e.jsx(l,{variant:"body1",sx:{fontWeight:500,mb:1},children:r.message}),(r.currentUsageGB||r.current_usage_gb)&&e.jsxs(p,{sx:{mt:2},children:[e.jsxs(re,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Current Usage:"}),e.jsx(pe,{label:`${r.currentUsageGB||r.current_usage_gb}GB`,size:"small",color:"primary",variant:"outlined"})]}),r.remainingGB!==void 0&&e.jsxs(re,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Remaining Space:"}),e.jsx(pe,{label:`${r.remainingGB}GB`,size:"small",color:parseFloat(r.remainingGB)>0?"success":"error",variant:"outlined"})]}),r.plan_limit_gb&&e.jsxs(p,{sx:{mt:2},children:[e.jsxs(re,{direction:"row",justifyContent:"space-between",sx:{mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Storage Usage"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[r.current_usage_gb,"GB / ",r.plan_limit_gb,"GB"]})]}),e.jsx(He,{variant:"determinate",value:r.current_usage_gb/r.plan_limit_gb*100,sx:{height:8,borderRadius:4,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:parseFloat(r.current_usage_gb)/parseFloat(r.plan_limit_gb)>.8?"error.main":"primary.main"}}})]})]}),(o||u)&&e.jsx(l,{variant:"body2",sx:{mt:2,opacity:.8},children:r.upgrade_message||"Upgrade to a hibernation plan to get more storage space and continue uploading."})]})})};class Mo{constructor(){this.dbName="GlacierArchivalDB",this.version=1,this.db=null}init(){return j(this,null,function*(){return new Promise((t,s)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>s(n.error),n.onsuccess=()=>{this.db=n.result,t(this.db)},n.onupgradeneeded=i=>{const a=i.target.result;if(!a.objectStoreNames.contains("files")){const o=a.createObjectStore("files",{keyPath:"id"});o.createIndex("userId","userId",{unique:!1}),o.createIndex("timestamp","timestamp",{unique:!1})}if(!a.objectStoreNames.contains("uploads")){const o=a.createObjectStore("uploads",{keyPath:"id"});o.createIndex("timestamp","timestamp",{unique:!1}),o.createIndex("retryCount","retryCount",{unique:!1})}a.objectStoreNames.contains("metadata")||a.createObjectStore("metadata",{keyPath:"key"})}})})}storeFile(n){return j(this,arguments,function*(t,s={}){return this.db||(yield this.init()),new Promise((i,a)=>{const u=this.db.transaction(["files"],"readwrite").objectStore("files"),c={id:Date.now()+Math.random(),name:t.name,type:t.type,size:t.size,data:t,metadata:ve(C({},s),{timestamp:Date.now(),userId:s.userId||"anonymous"})},h=u.add(c);h.onsuccess=()=>i(c.id),h.onerror=()=>a(h.error)})})}getFile(t){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const o=this.db.transaction(["files"],"readonly").objectStore("files").get(t);o.onsuccess=()=>s(o.result),o.onerror=()=>n(o.error)})})}getUserFiles(t){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const u=this.db.transaction(["files"],"readonly").objectStore("files").index("userId").getAll(t);u.onsuccess=()=>s(u.result),u.onerror=()=>n(u.error)})})}deleteFile(t){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const o=this.db.transaction(["files"],"readwrite").objectStore("files").delete(t);o.onsuccess=()=>s(),o.onerror=()=>n(o.error)})})}storeUploadQueueItem(t){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const a=this.db.transaction(["uploads"],"readwrite").objectStore("uploads"),o=ve(C({id:Date.now()+Math.random()},t),{timestamp:Date.now(),retryCount:0}),u=a.add(o);u.onsuccess=()=>s(o.id),u.onerror=()=>n(u.error)})})}getQueuedUploads(){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const a=this.db.transaction(["uploads"],"readonly").objectStore("uploads").getAll();a.onsuccess=()=>t(a.result),a.onerror=()=>s(a.error)})})}removeQueuedUpload(t){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const o=this.db.transaction(["uploads"],"readwrite").objectStore("uploads").delete(t);o.onsuccess=()=>s(),o.onerror=()=>n(o.error)})})}storeMetadata(t,s){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((n,i)=>{const u=this.db.transaction(["metadata"],"readwrite").objectStore("metadata").put({key:t,value:s,timestamp:Date.now()});u.onsuccess=()=>n(),u.onerror=()=>i(u.error)})})}getMetadata(t){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const o=this.db.transaction(["metadata"],"readonly").objectStore("metadata").get(t);o.onsuccess=()=>{var u;return s((u=o.result)==null?void 0:u.value)},o.onerror=()=>n(o.error)})})}getStorageUsage(){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const a=this.db.transaction(["files"],"readonly").objectStore("files").getAll();a.onsuccess=()=>{const o=a.result,u=o.reduce((c,h)=>c+h.size,0);t({fileCount:o.length,totalSize:u,totalSizeMB:Math.round(u/(1024*1024)*100)/100})},a.onerror=()=>s(a.error)})})}clearAll(){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const n=this.db.transaction(["files","uploads","metadata"],"readwrite");n.objectStore("files").clear(),n.objectStore("uploads").clear(),n.objectStore("metadata").clear(),n.oncomplete=()=>t(),n.onerror=()=>s(n.error)})})}clearUploadQueue(){return j(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const a=this.db.transaction(["uploads"],"readwrite").objectStore("uploads").clear();a.onsuccess=()=>t(),a.onerror=()=>s(a.error)})})}exportData(){return j(this,null,function*(){this.db||(yield this.init());const t=yield this.getUserFiles("all"),s=yield this.getQueuedUploads();return{files:t,uploads:s,exportDate:new Date().toISOString()}})}importData(t){return j(this,null,function*(){this.db||(yield this.init());try{for(const s of t.files||[])yield this.storeFile(s.data,s.metadata);for(const s of t.uploads||[])yield this.storeUploadQueueItem(s);return!0}catch(s){return console.error("Error importing data:",s),!1}})}}const It=new Mo;class No{constructor(){this.queue=[],this.subscribers=new Set,this.isRunning=!1,this.concurrent=ur.maxConcurrentUploads,this.activeCount=0,this.initialized=!1,this._emitThrottled=this._throttle(this._emit.bind(this),200),this.activeWorkers=new Set,this._uploadSessionActive=!1,this._currentSessionTotal=0,this._cumulativeCompleted=0,this._cumulativeFailed=0,this._cumulativeCancelled=0,this._cancelling=!1,this._abortControllers=new Set,this._activeXhrs=new Set,this._completedFileIds=new Set}_throttle(t,s){let n,i=0;return function(...a){const o=Date.now();o-i>s?(t.apply(this,a),i=o):(clearTimeout(n),n=setTimeout(()=>{t.apply(this,a),i=Date.now()},s-(o-i)))}}init(){return j(this,null,function*(){if(this.initialized)return;yield It.init();const t=yield It.getQueuedUploads();this.queue=(t||[]).map(s=>({id:s.id,file:s.file||null,relativePath:s.relativePath||"",status:s.status||"queued",progress:s.progress||0,s3Key:s.s3Key||"",error:void 0})),this.initialized=!0,this._emit()})}subscribe(t){this.subscribers.add(t);try{t(this.getState())}catch(s){}return()=>this.subscribers.delete(t)}getState(){const t=new Map,s=new Map;let n=0,i=0,a=0,o=0,u=0,c=0;for(const y of this.queue){t.set(y.status,(t.get(y.status)||0)+1);const $=y.operationType||"upload";s.set($,(s.get($)||0)+1),$==="upload"&&(c+=1,y.status==="queued"?i+=1:y.status==="uploading"?a+=1:y.status==="failed"?o+=1:y.status==="completed"&&(u+=1)),n+=y.size||0}const h=t.get("queued")||0,g=t.get("uploading")||0,x=t.get("failed")||0,f=t.get("completed")||0,E=s.get("delete")||0,m=t.get("deleting")||0,b=this.queue.slice(-50).map(y=>({id:y.id,relativePath:y.relativePath,status:y.status,progress:y.progress,s3Key:y.s3Key,error:y.error,name:y.name,operationType:y.operationType||"upload"})),S=this.queue.filter(y=>y.operationType==="delete").slice(-10).map(y=>({id:y.id,status:y.status,progress:y.progress,completedFiles:y.completedFiles,totalFiles:y.totalFiles,error:y.error}));return{isRunning:g>0,activeCount:g,total:this.queue.length,queued:h,inProgress:g,failed:x,completed:f,uploadTotal:this._uploadSessionActive?this._currentSessionTotal:c,uploadQueued:i,uploadInProgress:a,uploadFailed:this._uploadSessionActive?this._cumulativeFailed:o,uploadCancelled:this._uploadSessionActive?this._cumulativeCancelled:t.get("cancelled")||0,uploadCompleted:this._uploadSessionActive?this._cumulativeCompleted:u,items:b,deleteOperations:S,deleteOperationsCount:E,deleteInProgress:m,totalSize:n,percentage:this.queue.length>0?Math.round(f/this.queue.length*100):0}}_cleanupCompletedItems(){if(this._uploadSessionActive)return;const t=1e4;if(this.queue.length>t){const s=this.queue.filter(n=>n.status==="completed");if(s.length>0){s.sort((i,a)=>i.id.localeCompare(a.id));const n=s.slice(0,Math.min(s.length,this.queue.length-t));this.queue=this.queue.filter(i=>!n.includes(i))}}}cleanupCompletedItems(){this._cleanupCompletedItems()}startUploadSession(t){this._uploadSessionActive=!0,this._currentSessionTotal=t,this._cumulativeCompleted=0,this._cumulativeFailed=0,this._cumulativeCancelled=0}endUploadSession(){return j(this,null,function*(){this._uploadSessionActive=!1,this._currentSessionTotal=0,this._cumulativeCompleted=0,this._cumulativeFailed=0,this._cumulativeCancelled=0;try{const t=Array.from(this._completedFileIds);if(t.length>0){const{mediaAPI:s}=yield hs(()=>Promise.resolve().then(()=>Ys),void 0);yield s.markUploadComplete(t)}}catch(t){console.error("Failed to mark upload as complete:",t)}this._completedFileIds.clear(),this._cleanupCompletedItems()})}incrementCompleted(){!this._uploadSessionActive||this._cancelling||(this._cumulativeCompleted+=1,this._emitThrottled())}incrementFailed(){!this._uploadSessionActive||this._cancelling||(this._cumulativeFailed=(this._cumulativeFailed||0)+1,this._emitThrottled())}incrementCancelled(){!this._uploadSessionActive||this._cancelling||(this._cumulativeCancelled=(this._cumulativeCancelled||0)+1,this._emitThrottled())}addPlaceholder(t,s=""){const n=`ext_${Date.now()}_${Math.random().toString(16).slice(2)}`,i={id:n,file:null,relativePath:s,status:"queued",progress:0,s3Key:"",error:void 0,name:t,operationType:"upload"};return this.queue.push(i),this._emitThrottled(),n}addPlaceholdersBatch(t){const s=[],n=Date.now(),i=t.map((a,o)=>({id:`ext_${n}_${o}_${Math.random().toString(16).slice(2)}`,file:null,relativePath:a.relativePath||"",status:"queued",progress:0,s3Key:"",error:void 0,name:a.name,size:a.size||0,operationType:"upload"}));return this.queue.push(...i),s.push(...i.map(a=>a.id)),this._emitThrottled(),s}addDeleteOperation(t,s="delete"){const n=`del_${Date.now()}_${Math.random().toString(16).slice(2)}`,i={id:n,file:null,relativePath:"",status:"queued",progress:0,s3Key:"",error:void 0,name:`${s} operation`,operationType:s,fileIds:t,totalFiles:t.length,completedFiles:0};return this.queue.push(i),this._emitThrottled(),n}updatePlaceholder(t,{status:s,progress:n,error:i}){const a=this.queue.find(o=>o.id===t);a&&(typeof s=="string"&&(a.status=s),typeof n=="number"&&(a.progress=n),i!==void 0&&(a.error=i),this._emit())}updateDeleteOperation(t,{status:s,progress:n,completedFiles:i,error:a}){const o=this.queue.find(u=>u.id===t);o&&(typeof s=="string"&&(o.status=s),typeof n=="number"&&(o.progress=n),typeof i=="number"&&(o.completedFiles=i),a!==void 0&&(o.error=a),this._emit())}addFile(n){return j(this,arguments,function*(t,{relativePath:s=""}={}){yield this.init();const i=Date.now()+Math.random(),a={id:i,file:t,relativePath:s,status:"queued",progress:0,s3Key:""};return this.queue.push(a),yield It.storeUploadQueueItem({id:i,relativePath:s,status:"queued",progress:0}),this._emit(),this.isRunning&&this._tick(),i})}start(){this.isRunning=!0,this._emit(),this._tick()}pause(){this.isRunning=!1,this._emit()}cancel(t){return j(this,null,function*(){yield this.init(),this.queue=this.queue.filter(s=>s.id!==t),yield It.removeQueuedUpload(t),this._emit()})}clearAll(){return j(this,null,function*(){yield this.init(),this.queue=[],yield It.clearUploadQueue(),this._emit()})}registerWorker(t){this.activeWorkers.add(t)}unregisterWorker(t){this.activeWorkers.delete(t)}cancelAllUploads(){return j(this,null,function*(){yield this.init(),this._cancelling=!0;try{yield this.endUploadSession()}catch(t){}try{this._abortControllers.forEach(t=>{try{t.abort()}catch(s){}})}finally{this._abortControllers.clear()}try{this._activeXhrs.forEach(t=>{try{t.abort()}catch(s){}})}finally{this._activeXhrs.clear()}this.queue.forEach(t=>{t.operationType==="upload"&&(t.status==="queued"||t.status==="uploading")&&(t.status="cancelled",t.progress=0,t.error="Upload cancelled")}),this.activeCount=0,this.isRunning=!1,this.activeWorkers.forEach(t=>{try{t.postMessage({type:"cancel"}),setTimeout(()=>{t.terminate()},100)}catch(s){console.warn("Error cancelling worker:",s)}}),this.activeWorkers.clear(),yield It.clearUploadQueue();try{const t=this._completedFileIds.size;if(t>0){const{mediaAPI:s}=yield hs(()=>Promise.resolve().then(()=>Ys),void 0);yield s.completeUploadBatch(t),this._completedFileIds.clear()}}catch(t){console.warn("Finalization during cancel failed (non-fatal):",t)}this._emit(),window.dispatchEvent(new CustomEvent("cancelAllUploads")),window.dispatchEvent(new CustomEvent("cancelUpload")),this._cancelling=!1})}registerAbortController(t){t&&this._abortControllers.add(t)}unregisterAbortController(t){t&&this._abortControllers.delete(t)}_tick(){return j(this,null,function*(){if(this.isRunning)for(;this.activeCount<this.concurrent;){const t=this.queue.find(s=>s.status==="queued");if(!t)break;this._upload(t).catch(()=>{})}})}_upload(t){return j(this,null,function*(){this.activeCount+=1,t.status="uploading",t.progress=0,yield this._persistItem(t),this._emitThrottled();try{const n=(yield Ee.getPresignedUrls({files:[{filename:t.file.name,fileType:t.file.type||"application/octet-stream",fileSize:t.file.size||0,relativePath:t.relativePath||""}]})).data.results[0],{url:i,fields:a}=n.presignedUrl||{},o=n.s3Key,u=n.fileId,c=new FormData;Object.entries(a||{}).forEach(([h,g])=>c.append(h,g)),c.append("file",t.file),yield this._xhrPost(i,c,h=>{t.progress=h,this._emitThrottled()}),t.status="completed",t.progress=100,t.s3Key=o,t.fileId=u,u&&this._completedFileIds.add(u),yield this._persistItem(t),this._emitThrottled(),this._cumulativeCompleted+=1}catch(s){this._cancelling?t.status="cancelled":(t.status="failed",t.error=(s==null?void 0:s.message)||String(s)),yield this._persistItem(t),this._emitThrottled()}finally{this.activeCount-=1,t.status==="completed"&&(yield It.removeQueuedUpload(t.id),this.queue=this.queue.filter(s=>s.id!==t.id),this._emitThrottled()),this.isRunning&&this._tick()}})}bulkUpload(t,s=""){return j(this,null,function*(){if(yield this.init(),t.length!==0){this.startUploadSession(t.length);try{const n=ur.bulkBatchSize,i=[];for(let a=0;a<t.length;a+=n)i.push(t.slice(a,a+n));for(let a=0;a<i.length;a++){const o=i[a],u=o.map(x=>({filename:x.name,fileType:x.type||"application/octet-stream",fileSize:x.size||0,relativePath:s})),c=yield Ee.getPresignedUrls({files:u}),{results:h}=c.data,g=o.map((x,f)=>{const E=`bulk_${Date.now()}_${a}_${f}_${Math.random().toString(16).slice(2)}`,m=h[f];return{id:E,file:x,relativePath:s,status:"queued",progress:0,s3Key:m.s3Key,presignedUrl:m.presignedUrl,fileId:m.fileId,error:void 0,operationType:"upload"}});this.queue.push(...g),this._emitThrottled(),a<i.length-1&&(yield new Promise(x=>setTimeout(x,100)))}this.start()}catch(n){console.error("Bulk upload failed:",n),this.queue.forEach(i=>{i.operationType==="upload"&&i.status==="queued"&&(i.status="failed",i.error=n.message||"Bulk upload failed")}),this._emit()}finally{this.endUploadSession()}}})}_bulkUploadItem(t){return j(this,null,function*(){t.status="uploading",t.progress=0,this._emit();try{const{url:s,fields:n}=t.presignedUrl||{};if(!s||!n)throw new Error("Invalid presigned URL response");const i=new FormData;Object.entries(n).forEach(([a,o])=>i.append(a,o)),i.append("file",t.file),yield this._xhrPost(s,i,a=>{t.progress=a,this._emitThrottled()}),t.status="completed",t.progress=100,this._emit()}catch(s){t.status="failed",t.error=s.message||"Upload failed",this._emit()}})}_xhrPost(t,s,n){return new Promise((i,a)=>{const o=new XMLHttpRequest;o.open("POST",t,!0),this._activeXhrs.add(o),o.upload.onprogress=u=>{if(!u.lengthComputable)return;const c=Math.round(u.loaded/u.total*100);try{n==null||n(c)}catch(h){}},o.onload=()=>{this._activeXhrs.delete(o),o.status>=200&&o.status<300?i():a(new Error(`Upload failed with status ${o.status}`))},o.onerror=()=>{this._activeXhrs.delete(o),a(new Error("Network error during upload"))},o.onabort=()=>{this._activeXhrs.delete(o),a(new Error("Upload aborted"))},o.send(s)})}_persistItem(t){return j(this,null,function*(){yield It.storeUploadQueueItem({id:t.id,relativePath:t.relativePath,status:t.status,progress:t.progress,s3Key:t.s3Key||""})})}_emit(){const t=this.getState();this.subscribers.forEach(s=>{try{s(t)}catch(n){}})}_emitThrottled(){this._throttleTimer||(this._throttleTimer=setTimeout(()=>{this._throttleTimer=null,this._emit()},200))}}const G=new No,Tt=(r,t=2)=>{if(r===0)return"0 Bytes";const s=1024,n=t<0?0:t,i=["Bytes","KB","MB","GB","TB"],a=Math.floor(Math.log(r)/Math.log(s));return parseFloat((r/Math.pow(s,a)).toFixed(n))+" "+i[a]},Go=r=>r.size>qe.MAX_FILE_SIZE?{isValid:!1,errors:[{type:"FILE_SIZE_EXCEEDED",message:Jt.FILE_SIZE_EXCEEDED,details:`File "${r.name}" exceeds 5GB limit`}]}:r.name.length>255?{isValid:!1,errors:[{type:"FILENAME_TOO_LONG",message:"Filename too long",details:`File "${r.name}" exceeds 255 character limit`}]}:{isValid:!0,errors:[]},Ho=r=>{const t=[];return r.size>qe.MAX_FILE_SIZE&&t.push({type:"FILE_SIZE_EXCEEDED",message:Jt.FILE_SIZE_EXCEEDED,details:`File "${r.name}" is ${Tt(r.size)}, maximum allowed is ${Tt(qe.MAX_FILE_SIZE)}`}),r.name.length>255&&t.push({type:"FILENAME_TOO_LONG",message:"Filename too long",details:`File "${r.name}" has ${r.name.length} characters, maximum allowed is 255`}),{isValid:t.length===0,errors:t}},qo=r=>{const t=[],s=[];let n=0,i=0,a=0;if(r.length>qe.MAX_FILES)return t.push({type:"TOO_MANY_FILES",message:Jt.TOO_MANY_FILES,details:`Selected ${r.length} files, maximum allowed is ${qe.MAX_FILES}`}),{isValid:!1,errors:t,warnings:s,stats:{totalFiles:r.length,validFiles:0,invalidFiles:r.length,totalSize:0,averageFileSize:0}};const u=r.length>1e3?Go:Ho,c=r.length>1e4?5e3:r.length;let h=0;for(let g=0;g<r.length;g+=c){const x=r.slice(g,g+c);for(const f of x){const E=u(f);E.isValid?(i++,n+=f.size):(t.push(...E.errors),a++)}h+=x.length,r.length>5e3&&h%5e3}return i>0&&(n>qe.MAX_TOTAL_SIZE&&t.push({type:"TOTAL_SIZE_EXCEEDED",message:Jt.TOTAL_SIZE_EXCEEDED,details:`Total size is ${Tt(n)}, maximum allowed is ${Tt(qe.MAX_TOTAL_SIZE)}`}),n>qe.MAX_SESSION_SIZE&&t.push({type:"SESSION_SIZE_EXCEEDED",message:Jt.SESSION_SIZE_EXCEEDED,details:`Session size is ${Tt(n)}, maximum allowed is ${Tt(qe.MAX_SESSION_SIZE)}`}),n>qe.MEMORY_LIMIT&&s.push({type:"MEMORY_LIMIT_WARNING",message:"Large upload detected",details:`Uploading ${Tt(n)}. This may take a while.`})),{isValid:t.length===0,errors:t,warnings:s,stats:{totalFiles:r.length,validFiles:i,invalidFiles:a,totalSize:n,averageFileSize:i>0?n/i:0}}},rn=r=>{const t=qo(r).stats;return t.totalSize>qe.MEMORY_LIMIT?"streaming":t.totalFiles>100?"batched":"standard"},sn=(r,t=8)=>r>=t?{canStart:!1,error:{type:"CONCURRENT_UPLOAD_LIMIT",message:Jt.CONCURRENT_UPLOAD_LIMIT,details:`Currently ${r} uploads in progress, maximum allowed is ${t}`}}:{canStart:!0,remainingSlots:t-r},nn=(r,t)=>j(q,null,function*(){const s=[],n=[],i=r.length;return i>qe.MAX_FILES?(s.push({type:"TOO_MANY_FILES",message:"Too many files selected",details:`Selected ${i} files, maximum allowed is ${qe.MAX_FILES} to prevent browser slowdown`}),{isValid:!1,errors:s,warnings:n,stats:{totalFiles:i,validFiles:0,invalidFiles:i,totalSize:0,averageFileSize:0}}):{isValid:!0,errors:s,warnings:n,stats:{totalFiles:i,validFiles:i,invalidFiles:0,totalSize:0,averageFileSize:0}}}),On=({onUploadComplete:r,onUploadProgress:t,defaultRelativePath:s=""})=>{const[n,i]=d.useState(!1),[a,o]=d.useState(0),[u,c]=d.useState(""),[h,g]=d.useState([]),[x,f]=d.useState([]),[E,m]=d.useState(!1),[b,S]=d.useState(null),[A,y]=d.useState([]),[$,w]=d.useState([]),[P,W]=d.useState(null),[D,ie]=d.useState("standard"),[ue,fe]=d.useState(null),[We,he]=d.useState(!1),[it,Ce]=d.useState([]),[z,Ze]=d.useState(!1),M=d.useRef(null),Be=d.useRef(null);d.useRef(null);const T=d.useRef(!1);d.useRef(!1),d.useEffect(()=>{const R=()=>{const X=Je.getEncryptionStatus();Ze(X.enabled)};R();const L=setInterval(R,1e3);return()=>clearInterval(L)},[]);const ye=d.useCallback(R=>j(q,null,function*(){if(T.current||n){console.warn("Cannot select files while upload is in progress");return}const L=Array.from(R.target.files);if(L.length!==0){if(L.length>qe.MAX_FILES){y([{type:"file_count_exceeded",message:"🚫 Too many files selected!",details:`You selected ${L.length.toLocaleString()} files, but the maximum allowed is ${qe.MAX_FILES.toLocaleString()} files to prevent browser slowdown.`,solution:"💡 Please split your directory into smaller batches of 100,000 files or less.",icon:"⚠️"}]),c(`❌ Selection cancelled: ${L.length.toLocaleString()} files exceeds limit`);return}c("Validating files...");try{const X=yield nn(L,(te,ne)=>{c(`Processing files... ${te}/${ne} (${Math.round(te/ne*100)}%)`)});if(!X.isValid){y(X.errors),w(X.warnings),c(`Validation failed: ${X.errors.length} errors found`);return}let xe={canUpload:!0};Vs.ENABLE_CLIENT_STORAGE_PRECHECK;const oe=sn(0);if(!oe.canStart){y([oe.error]),c("Too many concurrent uploads");return}const Se=rn(L);ie(Se);const J=[{directory:"Individual Files",files:L.map(te=>({file:te,name:te.name,size:te.size,type:te.type,relativePath:s})),isDirectory:!1}];g(J),y([]),w(X.warnings),W(xe),c(`Ready to upload ${X.stats.validFiles} files (${Tt(X.stats.totalSize)})`)}catch(X){console.error("File validation error:",X),y([{type:"VALIDATION_ERROR",message:"File validation failed",details:X.message}]),c("Validation failed")}}}),[s]),se=d.useCallback(R=>j(q,null,function*(){if(T.current||n){console.warn("Cannot select directories while upload is in progress");return}const L=Array.from(R.target.files);if(L.length!==0){if(L.length>qe.MAX_FILES){y([{type:"directory_count_exceeded",message:"🚫 Directory too large!",details:`This directory contains ${L.length.toLocaleString()} files, but the maximum allowed is ${qe.MAX_FILES.toLocaleString()} files to prevent browser slowdown.`,solution:"💡 Please split this directory into smaller folders of 100,000 files or less.",icon:"📁"}]),c(`❌ Directory rejected: ${L.length.toLocaleString()} files exceeds limit`);return}c("Validating directory...");try{const X=yield nn(L,(te,ne)=>{c(`Processing directory... ${te}/${ne} (${Math.round(te/ne*100)}%)`)});if(!X.isValid){y(X.errors),w(X.warnings),c(`Validation failed: ${X.errors.length} errors found`);return}let xe={canUpload:!0};Vs.ENABLE_CLIENT_STORAGE_PRECHECK;const oe=sn(0);if(!oe.canStart){y([oe.error]),c("Too many concurrent uploads");return}const Se=rn(L);ie(Se),c("Indexing selected directory...");const J=te=>j(q,null,function*(){const ne=new Map,Ve=ur.mainBatchSize,ee=te.length;for(let de=0;de<ee;de+=Ve){const ke=te.slice(de,de+Ve);for(const Ke of ke){const Ue=Ke.webkitRelativePath.split("/"),Ge=Ue.pop(),Qe=Ue.join("/");ne.has(Qe)||ne.set(Qe,[]),ne.get(Qe).push({file:Ke,name:Ge,size:Ke.size,type:Ke.type,relativePath:s?`${s}/${Qe}`:Qe})}const ht=Math.min(de+Ve,ee);c(`Indexing files... ${ht}/${ee} (${Math.round(ht/ee*100)}%)`),yield new Promise(Ke=>setTimeout(Ke,0))}return ne});try{const te=yield J(L),ne=[];te.forEach((Ve,ee)=>{ne.push({directory:ee,files:Ve,isDirectory:!0})}),g(ne),y([]),w(X.warnings),W(xe),c(`Ready to upload ${L.length} files from ${te.size} directories`)}catch(te){console.error("Error processing files:",te),y([{type:"PROCESSING_ERROR",message:"Error processing files",details:te.message}]),c("Error processing files. Please try again.")}}catch(X){console.error("Directory validation error:",X),y([{type:"VALIDATION_ERROR",message:"Directory validation failed",details:X.message}]),c("Validation failed")}}}),[s]),[nt,Me]=d.useState(!1),[qt,Vt]=d.useState(new Set),js=d.useCallback(R=>{R.preventDefault(),R.stopPropagation(),Me(!0)},[]),mr=d.useCallback(R=>{R.preventDefault(),R.stopPropagation(),Me(!1)},[]),vs=d.useCallback(R=>{if(R.preventDefault(),R.stopPropagation(),Me(!1),T.current||n){console.warn("Cannot drop files while upload is in progress");return}const L=Array.from(R.dataTransfer.files);if(L.length===0)return;if(Array.from(R.dataTransfer.items).some(oe=>oe.kind==="file"&&oe.webkitGetAsEntry&&oe.webkitGetAsEntry().isDirectory)){c('Please use "Select Folder" button for directory uploads');return}ye({target:{files:L}})},[ye]),br=()=>j(q,null,function*(){var R;try{const L=h.reduce((J,te)=>J+te.files.length,0),X=h.map(J=>({directory:J.directory,fileCount:J.files.length}));c(`Creating upload session for ${L} files...`);const xe=Cn.createSession({rootDirectory:((R=h[0])==null?void 0:R.directory)||"upload",totalFiles:L,directoryStructure:X}),oe=new Promise((J,te)=>{setTimeout(()=>te(new Error("Session creation timeout")),3e4)}),Se=yield Promise.race([xe,oe]);return S(Se.data.sessionId),Se.data.sessionId}catch(L){throw console.error("Failed to create upload session:",L),L}}),Hr=R=>j(q,null,function*(){const X=[],xe=R.length;for(let oe=0;oe<xe;oe+=1e3){const Se=R.slice(oe,oe+1e3),J=G.addPlaceholdersBatch(Se);X.push(...J);const te=Math.min(oe+1e3,xe);c(`Creating placeholders... ${te}/${xe} (${Math.round(te/xe*100)}%)`),yield new Promise(ne=>setTimeout(ne,0))}return X});d.useCallback(()=>j(q,null,function*(){try{yield G.cancelAllUploads()}catch(R){}}),[]);const qr=()=>j(q,null,function*(){if(h.length===0)return;if(T.current||n){console.warn("Upload already in progress, ignoring duplicate request");return}T.current=!0;try{yield G.clearAll(),Ce([])}catch(L){console.warn("Error clearing previous upload state:",L)}const R=new AbortController;fe(R),G.registerAbortController(R),i(!0),he(!1),o(0),f([]),c("Creating upload session...");try{const L=h.reduce((ee,de)=>ee+de.files.length,0);G.startUploadSession(L);const X=yield br();c("Preparing files for upload..."),c("Preparing file list..."),c(`Prepared ${L} files for upload`),c("Starting uploads..."),c("Starting streaming upload...");const xe=yield Vr(h,X,L,R);if(R.signal.aborted)return;f(xe);const oe=xe.filter(ee=>ee.success).length,Se=xe.length-oe,J=Math.max(0,L-(oe+Se));G._cumulativeCompleted=oe,G._cumulativeFailed=Se+J,G._cumulativeCancelled=G._cumulativeCancelled||0,G._currentSessionTotal=L,G._emitThrottled();const te=xe.filter(ee=>!ee.success),ne=xe.filter(ee=>ee.success),Ve=ne.reduce((ee,de)=>ee+(de.fileSize||0),0);if(Ht.trackFileUpload(ne.length,Ve,"web"),ko(`Upload completed: ${ne.length} successful, ${te.length} failed`,"upload",te.length>0?"warning":"info",{successful_count:ne.length,failed_count:te.length,total_size_mb:Math.round(Ve/(1024*1024))}),ne.length>0){const ee=ne.filter(de=>de.mediaFileId).map(de=>de.mediaFileId);if(ee.length>0)try{yield Ee.markUploadComplete(ee)}catch(de){}}te.length>0?(c(`Upload completed with ${te.length} failures`),m(!0),Ht.trackError("upload_error",`${te.length} files failed`,"file_upload"),zn(new Error(`Upload failed: ${te.length} files failed`),{tags:{component:"DirectoryUploader",action:"file_upload"},extra:{failed_count:te.length,successful_count:ne.length,total_files:h.reduce((ee,de)=>ee+de.files.length,0)}}),r&&r(),i(!1),he(!1),fe(null),T.current=!1):(c(`Upload completed! ${ne.length} files uploaded successfully`),r&&r(),i(!1),he(!1),fe(null),T.current=!1),G.cleanupCompletedItems(),G.endUploadSession(),setTimeout(()=>{g([]),f([])},100)}catch(L){L.name==="AbortError"?c("Upload cancelled"):(console.error("Upload failed:",L),c(`Upload failed: ${L.message}`))}finally{G.endUploadSession(),i(!1),he(!1),G.unregisterAbortController(R),fe(null),T.current=!1}}),Vr=(R,L,X,xe)=>j(q,null,function*(){const oe=ur.webWorkerBatchSize;let Se=0,J=[];for(const te of R){const ne=te.files,Ve=Math.ceil(ne.length/oe);for(let ee=0;ee<Ve;ee++){if(xe.signal.aborted){const Ge=new Error("Upload cancelled");throw Ge.name="AbortError",Ge}const de=ee*oe,ke=Math.min(de+oe,ne.length),ht=ne.slice(de,ke),Ke=ht.map(Ge=>ve(C({},Ge),{directory:te.directory})),Ne=yield Hr(Ke);Se+=ht.length,(Se%50===0||Se===X)&&c(`Uploading ${Se}/${X} files (${Math.round(Se/X*100)}%)`);const Ue=yield lr(Ke,L,xe,Ne);J.push(...Ue),ht.length=0,Ke.length=0,yield new Promise(Ge=>setTimeout(Ge,10))}}return J}),lr=(R,L,X,xe)=>j(q,null,function*(){return new Promise((oe,Se)=>{const J=new Worker("/upload-worker.js"),te=[...it,J];if(Ce(te),G.registerWorker(J),X.signal.aborted){J.terminate();const ee=new Error("Upload cancelled");ee.name="AbortError",Se(ee);return}J.postMessage({type:"upload",files:R,sessionId:L,batchSize:ur.webWorkerBatchSize,accessToken:st.getAccessToken(),apiBaseUrl:xr.baseURL.replace("/api/","/api")});const ne=()=>{J.postMessage({type:"cancel"}),setTimeout(()=>{J.terminate(),Ce(de=>de.filter(ke=>ke!==J)),G.unregisterWorker(J);const ee=new Error("Upload cancelled");ee.name="AbortError",Se(ee)},100)};X.signal.addEventListener("abort",ne);let Ve=[];J.onmessage=ee=>j(q,null,function*(){const Ke=ee.data,{type:de,data:ke}=Ke,ht=ks(Ke,["type","data"]);if(de==="progress"){if(ke&&ke.placeholderId){const{placeholderId:Ne,progress:Ue,status:Ge,fileIndex:Qe}=ke;Qe!==void 0&&xe[Qe]&&G.updatePlaceholder(xe[Qe],{progress:Ue||0,status:Ge||"uploading"})}if(ke&&ke.results&&(Ve=[...Ve,...ke.results]),ke&&ke.progress>=100){const Ne=Array.isArray(ke==null?void 0:ke.results)?ke.results:[],Ue=new Map;R.forEach((we,ze)=>{const et=`${we.relativePath||""}/${we.name}`;Ue.set(et,xe[ze])}),Ne.forEach(we=>{const ze=`${we.path||""}/${we.file||""}`,et=Ue.get(ze);et&&(we.success?G.updatePlaceholder(et,{status:"completed",progress:100}):G.updatePlaceholder(et,{status:we.error==="Upload cancelled"?"cancelled":"failed",progress:0,error:we.error})),we.success?G.incrementCompleted():we.error==="Upload cancelled"?G.incrementCancelled():G.incrementFailed()});const Ge=new Set(Ne.map(we=>`${we.path||""}/${we.file||""}`));R.forEach((we,ze)=>{const et=`${we.relativePath||""}/${we.name}`;if(!Ge.has(et)){const Ot=Ue.get(et);Ot&&G.updatePlaceholder(Ot,{status:"failed",progress:0,error:"No result from worker"}),G.incrementFailed()}}),f(we=>[...we,...Ne]);const Qe=(Ne||[]).filter(we=>we.success&&we.mediaFileId).map(we=>we.mediaFileId);if(Qe.length>0)try{yield Ee.markUploadComplete(Qe)}catch(we){}J.terminate(),Ce(we=>we.filter(ze=>ze!==J)),G.unregisterWorker(J),X.signal.removeEventListener("abort",ne),oe(Ne)}}else if(de==="complete")J.terminate(),Ce(Ne=>Ne.filter(Ue=>Ue!==J)),G.unregisterWorker(J),X.signal.removeEventListener("abort",ne),oe(Ve);else if(de==="cancelled")xe.forEach(Ne=>{G.updatePlaceholder(Ne,{status:"cancelled",progress:0,error:"Upload cancelled"}),G.incrementCancelled()}),J.terminate(),Ce(Ne=>Ne.filter(Ue=>Ue!==J)),G.unregisterWorker(J),X.signal.removeEventListener("abort",ne),oe([]);else if(de==="error"){const Ne=ke&&ke.error||"Worker error";xe.forEach(Ue=>{G.updatePlaceholder(Ue,{status:"failed",progress:0,error:Ne}),G.incrementFailed()}),J.terminate(),Ce(Ue=>Ue.filter(Ge=>Ge!==J)),G.unregisterWorker(J),X.signal.removeEventListener("abort",ne),oe([])}}),J.onerror=ee=>{J.terminate(),Ce(de=>de.filter(ke=>ke!==J)),G.unregisterWorker(J),X.signal.removeEventListener("abort",ne),xe.forEach(de=>{G.updatePlaceholder(de,{status:"failed",progress:0,error:(ee==null?void 0:ee.message)||"Worker error"}),G.incrementFailed()}),oe([])}})}),Yr=()=>{g([]),o(0),c(""),f([]),m(!1),S(null),Vt(new Set),M.current&&(M.current.value=""),Be.current&&(Be.current.value="")};return e.jsxs(p,{sx:{maxWidth:800,mx:"auto",p:2},children:[e.jsx(Le,{children:e.jsxs(Oe,{children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:"File & Directory Upload"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Upload individual files or entire directories while preserving folder structure"}),e.jsxs(p,{sx:{border:"2px dashed",borderColor:nt?"primary.main":n?"warning.main":h.length>0?"success.main":"grey.300",borderRadius:2,p:4,textAlign:"center",bgcolor:nt?"primary.50":n?"warning.light":h.length>0?"success.light":"grey.50",opacity:n?.7:1,pointerEvents:n?"none":"auto",transition:"all 0.3s ease",cursor:n?"not-allowed":"pointer",transform:nt?"scale(1.02)":"scale(1)","&:hover":{borderColor:n?"warning.main":h.length>0?"success.main":"primary.main",bgcolor:n?"warning.light":h.length>0?"success.main":"primary.50",transform:n?"none":"translateY(-2px)",boxShadow:n?"none":2}},onDragOver:js,onDragLeave:mr,onDrop:vs,children:[e.jsx("input",{ref:M,type:"file",multiple:!0,disabled:n,onChange:ye,style:{display:"none"}}),e.jsx("input",{ref:Be,type:"file",multiple:!0,webkitdirectory:"",directory:"",disabled:n,onChange:se,style:{display:"none"}}),nt?e.jsxs(p,{children:[e.jsx(rt,{sx:{fontSize:48,mb:2,color:"primary.main"}}),e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600},children:"Drop Files Here"}),e.jsx(l,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"Release to upload your files"})]}):h.length>0?e.jsxs(p,{children:[e.jsx($e,{sx:{fontSize:48,mb:2,color:"success.main"}}),e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{color:"success.main",fontWeight:600},children:"Files Ready for Upload"}),e.jsxs(l,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:[h.reduce((R,L)=>R+L.files.length,0)," files from ",h.length," folders selected"]}),e.jsxs(p,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(U,{variant:"outlined",startIcon:e.jsx(Qt,{}),onClick:()=>{var R;T.current||n||(R=M.current)==null||R.click()},disabled:n,sx:{minWidth:150},children:"Add More Files"}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(Tr,{}),onClick:()=>{var R;T.current||n||(R=Be.current)==null||R.click()},disabled:n,sx:{minWidth:150},children:"Add Folder"})]})]}):e.jsxs(p,{children:[e.jsx(rt,{sx:{fontSize:48,mb:2,color:"primary.main"}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Upload Your Files"}),e.jsx(l,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"Choose files or folders to upload to your secure storage"}),e.jsxs(p,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(U,{variant:"contained",startIcon:e.jsx(hr,{}),onClick:()=>{var R;T.current||n||(R=M.current)==null||R.click()},disabled:n,sx:{minWidth:150,py:1.5},children:"Select Files"}),e.jsx(U,{variant:"contained",startIcon:e.jsx(Tr,{}),onClick:()=>{var R;T.current||n||(R=Be.current)==null||R.click()},disabled:n,sx:{minWidth:150,py:1.5},children:"Select Folder"})]}),e.jsx(l,{variant:"caption",sx:{mt:3,display:"block",color:"text.secondary"},children:"Or drag & drop files/folders here"})]})]}),h.length>0&&e.jsxs(p,{sx:{mt:3},children:[e.jsxs(l,{variant:"h6",gutterBottom:!0,children:["Selected Files (",h.reduce((R,L)=>R+L.files.length,0).toLocaleString()," files)",h.some(R=>R.isDirectory)&&" - Directory Structure Preserved"]}),e.jsx(be,{severity:"info",sx:{mb:2},children:e.jsx(l,{variant:"caption",children:"💡 Individual file details are hidden for large uploads to prevent browser slowdown. All files will be uploaded correctly."})})]}),A.length>0&&e.jsx(p,{sx:{mt:2},children:A.map((R,L)=>R.type==="STORAGE_LIMIT_EXCEEDED"?e.jsx(Bo,{error:R,onDismiss:()=>{y(X=>X.filter((xe,oe)=>oe!==L))},onUpgrade:()=>{window.location.href="/plans"}},L):e.jsxs(be,{severity:"error",sx:{mb:1},children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600},children:R.message}),R.details&&e.jsx(l,{variant:"caption",sx:{display:"block",mt:.5},children:R.details})]},L))}),$.length>0&&e.jsx(be,{severity:"info",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[$[0].message,": ",$[0].details]})}),h.length>0&&!n&&A.length===0&&e.jsx(ce,{sx:{p:3,mt:2,bgcolor:"grey.50",border:"1px solid",borderColor:"grey.200"},children:e.jsxs(re,{spacing:2,children:[e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(rt,{sx:{fontSize:48,color:"primary.main",mb:1}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:.5},children:"Ready to Upload"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[h.reduce((R,L)=>R+L.files.length,0)," files from ",h.length," folders"]})]}),e.jsx(U,{variant:"contained",size:"large",fullWidth:!0,onClick:qr,disabled:n||A.length>0,sx:{py:1.5,fontSize:"1.1rem",fontWeight:600},children:n?"Uploading...":"Start Upload"})]})}),e.jsx(p,{sx:{mt:3,display:"flex",gap:{xs:1,sm:2},flexDirection:{xs:"column",sm:"row"}},children:e.jsx(U,{variant:"outlined",onClick:()=>{if(T.current||n){console.warn("Cannot reset while upload is in progress");return}Yr()},disabled:n,startIcon:e.jsx(Qt,{}),fullWidth:!0,sx:{py:{xs:1.5,sm:1},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:600},children:"Reset"})})]})}),e.jsxs(jt,{open:E,onClose:()=>m(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(vt,{children:"Upload Results"}),e.jsxs(wt,{children:[e.jsxs(p,{sx:{mb:2},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Summary"}),e.jsxs(p,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(pe,{icon:e.jsx($e,{}),label:`${x.filter(R=>R.success).length} Successful`,color:"success"}),e.jsx(pe,{icon:e.jsx(dt,{}),label:`${x.filter(R=>!R.success).length} Failed`,color:"error"})]})]}),e.jsx(er,{sx:{my:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"File Details"}),e.jsx(yt,{sx:{maxHeight:400,overflow:"auto"},children:x.map((R,L)=>e.jsxs(De,{children:[e.jsx(Te,{children:R.success?e.jsx($e,{color:"success"}):e.jsx(dt,{color:"error"})}),e.jsx(Fe,{primary:R.file,secondary:R.success?R.path:R.error})]},L))})]}),e.jsx(tr,{children:e.jsx(U,{onClick:()=>m(!1),children:"Close"})})]})]})},Vo=({open:r,onClose:t,downloadInfo:s})=>{const[n,i]=d.useState(0),[a,o]=d.useState(""),[u,c]=d.useState(!1),[h,g]=d.useState(null),[x,f]=d.useState(!1);d.useEffect(()=>{r&&s&&(i(0),o("Starting download..."),c(!1),g(null),f(!1))},[r,s]);const E=()=>{u||t()},m=()=>{let b=0;const S=setInterval(()=>{b+=Math.random()*10,b>=90&&(b=90,clearInterval(S),o("Preparing download...")),i(b)},300)};return d.useEffect(()=>{r&&s&&m()},[r,s]),d.useEffect(()=>{s!=null&&s.downloadComplete&&(i(100),f(!0),o("Download complete!"))},[s==null?void 0:s.downloadComplete]),s?e.jsxs(jt,{open:r,onClose:E,maxWidth:"sm",fullWidth:!0,children:[e.jsx(vt,{children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Xt,{color:"primary"}),e.jsx(l,{variant:"h6",children:"Downloading File"})]})}),e.jsxs(wt,{children:[e.jsxs(p,{sx:{mb:2},children:[e.jsx(l,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1},children:s.isBulkDownload?`Bulk Download (${s.fileCount} files)`:s.filename}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.isBulkDownload?`${s.fileCount} files • Total size: ${(s.file_size/(1024*1024)).toFixed(2)} MB`:`Size: ${(s.file_size/(1024*1024)).toFixed(2)} MB`})]}),s.is_encrypted&&e.jsxs(be,{severity:"info",sx:{mb:2},icon:e.jsx(_t,{}),children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:["🔒 Encrypted File",s.isBulkDownload?"s":""]}),e.jsx(l,{variant:"body2",children:s.isBulkDownload?"Some files will be automatically decrypted during download.":"This file will be automatically decrypted during download."}),e.jsxs(p,{sx:{display:"flex",gap:1,mt:1},children:[e.jsx(pe,{label:"AES-GCM 256-bit",size:"small",color:"primary"}),e.jsx(pe,{label:"E2E Encrypted",size:"small",color:"success"})]})]}),h&&e.jsxs(be,{severity:"error",sx:{mb:2},icon:e.jsx(dt,{}),children:[e.jsx(l,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:"Download Failed"}),e.jsx(l,{variant:"body2",children:h})]}),x&&e.jsxs(be,{severity:"success",sx:{mb:2},icon:e.jsx($e,{}),children:[e.jsx(l,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:"Download Complete"}),e.jsx(l,{variant:"body2",children:s.isBulkDownload?s.is_encrypted?"Files downloaded and decrypted successfully!":"Files downloaded successfully!":s.is_encrypted?"File downloaded and decrypted successfully!":"File downloaded successfully!"})]}),e.jsxs(p,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",sx:{mb:1},children:a}),e.jsx(He,{variant:"determinate",value:n,sx:{height:8,borderRadius:4}}),e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[n.toFixed(1),"% complete"]})]}),u&&e.jsxs(p,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",sx:{mb:1},children:"Decrypting file..."}),e.jsx(He,{variant:"indeterminate",sx:{height:4,borderRadius:2}})]})]}),e.jsx(tr,{children:e.jsx(U,{onClick:E,disabled:u,children:x?"Close":"Cancel"})})]}):null},$n=d.memo(({currentFolder:r,onFolderSelect:t,showFolderDetails:s,setShowFolderDetails:n,searchQuery:i,setSearchQuery:a,setShowUploadArea:o,hasUploadOperations:u,onCreateFolder:c,getSelectedCount:h,filteredFiles:g,currentFolderSubfolders:x,selectAll:f,clearSelection:E,onRefresh:m,handleBulkDownload:b,handleBulkHibernate:S,handleBulkWakeUp:A,handleBulkDelete:y})=>{const $=Et();return e.jsx(p,{sx:{borderBottom:`1px solid ${v($.palette.divider,.1)}`,bgcolor:v("#ffffff",.5)},children:e.jsx(p,{sx:{px:0,pt:1.5,pb:1},children:e.jsxs(re,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",sx:{flexWrap:"nowrap",gap:1,overflowX:"auto"},children:[e.jsxs(re,{direction:"row",spacing:1,alignItems:"center",sx:{flex:"0 0 auto",whiteSpace:"nowrap"},children:[e.jsx(ti,{fontSize:"small",sx:{color:"text.secondary",cursor:"pointer"},onClick:()=>{t("root")}}),r!=="root"&&r.split("/").filter(w=>w!=="root").map((w,P,W)=>{const D=W.slice(0,P+1).join("/");return e.jsxs(Wr.Fragment,{children:[e.jsx(ri,{fontSize:"small",sx:{color:"text.secondary"}}),e.jsx(l,{variant:"body2",sx:{color:P===W.length-1?"primary.main":"text.secondary",fontWeight:P===W.length-1?600:400,cursor:"pointer","&:hover":{textDecoration:"underline"},whiteSpace:"nowrap"},onClick:()=>{t(D)},children:w})]},D)})]}),e.jsxs(re,{direction:"row",spacing:1,alignItems:"center",sx:{flex:"0 0 auto",whiteSpace:"nowrap"},children:[r!=="root"&&e.jsx(ft,{title:"Folder Details",children:e.jsx(Ye,{size:"small",onClick:()=>n(!0),children:e.jsx(ln,{fontSize:"small"})})}),e.jsx(ot,{size:"small",placeholder:"Search files...",value:i,onChange:w=>a(w.target.value),sx:{minWidth:{xs:160,md:240}}}),e.jsx(ft,{title:"Upload Files",children:e.jsx(U,{size:"small",startIcon:e.jsx(rt,{}),onClick:()=>o(!0),disabled:u,sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:"Upload"})}),e.jsx(ft,{title:"Create Folder",children:e.jsx(U,{size:"small",startIcon:e.jsx(si,{}),onClick:c,sx:{textTransform:"none",fontWeight:600},children:"New Folder"})}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",mr:1},children:[e.jsx(Fr,{checked:h()>0&&h()===g.length+x.length,indeterminate:h()>0&&h()<g.length+x.length,onChange:w=>{w.target.checked?f():E()},size:"small",sx:{color:"primary.main","&.Mui-checked":{color:"primary.main"}}}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary",ml:.5},children:"Select All"})]}),e.jsx(ft,{title:"Refresh",children:e.jsx(Ye,{onClick:m,size:"small",sx:{flex:"0 0 auto"},children:e.jsx(Qt,{fontSize:"small"})})}),h()>0&&e.jsxs(e.Fragment,{children:[e.jsx(ft,{title:`Download ${h()} items`,children:e.jsx(Ye,{onClick:b,size:"small",sx:{bgcolor:v("#3b82f6",.1),"&:hover":{bgcolor:v("#3b82f6",.2)}},children:e.jsx(Xt,{sx:{color:"#3b82f6"}})})}),e.jsx(ft,{title:`Hibernate ${h()} items`,children:e.jsx(Ye,{onClick:S,size:"small",sx:{bgcolor:v("#a78bfa",.1),"&:hover":{bgcolor:v("#a78bfa",.2)}},children:e.jsx(fs,{sx:{color:"#a78bfa"}})})}),e.jsx(ft,{title:`Wake up ${h()} items`,children:e.jsx(Ye,{onClick:A,size:"small",sx:{bgcolor:v("#fbbf24",.1),"&:hover":{bgcolor:v("#fbbf24",.2)}},children:e.jsx(Br,{sx:{color:"#fbbf24"}})})}),e.jsx(ft,{title:`Delete ${h()} items`,children:e.jsx(Ye,{onClick:y,size:"small",sx:{bgcolor:v("#ef4444",.1),"&:hover":{bgcolor:v("#ef4444",.2)}},children:e.jsx(Gt,{sx:{color:"#ef4444"}})})})]})]})]})})})});$n.displayName="FileGridToolbar";const Yo=({filteredFiles:r,encryptionEnabled:t})=>{const s=Et();return r.length===0?null:e.jsx(ce,{sx:{p:2.5,mb:3,bgcolor:"background.paper",border:`1px solid ${v(s.palette.divider,.1)}`},children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(l,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:"📊 File Status Summary"}),e.jsx(p,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(pe,{icon:e.jsx(_t,{}),label:"E2E Encryption Enabled",size:"small",color:"success",variant:"outlined"})}),(()=>{const n=r.reduce((i,a)=>(i[a.status]=(i[a.status]||0)+1,i),{});return e.jsxs(re,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(pe,{label:`Hibernated: ${n.archived||0}`,size:"small",sx:{bgcolor:v("#94a3b8",.15),color:"#475569",fontWeight:600}}),e.jsx(pe,{label:`Hibernating: ${n.archiving||0}`,size:"small",sx:{bgcolor:v("#a78bfa",.15),color:"#6b21a8",fontWeight:600}}),e.jsx(pe,{label:`Awake Mode: ${(n.uploaded||0)+(n.restored||0)}`,size:"small",sx:{bgcolor:v("#60a5fa",.15),color:"#0c4a6e",fontWeight:600}})]})})()]})})},Bn=d.memo(({uploadManagerState:r,bulkOperationStatus:t,bulkOperationType:s})=>{const i=(r.deleteOperations||[]).find(a=>a&&a.status==="deleting");if(i){const a=i.totalFiles||0,o=i.completedFiles||0;if(a>0){const c=a>0?Math.round(o/a*100):0,h=a-o;return e.jsx(rs,{in:!0,timeout:150,children:e.jsx(p,{sx:{px:{xs:2,md:3},pt:1.5},children:e.jsxs(ce,{sx:{p:2,border:`1px solid ${v("#f59e0b",.2)}`,background:`linear-gradient(135deg, ${v("#f59e0b",.05)} 0%, ${v("#f59e0b",.02)} 100%)`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.15s ease"},children:[e.jsxs(re,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(p,{sx:{p:1,borderRadius:"50%",bgcolor:v("#f59e0b",.1),display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Gt,{sx:{color:"#f59e0b",fontSize:20}})}),e.jsxs(p,{sx:{flex:1},children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:600,color:"#f59e0b"},children:["🗑️ Deleting ",h," of ",a," files"]}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[o," completed • ",h," remaining"]})]}),e.jsxs(l,{variant:"caption",sx:{fontWeight:600,color:"#f59e0b",bgcolor:v("#f59e0b",.1),px:1.5,py:.5,borderRadius:1},children:[c,"%"]})]}),e.jsx(He,{variant:"determinate",value:c,sx:{mt:1.5,height:8,borderRadius:4,bgcolor:v("#f59e0b",.1),"& .MuiLinearProgress-bar":{bgcolor:"#f59e0b",borderRadius:4}}})]})})})}}if(t==="completed"){let a="Operation completed successfully!",o=$e,u="#374151",c="#f3f4f6",h="#6b7280";return s==="delete"?(a="Deletion Completed Successfully!",o=$e,u="#374151",c="#f3f4f6",h="#6b7280"):s==="hibernate"?(a="Hibernation Completed Successfully!",o=fs,u="#6d28d9",c="#f5f3ff",h="#a78bfa"):s==="restore"&&(a="Restore Initiated Successfully!",o=Br,u="#b45309",c="#fffbeb",h="#f59e0b"),e.jsx(p,{sx:{px:{xs:2,md:3},mb:4},children:e.jsx(ce,{sx:{p:2.5,bgcolor:v(c,.6),border:"1px solid",borderColor:h},children:e.jsxs(re,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(o,{sx:{color:u}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:u},children:a})]})})})}if(t==="error"){let a="Operation failed",o=dt,u="#991b1b",c="#fee2e2",h="#ef4444";return s==="delete"?a="Some files failed to delete":s==="hibernate"?a="Hibernation failed - Active hibernation plan required":s==="restore"&&(a="Restore failed"),e.jsx(p,{sx:{px:{xs:2,md:3},mb:4},children:e.jsx(ce,{sx:{p:2.5,bgcolor:v(c,.3),border:"1px solid",borderColor:h},children:e.jsxs(re,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(o,{sx:{color:u}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:u},children:a})]})})})}if(t==="partial"){let a="Operation completed with some failures",o=dt,u="#b45309",c="#fffbeb",h="#f59e0b";return s==="hibernate"&&(a="Hibernation completed with some failures - Check hibernation plan"),e.jsx(p,{sx:{px:{xs:2,md:3},mb:4},children:e.jsx(ce,{sx:{p:2.5,bgcolor:v(c,.3),border:"1px solid",borderColor:h},children:e.jsxs(re,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(o,{sx:{color:u}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:u},children:a})]})})})}return null});Bn.displayName="BulkOperationProgress";const Ko=ni`
  0%, 100% { box-shadow: 0 0 10px rgba(167, 139, 250, 0.2); }
  50% { box-shadow: 0 0 20px rgba(167, 139, 250, 0.4); }
`,Mn=d.memo(({currentFolderSubfolders:r,filteredFiles:t,selectedFolders:s,selectedFiles:n,toggleFolderSelection:i,toggleFileSelection:a,onFolderClick:o,onFileClick:u,handleFolderToggle:c,formatFileSize:h,getFolderStatus:g})=>e.jsxs(F,{container:!0,spacing:2,children:[r.map(x=>e.jsx(F,{item:!0,xs:12,sm:6,md:3,lg:2,xl:2,children:e.jsx(rs,{in:!0,timeout:300,children:e.jsxs(Le,{sx:C({height:"100%",cursor:"pointer",transition:"all 0.3s",background:"background.paper",border:"none",position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${v("#60a5fa",.2)}`}},s.has(x.path)&&{bgcolor:v("#60a5fa",.1)}),onClick:f=>{f.target.type!=="checkbox"&&(o(x.path),c(x.path))},children:[e.jsx(p,{sx:{position:"absolute",top:8,right:8,zIndex:1},onClick:f=>f.stopPropagation(),children:e.jsx(Fr,{checked:s.has(x.path),onChange:()=>i(x.path),size:"small",sx:{color:"#60a5fa","&.Mui-checked":{color:"#60a5fa"}}})}),e.jsx(Oe,{sx:{px:1.5,py:1.5},children:e.jsxs(re,{spacing:1.5,children:[e.jsx(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:80,borderRadius:2,background:`linear-gradient(135deg, ${v("#60a5fa",.1)}, ${v("#a78bfa",.1)})`},children:e.jsx(Tr,{sx:{fontSize:48,color:"#60a5fa"}})}),e.jsxs(p,{children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600,mb:.25,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.name}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{lineHeight:1},children:[x.fileCount," files • ",h(x.size)]})]}),(()=>{const f=g(x.path);return f?e.jsx(pe,{icon:f.icon,label:f.label,size:"small",sx:{bgcolor:v(f.color,.1),color:f.color,fontWeight:600,borderRadius:1.5,border:`1px solid ${v(f.color,.3)}`,fontSize:"0.75rem",height:24}}):null})()]})})]})})},`folder-${x.path}`)),t.map(x=>{const f=cr(x.status),E=["archiving","restoring"].includes(x.status);return e.jsx(F,{item:!0,xs:12,sm:6,md:3,lg:2,xl:2,children:e.jsx(rs,{in:!0,timeout:300,children:e.jsxs(Le,{sx:C(C({height:"100%",cursor:"pointer",transition:"all 0.3s",background:"background.paper",border:"none",position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${v(f.color,.2)}`}},f.glow&&{animation:`${Ko} 2s infinite`,boxShadow:`0 0 20px ${v(f.color,.3)}`}),n.has(x.id)&&{bgcolor:v(f.color,.1)}),onClick:m=>{m.target.type!=="checkbox"&&u(x)},children:[e.jsx(p,{sx:{position:"absolute",top:8,right:8,zIndex:1},onClick:m=>m.stopPropagation(),children:e.jsx(Fr,{checked:n.has(x.id),onChange:()=>a(x.id),size:"small",sx:{color:f.color,"&.Mui-checked":{color:f.color}}})}),e.jsx(Oe,{children:e.jsxs(re,{spacing:1.5,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:80,borderRadius:2,background:`linear-gradient(135deg, ${v(f.color,.1)} 0%, ${v(f.color,.05)} 100%)`,position:"relative",overflow:"hidden"},children:[e.jsx(hr,{sx:C({fontSize:48,color:f.color},f.animation&&{animation:`${f.animation} 2s infinite`})}),E&&e.jsx(He,{sx:{position:"absolute",bottom:0,left:0,right:0,height:3,bgcolor:v(f.color,.1),"& .MuiLinearProgress-bar":{bgcolor:f.color}}})]}),e.jsx(ft,{title:x.original_filename,children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.original_filename}),x.is_encrypted&&e.jsx(ft,{title:"Encrypted with E2E encryption",children:e.jsx(_t,{sx:{fontSize:12,color:"success.main"}})})]})}),e.jsx(re,{spacing:0,children:e.jsx(l,{variant:"caption",color:"text.secondary",sx:{lineHeight:1},children:h(x.file_size)})}),e.jsx(pe,{icon:f.icon,label:f.label,size:"small",sx:{bgcolor:v(f.color,.1),color:f.color,fontWeight:600,borderRadius:1.5}})]})})]})})},x.id)})]}));Mn.displayName="FileGrid";const Nn=d.memo(({selectedFile:r,onClose:t,formatFileSize:s,formatDate:n,handleDownload:i,handleArchive:a,handleRestore:o,handleDelete:u,loadFiles:c,uploadManagerState:h})=>{const g=Et();return r?e.jsx(ii,{direction:"left",in:!!r,mountOnEnter:!0,unmountOnExit:!0,children:e.jsxs(ce,{elevation:0,sx:{width:{xs:"100%",lg:320},height:{xs:"auto",lg:"100%"},maxHeight:{xs:"400px",lg:"none"},borderRadius:0,borderLeft:{xs:"none",lg:`1px solid ${v(g.palette.divider,.1)}`},borderTop:{xs:`1px solid ${v(g.palette.divider,.1)}`,lg:"none"},background:"background.paper",display:"flex",flexDirection:"column",p:3,gap:2,flexShrink:0,overflow:"auto"},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700},children:"File Details"}),e.jsx(Ye,{size:"small",onClick:t,children:e.jsx(cn,{})})]}),e.jsx(p,{sx:{height:150,borderRadius:2,background:`linear-gradient(135deg, ${v("#60a5fa",.1)} 0%, ${v("#a78bfa",.1)} 100%)`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(hr,{sx:{fontSize:64,color:"#60a5fa"}})}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,wordBreak:"break-word"},children:r.original_filename}),e.jsx(er,{}),e.jsxs(re,{spacing:2,children:[e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Size"}),e.jsx(l,{variant:"body2",children:s(r.file_size)})]}),e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Uploaded"}),e.jsx(l,{variant:"body2",children:n(r.uploaded_at)})]}),e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Status"}),e.jsx(pe,{icon:cr(r.status).icon,label:cr(r.status).label,size:"small",sx:{mt:.5,bgcolor:v(cr(r.status).color,.1),color:cr(r.status).color,fontWeight:600}})]}),r.glacier_archive_id&&e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Archive ID"}),e.jsx(l,{variant:"caption",sx:{display:"block",mt:.5,fontFamily:"monospace",bgcolor:v("#f1f5f9",.5),p:1,borderRadius:1,wordBreak:"break-all"},children:r.glacier_archive_id})]})]}),(()=>{const x=h.items||[],f=(r==null?void 0:r.relative_path)||"";if(!f)return null;const m=x.filter(D=>D.operationType==="upload"||!D.operationType).filter(D=>{const ie=D.relativePath||"";return ie===f||ie.startsWith(f+"/")||ie.startsWith(f)}),b=m.length,S=m.filter(D=>D.status==="completed").length,A=m.filter(D=>D.status==="uploading").length,y=m.filter(D=>D.status==="queued").length,$=b>0&&(A>0||y>0),w=b>0?Math.round(m.reduce((D,ie)=>D+(ie.progress||0),0)/b):0,P=b>0?Math.max(w,Math.round(S/b*100)):0,W=A===0&&y>0;return!$&&P===0?null:e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Upload Status"}),e.jsxs(re,{direction:"row",alignItems:"center",spacing:1,sx:{mt:.5},children:[e.jsx(rt,{sx:{color:"#60a5fa"}}),e.jsx(l,{variant:"body2",sx:{fontWeight:600},children:W?"Starting uploads…":`Uploading ${Math.max(Math.floor((b-S)/100)*100,0)} of ${b} files`})]}),W?e.jsx(He,{variant:"indeterminate",sx:{mt:1,height:8,borderRadius:4}}):e.jsxs(e.Fragment,{children:[e.jsx(He,{variant:"determinate",value:P,sx:{mt:1,height:8,borderRadius:4}}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[P,"% complete • ",A," in progress • ",y," queued • ",S," completed"]})]})]})})(),e.jsx(er,{}),e.jsxs(re,{spacing:1,children:[e.jsx(U,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Xt,{}),sx:{textTransform:"none",fontWeight:600},onClick:()=>i(r),children:"Download"}),r.status==="uploaded"&&e.jsx(U,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(fs,{}),onClick:()=>j(q,null,function*(){try{yield a(r),c(!0)}catch(x){console.error("Hibernate failed:",x)}}),sx:{textTransform:"none",fontWeight:600,color:"#a78bfa",borderColor:"#a78bfa"},children:"Hibernate"}),r.status==="archived"&&e.jsx(U,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Br,{}),onClick:()=>j(q,null,function*(){try{yield o(r),yield c(!0)}catch(x){console.error("Wake failed:",x)}}),sx:{textTransform:"none",fontWeight:600,color:"#fbbf24",borderColor:"#fbbf24"},children:"Wake Up"}),e.jsx(U,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Pr,{}),sx:{textTransform:"none",fontWeight:600},children:"Share"}),e.jsx(U,{fullWidth:!0,variant:"outlined",color:"error",startIcon:e.jsx(Gt,{}),onClick:()=>j(q,null,function*(){try{yield u(r),t(),c(!0)}catch(x){console.error("Delete failed:",x)}}),sx:{textTransform:"none",fontWeight:600},children:"Delete"})]})]})}):null});Nn.displayName="FileDetailsPanel";const Gn=d.memo(({open:r,onClose:t,currentFolder:s})=>s==="root"?null:e.jsx(ai,{anchor:"right",open:r,onClose:t,sx:{zIndex:n=>n.zIndex.drawer+1},children:e.jsxs(p,{sx:{width:{xs:320,sm:360},p:3,display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700},children:"Folder Details"}),e.jsx(Ye,{size:"small",onClick:t,children:e.jsx(cn,{})})]}),e.jsx(p,{sx:{height:120,borderRadius:2,background:`linear-gradient(135deg, ${v("#60a5fa",.1)} 0%, ${v("#a78bfa",.1)} 100%)`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Tr,{sx:{fontSize:64,color:"#60a5fa"}})}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,wordBreak:"break-word"},children:s}),e.jsx(er,{})]})}));Gn.displayName="FolderDetailsDrawer";const Hn=d.memo(({open:r,count:t,onClose:s,onConfirm:n})=>e.jsxs(jt,{open:r,onClose:s,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(vt,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Gt,{color:"error"}),"Confirm Bulk Delete"]}),e.jsxs(wt,{children:[e.jsxs(l,{variant:"body1",children:["Are you sure you want to delete ",e.jsx("strong",{children:t})," items?"]}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This action cannot be undone. All selected files and folders will be permanently removed."})]}),e.jsxs(tr,{children:[e.jsx(U,{onClick:s,color:"inherit",children:"Cancel"}),e.jsxs(U,{onClick:n,color:"error",variant:"contained",startIcon:e.jsx(Gt,{}),children:["Delete ",t," Items"]})]})]}));Hn.displayName="BulkDeleteDialog";const an=r=>{if(!r)return"0 B";const t=1024,s=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(r)/Math.log(t));return`${parseFloat((r/Math.pow(t,n)).toFixed(2))} ${s[n]}`},Xo=r=>new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),Jo=d.memo(({uploadManagerState:r,files:t})=>{const s=(r==null?void 0:r.uploadTotal)||0,n=(r==null?void 0:r.uploadCompleted)||0,i=(r==null?void 0:r.uploadFailed)||0,a=(r==null?void 0:r.uploadCancelled)||0,o=(r==null?void 0:r.uploadInProgress)||0,u=(r==null?void 0:r.uploadQueued)||0,c=n+i+a,g=Math.min(c,s),x=s>0?Math.floor(g/s*100):0;if(!(s>0&&(o>0||u>0)&&x<100))return null;const m=()=>{G.cancelAllUploads()};return e.jsx(p,{sx:{px:{xs:2,md:3},pt:1.5},children:e.jsx(ce,{sx:{p:2,border:"1px solid #e0e0e0"},children:e.jsxs(re,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(rt,{sx:{color:"#60a5fa"}}),e.jsxs(p,{sx:{flex:1},children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:["📤 Uploading ",g,"/",s," files (",x,"%)",(i>0||a>0)&&e.jsxs(l,{component:"span",variant:"caption",sx:{ml:1,color:"text.secondary"},children:[i>0?`(${i} failed`:"(",a>0?`${i>0?", ":""}${a} cancelled`:"",")"]})]}),e.jsx(He,{variant:"determinate",value:x,sx:{mt:1,height:8,borderRadius:4}})]}),e.jsx(U,{variant:"outlined",color:"error",size:"small",onClick:m,sx:{minWidth:"auto"},children:"Cancel"})]})})})}),Zo=({onFileSelect:r,onFolderSelect:t,globalSearchQuery:s,isActive:n})=>{Et();const[i,a]=d.useState([]),[o,u]=d.useState([]),[c,h]=d.useState("root"),[g,x]=d.useState(new Set(["root"]));d.useState(new Set);const[f,E]=d.useState(new Set),[m,b]=d.useState(new Set),[S,A]=d.useState(""),[y,$]=d.useState(0),[w,P]=d.useState(null),[W,D]=d.useState(!1),[ie,ue]=d.useState(!0),[fe,We]=d.useState(!1);d.useState(!1);const[he,it]=d.useState({total:0,completed:0,inProgress:0,queued:0}),[Ce,z]=d.useState({open:!1,count:0}),[Ze,M]=d.useState({}),[Be,T]=d.useState(null),[ye,se]=d.useState({current:0,total:0}),[nt,Me]=d.useState(null),[qt,Vt]=d.useState({}),[js,mr]=d.useState(0),[vs,br]=d.useState(""),[Hr,qr]=d.useState(!1),Vr=!1,lr=d.useMemo(()=>he.uploadInProgress>0,[he.uploadInProgress]);d.useMemo(()=>lr?{title:"Upload in progress...",subtitle:"Please wait for current upload to complete"}:{title:y===0?"No active files":"No hibernated files",subtitle:y===0?"Click here or drag files to upload":"Hibernate some files to see them here"},[lr,y]);const{handleArchive:Yr,handleDelete:R,handleDownload:L,downloadDialogOpen:X,downloadInfo:xe,setDownloadDialogOpen:oe,setDownloadInfo:Se}=$o(ze,!0),J=d.useCallback(_=>{E(N=>{const k=new Set(N);return k.has(_)?k.delete(_):k.add(_),k})},[]),te=d.useCallback(_=>{b(N=>{const k=new Set(N);return k.has(_)?k.delete(_):k.add(_),k})},[]),ne=d.useCallback(()=>{E(new Set),b(new Set)},[]),Ve=d.useCallback(()=>f.size+m.size,[f.size,m.size]),ee=d.useCallback(()=>i.filter(_=>f.has(_.id)),[i,f]),de=d.useCallback(()=>o.filter(_=>m.has(_.path)),[o,m]),ke=(_,N)=>{const k=[];for(const V of N){const O=i.filter(H=>{var I;return(I=H.relative_path)==null?void 0:I.startsWith(V.path)}).filter(H=>H.status==="archiving");O.length>0&&k.push({type:"folder_has_hibernating_files",folder:V.name,hibernatingCount:O.length,hibernatingFiles:O.map(H=>H.original_filename)})}const Z=_.filter(V=>V.status==="archiving");return Z.length>0&&k.push({type:"files_already_hibernating",hibernatingFiles:Z.map(V=>V.original_filename)}),k},ht=d.useMemo(()=>{const _=new Map;return o.forEach(N=>{const k=N.path;let Z=[],V=N.statusCounts;if(!V&&(Z=i.filter(Y=>{var K;return(K=Y.relative_path)==null?void 0:K.startsWith(k)}),Z.length===0)){_.set(k,null);return}const Q=V||Z.reduce((Y,K)=>(Y[K.status]=(Y[K.status]||0)+1,Y),{}),O=V?Object.values(Q).reduce((Y,K)=>Y+K,0):Z.length,H=Q.archived||0,I=Q.archiving||0,le=Q.restoring||0,Ie=(Q.uploaded||0)+(Q.restored||0),je=(H+I)/O;if(le>0){_.set(k,{type:"restoring",count:le,total:O,icon:e.jsx(Br,{sx:{fontSize:14}}),color:"#fbbf24",label:`${le} waking`});return}je>=.5?_.set(k,{type:"hibernated",count:H,total:O,icon:e.jsx(St,{sx:{fontSize:14}}),color:"#94a3b8",label:`${H}/${O} hibernated`}):I>0?_.set(k,{type:"hibernating",count:I,total:O,icon:e.jsx(ts,{sx:{fontSize:14}}),color:"#a78bfa",label:`${I} hibernating`}):je>0?_.set(k,{type:"mixed",count:H,total:O,icon:e.jsx(St,{sx:{fontSize:14}}),color:"#64748b",label:`${H}/${O} hibernated`}):_.set(k,{type:"active",count:Ie,total:O,icon:e.jsx($e,{sx:{fontSize:14}}),color:"#3b82f6",label:"Active"})}),_},[i,o]),Ke=d.useCallback(_=>ht.get(_)||null,[ht]),Ne=()=>j(q,null,function*(){var Q,O;const _=ee(),N=de(),k=ke(_,N);if(k.length>0){let H=`❄️ Cannot hibernate due to conflicts:

`;k.forEach(I=>{I.type==="folder_has_hibernating_files"?(H+=`• Folder "${I.folder}" has ${I.hibernatingCount} files already hibernating
`,H+=`  Files: ${I.hibernatingFiles.slice(0,3).join(", ")}${I.hibernatingFiles.length>3?"...":""}

`):I.type==="files_already_hibernating"&&(H+=`• ${I.hibernatingFiles.length} selected files are already hibernating
`,H+=`  Files: ${I.hibernatingFiles.slice(0,3).join(", ")}${I.hibernatingFiles.length>3?"...":""}

`)}),H+="Please wait for current hibernation to complete or select different files/folders.",alert(H);return}const Z=[..._];for(const H of N)try{const I=yield Ee.getFiles({folder:H.path,paginate:!1});I.data&&Array.isArray(I.data.files)&&Z.push(...I.data.files)}catch(I){}const V=Z.filter(H=>H.status==="uploaded"||H.status==="restored");if(V.length===0){alert('No files available for hibernation. Files must be in "uploaded" or "restored" state.');return}try{const H=yield Lt.getCurrentPlan(),I=H==null?void 0:H.data;if(!I||I.is_free_tier){Me("hibernate"),T("error");return}}catch(H){Me("hibernate"),T("error");return}Me("hibernate"),T("in_progress"),M({}),V.forEach(H=>{M(I=>ve(C({},I),{[H.id]:{status:"pending",progress:0}}))});try{let H=0,I=0,le=!1;const Ie=10,je=[];for(let Y=0;Y<V.length;Y+=Ie)je.push(V.slice(Y,Y+Ie));se({current:0,total:je.length});for(let Y=0;Y<je.length;Y++){const K=je[Y];se({current:Y+1,total:je.length}),K.forEach(ae=>{M(Pe=>ve(C({},Pe),{[ae.id]:{status:"in_progress",progress:50}}))});const me=K.map(ae=>ae.id);try{const ae=yield Ee.bulkArchiveFiles(me),Pe=((Q=ae==null?void 0:ae.data)==null?void 0:Q.failed_files)||[],ge=new Set(Pe.map(_e=>_e.id));K.forEach(_e=>{ge.has(_e.id)?(M(tt=>ve(C({},tt),{[_e.id]:{status:"error",progress:0}})),I++):(M(tt=>ve(C({},tt),{[_e.id]:{status:"completed",progress:100}})),H++)})}catch(ae){((O=ae==null?void 0:ae.response)==null?void 0:O.status)===402&&(le=!0),K.forEach(Pe=>{M(ge=>ve(C({},ge),{[Pe.id]:{status:"error",progress:0}})),I++})}if(le){T("error");break}Y<je.length-1&&(yield new Promise(ae=>setTimeout(ae,1e3)))}I>0&&H===0?T("error"):I>0?T("partial"):T("completed"),setTimeout(()=>{ne(),ze(!0),T(null),M({}),Me(null)},2e3)}catch(H){console.error("Bulk hibernation failed:",H),T("error"),setTimeout(()=>{T(null),M({}),Me(null)},3e3)}}),Ue=()=>j(q,null,function*(){const _=ee(),N=de();try{const k=_.filter(V=>V.status==="archived").map(V=>V.id);for(const V of N)try{const Q=yield Ee.getFiles({folder:V.path,paginate:!1});Q.data&&Array.isArray(Q.data.files)&&Q.data.files.forEach(O=>{O.status==="archived"&&k.push(O.id)})}catch(Q){}const Z=25;for(let V=0;V<k.length;V+=Z){const Q=k.slice(V,V+Z);Q.length>0&&(yield Ee.bulkRestoreFiles(Q,"Standard"),yield new Promise(O=>setTimeout(O,500)))}ne(),ze(!0)}catch(k){console.error("Bulk wake up failed:",k)}}),Ge=()=>j(q,null,function*(){if(Ge.active)return;Ge.active=!0;const _=Date.now(),N={current:0},k=ee(),Z=de();if(k.length===0&&Z.length===0)return;const V=[...k];for(const O of Z)try{const H=yield Ee.getFiles({folder:O.path,paginate:!1});H.data&&Array.isArray(H.data.files)&&V.push(...H.data.files)}catch(H){}const Q=V.filter(O=>O.status==="uploaded"||O.status==="restored");if(Q.length===0){alert('No files available for download. Files must be in "uploaded" or "restored" state.');return}try{Se({filename:`bulk_download_${Date.now()}.zip`,file_size:Q.reduce((K,me)=>K+me.file_size,0),is_encrypted:Q.some(K=>K.is_encrypted),encryption_metadata:null,isBulkDownload:!0,fileCount:Q.length}),oe(!0);const O=Q.map(K=>K.id),I=(yield Ee.bulkDownloadFiles(O)).data.download_urls;let le=I.length>10&&typeof Worker!="undefined",Ie;if(le)try{Ie=yield new Promise((K,me)=>{const ae=new Worker(`/download-worker.js?v=${Date.now()}`);let Pe=0,ge=0;ae.onmessage=_e=>{const{type:tt,payload:Re}=_e.data;if(tt==="PROGRESS"){const yr=Date.now(),$t=Math.max(N.current,Math.min(99,Re.progress||0));($t-Pe>=1||yr-ge>=100)&&(N.current=$t,Pe=$t,ge=yr,Se(Bt=>ve(C({},Bt),{progress:$t,message:Re.message})))}else tt==="COMPLETE"?(ae.terminate(),K(Re.zipBlob)):tt==="ERROR"&&(ae.terminate(),me(new dt(Re.error)))},ae.onerror=_e=>{ae.terminate(),me(_e)},ae.postMessage({type:"START_DOWNLOAD",payload:{downloadUrls:I,encryptionKey:Je.isEnabled()?!0:null,sessionId:_}})})}catch(K){console.warn("Worker failed, falling back to main thread:",K),le=!1}if(!le){const K=(yield hs(()=>import("./utils-76a9f601.js").then(ge=>ge.j),["assets/utils-76a9f601.js","assets/vendor-950dbbc1.js"])).default,me=new K,ae=5,Pe=[];for(let ge=0;ge<I.length;ge+=ae){const tt=I.slice(ge,ge+ae).map((Re,yr)=>j(q,null,function*(){const $t=ge+yr;if(Re.error){console.error(`Download failed for ${Re.filename}: ${Re.error}`);return}try{const Bt=yield fetch(Re.download_url);if(!Bt.ok)throw new dt(`Failed to download ${Re.filename}: ${Bt.status}`);let jr=yield Bt.blob(),Kr=Re.filename;if(Re.is_encrypted&&Re.encryption_metadata&&Je.isEnabled())try{const Yt=new File([jr],Re.filename,{type:jr.type}),_s=yield Je.decryptFileAfterDownload(Yt,Re.encryption_metadata);jr=_s,Kr=_s.name}catch(Yt){throw console.error(`Decryption failed for ${Re.filename}:`,Yt),new dt(`Decryption failed for ${Re.filename}: ${Yt.message}`)}else if(Re.is_encrypted&&!Je.isEnabled())throw new dt(`File ${Re.filename} is encrypted but encryption service is not enabled.`);const ws=Re.relative_path||"",Kn=ws?`${ws}/${Kr}`:Kr;me.file(Kn,jr);const Xn=Math.round(($t+1)/I.length*90);Se(Yt=>ve(C({},Yt),{progress:Xn,message:`Processing ${$t+1}/${I.length} files...`}))}catch(Bt){console.error(`Failed to process ${Re.filename}:`,Bt)}}));Pe.push(...tt)}yield Promise.all(Pe),Se(ge=>ve(C({},ge),{progress:Math.max(N.current,95),message:"Creating ZIP..."})),Ie=yield me.generateAsync({type:"blob"})}const je=window.URL.createObjectURL(Ie),Y=document.createElement("a");Y.href=je,Y.download=`download_${Date.now()}.zip`,Y.style.display="none",document.body.appendChild(Y),Y.click(),setTimeout(()=>{document.body.removeChild(Y),window.URL.revokeObjectURL(je)},2e3),Se(K=>ve(C({},K),{progress:100,downloadComplete:!0})),setTimeout(()=>{oe(!1),ne()},3e3)}catch(O){oe(!1),alert(`Bulk download failed: ${O.message}`)}finally{Ge.active=!1}}),Qe=()=>{const _=ee(),N=de();if(_.length===0&&N.length===0)return;const k=N.reduce((V,Q)=>V+(Q.fileCount||0),0),Z=_.length+k;z({open:!0,count:Z})},we=()=>j(q,null,function*(){const _=ee(),N=de();z({open:!1,count:0});const k=[..._];for(const Q of N)try{const O=yield Ee.getFiles({folder:Q.path,paginate:!1});O.data&&Array.isArray(O.data.files)&&k.push(...O.data.files)}catch(O){console.error(`Error fetching files for folder ${Q.path}:`,O)}const Z=k.map(Q=>Q.id),V=G.addDeleteOperation(Z,"delete");Me("delete"),T("in_progress"),M({}),k.forEach(Q=>{M(O=>ve(C({},O),{[Q.id]:{status:"pending",progress:0}}))});try{G.updateDeleteOperation(V,{status:"deleting",progress:0,completedFiles:0});const Q=1e3,O=[];for(let le=0;le<Z.length;le+=Q)O.push(Z.slice(le,le+Q));se({current:0,total:O.length});let H=0,I=0;for(let le=0;le<O.length;le++){const Ie=O[le];try{se({current:le+1,total:O.length}),M(Pe=>{const ge=C({},Pe);return Ie.forEach(_e=>{ge[_e]={status:"in_progress",progress:50}}),ge});const je=yield Ee.bulkDeleteFiles(Ie),{summary:Y,failed_files:K}=je.data;H+=Y.successfully_deleted,I+=Y.failed_deletions||0,Ie.forEach(Pe=>{const ge=K?K.find(_e=>_e.file_id===Pe):null;M(ge?_e=>ve(C({},_e),{[Pe]:{status:"error",progress:0}}):_e=>ve(C({},_e),{[Pe]:{status:"completed",progress:100}}))});const me=H+I,ae=Math.round(me/Z.length*100);G.updateDeleteOperation(V,{status:"uploading",progress:ae,completedFiles:me}),le<O.length-1&&(yield new Promise(Pe=>setTimeout(Pe,100)))}catch(je){console.error(`Batch ${le+1} failed:`,je),Ie.forEach(Y=>{M(K=>ve(C({},K),{[Y]:{status:"error",progress:0}}))}),I+=Ie.length}}T("completed"),G.updateDeleteOperation(V,{status:"completed",progress:100,completedFiles:H+I}),setTimeout(()=>j(q,null,function*(){ne(),yield ze(!0);try{const le=yield Ee.getFolderStructure(!0)}catch(le){console.error("[Bulk Delete] Failed to refresh folder structure:",le)}T(null),M({}),Me(null),G.queue=G.queue.filter(le=>le.id!==V),G._emit()}),2e3)}catch(Q){console.error("Bulk delete failed:",Q),T("error"),G.updateDeleteOperation(V,{status:"failed",progress:0,error:Q.message}),setTimeout(()=>{T(null),M({}),Me(null),G.queue=G.queue.filter(O=>O.id!==V),G._emit()},3e3)}});d.useEffect(()=>{ze()},[]),d.useEffect(()=>{n&&ze(!0)},[n]),d.useEffect(()=>{const _=setTimeout(()=>{ze(!0)},100);return()=>clearTimeout(_)},[c,S]),d.useEffect(()=>{const _=()=>{const k=Je.getEncryptionStatus();qr(k.enabled)};_();const N=setInterval(_,5e3);return()=>clearInterval(N)},[]),d.useEffect(()=>{let _,N=0;const k=500;return G.init().then(()=>{const Z=G.getState();Z&&it(Z),_=G.subscribe(V=>{if(!V)return;const Q=Date.now(),O=V.uploadInProgress>0||V.uploadQueued>0,H=he.uploadInProgress>0||he.uploadQueued>0;(O!==H||Q-N>=k)&&(N=Q,it(V))})}),()=>{_==null||_()}},[]),d.useEffect(()=>{const _=he;if(!_)return;if(_.uploadTotal>0&&_.uploadInProgress===0&&_.uploadQueued===0){const k=setTimeout(()=>j(q,null,function*(){yield G.clearAll(),fe||ze(!0)}),1200);return()=>clearTimeout(k)}},[he==null?void 0:he.uploadTotal,he==null?void 0:he.uploadInProgress,he==null?void 0:he.uploadQueued,fe]),d.useEffect(()=>{const _=setTimeout(()=>{A(s||"")},100);return()=>clearTimeout(_)},[s]);function ze(_=!1){return j(this,null,function*(){if(!(ie&&!_))try{if(ue(!0),!st.getAccessToken()){console.error("No authentication token found"),a([]),u([]);return}const k=yield Ee.getFiles({folder:c==="root"?"root":c,search:(S==null?void 0:S.trim())||"",paginate:!1,cacheBust:_?Date.now():void 0});if(k.status!==200){console.error("API returned non-200 status:",k.status),a([]),u([]);return}let Z=[],V=[];k.data&&Array.isArray(k.data.files)?(Z=k.data.files,V=k.data.folders||[]):Array.isArray(k.data)?Z=k.data:k.data&&Array.isArray(k.data.data)&&(Z=k.data.data),Array.isArray(Z)||(Z=[]);const Q=V.map(I=>({id:`folder_${I.name}`,original_filename:I.name,file_type:"folder",file_size:I.size||0,relative_path:I.relative_path,status:"uploaded",uploaded_at:new Date().toISOString(),fileCount:I.fileCount,size:I.size||0}));Z=[...Z,...Q];const O=new Map,H=[];if(Z.forEach(I=>{if(I.file_type==="folder"){const Y=(I.relative_path||"").split("/").filter(K=>K!=="");if(Y.length===0||Y.length===1&&Y[0]===I.original_filename){const K=I.original_filename;O.set(K,{name:I.original_filename,path:K,parent:"root",fileCount:I.fileCount||0,size:I.size||0,isCalculated:!1})}else{let K="root";Y.forEach((ae,Pe)=>{const ge=K==="root"?ae:`${K}/${ae}`;O.has(ge)||O.set(ge,{name:ae,path:ge,parent:K,fileCount:0,size:0,isCalculated:!0}),K=ge});const me=O.get(K);me&&(me.fileCount=I.fileCount||me.fileCount||0,me.size=I.size||me.size||0,me.isCalculated=!1)}return}const Ie=(I.relative_path||I.s3_key||"").split("/").filter(je=>je!=="");if(Ie.length===0)H.push(I);else{let je="root";Ie.forEach((Y,K)=>{const me=je==="root"?Y:`${je}/${Y}`;O.has(me)||O.set(me,{name:Y,path:me,parent:je,fileCount:0,size:0}),je=me}),H.push(I)}}),Z.forEach(I=>{if(I.file_type==="folder")return;const Ie=(I.relative_path||I.s3_key||"").split("/").filter(Y=>Y!=="");let je="root";Ie.forEach((Y,K)=>{const me=je==="root"?Y:`${je}/${Y}`,ae=O.get(me);ae&&(ae.isCalculated||!ae.fileCount&&!ae.size)&&(ae.fileCount+=1,ae.size+=I.file_size||0),je=me})}),c==="root"&&Z.length>0&&Z.every(I=>I.file_type==="folder")){const I=Z.filter(le=>le.file_type==="folder"&&(!le.relative_path||le.relative_path==="")).map(le=>j(this,null,function*(){try{const Y=((yield Ee.getFiles({folder:le.original_filename,search:"",paginate:!1})).data.files||[]).filter(_e=>_e.file_type!=="folder"),K=Y.length,me=Y.filter(_e=>_e.file_type!=="folder").reduce((_e,tt)=>_e+(tt.file_size||0),0),ae=Y.reduce((_e,tt)=>(_e[tt.status]=(_e[tt.status]||0)+1,_e),{}),Pe=le.original_filename,ge=O.get(Pe);return ge&&(ge.fileCount=K,ge.size=me,ge.statusCounts=ae),{folderPath:Pe,fileCount:K,size:me,statusCounts:ae}}catch(Ie){return console.error(`Error getting stats for folder ${le.original_filename}:`,Ie),{folderPath:le.original_filename,fileCount:0,size:0,statusCounts:{}}}}));yield Promise.all(I)}a(H),u(Array.from(O.values()))}catch(N){console.error("Error loading files:",N)}finally{ue(!1)}})}const et=d.useMemo(()=>{if(!i||i.length===0)return[];let _=i;if(S){const N=S.toLowerCase();_=i.filter(k=>{const Z=(k.original_filename||"").toLowerCase(),V=(k.relative_path||k.s3_key||"").toLowerCase();return Z.includes(N)||V.includes(N)})}else _=_.filter(N=>{const k=N.relative_path||"";return c==="root"?!k||k==="":k===c});return _},[i,y,S,c]),Ot=d.useMemo(()=>{if(S)return[];let _;return c==="root"?_=o.filter(N=>N.parent==="root"):_=o.filter(N=>N.parent===c),_},[o,c,S]),Vn=d.useCallback(()=>{const _=new Set(et.map(k=>k.id)),N=new Set(Ot.map(k=>k.path));E(_),b(N)},[et,Ot]),Yn=d.useCallback(_=>{x(N=>{const k=new Set(N);return k.has(_)?k.delete(_):k.add(_),k})},[]);return e.jsxs(p,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},height:"calc(100vh - 100px)",bgcolor:"background.default",borderRadius:0,overflow:"hidden",position:"relative"},children:[Vr,e.jsxs(p,{sx:{flex:1,display:"flex",flexDirection:"column",position:"relative",minWidth:0,overflow:"hidden"},children:[e.jsx($n,{currentFolder:c,onFolderSelect:_=>{h(_),t==null||t(_)},showFolderDetails:W,setShowFolderDetails:D,searchQuery:S,setSearchQuery:A,setShowUploadArea:We,hasUploadOperations:lr,onCreateFolder:d.useCallback(()=>j(q,null,function*(){var N,k;const _=prompt("Enter folder name:");if(_&&_.trim())try{const Z=yield Ee.createFolder(_.trim(),c==="root"?"":c);alert(`Folder "${_.trim()}" created successfully!`),yield ze(!0)}catch(Z){const V=((k=(N=Z.response)==null?void 0:N.data)==null?void 0:k.error)||"Failed to create folder";alert(`Error: ${V}`)}}),[c]),getSelectedCount:Ve,filteredFiles:et,currentFolderSubfolders:Ot,selectAll:Vn,clearSelection:ne,onRefresh:ze,handleBulkDownload:Ge,handleBulkHibernate:Ne,handleBulkWakeUp:Ue,handleBulkDelete:Qe}),e.jsx(Jo,{uploadManagerState:he,files:i}),e.jsx(Bn,{uploadManagerState:he,bulkOperationStatus:Be,bulkOperationType:nt}),e.jsxs(p,{sx:{flex:1,overflow:"auto",pt:{xs:2,md:3},pr:{xs:2,md:2},pb:{xs:2,md:3},pl:{xs:2,md:3}},children:[e.jsx(Yo,{filteredFiles:et,encryptionEnabled:Hr}),fe?e.jsxs(p,{children:[e.jsx(p,{sx:{mb:4,p:2.5,bgcolor:v("#f0f9ff",.5),borderRadius:2},children:e.jsxs(re,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(rt,{sx:{color:"#60a5fa"}}),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600},children:"Upload Files"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Uploading to: ",e.jsx("strong",{children:c==="root"?"Root Directory":c})]})]}),e.jsx(p,{sx:{flex:1}}),e.jsx(Ye,{onClick:()=>We(!1),sx:{bgcolor:v("#ef4444",.1),"&:hover":{bgcolor:v("#ef4444",.2)}},children:e.jsx(dn,{sx:{color:"#ef4444"}})})]})}),e.jsx(On,{open:!0,onClose:()=>We(!1),onUploadComplete:()=>{We(!1),mr(0),br(""),ze(!0)},onUploadProgress:(_,N)=>{Vt(k=>ve(C({},k),{[N]:_})),typeof N=="string"&&N.includes("files")&&(mr(Math.round(_)),br(N))},defaultRelativePath:c==="root"?"":c})]}):null,!fe&&ie?e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(He,{sx:{width:"50%"}})}):fe?null:e.jsx(Mn,{currentFolderSubfolders:Ot,filteredFiles:et,selectedFolders:m,selectedFiles:f,toggleFolderSelection:te,toggleFileSelection:J,onFolderClick:_=>{h(_),t==null||t(_)},onFileClick:_=>{P(_),r==null||r(_,"view")},handleFolderToggle:Yn,formatFileSize:an,getFolderStatus:Ke})]})]}),e.jsx(Nn,{selectedFile:w,onClose:()=>P(null),formatFileSize:an,formatDate:Xo,handleDownload:L,handleArchive:Yr,handleRestore:_=>j(q,null,function*(){yield Ee.restoreFile(_.id,"Standard"),yield ze(!0)}),handleDelete:R,loadFiles:ze,uploadManagerState:he}),e.jsx(Gn,{open:W&&!w,onClose:()=>D(!1),currentFolder:c}),e.jsx(Hn,{open:Ce.open,count:Ce.count,onClose:()=>z({open:!1,count:0}),onConfirm:we}),e.jsx(Vo,{open:X,onClose:()=>oe(!1),downloadInfo:xe})]})},Qo=r=>!r||typeof r!="string"?"":r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/<iframe[^>]*>.*?<\/iframe>/gi,"").replace(/<object[^>]*>.*?<\/object>/gi,"").replace(/<embed[^>]*>.*?<\/embed>/gi,"").replace(/<form[^>]*>.*?<\/form>/gi,"").replace(/<input[^>]*>/gi,"").replace(/<textarea[^>]*>.*?<\/textarea>/gi,"").replace(/<select[^>]*>.*?<\/select>/gi,"").replace(/<link[^>]*>/gi,"").replace(/<meta[^>]*>/gi,"").replace(/<style[^>]*>.*?<\/style>/gi,"").replace(/<base[^>]*>/gi,"").replace(/<applet[^>]*>.*?<\/applet>/gi,"").replace(/<param[^>]*>/gi,"").replace(/<blink[^>]*>.*?<\/blink>/gi,"").replace(/<marquee[^>]*>.*?<\/marquee>/gi,"").replace(/<keygen[^>]*>/gi,"").replace(/<isindex[^>]*>/gi,"").replace(/<listing[^>]*>.*?<\/listing>/gi,"").replace(/<plaintext[^>]*>.*?<\/plaintext>/gi,"").replace(/<xmp[^>]*>.*?<\/xmp>/gi,"").replace(/<xml[^>]*>.*?<\/xml>/gi,"").replace(/<svg[^>]*>.*?<\/svg>/gi,"").replace(/<math[^>]*>.*?<\/math>/gi,"").substring(0,1e3),el=({open:r,file:t,onClose:s,onAction:n,loading:i=!1})=>{const[a,o]=d.useState(0),[u,c]=d.useState(null),[h,g]=d.useState(!1);d.useEffect(()=>(t&&r&&x(),()=>{u&&URL.revokeObjectURL(u)}),[t,r]);const x=()=>j(q,null,function*(){if(t){g(!0);try{(t.file_type.startsWith("image/")||t.file_type.startsWith("video/"))&&c("/api/placeholder/400/300")}catch($){console.error("Error generating preview:",$)}finally{g(!1)}}}),f=$=>{const w=$.file_type.toLowerCase();return w.startsWith("image/")?e.jsx(li,{color:"primary",sx:{fontSize:48}}):w.startsWith("video/")?e.jsx(ci,{color:"secondary",sx:{fontSize:48}}):w.startsWith("audio/")?e.jsx(di,{color:"success",sx:{fontSize:48}}):w.includes("pdf")||w.includes("document")?e.jsx(Ps,{color:"error",sx:{fontSize:48}}):w.includes("text")||w.includes("code")?e.jsx(un,{color:"info",sx:{fontSize:48}}):w.includes("zip")||w.includes("archive")?e.jsx(kt,{color:"warning",sx:{fontSize:48}}):e.jsx(hr,{color:"action",sx:{fontSize:48}})},E=$=>{switch($){case"uploaded":return e.jsx(dr,{color:"success"});case"archiving":return e.jsx(Rs,{color:"warning"});case"archived":return e.jsx(kt,{color:"info"});case"restoring":return e.jsx(Rs,{color:"warning"});case"restored":return e.jsx(dr,{color:"success"});case"failed":return e.jsx(ui,{color:"error"});default:return e.jsx(rt,{color:"action"})}},m=$=>{switch($){case"uploaded":return"success";case"archiving":return"warning";case"archived":return"info";case"restoring":return"warning";case"restored":return"success";case"failed":return"error";default:return"default"}},b=$=>{if($===0)return"0 Bytes";const w=1024,P=["Bytes","KB","MB","GB","TB"],W=Math.floor(Math.log($)/Math.log(w));return parseFloat(($/Math.pow(w,W)).toFixed(2))+" "+P[W]},S=$=>new Date($).toLocaleString(),A=$=>{n&&n(t,$)},y=($,w)=>{o(w)};return t?e.jsxs(jt,{open:r,onClose:s,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"90vh"}},children:[e.jsx(vt,{children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2},children:[f(t),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",noWrap:!0,sx:{maxWidth:400},children:t.original_filename}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(pe,{icon:E(t.status),label:t.status,color:m(t.status),size:"small"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:b(t.file_size)})]})]})]}),e.jsx(Ye,{onClick:s,children:e.jsx(dn,{})})]})}),e.jsxs(wt,{sx:{p:0},children:[e.jsx(p,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(ps,{value:a,onChange:y,children:[e.jsx(Kt,{label:"Preview"}),e.jsx(Kt,{label:"Details"}),e.jsx(Kt,{label:"History"}),e.jsx(Kt,{label:"Actions"})]})}),e.jsxs(p,{sx:{p:3},children:[a===0&&e.jsxs(p,{children:[e.jsx(ce,{sx:{p:3,textAlign:"center",mb:3},children:h?e.jsxs(p,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(He,{sx:{width:"100%"}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Loading preview..."})]}):t.file_type.startsWith("image/")?e.jsxs(p,{children:[e.jsx("img",{src:u||"/api/placeholder/400/300",alt:Qo(t.original_filename),style:{maxWidth:"100%",maxHeight:400,objectFit:"contain",borderRadius:8},onError:$=>{$.target.style.display="none",$.target.nextSibling.style.display="block"}}),e.jsx(p,{sx:{display:"none",mt:2},children:e.jsx(be,{severity:"info",children:"Preview not available for this image"})})]}):t.file_type.startsWith("video/")?e.jsx(p,{children:e.jsxs("video",{controls:!0,style:{maxWidth:"100%",maxHeight:400,borderRadius:8},children:[e.jsx("source",{src:u||"/api/placeholder/400/300",type:t.file_type}),"Your browser does not support the video tag."]})}):e.jsxs(p,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[f(t),e.jsx(l,{variant:"h6",color:"text.secondary",children:"Preview not available"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"This file type cannot be previewed"})]})}),e.jsxs(F,{container:!0,spacing:2,children:[e.jsx(F,{item:!0,xs:12,sm:6,md:3,children:e.jsx(U,{variant:"outlined",startIcon:e.jsx(Xt,{}),fullWidth:!0,onClick:()=>A("download"),children:"Download"})}),t.status==="uploaded"&&e.jsx(F,{item:!0,xs:12,sm:6,md:3,children:e.jsx(U,{variant:"outlined",startIcon:e.jsx(kt,{}),fullWidth:!0,onClick:()=>A("archive"),children:"Put to Sleep"})}),t.status==="archived"&&e.jsx(F,{item:!0,xs:12,sm:6,md:3,children:e.jsx(U,{variant:"outlined",startIcon:e.jsx(_r,{}),fullWidth:!0,onClick:()=>A("restore"),children:"Restore"})}),e.jsx(F,{item:!0,xs:12,sm:6,md:3,children:e.jsx(U,{variant:"outlined",startIcon:e.jsx(Pr,{}),fullWidth:!0,onClick:()=>A("share"),children:"Share"})})]})]}),a===1&&e.jsxs(p,{children:[e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Le,{children:e.jsxs(Oe,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"File Information"}),e.jsxs(yt,{dense:!0,children:[e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx(hr,{})}),e.jsx(Fe,{primary:"Filename",secondary:t.original_filename})]}),e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx(gt,{})}),e.jsx(Fe,{primary:"Size",secondary:b(t.file_size)})]}),e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx(Ps,{})}),e.jsx(Fe,{primary:"Type",secondary:t.file_type})]}),e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx(oi,{})}),e.jsx(Fe,{primary:"Uploaded",secondary:S(t.uploaded_at)})]}),t.archived_at&&e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx(kt,{})}),e.jsx(Fe,{primary:"Archived",secondary:S(t.archived_at)})]})]})]})})}),e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Le,{children:e.jsxs(Oe,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Status & Metadata"}),e.jsxs(yt,{dense:!0,children:[e.jsxs(De,{children:[e.jsx(Te,{children:E(t.status)}),e.jsx(Fe,{primary:"Status",secondary:t.status}),e.jsx(pe,{label:t.status,color:m(t.status),size:"small"})]}),t.checksum&&e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx($e,{})}),e.jsx(Fe,{primary:"Checksum",secondary:t.checksum})]}),t.glacier_archive_id&&e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx(kt,{})}),e.jsx(Fe,{primary:"Glacier ID",secondary:t.glacier_archive_id})]}),t.restore_tier&&e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx($r,{})}),e.jsx(Fe,{primary:"Restore Tier",secondary:t.restore_tier})]})]})]})})})]}),t.description&&e.jsx(Le,{sx:{mt:3},children:e.jsxs(Oe,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Description"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:t.description})]})})]}),a===2&&e.jsxs(p,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"File History"}),e.jsxs(yt,{children:[e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx(rt,{color:"primary"})}),e.jsx(Fe,{primary:"File uploaded",secondary:S(t.uploaded_at)})]}),t.status==="archived"&&e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx(kt,{color:"info"})}),e.jsx(Fe,{primary:"File archived",secondary:t.archived_at?S(t.archived_at):"Recently"})]}),t.status==="restored"&&e.jsxs(De,{children:[e.jsx(Te,{children:e.jsx(_r,{color:"success"})}),e.jsx(Fe,{primary:"File restored",secondary:"Recently"})]})]})]}),a===3&&e.jsxs(p,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Available Actions"}),e.jsxs(F,{container:!0,spacing:2,children:[e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Xt,{color:"primary",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Download"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Download this file to your device"}),e.jsx(U,{variant:"contained",startIcon:e.jsx(Xt,{}),fullWidth:!0,onClick:()=>A("download"),children:"Download"})]})})}),t.status==="uploaded"&&e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(kt,{color:"info",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Archive"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Move file to Glacier for long-term storage"}),e.jsx(U,{variant:"contained",startIcon:e.jsx(kt,{}),fullWidth:!0,onClick:()=>A("archive"),children:"Archive"})]})})}),t.status==="archived"&&e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(_r,{color:"warning",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Restore"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Restore file from Glacier (takes 3-5 hours)"}),e.jsx(U,{variant:"contained",startIcon:e.jsx(_r,{}),fullWidth:!0,onClick:()=>A("restore"),children:"Restore"})]})})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Pr,{color:"success",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Share"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Generate a shareable link"}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(Pr,{}),fullWidth:!0,onClick:()=>A("share"),children:"Share"})]})})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Is,{color:"action",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Rename"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Change the filename"}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(Is,{}),fullWidth:!0,onClick:()=>A("rename"),children:"Rename"})]})})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Gt,{color:"error",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Delete"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Permanently delete this file"}),e.jsx(U,{variant:"outlined",color:"error",startIcon:e.jsx(Gt,{}),fullWidth:!0,onClick:()=>A("delete"),children:"Delete"})]})})})]})]})]})]}),e.jsx(tr,{children:e.jsx(U,{onClick:s,children:"Close"})})]}):null},tl=({open:r,onClose:t,onPasswordSet:s})=>{const[n,i]=d.useState(""),[a,o]=d.useState(""),[u,c]=d.useState(!1),[h,g]=d.useState(!1),[x,f]=d.useState(!1),[E,m]=d.useState(""),[b,S]=d.useState(!1),[A,y]=d.useState(0),[$,w]=d.useState(""),[P,W]=d.useState(null),D=ue=>j(q,null,function*(){if(ue.preventDefault(),m(""),W(null),!n){m("Password is required");return}if(n.length<8){m("Password must be at least 8 characters long");return}if(n!==a){m("Passwords do not match");return}S(!0),y(0),w("Initializing encryption...");try{y(25),w("Setting up encryption keys..."),yield Je.initializeEncryption(n),y(50),w("Testing encryption...");const fe=yield Je.testEncryption();if(W(fe),!fe.success)throw new dt(fe.error||"Encryption test failed");y(75),w("Finalizing setup..."),x&&(localStorage.setItem("encryption_enabled","true"),localStorage.setItem("encryption_initialized",Date.now().toString())),y(100),w("Encryption ready!"),yield new Promise(We=>setTimeout(We,500)),s(n),i(""),o(""),t()}catch(fe){console.error("Encryption initialization failed:",fe),m(`Encryption setup failed: ${fe.message}`),Je.disableEncryption()}finally{S(!1),y(0),w("")}}),ie=()=>{b||(i(""),o(""),m(""),W(null),t())};return e.jsxs(jt,{open:r,onClose:ie,maxWidth:"sm",fullWidth:!0,children:[e.jsx(vt,{children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ut,{color:"primary"}),e.jsx(l,{variant:"h6",children:"Set Master Password"})]})}),e.jsxs(wt,{children:[e.jsxs(be,{severity:"info",sx:{mb:2},children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1},children:"🔒 True End-to-End Encryption"}),e.jsxs(l,{variant:"body2",sx:{mb:1},children:["Your master password encrypts all files using ",e.jsx("strong",{children:"AES-GCM 256-bit encryption"})," before upload. Only you can decrypt them - not even we can access your files."]}),e.jsxs(p,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:[e.jsx(pe,{label:"AES-GCM 256-bit",size:"small",color:"primary"}),e.jsx(pe,{label:"PBKDF2 (100k iterations)",size:"small",color:"primary"}),e.jsx(pe,{label:"Zero-Knowledge",size:"small",color:"primary"}),e.jsx(pe,{label:"Open Source",size:"small",color:"success"})]}),e.jsx(l,{variant:"body2",sx:{mt:1,fontStyle:"italic"},children:"Choose a strong password and keep it safe - it cannot be recovered if lost."})]}),E&&e.jsx(be,{severity:"error",sx:{mb:2},children:E}),P&&e.jsxs(be,{severity:P.success?"success":"error",sx:{mb:2},icon:P.success?e.jsx($e,{}):e.jsx(dt,{}),children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1},children:P.success?"✅ Encryption Test Passed":"❌ Encryption Test Failed"}),e.jsx(l,{variant:"body2",children:P.message}),P.success&&e.jsxs(l,{variant:"body2",sx:{mt:1},children:["Duration: ",P.duration,"ms | Compression: ",P.compressionRatio,"x"]})]}),b&&e.jsxs(p,{sx:{mb:2},children:[e.jsx(l,{variant:"body2",sx:{mb:1},children:$}),e.jsx(He,{variant:"determinate",value:A,sx:{height:8,borderRadius:4}})]}),e.jsxs(p,{component:"form",onSubmit:D,children:[e.jsx(ot,{fullWidth:!0,label:"Master Password",type:u?"text":"password",value:n,onChange:ue=>i(ue.target.value),margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(Sr,{position:"start",children:e.jsx(_t,{})}),endAdornment:e.jsx(Sr,{position:"end",children:e.jsx(Ye,{onClick:()=>c(!u),edge:"end",children:u?e.jsx(Ds,{}):e.jsx(Ar,{})})})},helperText:"Minimum 8 characters, used to derive encryption keys",disabled:b}),e.jsx(ot,{fullWidth:!0,label:"Confirm Password",type:h?"text":"password",value:a,onChange:ue=>o(ue.target.value),margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(Sr,{position:"start",children:e.jsx(_t,{})}),endAdornment:e.jsx(Sr,{position:"end",children:e.jsx(Ye,{onClick:()=>g(!h),edge:"end",children:h?e.jsx(Ds,{}):e.jsx(Ar,{})})})},disabled:b}),e.jsx(hi,{control:e.jsx(Fr,{checked:x,onChange:ue=>f(ue.target.checked),disabled:b}),label:"Remember password for this session (not recommended for shared devices)",sx:{mt:2}})]})]}),e.jsxs(tr,{children:[e.jsx(U,{onClick:ie,disabled:b,children:"Cancel"}),e.jsx(U,{onClick:D,variant:"contained",color:"primary",disabled:!n||!a||b,startIcon:b?e.jsx(Ut,{}):e.jsx(_t,{}),children:b?"Setting Up Encryption...":"Enable E2E Encryption"})]})]})},qn=()=>{const r=Et(),[t,s]=d.useState("security"),n=c=>(h,g)=>{s(g?c:!1)},i=[{service:"Google Drive",storage:"1 TB",monthlyPrice:"₹1,300",keyNotes:"Simple, but costly"},{service:"Dropbox",storage:"1 TB",monthlyPrice:"₹1,500",keyNotes:"Smooth, but pricey"},{service:"OneDrive",storage:"1 TB",monthlyPrice:"₹1,250",keyNotes:"Great for Office users"},{service:"☁️ DataHibernate",storage:"1 TB",monthlyPrice:"₹249",keyNotes:`✅ Same AWS reliability
✅ End-to-End Encrypted
✅ Transparent, Indian pricing`}],a=[{icon:e.jsx(_t,{}),title:"True End-to-End Encryption",description:"AES-GCM 256-bit encryption with PBKDF2 key derivation. Files are encrypted before upload - even we cannot decrypt them.",details:["Military-grade AES-GCM 256-bit encryption","PBKDF2 with 100,000 iterations","Random IV per file prevents pattern analysis","Authentication tags ensure integrity","Zero-knowledge architecture"]},{icon:e.jsx(un,{}),title:"Open Source Encryption",description:"Our encryption code is completely open source, allowing security audits and building trust through transparency.",details:["Full source code available on GitHub","Security researchers can audit the code","No hidden backdoors or vulnerabilities","Community-driven security improvements","Transparent implementation"]},{icon:e.jsx(ji,{}),title:"Master Password Protection",description:"Your master password is never stored on our servers. Keys are derived client-side using industry-standard algorithms.",details:["Password never leaves your device","Keys derived using PBKDF2","No key storage on servers","Client-side encryption only","Password cannot be recovered if lost"]},{icon:e.jsx(vi,{}),title:"Secure Infrastructure",description:"Built on AWS infrastructure with additional security layers and compliance certifications.",details:["AWS S3 with server-side encryption","HTTPS/TLS for all communications","SOC 2 Type II compliance","GDPR compliant data handling","Regular security audits"]}],o=[{icon:e.jsx(dr,{}),title:"99.99% Uptime SLA",description:"Built on AWS infrastructure with redundancy and failover mechanisms.",details:["Multi-region data replication","Automatic failover systems","24/7 monitoring and alerting","99.99% uptime guarantee","Disaster recovery protocols"]},{icon:e.jsx(gt,{}),title:"Glacier Deep Archive",description:"Long-term storage with automatic tiering to reduce costs while maintaining accessibility.",details:["Automatic tiering to Glacier","Instant retrieval for hot data","Cost-effective cold storage","Data integrity verification","Automated lifecycle management"]},{icon:e.jsx($r,{}),title:"High Performance",description:"Optimized for speed with CDN integration and parallel processing.",details:["Global CDN for fast downloads","Parallel upload processing","Streaming uploads for large files","Optimized data compression","Smart caching mechanisms"]}],u=[{icon:e.jsx(Xr,{}),title:"Zero-Knowledge Architecture",description:"We cannot see your files, even if we wanted to. Only you have the keys to decrypt your data.",details:["Server never sees plaintext data","No access to encryption keys","Cannot decrypt user files","Privacy by design","Legal protection for users"]},{icon:e.jsx(ss,{}),title:"GDPR Compliant",description:"Full compliance with privacy regulations including GDPR, CCPA, and other data protection laws.",details:["Right to be forgotten","Data portability","Consent management","Privacy by design","Regular compliance audits"]},{icon:e.jsx(Ar,{}),title:"Transparent Operations",description:"Open about our practices, policies, and any data processing activities.",details:["Open source code","Transparent privacy policy","Regular security reports","Community oversight","No hidden data collection"]}];return e.jsxs(p,{sx:{flex:1,overflow:"auto",pt:{xs:2,md:3},pr:{xs:2,md:2},pb:{xs:2,md:3},pl:{xs:2,md:3}},children:[e.jsx(ce,{sx:{p:2.5,mb:3,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:700,mb:2,color:"text.primary"},children:"Why Choose Data Hibernate?"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",maxWidth:600,mx:"auto"},children:"Save money while keeping your files safe. Simple, secure, and affordable cloud storage."})]})}),e.jsxs(F,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(F,{item:!0,xs:12,md:3,children:e.jsxs(ce,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(Ut,{sx:{fontSize:48,color:"#60a5fa",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Secure"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Your files are encrypted and safe"})]})}),e.jsx(F,{item:!0,xs:12,md:3,children:e.jsxs(ce,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(Xr,{sx:{fontSize:48,color:"#a78bfa",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Private"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"We can't see your files - only you can"})]})}),e.jsx(F,{item:!0,xs:12,md:3,children:e.jsxs(ce,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(dr,{sx:{fontSize:48,color:"#94a3b8",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Reliable"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Built on AWS - same reliability as big companies"})]})}),e.jsx(F,{item:!0,xs:12,md:3,children:e.jsxs(ce,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(pi,{sx:{fontSize:48,color:"#10b981",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Low Cost"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Save up to 80% compared to Google Drive & Dropbox"})]})})]}),e.jsxs(ce,{sx:{p:2.5,mb:3,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:"💰 Compare & Save Instantly"}),e.jsx(fi,{component:ce,variant:"outlined",children:e.jsxs(gi,{children:[e.jsx(xi,{children:e.jsxs(Ts,{sx:{bgcolor:"grey.50"},children:[e.jsx(Pt,{sx:{fontWeight:600},children:"Service"}),e.jsx(Pt,{sx:{fontWeight:600},children:"Storage"}),e.jsx(Pt,{sx:{fontWeight:600},children:"Monthly Price (1 TB)"}),e.jsx(Pt,{sx:{fontWeight:600},children:"Key Notes"})]})}),e.jsx(mi,{children:i.map((c,h)=>e.jsxs(Ts,{sx:{bgcolor:c.service==="☁️ DataHibernate"?v(r.palette.success.main,.1):"inherit","&:hover":{bgcolor:v(r.palette.primary.main,.05)}},children:[e.jsx(Pt,{sx:{fontWeight:c.service==="☁️ DataHibernate"?600:"normal"},children:c.service}),e.jsx(Pt,{children:c.storage}),e.jsx(Pt,{sx:{fontWeight:c.service==="☁️ DataHibernate"?600:"normal"},children:c.monthlyPrice}),e.jsx(Pt,{children:e.jsx(l,{variant:"body2",sx:{whiteSpace:"pre-line"},children:c.keyNotes})})]},c.service))})]})}),e.jsx(be,{severity:"success",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Save up to 80% compared to Google Drive and Dropbox!"}),"Plus you get the same AWS reliability with end-to-end encryption."]})})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsxs(ce,{sx:{height:"100%",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(Ut,{sx:{color:"#60a5fa"}}),"Security Features"]}),a.map((c,h)=>e.jsxs(Fs,{expanded:t===`security-${h}`,onChange:n(`security-${h}`),sx:{mb:1},children:[e.jsx(As,{expandIcon:e.jsx(Ws,{}),children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.icon,e.jsx(l,{variant:"subtitle1",sx:{fontWeight:500},children:c.title})]})}),e.jsxs(Us,{children:[e.jsx(l,{variant:"body2",sx:{mb:2},children:c.description}),e.jsx(yt,{dense:!0,children:c.details.map((g,x)=>e.jsxs(De,{sx:{py:.5},children:[e.jsx(Te,{sx:{minWidth:32},children:e.jsx($e,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(Fe,{primary:g,primaryTypographyProps:{variant:"body2"}})]},x))})]})]},h))]})}),e.jsx(F,{item:!0,xs:12,md:6,children:e.jsxs(ce,{sx:{height:"100%",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(dr,{sx:{color:"#94a3b8"}}),"Reliability Features"]}),o.map((c,h)=>e.jsxs(Fs,{expanded:t===`reliability-${h}`,onChange:n(`reliability-${h}`),sx:{mb:1},children:[e.jsx(As,{expandIcon:e.jsx(Ws,{}),children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.icon,e.jsx(l,{variant:"subtitle1",sx:{fontWeight:500},children:c.title})]})}),e.jsxs(Us,{children:[e.jsx(l,{variant:"body2",sx:{mb:2},children:c.description}),e.jsx(yt,{dense:!0,children:c.details.map((g,x)=>e.jsxs(De,{sx:{py:.5},children:[e.jsx(Te,{sx:{minWidth:32},children:e.jsx($e,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(Fe,{primary:g,primaryTypographyProps:{variant:"body2"}})]},x))})]})]},h))]})}),e.jsx(F,{item:!0,xs:12,children:e.jsxs(ce,{sx:{p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(Xr,{sx:{color:"#a78bfa"}}),"Privacy Features"]}),e.jsx(F,{container:!0,spacing:2,children:u.map((c,h)=>e.jsx(F,{item:!0,xs:12,md:4,children:e.jsxs(p,{sx:{p:2,border:`1px solid ${v(r.palette.divider,.2)}`,borderRadius:1},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.icon,e.jsx(l,{variant:"subtitle1",sx:{fontWeight:500},children:c.title})]}),e.jsx(l,{variant:"body2",sx:{mb:2},children:c.description}),e.jsx(yt,{dense:!0,children:c.details.map((g,x)=>e.jsxs(De,{sx:{py:.5},children:[e.jsx(Te,{sx:{minWidth:32},children:e.jsx($e,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(Fe,{primary:g,primaryTypographyProps:{variant:"body2"}})]},x))})]})},h))})]})})]}),e.jsxs(ce,{sx:{mt:4,p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h5",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(Jr,{sx:{color:"#60a5fa"}}),"Open Source E2E Encryption"]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Why Open Source?"}),e.jsxs(yt,{children:[e.jsxs(De,{sx:{py:.5},children:[e.jsx(Te,{sx:{minWidth:32},children:e.jsx(Ar,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(Fe,{primary:"Transparency - Users can verify the encryption implementation",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(De,{sx:{py:.5},children:[e.jsx(Te,{sx:{minWidth:32},children:e.jsx(bi,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(Fe,{primary:"Security Audits - Researchers can review and improve the code",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(De,{sx:{py:.5},children:[e.jsx(Te,{sx:{minWidth:32},children:e.jsx(ss,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(Fe,{primary:"Trust Building - No hidden backdoors or vulnerabilities",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(De,{sx:{py:.5},children:[e.jsx(Te,{sx:{minWidth:32},children:e.jsx(yi,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(Fe,{primary:"Community Contributions - Security improvements from the community",primaryTypographyProps:{variant:"body2"}})]})]})]}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Technical Implementation"}),e.jsxs(p,{sx:{bgcolor:"background.paper",p:2,borderRadius:1,border:`1px solid ${v(r.palette.divider,.2)}`},children:[e.jsx(l,{variant:"body2",component:"pre",sx:{fontFamily:"monospace",fontSize:"0.875rem",mb:2},children:`// Core Encryption Library
class GlacierEncryption {
  constructor() {
    this.algorithm = 'AES-GCM';
    this.keyLength = 256;
    this.pbkdf2Iterations = 100000;
  }
  
  async encryptFile(fileData, password) {
    const salt = this.generateSalt();
    const iv = this.generateIV();
    const key = await this.deriveKey(password, salt);
    
    return await crypto.subtle.encrypt({
      name: this.algorithm,
      iv: iv
    }, key, fileData);
  }
}`}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(Jr,{}),href:"https://github.com/your-org/datahibernate-encryption",target:"_blank",sx:{mt:1},children:"View Source Code"})]})]})]}),e.jsx(be,{severity:"info",sx:{mt:3},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Coming Soon:"})," The complete E2E encryption source code will be available on GitHub for public review and contribution. This includes the core encryption library, key derivation functions, and all security-related components."]})})]}),e.jsxs(ce,{sx:{mt:4,p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`,textAlign:"center"},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Ready to Secure Your Data?"}),e.jsx(l,{variant:"body1",sx:{mb:3,color:"text.secondary"},children:"Join thousands of users who trust Data Hibernate for their most sensitive data"}),e.jsxs(re,{direction:"row",spacing:2,justifyContent:"center",children:[e.jsx(U,{variant:"contained",size:"large",startIcon:e.jsx(rt,{}),children:"Start Uploading"}),e.jsx(U,{variant:"outlined",size:"large",startIcon:e.jsx(Jr,{}),children:"View on GitHub"})]})]})]})},rl=()=>{var Ze;const r=Et(),t=hn(r.breakpoints.down("md")),[s,n]=d.useState("overview"),[i,a]=d.useState(null),[o,u]=d.useState(null),[c,h]=d.useState(!0),[g,x]=d.useState(null),[f,E]=d.useState(""),[m,b]=d.useState(!1),[S,A]=d.useState(!1),[y,$]=d.useState(null),w=[{id:"overview",label:"Overview",icon:e.jsx(gt,{}),view:"overview"},{id:"hibernate",label:"Data Manager",icon:e.jsx(St,{}),view:"hibernate"},{id:"plans",label:"Plans",icon:e.jsx(rt,{}),view:"plans"},{id:"why",label:"Why Data Hibernate",icon:e.jsx(ln,{}),view:"why"}];d.useEffect(()=>{P(),j(q,null,function*(){yield Je.ensureInitialized(),W()});const M=window.location.hash.substring(1);M&&["overview","hibernate","plans","why"].includes(M)&&n(M)},[]);const P=()=>j(q,null,function*(){try{const M=yield zt.getUser();u(M.data)}catch(M){console.error("Error loading user data:",M)}finally{h(!1)}}),W=()=>{const M=Je.getEncryptionStatus();b(M.enabled),$(M)},D=()=>{},ie=M=>{W(),A(!1)},ue=()=>j(q,null,function*(){try{st.clearTokens(),window.location.href="/login"}catch(M){({}).VITE_DEBUG==="true"&&console.error("Error during logout:",M),window.location.href="/login"}}),fe=M=>{x(M.currentTarget)},We=()=>{x(null)},he=(M,Be)=>j(q,null,function*(){Be==="view"&&a(M)}),it=M=>{},Ce=()=>{switch(s){case"overview":return e.jsx(Qs,{});case"hibernate":return e.jsx(Zo,{onFileSelect:he,onFolderSelect:it,globalSearchQuery:f,isActive:s==="hibernate"});case"plans":return e.jsx(Ln,{});case"why":return e.jsx(qn,{});default:return e.jsx(Qs,{})}},z=(M,Be)=>{n(Be)};return c?e.jsx(p,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(He,{sx:{width:"100%",maxWidth:400}})}):e.jsxs(p,{sx:{display:"flex",flexDirection:"column",height:"100vh",bgcolor:"grey.50"},children:[e.jsx(wi,{position:"static",elevation:1,sx:{bgcolor:"white",color:"text.primary"},children:e.jsxs(_i,{sx:{minHeight:{xs:56,sm:64},px:{xs:1,sm:2},flexWrap:{xs:"wrap",sm:"nowrap"}},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",mr:{xs:2,sm:4},minWidth:{xs:"auto",sm:"auto"}},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:{xs:28,sm:32},height:{xs:28,sm:32},mr:{xs:1,sm:1.5},borderRadius:1}}),e.jsx(l,{variant:"h6",component:"div",sx:{fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.25rem"},display:{xs:"none",sm:"block"}},children:"Data Hibernate"})]}),e.jsx(ps,{value:s,onChange:z,sx:{flexGrow:1,"& .MuiTab-root":{minHeight:{xs:40,sm:48},fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},textTransform:"none",fontWeight:600},"& .MuiTabs-indicator":{height:{xs:2,sm:3}}},variant:t?"scrollable":"standard",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:w.map(M=>e.jsx(Kt,{value:M.view,label:M.label,icon:M.icon,iconPosition:"start",sx:{minHeight:{xs:40,sm:48},fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},"& .MuiSvgIcon-root":{fontSize:{xs:"1rem",sm:"1.25rem"}}}},M.id))}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:{xs:.5,sm:1},ml:{xs:1,sm:2}},children:[e.jsx(Ye,{color:"inherit",onClick:D,title:m?"Disable E2E Encryption":"Enable E2E Encryption",size:"small",sx:{color:m?"success.main":"text.secondary","&:hover":{bgcolor:m?"success.light":"action.hover"},p:{xs:.5,sm:1}},children:m?e.jsx(_t,{}):e.jsx(pn,{})}),e.jsx(Ye,{color:"inherit",size:"small",sx:{p:{xs:.5,sm:1}},children:e.jsx(Si,{badgeContent:0,color:"error",children:e.jsx(Ei,{})})}),e.jsx(Ye,{color:"inherit",onClick:fe,size:"small",sx:{p:{xs:.5,sm:1}},children:e.jsx(Ci,{sx:{width:{xs:28,sm:32},height:{xs:28,sm:32},bgcolor:"primary.main",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:((Ze=o==null?void 0:o.username)==null?void 0:Ze.charAt(0))||"U"})})]})]})}),e.jsx(p,{sx:{flexGrow:1,overflow:"auto",bgcolor:"grey.50"},children:Ce()}),g&&e.jsxs(ki,{anchorEl:g,open:!!g,onClose:We,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(zs,{onClick:We,children:[e.jsx(on,{sx:{mr:1}}),"Settings"]}),e.jsxs(zs,{onClick:ue,children:[e.jsx(Pi,{sx:{mr:1}}),"Logout"]})]}),i&&e.jsx(el,{file:i,open:!!i,onClose:()=>a(null)}),e.jsx(tl,{open:S,onClose:()=>A(!1),onPasswordSet:ie})]})},sl=()=>{const[r]=En(),t=Ct(),[s,n]=d.useState("verifying"),[i,a]=d.useState(""),[o,u]=d.useState(""),[c,h]=d.useState(!1),g=r.get("token");d.useEffect(()=>{g?x(g):(n("error"),a("No verification token provided"))},[g]);const x=b=>j(q,null,function*(){var S,A;try{const y=yield zt.verifyEmail({token:b});n("success"),a(y.data.message)}catch(y){const $=((A=(S=y.response)==null?void 0:S.data)==null?void 0:A.error)||"Verification failed";$.includes("expired")?(n("expired"),a("Your verification link has expired. Please request a new verification email.")):(n("error"),a($))}}),f=()=>j(q,null,function*(){var b,S;if(!o){a("Please enter your email address");return}h(!0);try{yield zt.resendVerification({email:o}),a("Verification email sent! Please check your inbox.")}catch(A){a(((S=(b=A.response)==null?void 0:b.data)==null?void 0:S.error)||"Failed to resend verification email")}finally{h(!1)}}),E=()=>{switch(s){case"success":return e.jsx($e,{color:"success",sx:{fontSize:60}});case"error":case"expired":return e.jsx(Ii,{color:"error",sx:{fontSize:60}});default:return e.jsx(Zt,{size:60})}},m=()=>{switch(s){case"success":return"success";case"error":case"expired":return"error";default:return"info"}};return e.jsx(Le,{sx:{maxWidth:500,mx:"auto",mt:8},children:e.jsxs(Oe,{children:[e.jsx(p,{sx:{textAlign:"center",mb:3},children:E()}),e.jsx(l,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Email Verification"}),i&&e.jsx(be,{severity:m(),sx:{mb:3},children:i}),s==="success"&&e.jsx(p,{sx:{textAlign:"center"},children:e.jsx(U,{variant:"contained",onClick:()=>t("/login"),sx:{mt:2},children:"Go to Login"})}),(s==="error"||s==="expired")&&e.jsxs(p,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s==="expired"?"Your verification link has expired. Enter your email address to get a new verification email.":"Didn't receive the email? Enter your email address to resend the verification email."}),e.jsx(ot,{fullWidth:!0,label:"Email Address",type:"email",value:o,onChange:b=>u(b.target.value),sx:{mb:2}}),e.jsx(U,{fullWidth:!0,variant:"contained",startIcon:e.jsx(Qt,{}),onClick:f,disabled:c,children:c?"Sending...":"Resend Verification Email"}),e.jsx(U,{fullWidth:!0,variant:"outlined",onClick:()=>t("/login"),sx:{mt:1},children:"Back to Login"})]}),s==="verifying"&&e.jsx(l,{variant:"body2",color:"text.secondary",align:"center",children:"Verifying your email address..."})]})})},nl=()=>{const[r,t]=d.useState(!1);d.useEffect(()=>{const i=()=>{const o=Je.getEncryptionStatus();t(o.enabled)};i();const a=setInterval(i,1e3);return()=>clearInterval(a)},[]);const s=i=>{const a=i.filter(u=>u.success),o=i.filter(u=>!u.success);alert(`Upload completed! ${a.length} files uploaded successfully, ${o.length} failed.`)},n=(i,a)=>{};return e.jsx("div",{className:"min-h-screen bg-gray-100 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Data Hibernate Platform"}),e.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"Upload your files directly to S3"}),e.jsx(p,{sx:{display:"flex",justifyContent:"center",mb:2},children:r?e.jsx(pe,{icon:e.jsx(_t,{}),label:"E2E Encryption Enabled",color:"success",variant:"outlined",sx:{fontWeight:600}}):e.jsx(pe,{icon:e.jsx(pn,{}),label:"E2E Encryption Disabled",color:"default",variant:"outlined",sx:{fontWeight:600}})}),!r&&e.jsx(be,{severity:"info",sx:{maxWidth:600,mx:"auto",mb:4},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"🔓 E2E Encryption Disabled"}),e.jsx("br",{}),"Files will be uploaded without encryption. Enable E2E encryption from the dashboard for maximum security."]})})]}),e.jsx(On,{onUploadComplete:s,onUploadProgress:n})]})})},il=()=>{const r=Et();hn(r.breakpoints.down("md"));const t=[{icon:e.jsx(St,{sx:{fontSize:40,color:"#4f46e5"}}),title:"Deep Hibernate",subtitle:"🌙 Long-term archival storage",features:["Stored safely in AWS Glacier Deep Archive","Ultra-low cost for long-term data","Restore in ~12 hours","10 GB free retrieval every 6 months"],pricing:[{storage:"100 GB",price:"₹599/year"},{storage:"1 TB",price:"₹2,999/year"}],description:"Perfect for memories, backups, and data you rarely need",color:"#1976d2",gradient:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",lightColor:"#e3f2fd",darkColor:"#1565c0",bgColor:"#f8fafc",textColor:"#1e293b"},{icon:e.jsx(Dr,{sx:{fontSize:40,color:"#2563eb"}}),title:"Smart Hibernate",subtitle:"🌤️ Flexible retrieval storage",features:["Stored on AWS Glacier Flexible Retrieval","Retrieve anytime within hours","Includes 10 GB free per month","Extra retrieval at ₹2/GB"],pricing:[{storage:"100 GB",price:"₹1,079/year"},{storage:"1 TB",price:"₹4,799/year"}],description:"Balance between cost and accessibility for regular backups",color:"#1976d2",gradient:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",lightColor:"#e3f2fd",darkColor:"#1565c0",bgColor:"#f8fafc",textColor:"#1e293b"}],s=[{icon:e.jsx(ss,{}),text:"Built on AWS — Trusted globally"},{icon:e.jsx(Di,{}),text:"Up to 80% cheaper than big tech storage"},{icon:e.jsx(Ti,{}),text:"No confusing tech — just simple plans"},{icon:e.jsx(Fi,{}),text:"Made for India — affordable, reliable, transparent"},{icon:e.jsx(Ai,{}),text:"You pay once. We take care of the rest."}];return e.jsxs(p,{sx:{minHeight:"100vh",bgcolor:"grey.50"},children:[e.jsx(ce,{elevation:0,sx:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",py:{xs:8,md:12},borderRadius:0,position:"relative",overflow:"hidden"},children:e.jsx(ct,{maxWidth:"lg",children:e.jsxs(F,{container:!0,spacing:4,alignItems:"center",children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsxs(p,{sx:{textAlign:{xs:"center",md:"left"}},children:[e.jsx(pe,{icon:e.jsx(rt,{}),label:"💤 DataHibernate",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",mb:3,fontSize:"1.1rem",fontWeight:600,borderRadius:3}}),e.jsx(l,{variant:"h1",sx:{fontSize:{xs:"2.5rem",md:"3.5rem"},fontWeight:800,lineHeight:1.2,mb:3},children:"Upload. Forget. Sleep Easy."}),e.jsx(l,{variant:"h5",sx:{fontSize:{xs:"1.2rem",md:"1.5rem"},fontWeight:300,mb:4,opacity:.9},children:"Your memories deserve rest, too."}),e.jsx(l,{variant:"body1",sx:{fontSize:"1.1rem",mb:4,opacity:.8,lineHeight:1.6},children:"A secure, long-term cloud vault built for people who don't want to think about storage ever again. Whether it's old photos, work archives, or personal backups — just upload once and let it sleep in peace."}),e.jsxs(re,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(U,{variant:"contained",size:"large",endIcon:e.jsx(Ls,{}),sx:{bgcolor:"white",color:"#1976d2",px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.2)","&:hover":{bgcolor:"rgba(255,255,255,0.9)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.3)"}},onClick:()=>window.location.href="/login",children:"Get Started"}),e.jsx(U,{variant:"outlined",size:"large",sx:{borderColor:"white",color:"white",px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:3,"&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},onClick:()=>window.location.href="/why",children:"Why Choose Us?"})]})]})}),e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(p,{sx:{textAlign:"center"},children:e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:{xs:200,md:300},height:"auto",filter:"drop-shadow(0 10px 20px rgba(0,0,0,0.3))"}})})})]})})}),e.jsxs(ct,{maxWidth:"lg",sx:{py:8},children:[e.jsxs(p,{sx:{textAlign:"center",mb:6},children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Choose Your Hibernation Plan"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",maxWidth:700,mx:"auto",lineHeight:1.6},children:"Select the perfect storage solution for your data needs. Each plan offers different balance between cost, storage capacity, and retrieval speed."})]}),e.jsx(F,{container:!0,spacing:4,children:t.map((n,i)=>e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Le,{sx:{height:"100%",position:"relative",border:`2px solid ${v(n.color,.15)}`,borderRadius:4,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)","&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:`0 20px 60px ${v(n.color,.25)}`,borderColor:n.color}},children:e.jsx(Oe,{sx:{p:4},children:e.jsxs(re,{spacing:4,children:[e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(p,{sx:{p:3,borderRadius:"50%",bgcolor:n.lightColor,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${n.color}`,mx:"auto",width:80,height:80,mb:3},children:Wr.cloneElement(n.icon,{sx:{fontSize:40,color:n.color}})}),e.jsx(l,{variant:"h4",sx:{fontWeight:800,mb:2,color:n.textColor},children:n.title}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",lineHeight:1.5},children:n.description})]}),e.jsx(yt,{dense:!0,children:n.features.map((a,o)=>e.jsxs(De,{sx:{px:0},children:[e.jsx(Te,{sx:{minWidth:36},children:e.jsx($e,{sx:{color:n.color,fontSize:20}})}),e.jsx(Fe,{primary:a,primaryTypographyProps:{fontSize:"0.9rem"}})]},o))}),e.jsx(p,{sx:{textAlign:"center",p:3,bgcolor:n.lightColor,borderRadius:3,border:`1px solid ${v(n.color,.2)}`},children:n.pricing.map((a,o)=>e.jsxs(p,{sx:{mb:o===0?2:0},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:800,mb:1,color:n.textColor},children:a.price}),e.jsxs(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:[a.storage," Storage"]})]},o))}),e.jsx(U,{fullWidth:!0,variant:"contained",sx:{bgcolor:n.color,borderRadius:3,py:3,fontSize:"1.1rem",fontWeight:700,textTransform:"none",boxShadow:`0 4px 16px ${v(n.color,.2)}`,transition:"all 0.3s ease","&:hover":{bgcolor:n.darkColor,transform:"translateY(-2px)",boxShadow:`0 8px 24px ${v(n.color,.3)}`}},children:"Choose Plan"})]})})})},i))})]}),e.jsx(ce,{elevation:0,sx:{bgcolor:"#f8fafc",py:8,borderRadius:0},children:e.jsxs(ct,{maxWidth:"lg",children:[e.jsx(p,{sx:{textAlign:"center",mb:6},children:e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Why Choose DataHibernate?"})}),e.jsx(F,{container:!0,spacing:4,children:s.map((n,i)=>e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(ce,{sx:{p:4,textAlign:"center",height:"100%",borderRadius:3,transition:"all 0.3s ease",border:"1px solid rgba(0,0,0,0.05)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 32px rgba(0,0,0,0.15)"}},children:[e.jsx(p,{sx:{color:"#1976d2",mb:3},children:Wr.cloneElement(n.icon,{sx:{fontSize:48}})}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#1e293b"},children:n.text})]})},i))})]})}),e.jsx(ct,{maxWidth:"lg",sx:{py:8},children:e.jsxs(F,{container:!0,spacing:6,alignItems:"center",children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate",sx:{width:"100%",maxWidth:400,height:"auto",mx:"auto",display:"block",filter:"drop-shadow(0 8px 16px rgba(0,0,0,0.1))"}})}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Your Data's Second Home"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",lineHeight:1.6,mb:3},children:"From family albums to startup archives — DataHibernate ensures your files are sleeping safely in the cloud, ready whenever you need them again."}),e.jsx(l,{variant:"body1",sx:{fontSize:"1.1rem",lineHeight:1.7,mb:4,color:"text.secondary"},children:"Think of it as hibernation for your data — calm, secure, and waiting patiently for your call."}),e.jsxs(re,{direction:"row",spacing:2,flexWrap:"wrap",children:[e.jsx(pe,{icon:e.jsx(Ut,{}),label:"Secure",sx:{bgcolor:"#e0e7ff",color:"#4f46e5",fontWeight:600,borderRadius:3}}),e.jsx(pe,{icon:e.jsx(gt,{}),label:"Reliable",sx:{bgcolor:"#dbeafe",color:"#2563eb",fontWeight:600,borderRadius:3}}),e.jsx(pe,{icon:e.jsx(Ri,{}),label:"Affordable",sx:{bgcolor:"#dcfce7",color:"#16a34a",fontWeight:600,borderRadius:3}}),e.jsx(pe,{icon:e.jsx($r,{}),label:"Fast",sx:{bgcolor:"#fef3c7",color:"#d97706",fontWeight:600,borderRadius:3}})]})]})]})}),e.jsx(ce,{elevation:0,sx:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",py:8,textAlign:"center",borderRadius:0},children:e.jsxs(ct,{maxWidth:"md",children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800},children:"🔒 Start Your Hibernate Journey Today"}),e.jsxs(l,{variant:"h6",sx:{mb:4,opacity:.9,lineHeight:1.6},children:["Choose your plan → Upload → Relax.",e.jsx("br",{}),"No hidden charges. No monthly stress.",e.jsx("br",{}),"Just pure, long-term peace."]}),e.jsx(U,{variant:"contained",size:"large",endIcon:e.jsx(Ls,{}),sx:{bgcolor:"white",color:"#1976d2",px:6,py:2,fontSize:"1.2rem",fontWeight:600,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.2)","&:hover":{bgcolor:"rgba(255,255,255,0.9)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.3)"}},onClick:()=>window.location.href="/login",children:"Get Started →"})]})}),e.jsx(ce,{elevation:0,sx:{bgcolor:"#1e293b",color:"white",py:6,borderRadius:0},children:e.jsxs(ct,{maxWidth:"lg",children:[e.jsxs(F,{container:!0,spacing:4,children:[e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate",sx:{width:48,height:48,mr:2}}),e.jsx(l,{variant:"h5",sx:{fontWeight:800},children:"DataHibernate"})]}),e.jsx(l,{variant:"body1",sx:{color:"#94a3b8",mb:3,lineHeight:1.6},children:"Secure, affordable cloud storage for your digital memories. Built for India, trusted globally."})]}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",sx:{mb:3,fontWeight:700},children:"Quick Links"}),e.jsxs(re,{direction:"row",spacing:3,flexWrap:"wrap",children:[e.jsx(at,{href:"/login",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Login"}),e.jsx(at,{href:"/register",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Register"}),e.jsx(at,{href:"/why",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Why Choose Us"}),e.jsx(at,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Privacy Policy"}),e.jsx(at,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Terms of Service"}),e.jsx(at,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Support"}),e.jsx(at,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Contact"})]})]})]}),e.jsx(er,{sx:{my:4,borderColor:"#334155"}}),e.jsx(l,{variant:"body2",sx:{color:"#94a3b8",textAlign:"center"},children:"© 2024 DataHibernate. All rights reserved. Built with ❤️ for digital peace of mind."})]})})]})},al=Wi({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'}}),ol=()=>{const r=ar();return d.useEffect(()=>{const t=document.title||"Data Hibernate",s=r.pathname;Ht.trackPageView(t,s)},[r]),null},ll=()=>e.jsxs(Ui,{theme:al,children:[e.jsx(zi,{}),e.jsx(ct,{maxWidth:!1,disableGutters:!0,children:e.jsx(p,{sx:{minHeight:"100vh"},children:e.jsxs(Ta,{children:[e.jsx(ol,{}),e.jsxs(Ca,{children:[e.jsx(lt,{path:"/",element:e.jsx(il,{})}),e.jsx(lt,{path:"/login",element:e.jsx(Po,{})}),e.jsx(lt,{path:"/register",element:e.jsx(Io,{})}),e.jsx(lt,{path:"/forgot-password",element:e.jsx(Ro,{})}),e.jsx(lt,{path:"/reset-password",element:e.jsx(Do,{})}),e.jsx(lt,{path:"/why",element:e.jsx(qn,{})}),e.jsx(lt,{path:"/verify-email",element:e.jsx(sl,{})}),e.jsx(lt,{path:"/dashboard",element:e.jsx(Qr,{children:e.jsx(rl,{})})}),e.jsx(lt,{path:"/upload",element:e.jsx(Qr,{children:e.jsx(nl,{})})}),e.jsx(lt,{path:"/plans",element:e.jsx(Qr,{children:e.jsx(Ln,{})})})]})]})})})]});"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(r=>{r.forEach(t=>{t.unregister()})});const cl=fn(document.getElementById("root"));cl.render(e.jsx(ll,{}))});export default dl();
