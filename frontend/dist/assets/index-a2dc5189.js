var Ln=Object.defineProperty,$n=Object.defineProperties;var On=Object.getOwnPropertyDescriptors;var yr=Object.getOwnPropertySymbols;var fs=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable;var Nt=Math.pow,gs=(r,t,s)=>t in r?Ln(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,R=(r,t)=>{for(var s in t||(t={}))fs.call(t,s)&&gs(r,s,t[s]);if(yr)for(var s of yr(t))ms.call(t,s)&&gs(r,s,t[s]);return r},ye=(r,t)=>$n(r,On(t));var ys=(r,t)=>{var s={};for(var n in r)fs.call(r,n)&&t.indexOf(n)<0&&(s[n]=r[n]);if(r!=null&&yr)for(var n of yr(r))t.indexOf(n)<0&&ms.call(r,n)&&(s[n]=r[n]);return s};var Bn=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var C=(r,t,s)=>new Promise((n,i)=>{var o=c=>{try{d(s.next(c))}catch(p){i(p)}},a=c=>{try{d(s.throw(c))}catch(p){i(p)}},d=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,a);d((s=s.apply(r,t)).next())});import{j as e,B as h,C as Vt,a as nt,P as ne,T as l,A as xe,b as et,c as z,L as Qe,d as De,I as Be,R as Yt,G as F,e as Pe,f as Ie,g as ae,h as Oe,S as Ft,i as Ue,k as jt,l as dt,u as Kt,m as ss,n as Ht,o as Z,p as b,q as qr,D as ft,r as mt,s as yt,t as Xt,v as Cr,w as Gt,x as Xs,y as Dr,F as ir,z as Lt,E as ct,H as ve,J as we,K as _e,M as Mn,N as gt,O as qt,Q as bt,U as Nn,V as Hn,W as ot,X as Js,Y as Gn,Z as wr,_ as bs,$ as $r,a0 as Ut,a1 as Or,a2 as ns,a3 as Zs,a4 as qn,a5 as js,a6 as _r,a7 as Vn,a8 as Et,a9 as br,aa as vs,ab as Yn,ac as ws,ad as Kn,ae as Xn,af as Jn,ag as Qs,ah as Zn,ai as or,aj as _s,ak as jr,al as Ss,am as kr,an as Qn,ao as Br,ap as ei,aq as ti,ar as ri,as as si,at as Es,au as Ct,av as ni,aw as Cs,ax as ks,ay as Ps,az as Is,aA as Mr,aB as ii,aC as Vr,aD as oi,aE as ai,aF as li,aG as en,aH as ci,aI as di,aJ as ui,aK as hi,aL as pi,aM as xi,aN as Rs,aO as gi,aP as fi,aQ as Ts,aR as mi,aS as yi,aT as bi,aU as ji,aV as vi,aW as wi,aX as _i,aY as Si}from"./ui-61e5f988.js";import{c as Ei,r as u,a as cr}from"./vendor-950dbbc1.js";import{a as Pr}from"./utils-76a9f601.js";var Ga=Bn(K=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();var tn,Ds=Ei;tn=Ds.createRoot,Ds.hydrateRoot;/**
 * @remix-run/router v1.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dr(){return dr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},dr.apply(this,arguments)}var It;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(It||(It={}));const Fs="popstate";function Ci(r){r===void 0&&(r={});function t(n,i){let{pathname:o,search:a,hash:d}=n.location;return Yr("",{pathname:o,search:a,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:Ir(i)}return Pi(t,s,null,r)}function Ee(r,t){if(r===!1||r===null||typeof r=="undefined")throw new Error(t)}function is(r,t){if(!r){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(s){}}}function ki(){return Math.random().toString(36).substr(2,8)}function As(r,t){return{usr:r.state,key:r.key,idx:t}}function Yr(r,t,s,n){return s===void 0&&(s=null),dr({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?Jt(t):t,{state:s,key:t&&t.key||n||ki()})}function Ir(r){let{pathname:t="/",search:s="",hash:n=""}=r;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Jt(r){let t={};if(r){let s=r.indexOf("#");s>=0&&(t.hash=r.substr(s),r=r.substr(0,s));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function Pi(r,t,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,d=It.Pop,c=null,p=m();p==null&&(p=0,a.replaceState(dr({},a.state,{idx:p}),""));function m(){return(a.state||{idx:null}).idx}function w(){d=It.Pop;let I=m(),T=I==null?null:I-p;p=I,c&&c({action:d,location:_.location,delta:T})}function f(I,T){d=It.Push;let j=Yr(_.location,I,T);s&&s(j,I),p=m()+1;let k=As(j,p),v=_.createHref(j);try{a.pushState(k,"",v)}catch(B){i.location.assign(v)}o&&c&&c({action:d,location:_.location,delta:1})}function D(I,T){d=It.Replace;let j=Yr(_.location,I,T);s&&s(j,I),p=m();let k=As(j,p),v=_.createHref(j);a.replaceState(k,"",v),o&&c&&c({action:d,location:_.location,delta:0})}function E(I){let T=i.location.origin!=="null"?i.location.origin:i.location.href,j=typeof I=="string"?I:Ir(I);return Ee(T,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,T)}let _={get action(){return d},get location(){return r(i,a)},listen(I){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Fs,w),c=I,()=>{i.removeEventListener(Fs,w),c=null}},createHref(I){return t(i,I)},createURL:E,encodeLocation(I){let T=E(I);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:f,replace:D,go(I){return a.go(I)}};return _}var Ws;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ws||(Ws={}));function Ii(r,t,s){s===void 0&&(s="/");let n=typeof t=="string"?Jt(t):t,i=os(n.pathname||"/",s);if(i==null)return null;let o=rn(r);Ri(o);let a=null;for(let d=0;a==null&&d<o.length;++d)a=$i(o[d],Mi(i));return a}function rn(r,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(o,a,d)=>{let c={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Ee(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let p=Tt([n,c.relativePath]),m=s.concat(c);o.children&&o.children.length>0&&(Ee(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),rn(o.children,t,m,p)),!(o.path==null&&!o.index)&&t.push({path:p,score:zi(p,o.index),routesMeta:m})};return r.forEach((o,a)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,a);else for(let c of sn(o.path))i(o,a,c)}),t}function sn(r){let t=r.split("/");if(t.length===0)return[];let[s,...n]=t,i=s.endsWith("?"),o=s.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=sn(n.join("/")),d=[];return d.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&d.push(...a),d.map(c=>r.startsWith("/")&&c===""?"/":c)}function Ri(r){r.sort((t,s)=>t.score!==s.score?s.score-t.score:Li(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const Ti=/^:\w+$/,Di=3,Fi=2,Ai=1,Wi=10,Ui=-2,Us=r=>r==="*";function zi(r,t){let s=r.split("/"),n=s.length;return s.some(Us)&&(n+=Ui),t&&(n+=Fi),s.filter(i=>!Us(i)).reduce((i,o)=>i+(Ti.test(o)?Di:o===""?Ai:Wi),n)}function Li(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function $i(r,t){let{routesMeta:s}=r,n={},i="/",o=[];for(let a=0;a<s.length;++a){let d=s[a],c=a===s.length-1,p=i==="/"?t:t.slice(i.length)||"/",m=Oi({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},p);if(!m)return null;Object.assign(n,m.params);let w=d.route;o.push({params:n,pathname:Tt([i,m.pathname]),pathnameBase:qi(Tt([i,m.pathnameBase])),route:w}),m.pathnameBase!=="/"&&(i=Tt([i,m.pathnameBase]))}return o}function Oi(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[s,n]=Bi(r.path,r.caseSensitive,r.end),i=t.match(s);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:n.reduce((p,m,w)=>{if(m==="*"){let f=d[w]||"";a=o.slice(0,o.length-f.length).replace(/(.)\/+$/,"$1")}return p[m]=Ni(d[w]||"",m),p},{}),pathname:o,pathnameBase:a,pattern:r}}function Bi(r,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),is(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,d)=>(n.push(d),"/([^\\/]+)"));return r.endsWith("*")?(n.push("*"),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Mi(r){try{return decodeURI(r)}catch(t){return is(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function Ni(r,t){try{return decodeURIComponent(r)}catch(s){return is(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+r+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),r}}function os(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=r.charAt(s);return n&&n!=="/"?null:r.slice(s)||"/"}function Hi(r,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:i=""}=typeof r=="string"?Jt(r):r;return{pathname:s?s.startsWith("/")?s:Gi(s,t):t,search:Vi(n),hash:Yi(i)}}function Gi(r,t){let s=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Nr(r,t,s,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nn(r){return r.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function on(r,t,s,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=Jt(r):(i=dr({},r),Ee(!i.pathname||!i.pathname.includes("?"),Nr("?","pathname","search",i)),Ee(!i.pathname||!i.pathname.includes("#"),Nr("#","pathname","hash",i)),Ee(!i.search||!i.search.includes("#"),Nr("#","search","hash",i)));let o=r===""||i.pathname==="",a=o?"/":i.pathname,d;if(n||a==null)d=s;else{let w=t.length-1;if(a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),w-=1;i.pathname=f.join("/")}d=w>=0?t[w]:"/"}let c=Hi(i,d),p=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(p||m)&&(c.pathname+="/"),c}const Tt=r=>r.join("/").replace(/\/\/+/g,"/"),qi=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Vi=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Yi=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Ki(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const an=["post","put","patch","delete"];new Set(an);const Xi=["get",...an];new Set(Xi);/**
 * React Router v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rr(){return Rr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},Rr.apply(this,arguments)}const as=u.createContext(null),ln=u.createContext(null),Zt=u.createContext(null),Fr=u.createContext(null),Qt=u.createContext({outlet:null,matches:[]}),cn=u.createContext(null);function Ji(r,t){let{relative:s}=t===void 0?{}:t;er()||Ee(!1);let{basename:n,navigator:i}=u.useContext(Zt),{hash:o,pathname:a,search:d}=un(r,{relative:s}),c=a;return n!=="/"&&(c=a==="/"?n:Tt([n,a])),i.createHref({pathname:c,search:d,hash:o})}function er(){return u.useContext(Fr)!=null}function tr(){return er()||Ee(!1),u.useContext(Fr).location}function dn(r){u.useContext(Zt).static||u.useLayoutEffect(r)}function vt(){return u.useContext(as)!=null?uo():Zi()}function Zi(){er()||Ee(!1);let{basename:r,navigator:t}=u.useContext(Zt),{matches:s}=u.useContext(Qt),{pathname:n}=tr(),i=JSON.stringify(nn(s).map(d=>d.pathnameBase)),o=u.useRef(!1);return dn(()=>{o.current=!0}),u.useCallback(function(d,c){if(c===void 0&&(c={}),!o.current)return;if(typeof d=="number"){t.go(d);return}let p=on(d,JSON.parse(i),n,c.relative==="path");r!=="/"&&(p.pathname=p.pathname==="/"?r:Tt([r,p.pathname])),(c.replace?t.replace:t.push)(p,c.state,c)},[r,t,i,n])}function un(r,t){let{relative:s}=t===void 0?{}:t,{matches:n}=u.useContext(Qt),{pathname:i}=tr(),o=JSON.stringify(nn(n).map(a=>a.pathnameBase));return u.useMemo(()=>on(r,JSON.parse(o),i,s==="path"),[r,o,i,s])}function Qi(r,t){return eo(r,t)}function eo(r,t,s){er()||Ee(!1);let{navigator:n}=u.useContext(Zt),{matches:i}=u.useContext(Qt),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let c=tr(),p;if(t){var m;let _=typeof t=="string"?Jt(t):t;d==="/"||(m=_.pathname)!=null&&m.startsWith(d)||Ee(!1),p=_}else p=c;let w=p.pathname||"/",f=d==="/"?w:w.slice(d.length)||"/",D=Ii(r,{pathname:f}),E=io(D&&D.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Tt([d,n.encodeLocation?n.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:Tt([d,n.encodeLocation?n.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,s);return t&&E?u.createElement(Fr.Provider,{value:{location:Rr({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:It.Pop}},E):E}function to(){let r=co(),t=Ki(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),s=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),s?u.createElement("pre",{style:i},s):null,o)}const ro=u.createElement(to,null);class so extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error?u.createElement(Qt.Provider,{value:this.props.routeContext},u.createElement(cn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function no(r){let{routeContext:t,match:s,children:n}=r,i=u.useContext(as);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),u.createElement(Qt.Provider,{value:t},n)}function io(r,t,s){var n;if(t===void 0&&(t=[]),s===void 0&&(s=null),r==null){var i;if((i=s)!=null&&i.errors)r=s.matches;else return null}let o=r,a=(n=s)==null?void 0:n.errors;if(a!=null){let d=o.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));d>=0||Ee(!1),o=o.slice(0,Math.min(o.length,d+1))}return o.reduceRight((d,c,p)=>{let m=c.route.id?a==null?void 0:a[c.route.id]:null,w=null;s&&(w=c.route.errorElement||ro);let f=t.concat(o.slice(0,p+1)),D=()=>{let E;return m?E=w:c.route.element?E=c.route.element:E=d,u.createElement(no,{match:c,routeContext:{outlet:d,matches:f},children:E})};return s&&(c.route.ErrorBoundary||c.route.errorElement||p===0)?u.createElement(so,{location:s.location,revalidation:s.revalidation,component:w,error:m,children:D(),routeContext:{outlet:null,matches:f}}):D()},null)}var Kr;(function(r){r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate"})(Kr||(Kr={}));var ur;(function(r){r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId"})(ur||(ur={}));function oo(r){let t=u.useContext(as);return t||Ee(!1),t}function ao(r){let t=u.useContext(ln);return t||Ee(!1),t}function lo(r){let t=u.useContext(Qt);return t||Ee(!1),t}function hn(r){let t=lo(),s=t.matches[t.matches.length-1];return s.route.id||Ee(!1),s.route.id}function co(){var r;let t=u.useContext(cn),s=ao(ur.UseRouteError),n=hn(ur.UseRouteError);return t||((r=s.errors)==null?void 0:r[n])}function uo(){let{router:r}=oo(Kr.UseNavigateStable),t=hn(ur.UseNavigateStable),s=u.useRef(!1);return dn(()=>{s.current=!0}),u.useCallback(function(i,o){o===void 0&&(o={}),s.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,Rr({fromRouteId:t},o)))},[r,t])}function ho(r){let{to:t,replace:s,state:n,relative:i}=r;er()||Ee(!1);let o=u.useContext(ln),a=vt();return u.useEffect(()=>{o&&o.navigation.state!=="idle"||a(t,{replace:s,state:n,relative:i})}),null}function st(r){Ee(!1)}function po(r){let{basename:t="/",children:s=null,location:n,navigationType:i=It.Pop,navigator:o,static:a=!1}=r;er()&&Ee(!1);let d=t.replace(/^\/*/,"/"),c=u.useMemo(()=>({basename:d,navigator:o,static:a}),[d,o,a]);typeof n=="string"&&(n=Jt(n));let{pathname:p="/",search:m="",hash:w="",state:f=null,key:D="default"}=n,E=u.useMemo(()=>{let _=os(p,d);return _==null?null:{location:{pathname:_,search:m,hash:w,state:f,key:D},navigationType:i}},[d,p,m,w,f,D,i]);return E==null?null:u.createElement(Zt.Provider,{value:c},u.createElement(Fr.Provider,{children:s,value:E}))}function xo(r){let{children:t,location:s}=r;return Qi(Xr(t),s)}var zs;(function(r){r[r.pending=0]="pending",r[r.success=1]="success",r[r.error=2]="error"})(zs||(zs={}));new Promise(()=>{});function Xr(r,t){t===void 0&&(t=[]);let s=[];return u.Children.forEach(r,(n,i)=>{if(!u.isValidElement(n))return;let o=[...t,i];if(n.type===u.Fragment){s.push.apply(s,Xr(n.props.children,o));return}n.type!==st&&Ee(!1),!n.props.index||!n.props.children||Ee(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Xr(n.props.children,o)),s.push(a)}),s}/**
 * React Router DOM v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jr(){return Jr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},Jr.apply(this,arguments)}function go(r,t){if(r==null)return{};var s={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(s[i]=r[i]);return s}function fo(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function mo(r,t){return r.button===0&&(!t||t==="_self")&&!fo(r)}function Zr(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,s)=>{let n=r[s];return t.concat(Array.isArray(n)?n.map(i=>[s,i]):[[s,n]])},[]))}function yo(r,t){let s=Zr(r);if(t)for(let n of t.keys())s.has(n)||t.getAll(n).forEach(i=>{s.append(n,i)});return s}const bo=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function jo(r){let{basename:t,children:s,window:n}=r,i=u.useRef();i.current==null&&(i.current=Ci({window:n,v5Compat:!0}));let o=i.current,[a,d]=u.useState({action:o.action,location:o.location});return u.useLayoutEffect(()=>o.listen(d),[o]),u.createElement(po,{basename:t,children:s,location:a.location,navigationType:a.action,navigator:o})}const vo=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",wo=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hr=u.forwardRef(function(t,s){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:d,target:c,to:p,preventScrollReset:m}=t,w=go(t,bo),{basename:f}=u.useContext(Zt),D,E=!1;if(typeof p=="string"&&wo.test(p)&&(D=p,vo))try{let j=new URL(window.location.href),k=p.startsWith("//")?new URL(j.protocol+p):new URL(p),v=os(k.pathname,f);k.origin===j.origin&&v!=null?p=v+k.search+k.hash:E=!0}catch(j){}let _=Ji(p,{relative:i}),I=_o(p,{replace:a,state:d,target:c,preventScrollReset:m,relative:i});function T(j){n&&n(j),j.defaultPrevented||I(j)}return u.createElement("a",Jr({},w,{href:D||_,onClick:E||o?n:T,ref:s,target:c}))});var Ls;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmitImpl="useSubmitImpl",r.UseFetcher="useFetcher"})(Ls||(Ls={}));var $s;(function(r){r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})($s||($s={}));function _o(r,t){let{target:s,replace:n,state:i,preventScrollReset:o,relative:a}=t===void 0?{}:t,d=vt(),c=tr(),p=un(r,{relative:a});return u.useCallback(m=>{if(mo(m,s)){m.preventDefault();let w=n!==void 0?n:Ir(c)===Ir(p);d(r,{replace:w,state:i,preventScrollReset:o,relative:a})}},[c,d,p,n,i,s,r,o,a])}function pn(r){let t=u.useRef(Zr(r)),s=u.useRef(!1),n=tr(),i=u.useMemo(()=>yo(n.search,s.current?null:t.current),[n.search]),o=vt(),a=u.useCallback((d,c)=>{const p=Zr(typeof d=="function"?d(i):d);s.current=!0,o("?"+p,c)},[o,i]);return[i,a]}const pr={baseURL:{}.VITE_API_BASE_URL||"https://datahibernate.in/api/",timeout:3e4,withCredentials:!0},ar={timeout:3e5,maxConcurrentUploads:8,bulkBatchSize:200,webWorkerBatchSize:200,mainBatchSize:500,maxConcurrentWorkers:4},at={TOKEN:"token",REFRESH_TOKEN:"refreshToken",USER:"user"},Ve={MAX_FILE_SIZE:5*1024*1024*1024,MAX_TOTAL_SIZE:15*1024*1024*1024,MAX_FILES:1e5,MAX_SESSION_SIZE:50*1024*1024*1024,CHUNK_SIZE:8*1024*1024,MEMORY_LIMIT:100*1024*1024},lr={UPLOAD_SUCCESS:"Files uploaded successfully",UPLOAD_FAILED:"Upload failed",ARCHIVE_SUCCESS:"File archived successfully",ARCHIVE_FAILED:"Archive failed",RESTORE_SUCCESS:"File restored successfully",RESTORE_FAILED:"Restore failed",DOWNLOAD_SUCCESS:"Download started",DOWNLOAD_FAILED:"Download failed",S3_CONFIG_REQUIRED:"S3 configuration required. Please configure S3 settings first.",FILE_TOO_LARGE:"File too large",NETWORK_ERROR:"Network error. Please check your connection.",UNAUTHORIZED:"Unauthorized access",FORBIDDEN:"Access forbidden",NOT_FOUND:"Resource not found",SERVER_ERROR:"Server error. Please try again later.",FILE_SIZE_EXCEEDED:"File size exceeds the maximum limit of 5GB",TOTAL_SIZE_EXCEEDED:"Total upload size exceeds the limit of 15GB",SESSION_SIZE_EXCEEDED:"Upload session size exceeds the limit of 50GB",STORAGE_LIMIT_EXCEEDED:"Storage limit exceeded. Please subscribe to a hibernation plan to continue.",MEMORY_LIMIT_EXCEEDED:"File processing exceeds memory limit. Please upload smaller files.",TOO_MANY_FILES:"Too many files selected. Maximum 1,000,000 files per upload.",INVALID_FILE_TYPE:"File type not allowed. Please check allowed file types.",UPLOAD_CANCELLED:"Upload cancelled by user",UPLOAD_TIMEOUT:"Upload timeout. Please try again with smaller files.",NETWORK_TIMEOUT:"Network timeout. Please check your connection.",PARTIAL_UPLOAD_FAILED:"Some files failed to upload. Please retry failed files.",CONCURRENT_UPLOAD_LIMIT:"Too many concurrent uploads. Please wait for current uploads to complete."},Ne={EMAIL_REGEX:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,USERNAME_MIN_LENGTH:3,USERNAME_MAX_LENGTH:30,PASSWORD_MIN_LENGTH:8,PASSWORD_MAX_LENGTH:128},lt={isValidJWT:r=>{if(!r||typeof r!="string")return!1;try{const t=r.split(".");if(t.length!==3)return!1;const s=JSON.parse(atob(t[1])),n=Date.now()/1e3;return s.exp&&s.exp<n?!1:!!(s.user_id&&s.exp)}catch(t){return!1}},getTokenPayload:r=>{if(!r)return null;try{const t=r.split(".");return t.length!==3?null:JSON.parse(atob(t[1]))}catch(t){return null}},isTokenExpired:r=>{const t=lt.getTokenPayload(r);return!t||!t.exp?!0:t.exp<Date.now()/1e3}};class So{constructor(){this.isProduction=!0,this.useHttpOnly=this.supportsHttpOnly(),this.csrfToken=null}supportsHttpOnly(){return{}.VITE_USE_SECURE_AUTH==="true"}setCSRFToken(t){this.csrfToken=t}getCSRFToken(){return this.csrfToken}setAccessToken(t){if(!lt.isValidJWT(t))throw new Error("Invalid token format");this.useHttpOnly?console.log("Access token validated and stored in httpOnly cookie"):this.setSecureLocalStorage(at.TOKEN,t)}setRefreshToken(t){if(!lt.isValidJWT(t))throw new Error("Invalid refresh token format");this.useHttpOnly?console.log("Refresh token validated and stored in httpOnly cookie"):this.setSecureLocalStorage(at.REFRESH_TOKEN,t)}getAccessToken(){if(this.useHttpOnly)return"httpOnly_cookie";{const t=localStorage.getItem(at.TOKEN);return lt.isValidJWT(t)?t:null}}getRefreshToken(){if(this.useHttpOnly)return"httpOnly_cookie";{const t=localStorage.getItem(at.REFRESH_TOKEN);return lt.isValidJWT(t)?t:null}}clearTokens(){this.useHttpOnly?console.log("Clearing httpOnly cookies via logout endpoint"):(localStorage.removeItem(at.TOKEN),localStorage.removeItem(at.REFRESH_TOKEN),localStorage.removeItem(at.USER))}isAuthenticated(){return C(this,null,function*(){if(this.useHttpOnly)try{return(yield fetch(`${{}.VITE_API_BASE_URL||"http://localhost:8000/api/"}auth/secure/user/`,{method:"GET",credentials:"include",headers:this.getAuthHeaders()})).ok}catch(t){return console.error("Authentication check failed:",t),!1}else{const t=this.getAccessToken();return t&&lt.isValidJWT(t)&&!lt.isTokenExpired(t)}})}setSecureLocalStorage(t,s){try{if((t===at.TOKEN||t===at.REFRESH_TOKEN)&&!lt.isValidJWT(s))throw new Error("Invalid token format");if(localStorage.setItem(t,s),localStorage.getItem(t)!==s)throw new Error("Failed to store token securely")}catch(n){throw console.error("Failed to store token:",n),n}}getTokenPayload(){if(this.useHttpOnly)return null;{const t=this.getAccessToken();return t?lt.getTokenPayload(t):null}}isTokenExpired(){if(this.useHttpOnly)return!1;{const t=this.getAccessToken();return t?lt.isTokenExpired(t):!0}}getAuthHeaders(){const t={};if(this.useHttpOnly)this.csrfToken&&(t["X-CSRFToken"]=this.csrfToken);else{const s=this.getAccessToken();s&&(t.Authorization=`Bearer ${s}`)}return t}}const He=new So,Hr=({children:r})=>{const[t,s]=u.useState(!0),[n,i]=u.useState(!1);return u.useEffect(()=>{(()=>C(K,null,function*(){try{const a=yield He.isAuthenticated();i(a),a||He.clearTokens()}catch(a){console.error("Authentication check failed:",a),i(!1),He.clearTokens()}finally{s(!1)}}))()},[]),t?e.jsx(h,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",sx:{bgcolor:"background.default"},children:e.jsx(Vt,{})}):n?r:e.jsx(ho,{to:"/login",replace:!0})},V=Pr.create(pr);V.interceptors.request.use(r=>{const t=He.getAuthHeaders();return Object.assign(r.headers,t),r},r=>Promise.reject(r));V.interceptors.response.use(r=>r,r=>C(K,null,function*(){var s,n;const t=r.config;if(((s=r.response)==null?void 0:s.status)===401&&!t._retry){t._retry=!0;try{const i=He.getRefreshToken();if(i){const o=yield Pr.post(`${pr.baseURL}auth/refresh/`,{refresh:i}),{access:a}=o.data;return He.setAccessToken(a),t.headers.Authorization=`Bearer ${a}`,V(t)}}catch(i){return He.clearTokens(),window.location.href="/login",Promise.reject(i)}}if(((n=r.response)==null?void 0:n.status)===402){const i=r.response.data;if(i.plan_required){if(i.free_tier_used&&i.free_tier_limit){const o=(i.free_tier_used/1073741824).toFixed(1),a=(i.free_tier_limit/Nt(1024,3)).toFixed(0);alert(`Free tier limit exceeded!

You have used ${o}GB of your ${a}GB free allowance.

Please subscribe to a hibernation plan to continue uploading files.`)}else window.location.href="/plans";return Promise.reject(r)}else if(i.plan_expired)return alert(`Your hibernation plan has expired. Please renew your subscription.
Expired on: ${new Date(i.expires_at).toLocaleDateString()}`),window.location.href="/plans",Promise.reject(r)}return Promise.reject(r)}));const ht={secureLogin:r=>V.post("auth/secure/login/",r),secureRefresh:()=>V.post("auth/secure/refresh/"),secureLogout:()=>V.post("auth/secure/logout/"),secureGetUser:()=>V.get("auth/secure/user/"),secureRegister:r=>V.post("auth/secure/register/",r),login:r=>V.post("auth/login/",r),register:r=>V.post("auth/register/",r),refresh:()=>V.post("auth/refresh/"),getUser:()=>V.get("auth/user/"),verifyEmail:r=>V.post("auth/verify-email/",r),resendVerification:r=>V.post("auth/resend-verification/",r),requestPasswordReset:r=>V.post("auth/request-password-reset/",r),resetPassword:r=>V.post("auth/reset-password/",r)},Te={getFiles:(r={})=>{const t=new URLSearchParams;return r.folder!==void 0&&t.set("folder",r.folder),r.search&&t.set("search",r.search),r.paginate===!1&&t.set("paginate","false"),V.get("media-files/list_optimized/",{params:Object.fromEntries(t)})},archiveFile:r=>V.post(`media-files/${r}/archive/`),restoreFile:(r,t="Standard")=>V.post(`media-files/${r}/restore/`,{restore_tier:t}),downloadFile:r=>V.get(`media-files/${r}/download/`),deleteFile:r=>V.delete(`media-files/${r}/`),bulkDeleteFiles:r=>{const t=Pr.create(ye(R({},pr),{timeout:3e5}));return t.interceptors.request.use(s=>{const n=He.getAuthHeaders();return Object.assign(s.headers,n),s},s=>Promise.reject(s)),t.post("media-files/bulk_delete/",{file_ids:r})},deleteAllFiles:(r=!0)=>V.post("media-files/delete_all/",{confirm_delete_all:r}),getRestoreTiers:()=>V.get("media-files/restore_tiers/"),getSmartTierSuggestion:(r,t)=>V.post("media-files/get_smart_tier_suggestion/",{file_size:r,file_type:t}),getStorageCosts:()=>V.get("media-files/get_storage_costs/"),getStorageCostsINR:()=>V.get("media-files/get_storage_costs_inr/"),autoHibernateFiles:r=>V.post("media-files/auto_hibernate_files/",r),createFolder:(r,t="")=>V.post("create-folder/",{folder_name:r,parent_path:t}),getPresignedUrls:r=>{const t=Pr.create(ye(R({},pr),{timeout:6e4}));return t.interceptors.request.use(s=>{const n=He.getAuthHeaders();return Object.assign(s.headers,n),s},s=>Promise.reject(s)),t.post("media-files/get_presigned_urls/",r)},markUploadComplete:r=>V.post("media-files/mark_upload_complete/",{file_ids:r})},Eo={getJobs:()=>V.get("archive-jobs/"),getJobStats:()=>V.get("archive-jobs/stats/")},Co={getConfig:()=>V.get("s3-config/"),saveConfig:r=>V.post("s3-config/",r)},Ot={getPlans:()=>V.get("hibernation-plans/"),getPlansGroupedByTier:()=>V.get("hibernation-plans/grouped_by_tier/"),getCurrentPlan:()=>V.get("user-hibernation-plans/current_plan/"),getStorageUsage:()=>V.get("user-hibernation-plans/storage_usage/"),subscribe:r=>V.post("user-hibernation-plans/subscribe/",{plan_id:r}),cancelSubscription:()=>V.post("user-hibernation-plans/cancel_subscription/"),getUsageStats:()=>V.get("user-hibernation-plans/usage_stats/")},Sr={createOrder:(r,t)=>V.post("/payments/create_order/",{plan_id:r,amount_inr:t,currency:"INR"}),verifyPayment:(r,t,s,n)=>V.post("/payments/verify_payment/",{payment_id:r,razorpay_order_id:t,razorpay_payment_id:s,razorpay_signature:n}),getPaymentStatus:r=>V.get(`/payments/status/?payment_id=${r}`),getAll:()=>V.get("/payments/"),getStats:()=>V.get("/payments/stats/")},xn={getPresignedUrl:r=>V.post("uppy/presigned-url/",r),markUploadComplete:r=>V.post("uppy/upload-complete/",r),createSession:r=>V.post("uppy/create-session/",r),getProgress:r=>V.get(`uppy/upload-progress/?sessionId=${r}`),listFiles:()=>V.get("uppy/files/")},gn=Object.freeze(Object.defineProperty({__proto__:null,authAPI:ht,default:V,hibernationAPI:Ot,jobAPI:Eo,mediaAPI:Te,paymentAPI:Sr,s3ConfigAPI:Co,uppyAPI:xn},Symbol.toStringTag,{value:"Module"}));class ko{constructor(){this.measurementId="G-EH6V4R00H3",this.isInitialized=!1,this.init()}init(){typeof window!="undefined"&&window.gtag?(this.isInitialized=!0,console.log("Google Analytics initialized")):console.warn("Google Analytics not loaded")}trackPageView(t,s){this.isInitialized&&window.gtag("config",this.measurementId,{page_title:t,page_location:window.location.href,page_path:s})}trackRegistration(t="email"){this.isInitialized&&window.gtag("event","sign_up",{method:t,event_category:"engagement",event_label:"user_registration"})}trackLogin(t="email"){this.isInitialized&&window.gtag("event","login",{method:t,event_category:"engagement",event_label:"user_login"})}trackFileUpload(t,s,n="web"){this.isInitialized&&window.gtag("event","file_upload",{event_category:"file_management",event_label:"upload",value:t,custom_parameters:{file_count:t,total_size_mb:Math.round(s/(1024*1024)),upload_method:n}})}trackFileDownload(t,s){this.isInitialized&&window.gtag("event","file_download",{event_category:"file_management",event_label:"download",value:t,custom_parameters:{file_count:t,total_size_mb:Math.round(s/(1024*1024))}})}trackFileDeletion(t,s){this.isInitialized&&window.gtag("event","file_deletion",{event_category:"file_management",event_label:"delete",value:t,custom_parameters:{file_count:t,total_size_mb:Math.round(s/(1024*1024))}})}trackPlanSubscription(t,s,n){this.isInitialized&&window.gtag("event","purchase",{event_category:"ecommerce",event_label:"plan_subscription",value:s,currency:"INR",custom_parameters:{plan_name:t,plan_price:s,plan_storage_gb:n}})}trackPayment(t,s,n="INR"){this.isInitialized&&window.gtag("event","purchase",{event_category:"ecommerce",event_label:"payment",value:s,currency:n,custom_parameters:{payment_method:t,amount:s}})}trackSearch(t,s){this.isInitialized&&window.gtag("event","search",{event_category:"engagement",event_label:"file_search",search_term:t,custom_parameters:{result_count:s}})}trackError(t,s,n){this.isInitialized&&window.gtag("event","exception",{event_category:"error",event_label:t,description:s,custom_parameters:{error_location:n,error_type:t}})}trackCustomEvent(t,s,n,i=null,o={}){if(!this.isInitialized)return;const a=R({event_category:s,event_label:n},o);i!==null&&(a.value=i),window.gtag("event",t,a)}trackEngagementTime(t,s){this.isInitialized&&window.gtag("event","engagement_time",{event_category:"engagement",event_label:s,value:t,custom_parameters:{time_spent_seconds:t,page_name:s}})}trackFeatureUsage(t,s="used"){this.isInitialized&&window.gtag("event","feature_usage",{event_category:"engagement",event_label:t,custom_parameters:{feature_name:t,action:s}})}}const Dt=new ko,Po=Object.prototype.toString;function Io(r,t){return Po.call(r)===`[object ${t}]`}function fn(r){return Io(r,"Object")}function ls(r){return!!(r&&r.then&&typeof r.then=="function")}function vr(r){return r&&r.Math==Math?r:void 0}const it=typeof globalThis=="object"&&vr(globalThis)||typeof window=="object"&&vr(window)||typeof self=="object"&&vr(self)||typeof global=="object"&&vr(global)||function(){return this}()||{};function mn(r,t,s){const n=s||it,i=n.__SENTRY__=n.__SENTRY__||{};return i[r]||(i[r]=t())}const Ro=typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__,To="Sentry Logger ",Os=["debug","info","warn","error","log","assert","trace"],Bs={};function yn(r){if(!("console"in it))return r();const t=it.console,s={},n=Object.keys(Bs);n.forEach(i=>{const o=Bs[i];s[i]=t[i],t[i]=o});try{return r()}finally{n.forEach(i=>{t[i]=s[i]})}}function Do(){let r=!1;const t={enable:()=>{r=!0},disable:()=>{r=!1},isEnabled:()=>r};return Ro?Os.forEach(s=>{t[s]=(...n)=>{r&&yn(()=>{it.console[s](`${To}[${s}]:`,...n)})}}):Os.forEach(s=>{t[s]=()=>{}}),t}const Rt=Do();function zt(r){return Qr(r,new Map)}function Qr(r,t){if(Fo(r)){const s=t.get(r);if(s!==void 0)return s;const n={};t.set(r,n);for(const i of Object.keys(r))typeof r[i]!="undefined"&&(n[i]=Qr(r[i],t));return n}if(Array.isArray(r)){const s=t.get(r);if(s!==void 0)return s;const n=[];return t.set(r,n),r.forEach(i=>{n.push(Qr(i,t))}),n}return r}function Fo(r){if(!fn(r))return!1;try{const t=Object.getPrototypeOf(r).constructor.name;return!t||t==="Object"}catch(t){return!0}}function ut(){const r=it,t=r.crypto||r.msCrypto;let s=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(s=()=>{const n=new Uint8Array(1);return t.getRandomValues(n),n[0]})}catch(n){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,n=>(n^(s()&15)>>n/4).toString(16))}function Ao(r){return Array.isArray(r)?r:[r]}var xt;(function(r){r[r.PENDING=0]="PENDING";const s=1;r[r.RESOLVED=s]="RESOLVED";const n=2;r[r.REJECTED=n]="REJECTED"})(xt||(xt={}));class Pt{constructor(t){Pt.prototype.__init.call(this),Pt.prototype.__init2.call(this),Pt.prototype.__init3.call(this),Pt.prototype.__init4.call(this),this._state=xt.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(s){this._reject(s)}}then(t,s){return new Pt((n,i)=>{this._handlers.push([!1,o=>{if(!t)n(o);else try{n(t(o))}catch(a){i(a)}},o=>{if(!s)i(o);else try{n(s(o))}catch(a){i(a)}}]),this._executeHandlers()})}catch(t){return this.then(s=>s,t)}finally(t){return new Pt((s,n)=>{let i,o;return this.then(a=>{o=!1,i=a,t&&t()},a=>{o=!0,i=a,t&&t()}).then(()=>{if(o){n(i);return}s(i)})})}__init(){this._resolve=t=>{this._setResult(xt.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(xt.REJECTED,t)}}__init3(){this._setResult=(t,s)=>{if(this._state===xt.PENDING){if(ls(s)){s.then(this._resolve,this._reject);return}this._state=t,this._value=s,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===xt.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(s=>{s[0]||(this._state===xt.RESOLVED&&s[1](this._value),this._state===xt.REJECTED&&s[2](this._value),s[0]=!0)})}}}const bn=1e3;function cs(){return Date.now()/bn}function Wo(){const{performance:r}=it;if(!r||!r.now)return cs;const t=Date.now()-r.now(),s=r.timeOrigin==null?t:r.timeOrigin;return()=>(s+r.now())/bn}const jn=Wo();(()=>{const{performance:r}=it;if(!r||!r.now)return;const t=3600*1e3,s=r.now(),n=Date.now(),i=r.timeOrigin?Math.abs(r.timeOrigin+s-n):t,o=i<t,a=r.timing&&r.timing.navigationStart,c=typeof a=="number"?Math.abs(a+s-n):t,p=c<t;return o||p?i<=c?r.timeOrigin:a:n})();const Er=typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__,vn="production";function Uo(){return mn("globalEventProcessors",()=>[])}function es(r,t,s,n=0){return new Pt((i,o)=>{const a=r[n];if(t===null||typeof a!="function")i(t);else{const d=a(R({},t),s);Er&&a.id&&d===null&&Rt.log(`Event processor "${a.id}" dropped event`),ls(d)?d.then(c=>es(r,c,s,n+1).then(i)).then(null,o):es(r,d,s,n+1).then(i).then(null,o)}})}function zo(r){const t=jn(),s={sid:ut(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>$o(s)};return r&&Ar(s,r),s}function Ar(r,t={}){if(t.user&&(!r.ipAddress&&t.user.ip_address&&(r.ipAddress=t.user.ip_address),!r.did&&!t.did&&(r.did=t.user.id||t.user.email||t.user.username)),r.timestamp=t.timestamp||jn(),t.abnormal_mechanism&&(r.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(r.ignoreDuration=t.ignoreDuration),t.sid&&(r.sid=t.sid.length===32?t.sid:ut()),t.init!==void 0&&(r.init=t.init),!r.did&&t.did&&(r.did=`${t.did}`),typeof t.started=="number"&&(r.started=t.started),r.ignoreDuration)r.duration=void 0;else if(typeof t.duration=="number")r.duration=t.duration;else{const s=r.timestamp-r.started;r.duration=s>=0?s:0}t.release&&(r.release=t.release),t.environment&&(r.environment=t.environment),!r.ipAddress&&t.ipAddress&&(r.ipAddress=t.ipAddress),!r.userAgent&&t.userAgent&&(r.userAgent=t.userAgent),typeof t.errors=="number"&&(r.errors=t.errors),t.status&&(r.status=t.status)}function Lo(r,t){let s={};t?s={status:t}:r.status==="ok"&&(s={status:"exited"}),Ar(r,s)}function $o(r){return zt({sid:`${r.sid}`,init:r.init,started:new Date(r.started*1e3).toISOString(),timestamp:new Date(r.timestamp*1e3).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}const Oo=1;function Bo(r){const{spanId:t,traceId:s}=r.spanContext(),{data:n,op:i,parent_span_id:o,status:a,tags:d,origin:c}=Tr(r);return zt({data:n,op:i,parent_span_id:o,span_id:t,status:a,tags:d,trace_id:s,origin:c})}function Tr(r){return Mo(r)?r.getSpanJSON():typeof r.toJSON=="function"?r.toJSON():{}}function Mo(r){return typeof r.getSpanJSON=="function"}function No(r){const{traceFlags:t}=r.spanContext();return!!(t&Oo)}function Ho(r){if(r)return Go(r)?{captureContext:r}:Vo(r)?{captureContext:r}:r}function Go(r){return r instanceof $t||typeof r=="function"}const qo=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Vo(r){return Object.keys(r).some(t=>qo.includes(t))}function Yo(r,t){return rr().captureException(r,Ho(t))}function Ko(r,t){rr().addBreadcrumb(r,t)}function Xo(r){rr().setUser(r)}function Jo(...r){const t=rr();if(r.length===2){const[s,n]=r;return s?t.withScope(()=>(t.getStackTop().scope=s,n(s))):t.withScope(n)}return t.withScope(r[0])}function Zo(){return rr().getClient()}function Qo(){return rr().getScope()}function wn(r){return r.transaction}function ea(r,t,s){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=s&&s.getUser()||{},a=zt({environment:n.environment||vn,release:n.release,user_segment:o,public_key:i,trace_id:r});return t.emit&&t.emit("createDsc",a),a}function ta(r){const t=Zo();if(!t)return{};const s=ea(Tr(r).trace_id||"",t,Qo()),n=wn(r);if(!n)return s;const i=n&&n._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:o,source:a}=n.metadata;o!=null&&(s.sample_rate=`${o}`);const d=Tr(n);return a&&a!=="url"&&(s.transaction=d.description),s.sampled=String(No(n)),t.emit&&t.emit("createDsc",s),s}function ra(r,t){const{fingerprint:s,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=t;sa(r,t),n&&oa(r,n),aa(r,s),na(r,i),ia(r,o)}function sa(r,t){const{extra:s,tags:n,user:i,contexts:o,level:a,transactionName:d}=t,c=zt(s);c&&Object.keys(c).length&&(r.extra=R(R({},c),r.extra));const p=zt(n);p&&Object.keys(p).length&&(r.tags=R(R({},p),r.tags));const m=zt(i);m&&Object.keys(m).length&&(r.user=R(R({},m),r.user));const w=zt(o);w&&Object.keys(w).length&&(r.contexts=R(R({},w),r.contexts)),a&&(r.level=a),d&&(r.transaction=d)}function na(r,t){const s=[...r.breadcrumbs||[],...t];r.breadcrumbs=s.length?s:void 0}function ia(r,t){r.sdkProcessingMetadata=R(R({},r.sdkProcessingMetadata),t)}function oa(r,t){r.contexts=R({trace:Bo(t)},r.contexts);const s=wn(t);if(s){r.sdkProcessingMetadata=R({dynamicSamplingContext:ta(t)},r.sdkProcessingMetadata);const n=Tr(s).description;n&&(r.tags=R({transaction:n},r.tags))}}function aa(r,t){r.fingerprint=r.fingerprint?Ao(r.fingerprint):[],t&&(r.fingerprint=r.fingerprint.concat(t)),r.fingerprint&&!r.fingerprint.length&&delete r.fingerprint}const la=100;class $t{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Ms()}static clone(t){return t?t.clone():new $t}clone(){const t=new $t;return t._breadcrumbs=[...this._breadcrumbs],t._tags=R({},this._tags),t._extra=R({},this._extra),t._contexts=R({},this._contexts),t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata=R({},this._sdkProcessingMetadata),t._propagationContext=R({},this._propagationContext),t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Ar(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags=R(R({},this._tags),t),this._notifyScopeListeners(),this}setTag(t,s){return this._tags=ye(R({},this._tags),{[t]:s}),this._notifyScopeListeners(),this}setExtras(t){return this._extra=R(R({},this._extra),t),this._notifyScopeListeners(),this}setExtra(t,s){return this._extra=ye(R({},this._extra),{[t]:s}),this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,s){return s===null?delete this._contexts[t]:this._contexts[t]=s,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const s=typeof t=="function"?t(this):t;if(s instanceof $t){const n=s.getScopeData();this._tags=R(R({},this._tags),n.tags),this._extra=R(R({},this._extra),n.extra),this._contexts=R(R({},this._contexts),n.contexts),n.user&&Object.keys(n.user).length&&(this._user=n.user),n.level&&(this._level=n.level),n.fingerprint.length&&(this._fingerprint=n.fingerprint),s.getRequestSession()&&(this._requestSession=s.getRequestSession()),n.propagationContext&&(this._propagationContext=n.propagationContext)}else if(fn(s)){const n=t;this._tags=R(R({},this._tags),n.tags),this._extra=R(R({},this._extra),n.extra),this._contexts=R(R({},this._contexts),n.contexts),n.user&&(this._user=n.user),n.level&&(this._level=n.level),n.fingerprint&&(this._fingerprint=n.fingerprint),n.requestSession&&(this._requestSession=n.requestSession),n.propagationContext&&(this._propagationContext=n.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Ms(),this}addBreadcrumb(t,s){const n=typeof s=="number"?s:la;if(n<=0)return this;const i=R({timestamp:cs()},t),o=this._breadcrumbs;return o.push(i),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:s,_contexts:n,_tags:i,_extra:o,_user:a,_level:d,_fingerprint:c,_eventProcessors:p,_propagationContext:m,_sdkProcessingMetadata:w,_transactionName:f,_span:D}=this;return{breadcrumbs:t,attachments:s,contexts:n,tags:i,extra:o,user:a,level:d,fingerprint:c||[],eventProcessors:p,propagationContext:m,sdkProcessingMetadata:w,transactionName:f,span:D}}applyToEvent(t,s={},n=[]){ra(t,this.getScopeData());const i=[...n,...Uo(),...this._eventProcessors];return es(i,t,s)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=R(R({},this._sdkProcessingMetadata),t),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,s){const n=s&&s.event_id?s.event_id:ut();if(!this._client)return Rt.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(t,ye(R({originalException:t,syntheticException:i},s),{event_id:n}),this),n}captureMessage(t,s,n){const i=n&&n.event_id?n.event_id:ut();if(!this._client)return Rt.warn("No client configured on scope - will not capture message!"),i;const o=new Error(t);return this._client.captureMessage(t,s,ye(R({originalException:t,syntheticException:o},n),{event_id:i}),this),i}captureEvent(t,s){const n=s&&s.event_id?s.event_id:ut();return this._client?(this._client.captureEvent(t,ye(R({},s),{event_id:n}),this),n):(Rt.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Ms(){return{traceId:ut(),spanId:ut().substring(16)}}const ca="7.120.4",_n=parseFloat(ca),da=100;class Sn{constructor(t,s,n,i=_n){this._version=i;let o;s?o=s:(o=new $t,o.setClient(t));let a;n?a=n:(a=new $t,a.setClient(t)),this._stack=[{scope:o}],t&&this.bindClient(t),this._isolationScope=a}isOlderThan(t){return this._version<t}bindClient(t){const s=this.getStackTop();s.client=t,s.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const s=this.pushScope();let n;try{n=t(s)}catch(i){throw this.popScope(),i}return ls(n)?n.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,s){const n=this._lastEventId=s&&s.event_id?s.event_id:ut(),i=new Error("Sentry syntheticException");return this.getScope().captureException(t,ye(R({originalException:t,syntheticException:i},s),{event_id:n})),n}captureMessage(t,s,n){const i=this._lastEventId=n&&n.event_id?n.event_id:ut(),o=new Error(t);return this.getScope().captureMessage(t,s,ye(R({originalException:t,syntheticException:o},n),{event_id:i})),i}captureEvent(t,s){const n=s&&s.event_id?s.event_id:ut();return t.type||(this._lastEventId=n),this.getScope().captureEvent(t,ye(R({},s),{event_id:n})),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,s){const{scope:n,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=da}=i.getOptions&&i.getOptions()||{};if(a<=0)return;const d=cs(),c=R({timestamp:d},t),p=o?yn(()=>o(c,s)):c;p!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",p,s),n.addBreadcrumb(p,a))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,s){this.getScope().setTag(t,s),this.getIsolationScope().setTag(t,s)}setExtra(t,s){this.getScope().setExtra(t,s),this.getIsolationScope().setExtra(t,s)}setContext(t,s){this.getScope().setContext(t,s),this.getIsolationScope().setContext(t,s)}configureScope(t){const{scope:s,client:n}=this.getStackTop();n&&t(s)}run(t){const s=Ns(this);try{t(this)}finally{Ns(s)}}getIntegration(t){const s=this.getClient();if(!s)return null;try{return s.getIntegration(t)}catch(n){return Er&&Rt.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,s){const n=this._callExtensionMethod("startTransaction",t,s);return Er&&!n&&(this.getClient()?Rt.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):Rt.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const s=this.getStackTop().scope,n=s.getSession();n&&Lo(n),this._sendSessionUpdate(),s.setSession()}startSession(t){const{scope:s,client:n}=this.getStackTop(),{release:i,environment:o=vn}=n&&n.getOptions()||{},{userAgent:a}=it.navigator||{},d=zo(R(R({release:i,environment:o,user:s.getUser()},a&&{userAgent:a}),t)),c=s.getSession&&s.getSession();return c&&c.status==="ok"&&Ar(c,{status:"exited"}),this.endSession(),s.setSession(d),d}shouldSendDefaultPii(){const t=this.getClient(),s=t&&t.getOptions();return!!(s&&s.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:s}=this.getStackTop(),n=t.getSession();n&&s&&s.captureSession&&s.captureSession(n)}_callExtensionMethod(t,...s){const i=Wr().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,s);Er&&Rt.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function Wr(){return it.__SENTRY__=it.__SENTRY__||{extensions:{},hub:void 0},it}function Ns(r){const t=Wr(),s=ts(t);return En(t,r),s}function rr(){const r=Wr();if(r.__SENTRY__&&r.__SENTRY__.acs){const t=r.__SENTRY__.acs.getCurrentHub();if(t)return t}return ua(r)}function ua(r=Wr()){return(!ha(r)||ts(r).isOlderThan(_n))&&En(r,new Sn),ts(r)}function ha(r){return!!(r&&r.__SENTRY__&&r.__SENTRY__.hub)}function ts(r){return mn("hub",()=>new Sn,r)}function En(r,t){if(!r)return!1;const s=r.__SENTRY__=r.__SENTRY__||{};return s.hub=t,!0}try{console.log("Sentry temporarily disabled to avoid 403 errors")}catch(r){console.warn("Sentry initialization failed:",r)}const Hs=r=>{try{Xo({id:r==null?void 0:r.id,username:r==null?void 0:r.username,email:r==null?void 0:r.email})}catch(t){console.warn("Failed to set Sentry user context:",t)}},Cn=(r,t={})=>{try{Jo(s=>{Object.keys(t).forEach(n=>{s.setContext(n,t[n])}),Yo(r)})}catch(s){console.warn("Failed to capture exception in Sentry:",s),console.error("Original error:",r)}},pa=(r,t="custom",s="info",n={})=>{try{Ko({message:r,category:t,level:s,data:n,timestamp:Date.now()/1e3})}catch(i){console.warn("Failed to add Sentry breadcrumb:",i)}},xa=()=>{const[r,t]=u.useState(""),[s,n]=u.useState(""),[i,o]=u.useState(""),[a,d]=u.useState(!1),c=vt(),p=()=>{const f={};return r.trim()?r.length<Ne.USERNAME_MIN_LENGTH?f.username=`Username must be at least ${Ne.USERNAME_MIN_LENGTH} characters`:r.length>Ne.USERNAME_MAX_LENGTH&&(f.username=`Username must be less than ${Ne.USERNAME_MAX_LENGTH} characters`):f.username="Username is required",s?s.length<Ne.PASSWORD_MIN_LENGTH&&(f.password=`Password must be at least ${Ne.PASSWORD_MIN_LENGTH} characters`):f.password="Password is required",f},m=f=>{var D,E,_;return((D=f.response)==null?void 0:D.status)===401?"Invalid username or password. Please check your credentials.":((E=f.response)==null?void 0:E.status)===429?"Too many login attempts. Please try again later.":((_=f.response)==null?void 0:_.status)>=500?"Server error. Please try again later.":f.code==="NETWORK_ERROR"||!f.response?"Network error. Please check your connection.":"Login failed. Please try again."},w=f=>C(K,null,function*(){f.preventDefault(),d(!0),o("");const D=p();if(Object.keys(D).length>0){o(Object.values(D)[0]),d(!1);return}try{if({}.VITE_USE_SECURE_AUTH==="true"){const _=yield ht.secureLogin({username:r,password:s}),{user:I,csrf_token:T}=_.data;He.setCSRFToken(T),localStorage.setItem(at.USER,JSON.stringify(I)),Dt.trackLogin("email"),Hs(I),c("/dashboard")}else{const _=yield ht.login({username:r,password:s}),{access:I,refresh:T}=_.data;He.setAccessToken(I),He.setRefreshToken(T),Dt.trackLogin("email"),Hs({username:r}),c("/dashboard")}}catch(E){const _=m(E);o(_),Dt.trackError("login_error",_,"login_form"),Cn(E,{tags:{component:"Login",action:"login_attempt"},extra:{username:r,error_message:_}}),{}.VITE_DEBUG==="true"&&console.error("Login error:",E)}finally{d(!1)}});return e.jsx(h,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(nt,{maxWidth:"sm",children:e.jsxs(ne,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(h,{sx:{textAlign:"center",mb:4},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(h,{component:"img",src:"/icon.png",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Welcome back! Login to your account"})]}),i&&e.jsx(xe,{severity:"error",sx:{mb:3,borderRadius:2},children:i}),e.jsxs(h,{component:"form",onSubmit:w,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(et,{label:"Username",value:r,onChange:f=>t(f.target.value),required:!0,fullWidth:!0,autoComplete:"username",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(et,{type:"password",label:"Password",value:s,onChange:f=>n(f.target.value),required:!0,fullWidth:!0,autoComplete:"current-password",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(z,{type:"submit",variant:"contained",fullWidth:!0,disabled:a,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"}},children:a?"Logging in...":"Login"})]}),e.jsxs(h,{sx:{mt:4,textAlign:"center"},children:[e.jsx(l,{variant:"body2",sx:{color:"#64748b",mb:1},children:e.jsx(Qe,{component:hr,to:"/forgot-password",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Forgot your password?"})}),e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Don't have an account?"," ",e.jsx(Qe,{component:hr,to:"/register",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Register here"})]})]})]})})})},ga=()=>{const[r,t]=u.useState({username:"",email:"",password:""}),[s,n]=u.useState(""),[i,o]=u.useState(!1),a=vt(),d=()=>{const f={};return r.username.trim()?r.username.length<Ne.USERNAME_MIN_LENGTH?f.username=`Username must be at least ${Ne.USERNAME_MIN_LENGTH} characters`:r.username.length>Ne.USERNAME_MAX_LENGTH&&(f.username=`Username must be less than ${Ne.USERNAME_MAX_LENGTH} characters`):f.username="Username is required",r.email.trim()?Ne.EMAIL_REGEX.test(r.email)||(f.email="Please enter a valid email address"):f.email="Email is required",r.password?r.password.length<Ne.PASSWORD_MIN_LENGTH?f.password=`Password must be at least ${Ne.PASSWORD_MIN_LENGTH} characters`:r.password.length>Ne.PASSWORD_MAX_LENGTH&&(f.password=`Password must be less than ${Ne.PASSWORD_MAX_LENGTH} characters`):f.password="Password is required",f},c=f=>{var D,E,_,I,T,j;return((D=f.response)==null?void 0:D.status)===400?((E=f.response.data)==null?void 0:E.error)||"Invalid registration data. Please check your input.":((_=f.response)==null?void 0:_.status)===409?"Username or email already exists. Please choose different credentials.":((I=f.response)==null?void 0:I.status)===201?((T=f.response.data)==null?void 0:T.error)||"Registration successful but email verification failed.":((j=f.response)==null?void 0:j.status)>=500?"Server error. Please try again later.":f.code==="NETWORK_ERROR"||!f.response?"Network error. Please check your connection.":"Registration failed. Please try again."},p=f=>{var D;return(D=f.data)!=null&&D.message?f.data.message:"Registration successful! Please check your email to verify your account."},m=f=>{t(ye(R({},r),{[f.target.name]:f.target.value}))},w=f=>C(K,null,function*(){f.preventDefault(),o(!0),n("");const D=d();if(Object.keys(D).length>0){n(Object.values(D)[0]),o(!1);return}try{const E=yield ht.register(r),_=p(E);n(_),t({username:"",email:"",password:""}),Dt.trackRegistration("email"),setTimeout(()=>{a("/login")},4e3)}catch(E){const _=c(E);n(_),Dt.trackError("registration_error",_,"register_form"),{}.VITE_DEBUG==="true"&&console.error("Registration error:",E)}finally{o(!1)}});return e.jsx(h,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(nt,{maxWidth:"sm",children:e.jsxs(ne,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(h,{sx:{textAlign:"center",mb:4},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(h,{component:"img",src:"/icon.png",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Join us! Create your account"})]}),s&&e.jsx(xe,{severity:s.includes("successful")||s.includes("Registration successful")||s.includes("check your email")?"success":"error",sx:{mb:3,borderRadius:2},children:s}),e.jsxs(h,{component:"form",onSubmit:w,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(et,{name:"username",label:"Username",value:r.username,onChange:m,required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(et,{name:"email",label:"Email",type:"email",value:r.email,onChange:m,required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(et,{name:"password",type:"password",label:"Password",value:r.password,onChange:m,required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(z,{type:"submit",variant:"contained",fullWidth:!0,disabled:i,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(25, 118, 210, 0.3)",color:"rgba(255, 255, 255, 0.7)"}},children:i?"Creating Account...":"Create Account"})]}),e.jsx(h,{sx:{mt:4,textAlign:"center"},children:e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Already have an account?"," ",e.jsx(Qe,{component:hr,to:"/login",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Login here"})]})})]})})})},fa=()=>{const[r,t]=u.useState(""),[s,n]=u.useState(!1),[i,o]=u.useState(""),[a,d]=u.useState(""),c=vt(),p=m=>C(K,null,function*(){var w,f,D;if(m.preventDefault(),n(!0),d(""),o(""),!r){d("Email is required"),n(!1);return}try{const E=yield ht.requestPasswordReset({email:r});o(E.data.message||"Password reset email sent successfully. Please check your email."),t(""),setTimeout(()=>{c("/login")},3e3)}catch(E){((w=E.response)==null?void 0:w.status)===200?(o("If an account with this email exists, a password reset email has been sent."),setTimeout(()=>{c("/login")},3e3)):d(((D=(f=E.response)==null?void 0:f.data)==null?void 0:D.error)||"Failed to send password reset email. Please try again.")}finally{n(!1)}});return e.jsx(h,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(nt,{maxWidth:"sm",children:e.jsxs(ne,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(h,{sx:{textAlign:"center",mb:4},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(h,{component:"img",src:"/icon.png",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Reset your password"})]}),a&&e.jsx(xe,{severity:"error",sx:{mb:3,borderRadius:2},children:a}),i&&e.jsx(xe,{severity:"success",sx:{mb:3,borderRadius:2},children:i}),e.jsxs(h,{component:"form",onSubmit:p,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(et,{name:"email",label:"Email Address",type:"email",value:r,onChange:m=>t(m.target.value),required:!0,fullWidth:!0,disabled:s,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(z,{type:"submit",variant:"contained",fullWidth:!0,disabled:s,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(25, 118, 210, 0.3)",color:"rgba(255, 255, 255, 0.7)"}},children:s?"Sending...":"Send Reset Email"})]}),e.jsx(h,{sx:{mt:4,textAlign:"center"},children:e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Remember your password?"," ",e.jsx(Qe,{component:hr,to:"/login",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Login here"})]})})]})})})},ma=()=>{const[r,t]=u.useState(""),[s,n]=u.useState(""),[i,o]=u.useState(!1),[a,d]=u.useState(""),[c,p]=u.useState(""),[m]=pn(),w=vt(),f=m.get("token");u.useEffect(()=>{f||p("Invalid reset link. Please request a new password reset.")},[f]);const D=E=>C(K,null,function*(){var _,I;if(E.preventDefault(),o(!0),p(""),d(""),!r){p("Password is required"),o(!1);return}if(r.length<8){p("Password must be at least 8 characters long"),o(!1);return}if(r!==s){p("Passwords do not match"),o(!1);return}if(!f){p("Invalid reset token"),o(!1);return}try{const T=yield ht.resetPassword({token:f,password:r});d(T.data.message||"Password reset successfully. You can now login with your new password."),t(""),n(""),setTimeout(()=>{w("/login")},3e3)}catch(T){p(((I=(_=T.response)==null?void 0:_.data)==null?void 0:I.error)||"Failed to reset password. Please try again.")}finally{o(!1)}});return e.jsx(h,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(nt,{maxWidth:"sm",children:e.jsxs(ne,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(h,{sx:{textAlign:"center",mb:4},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(h,{component:"img",src:"/icon.png",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Set your new password"})]}),c&&e.jsx(xe,{severity:"error",sx:{mb:3,borderRadius:2},children:c}),a&&e.jsx(xe,{severity:"success",sx:{mb:3,borderRadius:2},children:a}),e.jsxs(h,{component:"form",onSubmit:D,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(et,{name:"password",label:"New Password",type:"password",value:r,onChange:E=>t(E.target.value),required:!0,fullWidth:!0,disabled:i,variant:"outlined",helperText:"Password must be at least 8 characters long",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(et,{name:"confirmPassword",label:"Confirm New Password",type:"password",value:s,onChange:E=>n(E.target.value),required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(z,{type:"submit",variant:"contained",fullWidth:!0,disabled:i||!f,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(25, 118, 210, 0.3)",color:"rgba(255, 255, 255, 0.7)"}},children:i?"Resetting...":"Reset Password"})]}),e.jsx(h,{sx:{mt:4,textAlign:"center"},children:e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Remember your password?"," ",e.jsx(Qe,{component:hr,to:"/login",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Login here"})]})})]})})})},ya=(r,t={})=>{if(!r)return"N/A";const n=R(R({},{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),t);return new Date(r).toLocaleString(void 0,n)},ba=(r,t=2)=>r===0?"0 GB":`${(r/(1024*1024*1024)).toFixed(t)} GB`,Gs=()=>{var _,I;const[r,t]=u.useState(null),[s,n]=u.useState(null),[i,o]=u.useState(!0),[a,d]=u.useState(null);u.useEffect(()=>{c()},[]);const c=()=>C(K,null,function*(){try{o(!0),d(null);const[T,j]=yield Promise.all([Ot.getCurrentPlan(),Ot.getUsageStats()]);t(T.data),n(j.data)}catch(T){console.error("Error loading overview data:",T),d("Failed to load overview data")}finally{o(!1)}}),p=()=>{if(!r||!r.plan)return{name:"Free Tier",storage:"15 GB",color:"info",icon:e.jsx(dt,{}),description:"Free storage allowance"};const T=r.plan,k={"100gb":{storage:"100 GB",color:"primary"},"500gb":{storage:"500 GB",color:"warning"},"1tb":{storage:"1 TB",color:"error"}}[T.storage_tier]||{storage:"Unknown",color:"primary"};return{name:T.name.replace("_"," ").replace(/\b\w/g,v=>v.toUpperCase()),storage:k.storage,color:k.color,icon:e.jsx(jt,{}),description:T.description}},m=()=>{var v;if(!s)return 0;const j=(((v=s.current_storage)==null?void 0:v.bytes)||s.total_storage_bytes||0)/Nt(1024,3),k=r&&r.plan?r.plan.storage_tier==="100gb"?100:r.plan.storage_tier==="500gb"?500:1024:15;return Math.min(j/k*100,100)},w=()=>{const T=m();return T>=90?"error":T>=75?"warning":"primary"};if(i)return e.jsx(h,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(De,{sx:{width:"100%",maxWidth:400}})});if(a)return e.jsx(xe,{severity:"error",action:e.jsx(z,{color:"inherit",size:"small",onClick:c,children:"Retry"}),children:a});const f=p(),D=m(),E=w();return e.jsxs(h,{sx:{maxWidth:1200,mx:"auto",p:4},children:[e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:[e.jsx(l,{variant:"h4",sx:{fontWeight:800,color:"text.primary"},children:"Storage Overview"}),e.jsx(Be,{onClick:c,sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary","&:hover":{bgcolor:"grey.200",transform:"scale(1.05)"},transition:"all 0.3s ease"},children:e.jsx(Yt,{})})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,md:4,children:e.jsx(Pe,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}},children:e.jsxs(Ie,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(h,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(h,{sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary",mr:2},children:f.icon}),e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:"Current Plan"})]}),e.jsx(ae,{label:f.name,color:f.color,size:"large",sx:{mb:3,fontWeight:600,fontSize:"0.9rem",height:32}}),e.jsxs(h,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(l,{variant:"h3",sx:{fontWeight:800,color:"text.primary",mb:2},children:f.storage}),e.jsx(l,{variant:"body1",sx:{color:"text.secondary",mb:3,lineHeight:1.6},children:f.description})]}),r&&e.jsx(h,{sx:{p:2,bgcolor:"grey.50",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(l,{variant:"caption",sx:{color:"text.secondary",fontWeight:500},children:["Expires: ",ya(r.expires_at)]})})]})})}),e.jsx(F,{item:!0,xs:12,md:4,children:e.jsx(Pe,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}},children:e.jsxs(Ie,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(h,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(h,{sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary",mr:2},children:e.jsx(Oe,{})}),e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:"Storage Usage"})]}),e.jsxs(h,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(l,{variant:"h3",sx:{fontWeight:800,color:"text.primary",mb:2},children:ba((s==null?void 0:s.total_storage_bytes)||0)}),e.jsxs(h,{sx:{mb:3},children:[e.jsx(De,{variant:"determinate",value:D,color:E,sx:{height:10,borderRadius:5,mb:2,bgcolor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:5}}}),e.jsxs(l,{variant:"body1",sx:{color:"text.secondary",fontWeight:500},children:[D.toFixed(1),"% of ",f.storage," used"]})]})]}),s&&e.jsx(h,{sx:{p:2,bgcolor:"grey.50",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(l,{variant:"caption",sx:{color:"text.secondary",fontWeight:500},children:[((I=(_=s.current_storage)==null?void 0:_.gb)==null?void 0:I.toFixed(1))||"0.0"," GB stored"]})})]})})}),e.jsx(F,{item:!0,xs:12,md:4,children:e.jsx(Pe,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}},children:e.jsxs(Ie,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(h,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(h,{sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary",mr:2},children:e.jsx(Ft,{})}),e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:"Account Status"})]}),e.jsx(h,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:e.jsxs(h,{sx:{mb:3},children:[e.jsxs(h,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(Ue,{sx:{color:"text.secondary",mr:1}}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:"Storage Active"})]}),e.jsxs(h,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(Ue,{sx:{color:"text.secondary",mr:1}}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:"Encryption Enabled"})]}),e.jsxs(h,{display:"flex",alignItems:"center",children:[e.jsx(Ue,{sx:{color:"text.secondary",mr:1}}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:"Backup Secure"})]})]})}),e.jsx(h,{sx:{p:2,bgcolor:"grey.50",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:e.jsx(l,{variant:"caption",sx:{color:"text.secondary",fontWeight:600},children:" All systems operational"})})]})})}),e.jsx(F,{item:!0,xs:12,children:e.jsxs(ne,{sx:{p:4,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)"},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,mb:3,color:"text.primary"},children:"Quick Actions"}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(z,{variant:"contained",fullWidth:!0,startIcon:e.jsx(Oe,{}),onClick:()=>window.location.href="/upload",sx:{py:2,borderRadius:2,fontSize:"1rem",fontWeight:600,boxShadow:"0 4px 12px rgba(0,0,0,0.15)","&:hover":{boxShadow:"0 6px 16px rgba(0,0,0,0.2)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"Upload Files"})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(z,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(jt,{}),onClick:()=>{window.location.href="/dashboard#hibernate"},sx:{py:2,borderRadius:2,fontSize:"1rem",fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"Manage Files"})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(z,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(dt,{}),onClick:()=>window.location.href="/plans",sx:{py:2,borderRadius:2,fontSize:"1rem",fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"View Plans"})})]})]})}),!r&&D>50&&e.jsx(F,{item:!0,xs:12,children:e.jsx(xe,{severity:"warning",sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)"},action:e.jsx(z,{color:"inherit",size:"small",onClick:()=>window.location.href="/plans",sx:{fontWeight:600,borderRadius:2,px:2,py:1},children:"View Plans"}),children:e.jsxs(l,{variant:"body1",sx:{fontWeight:500},children:["You're using ",D.toFixed(1),"% of your free storage. Consider upgrading to a hibernation plan for more space and features."]})})})]})]})};class ja{constructor(){this.razorpay=null}initializeRazorpay(t){if(typeof window!="undefined"){if(!t)throw new Error("Razorpay key ID is required");if(typeof window.Razorpay=="undefined")throw new Error("Razorpay script not loaded. Please refresh the page and try again.");const s={}.VITE_ENVIRONMENT==="production",n=s?"production":"development";this.razorpay=new window.Razorpay(R({key:t,currency:"INR",name:"Glacier Archival",description:"Hibernation Plan Subscription",image:"/logo.png",theme:{color:"#6b7280"}},s&&{modal:{ondismiss:()=>{console.log("Payment modal dismissed")}}})),console.log(`Razorpay initialized in ${n} mode with key: ${t.substring(0,10)}...`)}else throw new Error("Razorpay can only be initialized in browser environment")}createPaymentOrder(t,s){return C(this,null,function*(){var n,i,o,a;try{return(yield Sr.createOrder(t,s)).data}catch(d){throw console.error("Error creating payment order:",d),((n=d.response)==null?void 0:n.status)===500?new Error("Payment system is temporarily unavailable. Please contact support at support@datahibernate.in"):((i=d.response)==null?void 0:i.status)===400?new Error("Invalid payment request. Please refresh the page and try again."):d.response?new Error(((a=(o=d.response)==null?void 0:o.data)==null?void 0:a.error)||"Payment system is currently unavailable. Please contact support."):new Error("Network error. Please check your internet connection and try again.")}})}processPayment(t){return C(this,null,function*(){return new Promise((s,n)=>{if(!this.razorpay){n(new Error("Payment system is not initialized. Please refresh the page and try again."));return}const i={order_id:t.razorpay_order_id,amount:t.amount,currency:t.currency,name:t.plan.name,description:`${t.plan.storage_tier} - ${t.plan.name}`,prefill:{name:"",email:""},notes:{plan_id:t.plan.id,payment_id:t.payment_id},handler:o=>C(this,null,function*(){try{const a=yield Sr.verifyPayment(t.payment_id,o.razorpay_order_id,o.razorpay_payment_id,o.razorpay_signature);s({success:!0,paymentData:a.data,razorpayResponse:o})}catch(a){console.error("Payment verification failed:",a),n(new Error("Payment verification failed. Please contact support at support@datahibernate.in for assistance."))}}),modal:{ondismiss:()=>{n(new Error("Payment was cancelled. You can try again when ready."))}}};this.razorpay.open(i)})})}getPaymentStatus(t){return C(this,null,function*(){var s,n;try{return(yield Sr.getPaymentStatus(t)).data}catch(i){throw console.error("Error getting payment status:",i),new Error(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to get payment status")}})}formatAmount(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}getPaymentMethods(){return[{id:"card",name:"Credit/Debit Card",icon:""},{id:"upi",name:"UPI",icon:""},{id:"netbanking",name:"Net Banking",icon:""},{id:"wallet",name:"Wallet",icon:""}]}}const Gr=({onPlanSelect:r,currentPlan:t,onClose:s})=>{var pt,H,Fe;Kt();const[n,i]=u.useState({}),[o,a]=u.useState(!0),[d,c]=u.useState(null),[p,m]=u.useState(null),[w,f]=u.useState(!1),[D]=u.useState(()=>new ja),[E,_]=u.useState(!1),[I,T]=u.useState(null);u.useState(!1);const[j,k]=u.useState(0);u.useEffect(()=>{v()},[]);const v=()=>C(K,null,function*(){try{a(!0);const L=yield Ot.getPlansGroupedByTier();i(L.data.plans||L.data)}catch(L){c("Failed to load hibernation plans"),console.error("Error loading plans:",L)}finally{a(!1)}}),B=L=>C(K,null,function*(){try{_(!0),T(null);const Q=(yield Ot.getPlansGroupedByTier()).data.razorpay_key_id,Xe=window.location.hostname==="localhost";if(!Q)throw new Error("Payment system is currently unavailable. Please contact support at support@datahibernate.in");if(!Xe&&Q==="rzp_test_1234567890")throw new Error("Payment system is not properly configured. Please contact support at support@datahibernate.in");D.initializeRazorpay(Q);const ze=yield D.createPaymentOrder(L.id,parseFloat(L.annual_price_inr)),At=yield D.processPayment(ze);At.success&&(r(At.paymentData.plan),f(!1),alert("Payment successful! Your hibernation plan has been activated."))}catch(he){console.error("Payment error:",he);let Q="Payment is currently unavailable. Please try again later or contact support.";he.message.includes("Razorpay")?Q="Payment system is temporarily unavailable. Please contact support at support@datahibernate.in for assistance.":he.message.includes("network")||he.message.includes("Network")?Q="Network error occurred. Please check your internet connection and try again.":he.message.includes("cancelled")?Q="Payment was cancelled. You can try again when ready.":he.message.includes("verification")&&(Q="Payment verification failed. Please contact support at support@datahibernate.in."),T(Q)}finally{_(!1)}}),Y=L=>{switch(L){case"deep_freeze":return e.jsx(jt,{sx:{fontSize:40,color:"#4f46e5"}});case"flexible_archive":return e.jsx(Cr,{sx:{fontSize:40,color:"#2563eb"}});default:return e.jsx(dt,{sx:{fontSize:40,color:"#4f46e5"}})}},se=L=>{switch(L){case"deep_freeze":return"#4f46e5";case"flexible_archive":return"#2563eb";default:return"#4f46e5"}},pe=L=>{switch(L){case"deep_freeze":return"Deep Hibernate";case"flexible_archive":return"Smart Hibernate";default:return"Hibernation Plan"}},ue=L=>{const he={deep_freeze:{title:"Deep Hibernate",subtitle:" Long-term archival storage",description:"Perfect for memories, backups, and data you rarely need",icon:e.jsx(jt,{}),color:"#4f46e5",gradient:"linear-gradient(135deg, #4f46e5 0%, #3730a3 100%)",lightColor:"#e0e7ff",darkColor:"#312e81",bgColor:"#f8fafc",textColor:"#1e293b"},flexible_archive:{title:"Smart Hibernate",subtitle:" Flexible retrieval storage",description:"Balance between cost and accessibility for regular backups",icon:e.jsx(Cr,{}),color:"#2563eb",gradient:"linear-gradient(135deg, #2563eb 0%, #1e40af 100%)",lightColor:"#dbeafe",darkColor:"#1e3a8a",bgColor:"#f8fafc",textColor:"#1e293b"}};return he[L]||he.deep_freeze},be=L=>L===0?"Instant":L<1?"Minutes":`${L} hours`,Ce=L=>{if(L==null||L==="NaN"||isNaN(L))return"0 GB";const he=L/Nt(1024,3);return he>=1e3?`${(he/1024).toFixed(1)} TB`:`${he.toFixed(0)} GB`};if(o)return e.jsx(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(Vt,{})});if(d)return e.jsx(xe,{severity:"error",sx:{mb:2},children:d});const ie=["deep_freeze","flexible_archive"],Ge=ie[j],je=n[Ge]||[],W=ue(Ge);return e.jsxs(h,{sx:{p:4,maxWidth:1200,mx:"auto"},children:[e.jsxs(h,{sx:{textAlign:"center",mb:6},children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Choose Your Hibernation Plan"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",maxWidth:700,mx:"auto",lineHeight:1.6},children:"Select the perfect storage solution for your data needs. Each plan offers different balance between cost, storage capacity, and retrieval speed."})]}),e.jsx(ne,{sx:{mb:6,borderRadius:3,overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:e.jsx(ss,{value:j,onChange:(L,he)=>k(he),variant:"fullWidth",sx:{"& .MuiTab-root":{py:3,px:4,fontSize:"1.1rem",fontWeight:700,textTransform:"none",transition:"all 0.3s ease"},"& .MuiTabs-indicator":{height:4,borderRadius:"2px 2px 0 0"}},children:ie.map((L,he)=>{const Q=ue(L),Xe=n[L]||[],ze=t&&Xe.some(At=>{var Bt;return At.id===((Bt=t.plan)==null?void 0:Bt.id)});return e.jsx(Ht,{label:e.jsxs(Z,{direction:"row",alignItems:"center",spacing:1,children:[Q.icon,e.jsxs(h,{children:[e.jsx(l,{variant:"subtitle1",sx:{fontWeight:600},children:Q.title}),e.jsx(l,{variant:"caption",sx:{color:"text.secondary"},children:Q.subtitle})]}),ze&&e.jsx(ae,{label:"Active",size:"small",color:"success",sx:{ml:1}})]}),sx:{background:j===he?Q.bgColor:"transparent",color:j===he?Q.textColor:"text.primary",border:j===he?`2px solid ${Q.color}`:"2px solid transparent","&:hover":{background:j===he?Q.bgColor:b(Q.color,.05),border:`2px solid ${b(Q.color,.3)}`}}},L)})})}),e.jsx(ne,{sx:{p:4,mb:6,background:W.bgColor,color:W.textColor,borderRadius:3,boxShadow:`0 8px 24px ${b(W.color,.1)}`,border:`1px solid ${b(W.color,.2)}`},children:e.jsxs(Z,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(h,{sx:{p:3,borderRadius:"50%",bgcolor:W.lightColor,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${W.color}`},children:cr.cloneElement(W.icon,{sx:{fontSize:48,color:W.color}})}),e.jsxs(h,{children:[e.jsx(l,{variant:"h4",sx:{fontWeight:800,mb:2,color:W.textColor},children:W.title}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",lineHeight:1.5},children:W.description})]})]})}),e.jsx(F,{container:!0,spacing:4,children:je.map((L,he)=>{var ze;const Q=((ze=t==null?void 0:t.plan)==null?void 0:ze.id)===L.id,Xe=he===1;return e.jsx(F,{item:!0,xs:12,md:4,children:e.jsxs(Pe,{sx:R(R({height:"100%",position:"relative",border:`2px solid ${b(W.color,.15)}`,borderRadius:4,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)","&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:`0 20px 60px ${b(W.color,.25)}`,borderColor:W.color}},Q&&{borderColor:W.color,background:`linear-gradient(145deg, ${b(W.color,.05)} 0%, ${b(W.color,.02)} 100%)`,boxShadow:`0 8px 32px ${b(W.color,.15)}`}),Xe&&!Q&&{borderColor:W.color,boxShadow:`0 8px 32px ${b(W.color,.2)}`,background:`linear-gradient(145deg, ${b(W.color,.02)} 0%, #ffffff 100%)`}),children:[Xe&&!Q&&e.jsx(ae,{label:" Most Popular",sx:{position:"absolute",top:20,right:20,zIndex:1,bgcolor:W.color,color:"white",fontWeight:700,fontSize:"0.875rem",borderRadius:2,boxShadow:`0 4px 12px ${b(W.color,.3)}`}}),Q&&e.jsx(ae,{label:" Current Plan",sx:{position:"absolute",top:20,right:20,zIndex:1,bgcolor:"#10b981",color:"white",fontWeight:700,fontSize:"0.875rem",borderRadius:2,boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"}}),e.jsx(Ie,{sx:{p:4},children:e.jsxs(Z,{spacing:4,children:[e.jsxs(h,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h2",sx:{fontWeight:800,color:W.color,mb:2},children:Ce(L.storage_size_bytes)}),e.jsx(l,{variant:"h6",color:"text.secondary",sx:{fontWeight:600},children:"Storage Capacity"})]}),e.jsxs(h,{sx:{textAlign:"center",p:3,bgcolor:W.lightColor,borderRadius:3,border:`1px solid ${b(W.color,.2)}`},children:[e.jsxs(l,{variant:"h3",sx:{fontWeight:800,mb:1,color:W.textColor},children:["",L.annual_price_inr]}),e.jsxs(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:["per year (",L.user_cost_inr,"/month)"]})]}),e.jsx(z,{fullWidth:!0,variant:Q?"outlined":"contained",onClick:()=>B(L),disabled:Q,sx:{bgcolor:Q?"transparent":W.color,color:Q?W.textColor:"white",borderColor:W.color,borderRadius:3,py:3,fontSize:"1.1rem",fontWeight:700,textTransform:"none",boxShadow:Q?"none":`0 4px 16px ${b(W.color,.2)}`,transition:"all 0.3s ease","&:hover":{bgcolor:Q?W.lightColor:W.darkColor,transform:Q?"none":"translateY(-2px)",boxShadow:Q?"none":`0 8px 24px ${b(W.color,.3)}`},"&:disabled":{bgcolor:"transparent",color:W.color,borderColor:W.color}},children:Q?" Current Plan":"Select Plan"})]})})]})},L.id)})}),e.jsxs(ne,{sx:{p:4,mt:6,background:W.bgColor,borderRadius:3,boxShadow:`0 4px 16px ${b(W.color,.08)}`,border:`1px solid ${b(W.color,.15)}`},children:[e.jsxs(l,{variant:"h5",sx:{fontWeight:700,mb:4,color:W.textColor,textAlign:"center"},children:[W.title," Features"]}),e.jsxs(F,{container:!0,spacing:4,children:[e.jsx(F,{item:!0,xs:12,md:4,children:e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:2,p:3,bgcolor:b(W.color,.05),borderRadius:3,height:"100%"},children:[e.jsx(h,{sx:{p:2,bgcolor:W.lightColor,borderRadius:2},children:e.jsx(qr,{sx:{fontSize:32,color:W.color}})}),e.jsxs(h,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,mb:1,color:"text.primary"},children:"Restore Time"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:be(((pt=je[0])==null?void 0:pt.restore_time_hours)||12)})]})]})}),e.jsx(F,{item:!0,xs:12,md:4,children:e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:2,p:3,bgcolor:b(W.color,.05),borderRadius:3,height:"100%"},children:[e.jsx(h,{sx:{p:2,bgcolor:W.lightColor,borderRadius:2},children:e.jsx(Ft,{sx:{fontSize:32,color:W.color}})}),e.jsxs(h,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,mb:1,color:"text.primary"},children:"Retrieval Allowance"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:((H=je[0])==null?void 0:H.free_retrieval_gb)>0?`${je[0].free_retrieval_gb} GB free every ${je[0].retrieval_period_months} months`:"Unlimited retrievals"})]})]})}),e.jsx(F,{item:!0,xs:12,md:4,children:e.jsx(h,{sx:{p:3,bgcolor:b(W.color,.08),borderRadius:3,border:`1px solid ${b(W.color,.2)}`,textAlign:"center",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(l,{variant:"body1",sx:{fontStyle:"italic",fontWeight:500,color:W.textColor},children:['"',((Fe=je[0])==null?void 0:Fe.user_message)||"Your data sleeps safely  wake it only when needed.",'"']})})})]})]}),e.jsxs(ft,{open:w,onClose:()=>f(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(mt,{sx:{textAlign:"center",pb:1},children:e.jsx(l,{variant:"h5",sx:{fontWeight:700},children:"Confirm Subscription"})}),e.jsx(yt,{children:p&&e.jsxs(Z,{spacing:3,children:[e.jsx(ne,{sx:{p:3,background:ue(p.name).gradient,color:"white",borderRadius:2},children:e.jsxs(Z,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(h,{sx:{p:2,borderRadius:"50%",bgcolor:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:Y(p.name)}),e.jsxs(h,{children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:700},children:[pe(p.name)," - ",Ce(p.storage_size_bytes)]}),e.jsx(l,{variant:"body2",sx:{opacity:.9},children:p.description})]})]})}),I&&e.jsxs(xe,{severity:"error",sx:{mb:2,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)"},action:e.jsx(z,{color:"inherit",size:"small",onClick:()=>T(null),sx:{fontWeight:600,borderRadius:2,px:2,py:1},children:"Dismiss"}),children:[e.jsx(l,{variant:"body1",sx:{fontWeight:500},children:I}),I.includes("support@datahibernate.in")&&e.jsx(l,{variant:"body2",sx:{mt:1,opacity:.8},children:"We apologize for the inconvenience. Our team is working to resolve this issue."})]}),e.jsxs(h,{sx:{textAlign:"center"},children:[e.jsxs(l,{variant:"h4",sx:{fontWeight:700,color:se(p.name)},children:["",p.annual_price_inr]}),e.jsxs(l,{variant:"body1",color:"text.secondary",children:["per year (",p.user_cost_inr,"/month)"]})]}),e.jsxs(Z,{spacing:2,children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(qr,{sx:{fontSize:20,color:se(p.name)}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Restore Time:"})," ",be(p.restore_time_hours)]})]}),e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ft,{sx:{fontSize:20,color:se(p.name)}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Retrieval:"})," ",p.free_retrieval_gb>0?`${p.free_retrieval_gb} GB free every ${p.retrieval_period_months} months`:"Unlimited retrievals"]})]})]}),e.jsx(xe,{severity:"info",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Subscription Terms:"})," This plan will be active for 1 year from the date of purchase. You can cancel anytime, but no refunds will be provided for unused time."]})})]})}),e.jsxs(Xt,{sx:{p:3,pt:1},children:[e.jsx(z,{onClick:()=>f(!1),variant:"outlined",fullWidth:!0,sx:{mr:1},children:"Cancel"}),e.jsx(z,{onClick:()=>B(p),variant:"contained",disabled:E,startIcon:E?e.jsx(Vt,{size:20}):e.jsx(Ue,{}),fullWidth:!0,sx:{ml:1},children:E?"Processing Payment...":"Pay & Subscribe"})]})]})]})},kn=()=>{const r=Kt(),[t,s]=u.useState(null),[n,i]=u.useState(null),[o,a]=u.useState(!0),[d,c]=u.useState(null),[p,m]=u.useState(!1),[w,f]=u.useState(!1);u.useEffect(()=>{D()},[]);const D=()=>C(K,null,function*(){try{a(!0),c(null);const[se,pe]=yield Promise.allSettled([Ot.getCurrentPlan().catch(ue=>{var be;if(((be=ue.response)==null?void 0:be.status)===404)return{data:null};throw ue}),Ot.getUsageStats()]);if(se.status==="fulfilled"){const ue=se.value.data;ue&&ue.is_free_tier?s(null):s(ue)}else se.status==="rejected"&&(console.error("Error loading current plan:",se.reason),s(null));pe.status==="fulfilled"?i(pe.value.data):pe.status==="rejected"&&(console.error("Error loading usage stats:",pe.reason),i(null))}catch(se){console.error("Error loading plan data:",se),c("Failed to load plan information")}finally{a(!1)}}),E=()=>C(K,null,function*(){f(!0),yield D(),f(!1)}),_=se=>{s({plan:se}),m(!1),D()},I=se=>{switch(se){case"deep_freeze":return e.jsx(jt,{sx:{fontSize:32,color:"#94a3b8"}});case"flexible_archive":return e.jsx(Cr,{sx:{fontSize:32,color:"#60a5fa"}});case"instant_archive":return e.jsx(Dr,{sx:{fontSize:32,color:"#34d399"}});default:return e.jsx(dt,{sx:{fontSize:32}})}},T=se=>{switch(se){case"deep_freeze":return"#94a3b8";case"flexible_archive":return"#60a5fa";case"instant_archive":return"#34d399";default:return r.palette.primary.main}},j=se=>{switch(se){case"deep_freeze":return" Hibernate (Deep Freeze Tier)";case"flexible_archive":return" Smart Hibernate (Flexible Archive Tier)";case"instant_archive":return" Quick Hibernate (Instant Archive Tier)";default:return"Hibernation Plan"}},k=se=>{const pe=se/1073741824;return pe>=1e3?`${(pe/1024).toFixed(1)} TB`:`${pe.toFixed(1)} GB`},v=se=>{const pe=se/1073741824;return pe>=1e3?`${(pe/1024).toFixed(2)} TB`:`${pe.toFixed(2)} GB`};if(o)return e.jsx(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(Vt,{})});if(d)return e.jsx(xe,{severity:"error",sx:{mb:2},children:d});if(!t)return e.jsxs(h,{sx:{p:3},children:[e.jsx(l,{variant:"h4",sx:{mb:3,textAlign:"center",fontWeight:700},children:"Storage Dashboard"}),(n==null?void 0:n.is_free_tier)&&e.jsxs(ne,{elevation:3,sx:{p:4,mb:4,borderRadius:2,border:"2px solid #6b7280",bgcolor:"rgba(107, 114, 128, 0.05)"},children:[e.jsxs(Z,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsxs(Z,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(dt,{sx:{fontSize:40,color:"#6b7280"}}),e.jsxs(h,{children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,color:"#6b7280"},children:"Free Tier - 15GB"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Upload and manage files up to 15GB for free"})]})]}),e.jsx(ae,{label:"Free Tier",color:"primary",icon:e.jsx(Ue,{}),sx:{fontSize:"1rem",height:32,px:1}})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Storage Usage"}),e.jsxs(Z,{spacing:1,children:[e.jsxs(l,{variant:"body1",children:["Used: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_gb)||0," GB"]})," / ",(n==null?void 0:n.storage_limit_gb)||15," GB"]}),e.jsxs(l,{variant:"body1",children:["Percentage: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_percentage)||0,"%"]})]}),e.jsxs(h,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Storage Usage"}),e.jsx(De,{variant:"determinate",value:(n==null?void 0:n.storage_used_percentage)||0,sx:{height:8,borderRadius:4,bgcolor:"rgba(107, 114, 128, 0.1)","& .MuiLinearProgress-bar":{bgcolor:"#6b7280"}}})]})]})]}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Upgrade Options"}),e.jsxs(Z,{spacing:1,children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:" Up to 1TB storage capacity"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:" Advanced hibernation features"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:" Priority support"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:" Cost-effective archival storage"})]})]})]}),e.jsx(h,{mt:4,display:"flex",justifyContent:"center",children:e.jsx(z,{variant:"contained",size:"large",onClick:()=>m(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5,bgcolor:"#6b7280","&:hover":{bgcolor:"#4b5563"}},children:"Upgrade to Hibernation Plan"})})]}),!(n!=null&&n.is_free_tier)&&e.jsx(xe,{severity:"info",sx:{mb:3},children:"You don't have an active hibernation plan. Choose a plan to start storing your data efficiently."}),e.jsx(h,{sx:{textAlign:"center",mb:4},children:e.jsx(z,{variant:"contained",size:"large",onClick:()=>m(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5},children:"View Available Plans"})}),e.jsxs(ft,{open:p,onClose:()=>m(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(mt,{children:"Choose Your Hibernation Plan"}),e.jsx(yt,{children:e.jsx(Gr,{onPlanSelect:_,onClose:()=>m(!1)})})]})]});if(o)return e.jsx(h,{sx:{p:3,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsx(Vt,{size:60})});if(!t)return e.jsxs(h,{sx:{p:3},children:[e.jsx(l,{variant:"h4",sx:{mb:3,textAlign:"center",fontWeight:700},children:"Storage Dashboard"}),(n==null?void 0:n.is_free_tier)&&e.jsxs(ne,{elevation:3,sx:{p:4,mb:4,borderRadius:2,border:"2px solid #6b7280",bgcolor:"rgba(107, 114, 128, 0.05)"},children:[e.jsxs(Z,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsxs(Z,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(dt,{sx:{fontSize:40,color:"#6b7280"}}),e.jsxs(h,{children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,color:"#6b7280"},children:"Free Tier - 15GB"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Upload and manage files up to 15GB for free"})]})]}),e.jsx(ae,{label:"Free Tier",color:"primary",icon:e.jsx(Ue,{}),sx:{fontSize:"1rem",height:32,px:1}})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Storage Usage"}),e.jsxs(Z,{spacing:1,children:[e.jsxs(l,{variant:"body1",children:["Used: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_gb)||0," GB"]})," / ",(n==null?void 0:n.storage_limit_gb)||15," GB"]}),e.jsxs(l,{variant:"body1",children:["Percentage: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_percentage)||0,"%"]})]}),e.jsxs(h,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Storage Usage"}),e.jsx(De,{variant:"determinate",value:(n==null?void 0:n.storage_used_percentage)||0,sx:{height:8,borderRadius:4,bgcolor:"rgba(107, 114, 128, 0.1)","& .MuiLinearProgress-bar":{bgcolor:"#6b7280"}}})]})]})]}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Upgrade Options"}),e.jsxs(Z,{spacing:1,children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:" Up to 1TB storage capacity"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:" Advanced hibernation features"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:" Priority support"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:" Cost-effective archival storage"})]})]})]}),e.jsx(h,{mt:4,display:"flex",justifyContent:"center",children:e.jsx(z,{variant:"contained",size:"large",onClick:()=>m(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5,bgcolor:"#6b7280","&:hover":{bgcolor:"#4b5563"}},children:"Upgrade to Hibernation Plan"})})]}),!(n!=null&&n.is_free_tier)&&e.jsx(xe,{severity:"info",sx:{mb:3},children:"You don't have an active hibernation plan. Choose a plan to start storing your data efficiently."}),e.jsx(h,{sx:{textAlign:"center",mb:4},children:e.jsx(z,{variant:"contained",size:"large",onClick:()=>m(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5},children:"View Available Plans"})}),e.jsxs(ft,{open:p,onClose:()=>m(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(mt,{children:e.jsx(l,{variant:"h5",sx:{fontWeight:700},children:"Choose Your Hibernation Plan"})}),e.jsx(yt,{children:e.jsx(Gr,{onPlanSelect:_,currentPlan:t,onClose:()=>m(!1)})})]})]});const B=t.plan,Y=T(B.name);return e.jsxs(h,{sx:{p:3},children:[e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:700},children:"Hibernation Plan Dashboard"}),e.jsx(z,{startIcon:e.jsx(Yt,{}),onClick:E,disabled:w,sx:{textTransform:"none"},children:w?"Refreshing...":"Refresh"})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Pe,{sx:{height:"100%"},children:e.jsx(Ie,{sx:{p:3},children:e.jsxs(Z,{spacing:2,children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(h,{sx:{p:1.5,borderRadius:"50%",bgcolor:b(Y,.1)},children:I(B.name)}),e.jsxs(h,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600},children:j(B.name)}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[k(B.storage_size_bytes)," Storage"]})]})]}),e.jsx(Gt,{}),e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Annual Price"}),e.jsxs(l,{variant:"h6",sx:{fontWeight:600},children:["",B.annual_price_inr]})]}),e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Monthly Cost"}),e.jsxs(l,{variant:"body1",children:["",B.user_cost_inr]})]}),e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Restore Time"}),e.jsx(ae,{label:B.restore_time_hours===0?"Instant":`${B.restore_time_hours} hours`,size:"small",sx:{bgcolor:b(Y,.1),color:Y}})]}),e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Free Retrieval"}),e.jsx(l,{variant:"body2",children:B.free_retrieval_gb>0?`${B.free_retrieval_gb} GB/${B.retrieval_period_months===1?"month":`${B.retrieval_period_months} months`}`:"Unlimited"})]}),e.jsx(z,{variant:"outlined",startIcon:e.jsx(Xs,{}),onClick:()=>m(!0),sx:{textTransform:"none",borderColor:Y,color:Y},children:"Change Plan"})]})})})}),n&&e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Pe,{sx:{height:"100%"},children:e.jsxs(Ie,{sx:{p:3},children:[e.jsx(l,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Usage Statistics"}),e.jsxs(Z,{spacing:3,children:[e.jsxs(h,{children:[e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Storage Used"}),e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:[v(n.storage_used_bytes)," / ",v(n.storage_limit_bytes)]})]}),e.jsx(De,{variant:"determinate",value:n.storage_used_percentage,sx:{height:8,borderRadius:4,bgcolor:b(Y,.1),"& .MuiLinearProgress-bar":{bgcolor:Y,borderRadius:4}}}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[n.storage_used_percentage.toFixed(1),"% used"]})]}),B.free_retrieval_gb>0&&e.jsxs(h,{children:[e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Retrieval Used"}),e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:[n.retrieval_used_gb.toFixed(1)," / ",n.retrieval_limit_gb," GB"]})]}),e.jsx(De,{variant:"determinate",value:n.retrieval_used_gb/n.retrieval_limit_gb*100,sx:{height:8,borderRadius:4,bgcolor:b("#f59e0b",.1),"& .MuiLinearProgress-bar":{bgcolor:"#f59e0b",borderRadius:4}}}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[n.retrieval_remaining_gb.toFixed(1)," GB remaining"]})]}),e.jsxs(h,{sx:{p:2,bgcolor:b("#f59e0b",.05),borderRadius:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Plan Expires"}),e.jsx(l,{variant:"body1",sx:{fontWeight:600},children:new Date(n.plan_expires_at).toLocaleDateString()}),n.is_expired&&e.jsx(xe,{severity:"warning",sx:{mt:1},children:"Plan has expired"})]})]})]})})})]}),e.jsxs(ft,{open:p,onClose:()=>m(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(mt,{children:"Change Hibernation Plan"}),e.jsx(yt,{children:e.jsx(Gr,{currentPlan:t,onPlanSelect:_,onClose:()=>m(!1)})})]})]})},va="modulepreload",wa=function(r){return"/"+r},qs={},ds=function(t,s,n){if(!s||s.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=wa(o),o in qs)return;qs[o]=!0;const a=o.endsWith(".css"),d=a?'[rel="stylesheet"]':"";if(!!n)for(let m=i.length-1;m>=0;m--){const w=i[m];if(w.href===o&&(!a||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${d}`))return;const p=document.createElement("link");if(p.rel=a?"stylesheet":va,a||(p.as="script",p.crossOrigin=""),p.href=o,document.head.appendChild(p),a)return new Promise((m,w)=>{p.addEventListener("load",m),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};class _a{constructor(){this.algorithm="AES-GCM",this.keyLength=256,this.ivLength=12,this.pbkdf2Iterations=1e5,this.saltLength=32}deriveKey(t,s){return C(this,null,function*(){const i=new TextEncoder().encode(t),o=yield crypto.subtle.importKey("raw",i,"PBKDF2",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"PBKDF2",salt:s,iterations:this.pbkdf2Iterations,hash:"SHA-256"},o,{name:this.algorithm,length:this.keyLength},!1,["encrypt","decrypt"])})}generateSalt(){return crypto.getRandomValues(new Uint8Array(this.saltLength))}generateIV(){return crypto.getRandomValues(new Uint8Array(this.ivLength))}encryptFile(t,s){return C(this,null,function*(){try{const n=this.generateSalt(),i=this.generateIV(),o=yield this.deriveKey(s,n),a=yield crypto.subtle.encrypt({name:this.algorithm,iv:i},o,t),d={algorithm:this.algorithm,keyLength:this.keyLength,ivLength:this.ivLength,pbkdf2Iterations:this.pbkdf2Iterations,salt:Array.from(n),iv:Array.from(i),version:"1.0",timestamp:Date.now()};return{encryptedData:a,metadata:d}}catch(n){throw console.error("Encryption failed:",n),new Error(`Encryption failed: ${n.message}`)}})}decryptFile(t,s,n){return C(this,null,function*(){try{if(!s||!s.salt||!s.iv)throw new Error("Invalid encryption metadata");const i=new Uint8Array(s.salt),o=new Uint8Array(s.iv),a=yield this.deriveKey(n,i);return yield crypto.subtle.decrypt({name:this.algorithm,iv:o},a,t)}catch(i){throw console.error("Decryption failed:",i),new Error(`Decryption failed: ${i.message}`)}})}encryptFileObject(t,s){return C(this,null,function*(){try{const n=yield t.arrayBuffer(),{encryptedData:i,metadata:o}=yield this.encryptFile(n,s);return{encryptedFile:new File([i],`encrypted_${t.name}`,{type:"application/octet-stream",lastModified:t.lastModified}),metadata:o}}catch(n){throw console.error("File encryption failed:",n),new Error(`File encryption failed: ${n.message}`)}})}decryptFileObject(t,s,n){return C(this,null,function*(){try{const i=yield t.arrayBuffer(),o=yield this.decryptFile(i,s,n),a=t.name.replace("encrypted_","");return new File([o],a,{type:s.originalType||"application/octet-stream",lastModified:t.lastModified})}catch(i){throw console.error("File decryption failed:",i),new Error(`File decryption failed: ${i.message}`)}})}verifyEncryption(t){return C(this,null,function*(){try{const s=new TextEncoder().encode("Glacier Archival E2E Encryption Test"),{encryptedData:n,metadata:i}=yield this.encryptFile(s,t),o=yield this.decryptFile(n,i,t),a=new TextDecoder().decode(s),d=new TextDecoder().decode(o);return a===d}catch(s){return console.error("Encryption verification failed:",s),!1}})}getEncryptionInfo(){return{algorithm:this.algorithm,keyLength:this.keyLength,pbkdf2Iterations:this.pbkdf2Iterations,features:["AES-GCM 256-bit encryption","PBKDF2 key derivation (100,000 iterations)","Random IV for each file","Authentication tags for integrity","Zero-knowledge architecture","Open source implementation"],securityLevel:"Military-grade",compliance:["FIPS 140-2","Common Criteria"]}}}class Sa{constructor(){this.encryption=new _a,this.isEncryptionEnabled=!1,this.masterPassword=null,this.encryptionCache=new Map}initializeEncryption(t){return C(this,null,function*(){try{if(!t||t.length<8)throw new Error("Master password must be at least 8 characters");if(!(yield this.encryption.verifyEncryption(t)))throw new Error("Encryption verification failed");return this.masterPassword=t,this.isEncryptionEnabled=!0,console.log("E2E Encryption initialized successfully"),!0}catch(s){throw console.error("Encryption initialization failed:",s),this.isEncryptionEnabled=!1,this.masterPassword=null,s}})}disableEncryption(){this.isEncryptionEnabled=!1,this.masterPassword=null,this.encryptionCache.clear(),console.log("E2E Encryption disabled")}isEnabled(){return this.isEncryptionEnabled&&!!this.masterPassword}encryptFileForUpload(t,s=null){return C(this,null,function*(){if(!this.isEnabled())throw new Error("Encryption not initialized");try{s&&s(0,"Starting encryption...");const n={originalName:t.name,originalType:t.type,originalSize:t.size,originalLastModified:t.lastModified};s&&s(25,"Reading file data...");const{encryptedFile:i,metadata:o}=yield this.encryption.encryptFileObject(t,this.masterPassword);return s&&s(75,"Finalizing encryption..."),o.originalMetadata=n,this.encryptionCache.set(t.name,o),s&&s(100,"Encryption complete"),console.log(`File encrypted: ${t.name} (${t.size}  ${i.size} bytes)`),{encryptedFile:i,metadata:o}}catch(n){throw console.error("File encryption failed:",n),new Error(`Encryption failed: ${n.message}`)}})}decryptFileAfterDownload(t,s,n=null){return C(this,null,function*(){if(!this.isEnabled())throw new Error("Encryption not initialized");try{n&&n(0,"Starting decryption..."),n&&n(25,"Reading encrypted data...");const i=yield this.encryption.decryptFileObject(t,s,this.masterPassword);if(n&&n(75,"Restoring file properties..."),s.originalMetadata){const o=s.originalMetadata;Object.defineProperty(i,"name",{value:o.originalName,writable:!1}),Object.defineProperty(i,"type",{value:o.originalType,writable:!1})}return n&&n(100,"Decryption complete"),console.log(`File decrypted: ${t.name} (${t.size}  ${i.size} bytes)`),i}catch(i){throw console.error("File decryption failed:",i),new Error(`Decryption failed: ${i.message}`)}})}getEncryptionMetadata(t){return this.encryptionCache.get(t)||null}storeEncryptionMetadata(t,s){this.encryptionCache.set(t,s)}clearEncryptionMetadata(t){this.encryptionCache.delete(t)}getEncryptionStatus(){const t=this.encryption.getEncryptionInfo();return{enabled:this.isEnabled(),initialized:!!this.masterPassword,algorithm:t.algorithm,keyLength:t.keyLength,features:t.features,securityLevel:t.securityLevel,compliance:t.compliance,cachedFiles:this.encryptionCache.size}}testEncryption(){return C(this,null,function*(){if(!this.isEnabled())throw new Error("Encryption not initialized");try{const t=Date.now(),s="Glacier Archival E2E Encryption Test - "+new Date().toISOString(),n=new File([s],"test.txt",{type:"text/plain"}),{encryptedFile:i,metadata:o}=yield this.encryptFileForUpload(n),a=yield this.decryptFileAfterDownload(i,o),c=Date.now()-t,m=(yield a.text())===s;return{success:m,duration:c,originalSize:n.size,encryptedSize:i.size,decryptedSize:a.size,compressionRatio:(i.size/n.size).toFixed(2),message:m?"Encryption test passed":"Encryption test failed"}}catch(t){return{success:!1,error:t.message,message:"Encryption test failed"}}})}getMemoryUsage(){return{cacheSize:this.encryptionCache.size,cacheKeys:Array.from(this.encryptionCache.keys()),memoryEstimate:this.encryptionCache.size*1024}}clearCache(){this.encryptionCache.clear(),console.log("Encryption cache cleared")}}const Ye=new Sa,Ea={EXPEDITED:{label:"Quick Wake-Up",emoji:"",time:"1-5 minutes",description:"Fastest restore option",cost:"High",technical:"Expedited"},STANDARD:{label:"Standard Wake-Up",emoji:"",time:"3-5 hours",description:"Default restore option",cost:"Standard",technical:"Standard"},BULK:{label:"Slow Wake-Up",emoji:"",time:"5-12 hours",description:"Cheapest restore option",cost:"Lowest",technical:"Bulk"}},Ca=r=>{const[t,s]=u.useState(!1),[n,i]=u.useState(!1),[o,a]=u.useState(null),[d,c]=u.useState(!1),[p,m]=u.useState(null),w=k=>C(K,null,function*(){try{const v=yield Te.downloadFile(k.id),{download_url:B,filename:Y,file_size:se,is_encrypted:pe,encryption_metadata:ue}=v.data;m({filename:Y,file_size:se,is_encrypted:pe,encryption_metadata:ue}),c(!0);const be=yield fetch(B);if(!be.ok)throw new Error(`Failed to download file: ${be.status}`);const Ce=yield be.blob();let ie=Ce,Ge=Y;if(pe&&ue&&Ye.isEnabled())try{console.log(`Decrypting file: ${Y}`);const H=new File([Ce],Y,{type:Ce.type}),Fe=yield Ye.decryptFileAfterDownload(H,ue,(L,he)=>{console.log(`Decrypting ${Y}: ${L}% - ${he}`)});ie=Fe,Ge=Fe.name,console.log(`File decrypted successfully: ${Y}`)}catch(H){throw console.error(`Decryption failed for ${Y}:`,H),new Error(`Decryption failed: ${H.message}`)}else if(pe&&!Ye.isEnabled())throw new Error("File is encrypted but encryption service is not enabled. Please set up your master password first.");const je=window.URL.createObjectURL(ie),W=document.createElement("a");return W.href=je,W.download=Ge,document.body.appendChild(W),W.click(),document.body.removeChild(W),window.URL.revokeObjectURL(je),c(!1),{success:!0,message:`Download started for ${Ge}${pe?" (decrypted)":""}`}}catch(v){throw console.error("Download failed:",v),c(!1),v}}),f=k=>C(K,null,function*(){var v,B;try{return k.status==="archived"?{success:!1,message:"File is already hibernated "}:k.status==="archiving"?{success:!1,message:"File is already hibernating... "}:k.status!=="uploaded"&&k.status!=="restored"?{success:!1,message:`Cannot hibernate file in ${k.status} state`}:(yield Te.archiveFile(k.id),{success:!0,message:` ${k.original_filename} is now hibernating!`})}catch(Y){console.error("Archive failed:",Y);const se=((B=(v=Y.response)==null?void 0:v.data)==null?void 0:B.error)||Y.message||"Archive failed";throw alert(`Failed to hibernate file: ${se}`),Y}}),D=k=>C(K,null,function*(){return a(k),i(!0),{success:!0,message:"Restore dialog opened"}}),E=k=>C(K,null,function*(){try{const v=yield Te.restoreFile(o.id,k),Y=` Wake-up initiated! Your file will be ready in ${Ea[k.toUpperCase()].time}.`;return i(!1),a(null),r&&(yield r()),{success:!0,message:Y}}catch(v){throw console.error("Error restoring file:",v),v}}),_=(k,v=!1)=>C(K,null,function*(){if(!v&&!window.confirm(` Delete "${k.original_filename}"?

This will permanently delete the file from:
 Database records
 S3 storage
 Glacier archives (if any)

This action cannot be undone.`))return{success:!1,message:"Delete cancelled"};try{return yield Te.deleteFile(k.id),r&&(yield r()),{success:!0,message:` ${k.original_filename} deleted successfully`}}catch(B){throw console.error("Delete failed:",B),B}});return{loading:t,restoreDialogOpen:n,restoreFile:o,setRestoreDialogOpen:i,setRestoreFile:a,downloadDialogOpen:d,downloadInfo:p,setDownloadDialogOpen:c,setDownloadInfo:m,handleDownload:w,handleArchive:f,handleRestore:D,handleConfirmRestore:E,handleDelete:_,handleBulkAction:(k,v)=>C(K,null,function*(){try{switch(s(!0),k){case"archive":yield Promise.all(v.map(Y=>Te.archiveFile(Y.id)));break;case"restore":yield Promise.all(v.map(Y=>Te.restoreFile(Y.id,"Standard")));break;case"download":for(const Y of v)yield w(Y);break;case"delete":window.confirm(`Are you sure you want to delete ${v.length} files?

This will permanently delete all selected files from:
 Database records
 S3 storage
 Glacier archives (if any)

This action cannot be undone.`)&&(yield Promise.all(v.map(Y=>_(Y,!0))));break;default:console.warn("Unknown bulk action:",k)}return r&&(yield r()),{success:!0,message:`Bulk ${k} completed`}}catch(B){throw console.error(`Error performing bulk ${k}:`,B),B}finally{s(!1)}}),handleHibernationSuggestion:k=>C(K,null,function*(){try{yield Te.archiveFile(k.id);const v=` ${k.original_filename} is now hibernating! You'll save money on storage costs.`;return r&&(yield r()),{success:!0,message:v}}catch(v){throw console.error("Error hibernating file:",v),v}}),handleFileAction:(k,v)=>C(K,null,function*(){try{s(!0);let B;switch(v){case"download":B=yield w(k);break;case"archive":B=yield f(k);break;case"restore":B=yield D(k);break;case"delete":B=yield _(k);break;default:console.warn("Unknown action:",v),B={success:!1,message:`Unknown action: ${v}`}}return B}catch(B){throw console.error(`Error performing ${v} action:`,B),B}finally{s(!1)}})}},ka=({error:r,onDismiss:t,onUpgrade:s})=>{const n=vt(),i=()=>{s?s():n("/plans")},o=()=>{t&&t()};if(!r)return null;const a=r.type==="STORAGE_LIMIT_EXCEEDED",d=r.currentPlan||r.plan_required;return e.jsx(xe,{severity:"error",sx:{mb:3,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)"},action:e.jsxs(Z,{direction:"row",spacing:1,children:[e.jsx(z,{color:"inherit",size:"small",onClick:o,sx:{fontWeight:600,borderRadius:2,px:2,py:1},children:"Dismiss"}),(a||d)&&e.jsx(z,{variant:"contained",size:"small",onClick:i,sx:{fontWeight:600,borderRadius:2,px:2,py:1,bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:"Upgrade Plan"})]}),children:e.jsxs(h,{children:[e.jsx(l,{variant:"body1",sx:{fontWeight:500,mb:1},children:r.message}),(r.currentUsageGB||r.current_usage_gb)&&e.jsxs(h,{sx:{mt:2},children:[e.jsxs(Z,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Current Usage:"}),e.jsx(ae,{label:`${r.currentUsageGB||r.current_usage_gb}GB`,size:"small",color:"primary",variant:"outlined"})]}),r.remainingGB!==void 0&&e.jsxs(Z,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Remaining Space:"}),e.jsx(ae,{label:`${r.remainingGB}GB`,size:"small",color:parseFloat(r.remainingGB)>0?"success":"error",variant:"outlined"})]}),r.plan_limit_gb&&e.jsxs(h,{sx:{mt:2},children:[e.jsxs(Z,{direction:"row",justifyContent:"space-between",sx:{mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Storage Usage"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[r.current_usage_gb,"GB / ",r.plan_limit_gb,"GB"]})]}),e.jsx(De,{variant:"determinate",value:r.current_usage_gb/r.plan_limit_gb*100,sx:{height:8,borderRadius:4,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:parseFloat(r.current_usage_gb)/parseFloat(r.plan_limit_gb)>.8?"error.main":"primary.main"}}})]})]}),(a||d)&&e.jsx(l,{variant:"body2",sx:{mt:2,opacity:.8},children:r.upgrade_message||"Upgrade to a hibernation plan to get more storage space and continue uploading."})]})})};class Pa{constructor(){this.dbName="GlacierArchivalDB",this.version=1,this.db=null}init(){return C(this,null,function*(){return new Promise((t,s)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>s(n.error),n.onsuccess=()=>{this.db=n.result,t(this.db)},n.onupgradeneeded=i=>{const o=i.target.result;if(!o.objectStoreNames.contains("files")){const a=o.createObjectStore("files",{keyPath:"id"});a.createIndex("userId","userId",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1})}if(!o.objectStoreNames.contains("uploads")){const a=o.createObjectStore("uploads",{keyPath:"id"});a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("retryCount","retryCount",{unique:!1})}o.objectStoreNames.contains("metadata")||o.createObjectStore("metadata",{keyPath:"key"})}})})}storeFile(n){return C(this,arguments,function*(t,s={}){return this.db||(yield this.init()),new Promise((i,o)=>{const d=this.db.transaction(["files"],"readwrite").objectStore("files"),c={id:Date.now()+Math.random(),name:t.name,type:t.type,size:t.size,data:t,metadata:ye(R({},s),{timestamp:Date.now(),userId:s.userId||"anonymous"})},p=d.add(c);p.onsuccess=()=>i(c.id),p.onerror=()=>o(p.error)})})}getFile(t){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const a=this.db.transaction(["files"],"readonly").objectStore("files").get(t);a.onsuccess=()=>s(a.result),a.onerror=()=>n(a.error)})})}getUserFiles(t){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const d=this.db.transaction(["files"],"readonly").objectStore("files").index("userId").getAll(t);d.onsuccess=()=>s(d.result),d.onerror=()=>n(d.error)})})}deleteFile(t){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const a=this.db.transaction(["files"],"readwrite").objectStore("files").delete(t);a.onsuccess=()=>s(),a.onerror=()=>n(a.error)})})}storeUploadQueueItem(t){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const o=this.db.transaction(["uploads"],"readwrite").objectStore("uploads"),a=ye(R({id:Date.now()+Math.random()},t),{timestamp:Date.now(),retryCount:0}),d=o.add(a);d.onsuccess=()=>s(a.id),d.onerror=()=>n(d.error)})})}getQueuedUploads(){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const o=this.db.transaction(["uploads"],"readonly").objectStore("uploads").getAll();o.onsuccess=()=>t(o.result),o.onerror=()=>s(o.error)})})}removeQueuedUpload(t){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const a=this.db.transaction(["uploads"],"readwrite").objectStore("uploads").delete(t);a.onsuccess=()=>s(),a.onerror=()=>n(a.error)})})}storeMetadata(t,s){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((n,i)=>{const d=this.db.transaction(["metadata"],"readwrite").objectStore("metadata").put({key:t,value:s,timestamp:Date.now()});d.onsuccess=()=>n(),d.onerror=()=>i(d.error)})})}getMetadata(t){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const a=this.db.transaction(["metadata"],"readonly").objectStore("metadata").get(t);a.onsuccess=()=>{var d;return s((d=a.result)==null?void 0:d.value)},a.onerror=()=>n(a.error)})})}getStorageUsage(){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const o=this.db.transaction(["files"],"readonly").objectStore("files").getAll();o.onsuccess=()=>{const a=o.result,d=a.reduce((c,p)=>c+p.size,0);t({fileCount:a.length,totalSize:d,totalSizeMB:Math.round(d/(1024*1024)*100)/100})},o.onerror=()=>s(o.error)})})}clearAll(){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const n=this.db.transaction(["files","uploads","metadata"],"readwrite");n.objectStore("files").clear(),n.objectStore("uploads").clear(),n.objectStore("metadata").clear(),n.oncomplete=()=>t(),n.onerror=()=>s(n.error)})})}clearUploadQueue(){return C(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const o=this.db.transaction(["uploads"],"readwrite").objectStore("uploads").clear();o.onsuccess=()=>t(),o.onerror=()=>s(o.error)})})}exportData(){return C(this,null,function*(){this.db||(yield this.init());const t=yield this.getUserFiles("all"),s=yield this.getQueuedUploads();return{files:t,uploads:s,exportDate:new Date().toISOString()}})}importData(t){return C(this,null,function*(){this.db||(yield this.init());try{for(const s of t.files||[])yield this.storeFile(s.data,s.metadata);for(const s of t.uploads||[])yield this.storeUploadQueueItem(s);return!0}catch(s){return console.error("Error importing data:",s),!1}})}}const kt=new Pa;class Ia{constructor(){this.queue=[],this.subscribers=new Set,this.isRunning=!1,this.concurrent=ar.maxConcurrentUploads,this.activeCount=0,this.initialized=!1,this._emitThrottled=this._throttle(this._emit.bind(this),200),this.activeWorkers=new Set,this._uploadSessionActive=!1,this._currentSessionTotal=0,this._cumulativeCompleted=0}_throttle(t,s){let n,i=0;return function(...o){const a=Date.now();a-i>s?(t.apply(this,o),i=a):(clearTimeout(n),n=setTimeout(()=>{t.apply(this,o),i=Date.now()},s-(a-i)))}}init(){return C(this,null,function*(){if(this.initialized)return;yield kt.init();const t=yield kt.getQueuedUploads();this.queue=(t||[]).map(s=>({id:s.id,file:s.file||null,relativePath:s.relativePath||"",status:s.status||"queued",progress:s.progress||0,s3Key:s.s3Key||"",error:void 0})),this.initialized=!0,this._emit()})}subscribe(t){this.subscribers.add(t);try{t(this.getState())}catch(s){}return()=>this.subscribers.delete(t)}getState(){const t=new Map,s=new Map;let n=0,i=0,o=0,a=0,d=0,c=0;for(const j of this.queue){t.set(j.status,(t.get(j.status)||0)+1);const k=j.operationType||"upload";s.set(k,(s.get(k)||0)+1),k==="upload"&&(c+=1,j.status==="queued"?i+=1:j.status==="uploading"?o+=1:j.status==="failed"?a+=1:j.status==="completed"&&(d+=1)),n+=j.size||0}const p=t.get("queued")||0,m=t.get("uploading")||0,w=t.get("failed")||0,f=t.get("completed")||0,D=s.get("delete")||0,E=t.get("deleting")||0,_=this.queue.slice(-50).map(j=>({id:j.id,relativePath:j.relativePath,status:j.status,progress:j.progress,s3Key:j.s3Key,error:j.error,name:j.name,operationType:j.operationType||"upload"})),I=this.queue.filter(j=>j.operationType==="delete").slice(-10).map(j=>({id:j.id,status:j.status,progress:j.progress,completedFiles:j.completedFiles,totalFiles:j.totalFiles,error:j.error}));return{isRunning:m>0,activeCount:m,total:this.queue.length,queued:p,inProgress:m,failed:w,completed:f,uploadTotal:this._uploadSessionActive?this._currentSessionTotal:c,uploadQueued:i,uploadInProgress:o,uploadFailed:a,uploadCompleted:this._uploadSessionActive?this._cumulativeCompleted:d,items:_,deleteOperations:I,deleteOperationsCount:D,deleteInProgress:E,totalSize:n,percentage:this.queue.length>0?Math.round(f/this.queue.length*100):0}}_cleanupCompletedItems(){if(this._uploadSessionActive)return;const t=1e4;if(this.queue.length>t){const s=this.queue.filter(n=>n.status==="completed");if(s.length>0){s.sort((i,o)=>i.id.localeCompare(o.id));const n=s.slice(0,Math.min(s.length,this.queue.length-t));this.queue=this.queue.filter(i=>!n.includes(i))}}}cleanupCompletedItems(){this._cleanupCompletedItems()}startUploadSession(t){this._uploadSessionActive=!0,this._currentSessionTotal=t,this._cumulativeCompleted=0}endUploadSession(){return C(this,null,function*(){this._uploadSessionActive=!1,this._currentSessionTotal=0,this._cumulativeCompleted=0;try{const t=this.queue.filter(s=>s.status==="completed"&&s.fileId).map(s=>s.fileId);if(t.length>0){const{mediaAPI:s}=yield ds(()=>Promise.resolve().then(()=>gn),void 0);yield s.markUploadComplete(t),console.log(`Marked ${t.length} files as upload complete`)}}catch(t){console.error("Failed to mark upload as complete:",t)}this._cleanupCompletedItems()})}incrementCompleted(){this._cumulativeCompleted+=1,this._emitThrottled()}addPlaceholder(t,s=""){const n=`ext_${Date.now()}_${Math.random().toString(16).slice(2)}`,i={id:n,file:null,relativePath:s,status:"queued",progress:0,s3Key:"",error:void 0,name:t,operationType:"upload"};return this.queue.push(i),this._emitThrottled(),n}addPlaceholdersBatch(t){const s=[],n=Date.now(),i=t.map((o,a)=>({id:`ext_${n}_${a}_${Math.random().toString(16).slice(2)}`,file:null,relativePath:o.relativePath||"",status:"queued",progress:0,s3Key:"",error:void 0,name:o.name,size:o.size||0,operationType:"upload"}));return this.queue.push(...i),s.push(...i.map(o=>o.id)),this._emitThrottled(),s}addDeleteOperation(t,s="delete"){const n=`del_${Date.now()}_${Math.random().toString(16).slice(2)}`,i={id:n,file:null,relativePath:"",status:"queued",progress:0,s3Key:"",error:void 0,name:`${s} operation`,operationType:s,fileIds:t,totalFiles:t.length,completedFiles:0};return this.queue.push(i),this._emitThrottled(),n}updatePlaceholder(t,{status:s,progress:n,error:i}){const o=this.queue.find(a=>a.id===t);if(!o){console.log(`Placeholder ${t} not found in queue`);return}typeof s=="string"&&(o.status=s),typeof n=="number"&&(o.progress=n),i!==void 0&&(o.error=i),this._emit()}updateDeleteOperation(t,{status:s,progress:n,completedFiles:i,error:o}){const a=this.queue.find(d=>d.id===t);a&&(typeof s=="string"&&(a.status=s),typeof n=="number"&&(a.progress=n),typeof i=="number"&&(a.completedFiles=i),o!==void 0&&(a.error=o),this._emit())}addFile(n){return C(this,arguments,function*(t,{relativePath:s=""}={}){yield this.init();const i=Date.now()+Math.random(),o={id:i,file:t,relativePath:s,status:"queued",progress:0,s3Key:""};return this.queue.push(o),yield kt.storeUploadQueueItem({id:i,relativePath:s,status:"queued",progress:0}),this._emit(),this.isRunning&&this._tick(),i})}start(){this.isRunning=!0,this._emit(),this._tick()}pause(){this.isRunning=!1,this._emit()}cancel(t){return C(this,null,function*(){yield this.init(),this.queue=this.queue.filter(s=>s.id!==t),yield kt.removeQueuedUpload(t),this._emit()})}clearAll(){return C(this,null,function*(){yield this.init(),this.queue=[],yield kt.clearUploadQueue(),this._emit()})}registerWorker(t){this.activeWorkers.add(t)}unregisterWorker(t){this.activeWorkers.delete(t)}cancelAllUploads(){return C(this,null,function*(){yield this.init(),this.queue.forEach(t=>{t.operationType==="upload"&&(t.status==="queued"||t.status==="uploading")&&(t.status="cancelled",t.progress=0,t.error="Upload cancelled")}),this.activeCount=0,this.isRunning=!1,this.activeWorkers.forEach(t=>{try{t.postMessage({type:"cancel"}),setTimeout(()=>{t.terminate()},100)}catch(s){console.warn("Error cancelling worker:",s)}}),this.activeWorkers.clear(),yield kt.clearUploadQueue(),this._emit(),window.dispatchEvent(new CustomEvent("cancelAllUploads")),window.dispatchEvent(new CustomEvent("cancelUpload"))})}_tick(){return C(this,null,function*(){if(this.isRunning)for(;this.activeCount<this.concurrent;){const t=this.queue.find(s=>s.status==="queued");if(!t)break;this._upload(t).catch(()=>{})}})}_upload(t){return C(this,null,function*(){this.activeCount+=1,t.status="uploading",t.progress=0,yield this._persistItem(t),this._emitThrottled();try{const n=(yield Te.getPresignedUrls({files:[{filename:t.file.name,fileType:t.file.type||"application/octet-stream",fileSize:t.file.size||0,relativePath:t.relativePath||""}]})).data.results[0],{url:i,fields:o}=n.presignedUrl||{},a=n.s3Key,d=n.fileId,c=new FormData;Object.entries(o||{}).forEach(([p,m])=>c.append(p,m)),c.append("file",t.file),yield this._xhrPost(i,c,p=>{t.progress=p,this._emitThrottled()}),t.status="completed",t.progress=100,t.s3Key=a,t.fileId=d,yield this._persistItem(t),this._emitThrottled(),this._cumulativeCompleted+=1}catch(s){t.status="failed",t.error=(s==null?void 0:s.message)||String(s),yield this._persistItem(t),this._emitThrottled()}finally{this.activeCount-=1,t.status==="completed"&&(yield kt.removeQueuedUpload(t.id),this.queue=this.queue.filter(s=>s.id!==t.id),this._emitThrottled()),this.isRunning&&this._tick()}})}bulkUpload(t,s=""){return C(this,null,function*(){if(yield this.init(),t.length!==0){this.startUploadSession(t.length);try{const n=ar.bulkBatchSize,i=[];for(let o=0;o<t.length;o+=n)i.push(t.slice(o,o+n));console.log(`Processing ${t.length} files in ${i.length} batches of ${n}`);for(let o=0;o<i.length;o++){const a=i[o],d=a.map(w=>({filename:w.name,fileType:w.type||"application/octet-stream",fileSize:w.size||0,relativePath:s})),c=yield Te.getPresignedUrls({files:d}),{results:p}=c.data,m=a.map((w,f)=>{const D=`bulk_${Date.now()}_${o}_${f}_${Math.random().toString(16).slice(2)}`,E=p[f];return{id:D,file:w,relativePath:s,status:"queued",progress:0,s3Key:E.s3Key,presignedUrl:E.presignedUrl,fileId:E.fileId,error:void 0,operationType:"upload"}});this.queue.push(...m),this._emitThrottled(),o<i.length-1&&(yield new Promise(w=>setTimeout(w,100)))}this.start()}catch(n){console.error("Bulk upload failed:",n),this.queue.forEach(i=>{i.operationType==="upload"&&i.status==="queued"&&(i.status="failed",i.error=n.message||"Bulk upload failed")}),this._emit()}finally{this.endUploadSession()}}})}_bulkUploadItem(t){return C(this,null,function*(){t.status="uploading",t.progress=0,this._emit();try{const{url:s,fields:n}=t.presignedUrl||{};if(!s||!n)throw new Error("Invalid presigned URL response");const i=new FormData;Object.entries(n).forEach(([o,a])=>i.append(o,a)),i.append("file",t.file),yield this._xhrPost(s,i,o=>{t.progress=o,this._emitThrottled()}),t.status="completed",t.progress=100,this._emit()}catch(s){t.status="failed",t.error=s.message||"Upload failed",this._emit()}})}_xhrPost(t,s,n){return new Promise((i,o)=>{const a=new XMLHttpRequest;a.open("POST",t,!0),a.upload.onprogress=d=>{if(!d.lengthComputable)return;const c=Math.round(d.loaded/d.total*100);try{n==null||n(c)}catch(p){}},a.onload=()=>{a.status>=200&&a.status<300?i():o(new Error(`Upload failed with status ${a.status}`))},a.onerror=()=>o(new Error("Network error during upload")),a.send(s)})}_persistItem(t){return C(this,null,function*(){yield kt.storeUploadQueueItem({id:t.id,relativePath:t.relativePath,status:t.status,progress:t.progress,s3Key:t.s3Key||""})})}_emit(){const t=this.getState();this.subscribers.forEach(s=>{try{s(t)}catch(n){}})}_emitThrottled(){this._throttleTimer||(this._throttleTimer=setTimeout(()=>{this._throttleTimer=null,this._emit()},200))}}const te=new Ia,Ke=(r,t=2)=>{if(r===0)return"0 Bytes";const s=1024,n=t<0?0:t,i=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(r)/Math.log(s));return parseFloat((r/Math.pow(s,o)).toFixed(n))+" "+i[o]},Ra=r=>{const t=[];return r.size>Ve.MAX_FILE_SIZE&&t.push({type:"FILE_SIZE_EXCEEDED",message:lr.FILE_SIZE_EXCEEDED,details:`File "${r.name}" is ${Ke(r.size)}, maximum allowed is ${Ke(Ve.MAX_FILE_SIZE)}`}),r.name.length>255&&t.push({type:"FILENAME_TOO_LONG",message:"Filename too long",details:`File "${r.name}" has ${r.name.length} characters, maximum allowed is 255`}),{isValid:t.length===0,errors:t}},rs=r=>{const t=[],s=[];let n=0,i=0;return r.length>Ve.MAX_FILES&&t.push({type:"TOO_MANY_FILES",message:lr.TOO_MANY_FILES,details:`Selected ${r.length} files, maximum allowed is ${Ve.MAX_FILES}`}),r.forEach((o,a)=>{const d=Ra(o);d.isValid?(i++,n+=o.size):t.push(...d.errors)}),n>Ve.MAX_TOTAL_SIZE&&t.push({type:"TOTAL_SIZE_EXCEEDED",message:lr.TOTAL_SIZE_EXCEEDED,details:`Total size is ${Ke(n)}, maximum allowed is ${Ke(Ve.MAX_TOTAL_SIZE)}`}),n>Ve.MAX_SESSION_SIZE&&t.push({type:"SESSION_SIZE_EXCEEDED",message:lr.SESSION_SIZE_EXCEEDED,details:`Session size is ${Ke(n)}, maximum allowed is ${Ke(Ve.MAX_SESSION_SIZE)}`}),n>Ve.MEMORY_LIMIT&&s.push({type:"MEMORY_LIMIT_WARNING",message:"Large upload detected",details:`Uploading ${Ke(n)}. This may take a while.`}),{isValid:t.length===0,errors:t,warnings:s,stats:{totalFiles:r.length,validFiles:i,invalidFiles:r.length-i,totalSize:n,averageFileSize:i>0?n/i:0}}},Vs=r=>C(K,null,function*(){try{const{hibernationAPI:t}=yield ds(()=>Promise.resolve().then(()=>gn),void 0),n=(yield t.getStorageUsage()).data;if(n.current_usage_bytes+r>n.limit_bytes){const o=n.current_usage_gb,a=r/Nt(1024,3),d=n.remaining_gb;return{canUpload:!1,error:{type:"STORAGE_LIMIT_EXCEEDED",message:`Storage limit exceeded! You've used ${o}GB of your ${n.limit_gb}GB ${n.plan_type==="free_tier"?"free tier":n.plan_name}. This upload would add ${a.toFixed(1)}GB, but you only have ${d}GB remaining.`,details:`Current usage: ${Ke(n.current_usage_bytes)}, adding ${Ke(r)} would exceed the ${Ke(n.limit_bytes)} limit`,currentUsageGB:o,fileSizeGB:a.toFixed(1),remainingGB:d,planType:n.plan_type,planName:n.plan_name,limitGB:n.limit_gb,upgradeRequired:!0}}}return{canUpload:!0,remainingSpace:n.remaining_bytes-r,storageData:n}}catch(t){console.error("Error checking storage limit:",t);const s=15*1024*1024*1024,n=r/Nt(1024,3);return r>s?{canUpload:!1,error:{type:"STORAGE_LIMIT_EXCEEDED",message:`File size ${n.toFixed(1)}GB exceeds the 15GB free tier limit. Please upgrade to a hibernation plan.`,details:`File size: ${Ke(r)}, Free tier limit: ${Ke(s)}`,fileSizeGB:n.toFixed(1),upgradeRequired:!0}}:{canUpload:!0,remainingSpace:s-r}}}),Ys=r=>{const t=rs(r).stats;return t.totalSize>Ve.MEMORY_LIMIT?"streaming":t.totalFiles>100?"batched":"standard"},Ks=(r,t=8)=>r>=t?{canStart:!1,error:{type:"CONCURRENT_UPLOAD_LIMIT",message:lr.CONCURRENT_UPLOAD_LIMIT,details:`Currently ${r} uploads in progress, maximum allowed is ${t}`}}:{canStart:!0,remainingSlots:t-r},Pn=({onUploadComplete:r,onUploadProgress:t,defaultRelativePath:s=""})=>{const[n,i]=u.useState(!1),[o,a]=u.useState(0),[d,c]=u.useState(""),[p,m]=u.useState([]),[w,f]=u.useState([]),[D,E]=u.useState(!1),[_,I]=u.useState(null),[T,j]=u.useState([]),[k,v]=u.useState([]),[B,Y]=u.useState(null),[se,pe]=u.useState("standard"),[ue,be]=u.useState(null),[Ce,ie]=u.useState(!1),[Ge,je]=u.useState([]),[W,pt]=u.useState(!1),H=u.useRef(null),Fe=u.useRef(null);u.useRef(null);const L=u.useRef(!1);u.useEffect(()=>{const S=()=>{const q=Ye.getEncryptionStatus();pt(q.enabled)};S();const A=setInterval(S,1e3);return()=>clearInterval(A)},[]);const he=u.useCallback(S=>C(K,null,function*(){if(L.current||n){console.warn("Cannot select files while upload is in progress");return}const A=Array.from(S.target.files);if(A.length!==0){if(A.length>Ve.MAX_FILES){j([{type:"file_count_exceeded",message:" Too many files selected!",details:`You selected ${A.length.toLocaleString()} files, but the maximum allowed is ${Ve.MAX_FILES.toLocaleString()} files to prevent browser slowdown.`,solution:" Please split your directory into smaller batches of 100,000 files or less.",icon:""}]),c(` Selection cancelled: ${A.length.toLocaleString()} files exceeds limit`);return}c("Validating files...");try{const q=rs(A);if(!q.isValid){j(q.errors),v(q.warnings),c(`Validation failed: ${q.errors.length} errors found`);return}const J=yield Vs(q.stats.totalSize);if(!J.canUpload){j([J.error]),c("Storage limit exceeded");return}const le=Ks(0);if(!le.canStart){j([le.error]),c("Too many concurrent uploads");return}const me=Ys(A);pe(me);const G=[{directory:"Individual Files",files:A.map(re=>({file:re,name:re.name,size:re.size,type:re.type,relativePath:s})),isDirectory:!1}];m(G),j([]),v(q.warnings),Y(J),c(`Ready to upload ${q.stats.validFiles} files (${Ke(q.stats.totalSize)})`)}catch(q){console.error("File validation error:",q),j([{type:"VALIDATION_ERROR",message:"File validation failed",details:q.message}]),c("Validation failed")}}}),[s]),Q=u.useCallback(S=>C(K,null,function*(){if(L.current||n){console.warn("Cannot select directories while upload is in progress");return}const A=Array.from(S.target.files);if(A.length!==0){if(A.length>Ve.MAX_FILES){j([{type:"directory_count_exceeded",message:" Directory too large!",details:`This directory contains ${A.length.toLocaleString()} files, but the maximum allowed is ${Ve.MAX_FILES.toLocaleString()} files to prevent browser slowdown.`,solution:" Please split this directory into smaller folders of 100,000 files or less.",icon:""}]),c(` Directory rejected: ${A.length.toLocaleString()} files exceeds limit`);return}c("Validating directory...");try{const q=rs(A);if(!q.isValid){j(q.errors),v(q.warnings),c(`Validation failed: ${q.errors.length} errors found`);return}const J=yield Vs(q.stats.totalSize);if(!J.canUpload){j([J.error]),c("Storage limit exceeded");return}const le=Ks(0);if(!le.canStart){j([le.error]),c("Too many concurrent uploads");return}const me=Ys(A);pe(me),c("Indexing selected directory...");const G=re=>C(K,null,function*(){const ke=new Map,Re=ar.mainBatchSize,Se=re.length;for(let Ae=0;Ae<Se;Ae+=Re){const ge=re.slice(Ae,Ae+Re);for(const $e of ge){const We=$e.webkitRelativePath.split("/"),Wt=We.pop(),tt=We.join("/");ke.has(tt)||ke.set(tt,[]),ke.get(tt).push({file:$e,name:Wt,size:$e.size,type:$e.type,relativePath:s?`${s}/${tt}`:tt})}const Le=Math.min(Ae+Re,Se);c(`Indexing files... ${Le}/${Se} (${Math.round(Le/Se*100)}%)`),yield new Promise($e=>setTimeout($e,0))}return ke});try{const re=yield G(A),ke=[];re.forEach((Re,Se)=>{ke.push({directory:Se,files:Re,isDirectory:!0})}),m(ke),j([]),v(q.warnings),Y(J),c(`Ready to upload ${A.length} files from ${re.size} directories`)}catch(re){console.error("Error processing files:",re),j([{type:"PROCESSING_ERROR",message:"Error processing files",details:re.message}]),c("Error processing files. Please try again.")}}catch(q){console.error("Directory validation error:",q),j([{type:"VALIDATION_ERROR",message:"Directory validation failed",details:q.message}]),c("Validation failed")}}}),[s]),[Xe,ze]=u.useState(!1),At=u.useCallback(S=>{S.preventDefault(),S.stopPropagation(),ze(!0)},[]),Bt=u.useCallback(S=>{S.preventDefault(),S.stopPropagation(),ze(!1)},[]),us=u.useCallback(S=>{if(S.preventDefault(),S.stopPropagation(),ze(!1),L.current||n){console.warn("Cannot drop files while upload is in progress");return}const A=Array.from(S.dataTransfer.files);if(A.length===0)return;if(Array.from(S.dataTransfer.items).some(le=>le.kind==="file"&&le.webkitGetAsEntry&&le.webkitGetAsEntry().isDirectory)){c('Please use "Select Folder" button for directory uploads');return}he({target:{files:A}})},[he]),xr=()=>C(K,null,function*(){var S;try{const A=p.reduce((G,re)=>G+re.files.length,0),q=p.map(G=>({directory:G.directory,fileCount:G.files.length}));c(`Creating upload session for ${A} files...`);const J=xn.createSession({rootDirectory:((S=p[0])==null?void 0:S.directory)||"upload",totalFiles:A,directoryStructure:q}),le=new Promise((G,re)=>{setTimeout(()=>re(new Error("Session creation timeout")),3e4)}),me=yield Promise.race([J,le]);return I(me.data.sessionId),me.data.sessionId}catch(A){throw console.error("Failed to create upload session:",A),A}}),hs=S=>C(K,null,function*(){const q=[],J=S.length;for(let le=0;le<J;le+=1e3){const me=S.slice(le,le+1e3),G=te.addPlaceholdersBatch(me);q.push(...G);const re=Math.min(le+1e3,J);c(`Creating placeholders... ${re}/${J} (${Math.round(re/J*100)}%)`),yield new Promise(ke=>setTimeout(ke,0))}return q}),Mt=u.useCallback(()=>{ie(!0),c("Cancelling upload...");try{ue&&ue.abort(),Ge.forEach(S=>{try{S.postMessage({type:"cancel"}),setTimeout(()=>{S.terminate()},100)}catch(A){console.warn("Error cancelling worker:",A)}}),je([]),f([]),te.clearAll().catch(S=>{console.warn("Error clearing upload manager:",S)}),te.cleanupCompletedItems()}catch(S){console.error("Error during cancellation:",S)}finally{te.endUploadSession(),i(!1),ie(!1),c("Upload cancelled"),be(null),L.current=!1}},[ue,Ge]);u.useEffect(()=>{const S=()=>{n&&Mt()};return window.addEventListener("cancelAllUploads",S),()=>{window.removeEventListener("cancelAllUploads",S)}},[n,Mt]);const gr=()=>C(K,null,function*(){if(p.length===0)return;if(L.current||n){console.warn("Upload already in progress, ignoring duplicate request");return}L.current=!0;try{yield te.clearAll(),je([])}catch(A){console.warn("Error clearing previous upload state:",A)}const S=new AbortController;be(S),i(!0),ie(!1),a(0),f([]),c("Creating upload session...");try{const A=p.reduce((G,re)=>G+re.files.length,0);te.startUploadSession(A);const q=yield xr();if(c("Preparing files for upload..."),c("Preparing file list..."),c(`Prepared ${A} files for upload`),c("Starting uploads..."),c("Starting streaming upload..."),yield Ur(p,q,A,S),S.signal.aborted)return;const J=w.filter(G=>!G.success),le=w.filter(G=>G.success),me=le.reduce((G,re)=>G+(re.fileSize||0),0);Dt.trackFileUpload(le.length,me,"web"),pa(`Upload completed: ${le.length} successful, ${J.length} failed`,"upload",J.length>0?"warning":"info",{successful_count:le.length,failed_count:J.length,total_size_mb:Math.round(me/(1024*1024))}),J.length>0?(c(`Upload completed with ${J.length} failures`),E(!0),Dt.trackError("upload_error",`${J.length} files failed`,"file_upload"),Cn(new Error(`Upload failed: ${J.length} files failed`),{tags:{component:"DirectoryUploader",action:"file_upload"},extra:{failed_count:J.length,successful_count:le.length,total_files:p.reduce((G,re)=>G+re.files.length,0)}})):c(`Upload completed! ${le.length} files uploaded successfully`),te.cleanupCompletedItems(),setTimeout(()=>{m([]),f([])},100)}catch(A){A.name==="AbortError"?c("Upload cancelled"):(console.error("Upload failed:",A),c(`Upload failed: ${A.message}`))}finally{te.endUploadSession(),i(!1),ie(!1),be(null),L.current=!1}}),Ur=(S,A,q,J)=>C(K,null,function*(){const le=ar.webWorkerBatchSize;let me=0;for(const G of S){const re=G.files,ke=Math.ceil(re.length/le);for(let Re=0;Re<ke;Re++){if(J.signal.aborted){const fe=new Error("Upload cancelled");throw fe.name="AbortError",fe}const Se=Re*le,Ae=Math.min(Se+le,re.length),ge=re.slice(Se,Ae),Le=ge.map(fe=>ye(R({},fe),{directory:G.directory})),$e=yield hs(Le);me+=ge.length,(me%50===0||me===q)&&c(`Uploading ${me}/${q} files (${Math.round(me/q*100)}%)`),yield zr(Le,A,J,$e),ge.length=0,Le.length=0,yield new Promise(fe=>setTimeout(fe,10))}}}),zr=(S,A,q,J)=>C(K,null,function*(){return new Promise((le,me)=>{const G=new Worker("/upload-worker.js"),re=[...Ge,G];if(je(re),te.registerWorker(G),q.signal.aborted){G.terminate();const Se=new Error("Upload cancelled");Se.name="AbortError",me(Se);return}G.postMessage({type:"upload",files:S,sessionId:A,batchSize:ar.webWorkerBatchSize,accessToken:He.getAccessToken(),apiBaseUrl:pr.baseURL.replace("/api/","/api")});const ke=()=>{G.postMessage({type:"cancel"}),setTimeout(()=>{G.terminate(),je(Ae=>Ae.filter(ge=>ge!==G)),te.unregisterWorker(G);const Se=new Error("Upload cancelled");Se.name="AbortError",me(Se)},100)};q.signal.addEventListener("abort",ke);let Re=[];G.onmessage=Se=>{const $e=Se.data,{type:Ae,data:ge}=$e,Le=ys($e,["type","data"]);if(Ae==="progress"){if(ge&&ge.placeholderId){const{placeholderId:fe,progress:We,status:Wt,fileIndex:tt}=ge;tt!==void 0&&J[tt]&&te.updatePlaceholder(J[tt],{progress:We||0,status:Wt||"uploading"})}ge&&ge.results&&(Re=[...Re,...ge.results])}else if(Ae==="complete")ge&&ge.results&&(Re=[...Re,...ge.results]),Re.forEach((fe,We)=>{J[We]&&(fe.success?(te.updatePlaceholder(J[We],{status:"completed",progress:100}),te.incrementCompleted()):te.updatePlaceholder(J[We],{status:fe.error==="Upload cancelled"?"cancelled":"failed",progress:0,error:fe.error}))}),f(fe=>[...fe,...Re]),G.terminate(),je(fe=>fe.filter(We=>We!==G)),te.unregisterWorker(G),te.unregisterWorker(G),q.signal.removeEventListener("abort",ke),le(Re);else if(Ae==="cancelled"){J.forEach(We=>{te.updatePlaceholder(We,{status:"cancelled",progress:0,error:"Upload cancelled"})}),G.terminate(),je(We=>We.filter(Wt=>Wt!==G)),te.unregisterWorker(G),te.unregisterWorker(G),q.signal.removeEventListener("abort",ke);const fe=new Error("Upload cancelled");fe.name="AbortError",me(fe)}else Ae==="error"&&(G.terminate(),je(fe=>fe.filter(We=>We!==G)),te.unregisterWorker(G),te.unregisterWorker(G),q.signal.removeEventListener("abort",ke),me(new Error((ge==null?void 0:ge.error)||"Unknown error")))},G.onerror=Se=>{G.terminate(),je(Ae=>Ae.filter(ge=>ge!==G)),te.unregisterWorker(G),te.unregisterWorker(G),q.signal.removeEventListener("abort",ke),me(Se)}})}),wt=()=>{m([]),a(0),c(""),f([]),E(!1),I(null),H.current&&(H.current.value=""),Fe.current&&(Fe.current.value="")},sr=S=>{if(S===0)return"0 Bytes";const A=1024,q=["Bytes","KB","MB","GB"],J=Math.floor(Math.log(S)/Math.log(A));return parseFloat((S/Math.pow(A,J)).toFixed(2))+" "+q[J]};return e.jsxs(h,{sx:{maxWidth:800,mx:"auto",p:2},children:[e.jsx(Pe,{children:e.jsxs(Ie,{children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:"File & Directory Upload"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Upload individual files or entire directories while preserving folder structure"}),e.jsxs(h,{sx:{border:"2px dashed",borderColor:Xe?"primary.main":n?"warning.main":p.length>0?"success.main":"grey.300",borderRadius:2,p:4,textAlign:"center",bgcolor:Xe?"primary.50":n?"warning.light":p.length>0?"success.light":"grey.50",opacity:n?.7:1,pointerEvents:n?"none":"auto",transition:"all 0.3s ease",cursor:n?"not-allowed":"pointer",transform:Xe?"scale(1.02)":"scale(1)","&:hover":{borderColor:n?"warning.main":p.length>0?"success.main":"primary.main",bgcolor:n?"warning.light":p.length>0?"success.main":"primary.50",transform:n?"none":"translateY(-2px)",boxShadow:n?"none":2}},onDragOver:At,onDragLeave:Bt,onDrop:us,children:[e.jsx("input",{ref:H,type:"file",multiple:!0,disabled:n,onChange:he,style:{display:"none"}}),e.jsx("input",{ref:Fe,type:"file",multiple:!0,webkitdirectory:"",directory:"",disabled:n,onChange:Q,style:{display:"none"}}),Xe?e.jsxs(h,{children:[e.jsx(Oe,{sx:{fontSize:48,mb:2,color:"primary.main"}}),e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600},children:"Drop Files Here"}),e.jsx(l,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"Release to upload your files"})]}):p.length>0?e.jsxs(h,{children:[e.jsx(Ue,{sx:{fontSize:48,mb:2,color:"success.main"}}),e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{color:"success.main",fontWeight:600},children:"Files Ready for Upload"}),e.jsxs(l,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:[p.reduce((S,A)=>S+A.files.length,0)," files from ",p.length," folders selected"]}),e.jsxs(h,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(z,{variant:"outlined",startIcon:e.jsx(Yt,{}),onClick:()=>{var S;L.current||n||(S=H.current)==null||S.click()},disabled:n,sx:{minWidth:150},children:"Add More Files"}),e.jsx(z,{variant:"outlined",startIcon:e.jsx(ir,{}),onClick:()=>{var S;L.current||n||(S=Fe.current)==null||S.click()},disabled:n,sx:{minWidth:150},children:"Add Folder"})]})]}):e.jsxs(h,{children:[e.jsx(Oe,{sx:{fontSize:48,mb:2,color:"primary.main"}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Upload Your Files"}),e.jsx(l,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"Choose files or folders to upload to your secure storage"}),e.jsxs(h,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(z,{variant:"contained",startIcon:e.jsx(Lt,{}),onClick:()=>{var S;L.current||n||(S=H.current)==null||S.click()},disabled:n,sx:{minWidth:150,py:1.5},children:"Select Files"}),e.jsx(z,{variant:"contained",startIcon:e.jsx(ir,{}),onClick:()=>{var S;L.current||n||(S=Fe.current)==null||S.click()},disabled:n,sx:{minWidth:150,py:1.5},children:"Select Folder"})]}),e.jsx(l,{variant:"caption",sx:{mt:3,display:"block",color:"text.secondary"},children:"Or drag & drop files/folders here"})]})]}),p.length>0&&e.jsxs(h,{sx:{mt:3},children:[e.jsxs(l,{variant:"h6",gutterBottom:!0,children:["Selected Files (",p.reduce((S,A)=>S+A.files.length,0)," files)",p.some(S=>S.isDirectory)&&" - Directory Structure Preserved"]}),e.jsx(ct,{sx:{maxHeight:300,overflow:"auto"},children:p.map((S,A)=>e.jsxs(cr.Fragment,{children:[e.jsxs(ve,{children:[e.jsx(we,{children:S.isDirectory?e.jsx(ir,{color:"primary"}):e.jsx(Lt,{color:"secondary"})}),e.jsx(_e,{primary:S.directory,secondary:`${S.files.length} files${S.isDirectory?" (directory)":" (individual files)"}`})]}),S.files.map((q,J)=>e.jsxs(ve,{sx:{pl:4},children:[e.jsx(we,{children:e.jsx(Lt,{color:"action"})}),e.jsx(_e,{primary:q.name,secondary:sr(q.size)})]},J))]},A))})]}),T.length>0&&e.jsx(h,{sx:{mt:2},children:T.map((S,A)=>S.type==="STORAGE_LIMIT_EXCEEDED"?e.jsx(ka,{error:S,onDismiss:()=>{j(q=>q.filter((J,le)=>le!==A))},onUpgrade:()=>{window.location.href="/plans"}},A):e.jsxs(xe,{severity:"error",sx:{mb:1},children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600},children:S.message}),S.details&&e.jsx(l,{variant:"caption",sx:{display:"block",mt:.5},children:S.details})]},A))}),k.length>0&&e.jsx(xe,{severity:"info",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[k[0].message,": ",k[0].details]})}),p.length>0&&!n&&T.length===0&&e.jsx(ne,{sx:{p:3,mt:2,bgcolor:"grey.50",border:"1px solid",borderColor:"grey.200"},children:e.jsxs(Z,{spacing:2,children:[e.jsxs(h,{sx:{textAlign:"center"},children:[e.jsx(Oe,{sx:{fontSize:48,color:"primary.main",mb:1}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:.5},children:"Ready to Upload"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[p.reduce((S,A)=>S+A.files.length,0)," files from ",p.length," folders"]})]}),e.jsxs(h,{sx:{display:"flex",justifyContent:"space-around",py:2,bgcolor:"white",borderRadius:1},children:[e.jsxs(h,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:p.reduce((S,A)=>S+A.files.length,0)}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Files"})]}),e.jsxs(h,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:p.length}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Folders"})]}),e.jsxs(h,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:W?"":""}),e.jsx(l,{variant:"caption",color:"text.secondary",children:W?"Encrypted":"Standard"})]})]}),e.jsx(z,{variant:"contained",size:"large",fullWidth:!0,onClick:gr,disabled:n||T.length>0,sx:{py:1.5,fontSize:"1.1rem",fontWeight:600},children:n?"Uploading...":"Start Upload"})]})}),n&&e.jsxs(h,{sx:{mt:3,p:{xs:2,sm:3},bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider",boxShadow:1},children:[e.jsx(l,{variant:"body2",gutterBottom:!0,sx:{fontWeight:600,fontSize:{xs:"0.875rem",sm:"1rem"},color:"text.primary"},children:d}),e.jsx(De,{variant:"determinate",value:isNaN(o)?0:o,sx:{mb:2,height:{xs:8,sm:6},borderRadius:{xs:4,sm:3},bgcolor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:{xs:4,sm:3},background:"linear-gradient(90deg, #1976d2 0%, #42a5f5 100%)"}}}),e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[isNaN(o)?"0.0":o.toFixed(1),"% complete"]}),e.jsxs(l,{variant:"body2",color:"primary.main",sx:{fontWeight:600,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[p.reduce((S,A)=>S+A.files.length,0)," files"]})]})]}),e.jsxs(h,{sx:{mt:3,display:"flex",gap:{xs:1,sm:2},flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(z,{variant:"contained",disabled:T.length>0||p.length===0||n,onClick:()=>{if(L.current||n){console.warn("Upload button clicked but upload already in progress");return}if(T.length>0){console.warn("Upload button clicked but validation errors exist");return}gr()},startIcon:e.jsx(Oe,{}),fullWidth:!0,sx:{py:{xs:1.5,sm:1},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:600},children:n?"Uploading...":"Upload Files"}),n&&e.jsx(z,{variant:"outlined",color:"error",onClick:Mt,disabled:Ce,startIcon:e.jsx(Mn,{}),fullWidth:!0,sx:{py:{xs:1.5,sm:1},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:600},children:Ce?"Cancelling...":"Cancel Upload"}),e.jsx(z,{variant:"outlined",onClick:()=>{if(L.current||n){console.warn("Cannot reset while upload is in progress");return}wt()},disabled:n,startIcon:e.jsx(Yt,{}),fullWidth:!0,sx:{py:{xs:1.5,sm:1},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:600},children:"Reset"})]})]})}),e.jsxs(ft,{open:D,onClose:()=>E(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(mt,{children:"Upload Results"}),e.jsxs(yt,{children:[e.jsxs(h,{sx:{mb:2},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Summary"}),e.jsxs(h,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(ae,{icon:e.jsx(Ue,{}),label:`${w.filter(S=>S.success).length} Successful`,color:"success"}),e.jsx(ae,{icon:e.jsx(gt,{}),label:`${w.filter(S=>!S.success).length} Failed`,color:"error"})]})]}),e.jsx(Gt,{sx:{my:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"File Details"}),e.jsx(ct,{sx:{maxHeight:400,overflow:"auto"},children:w.map((S,A)=>e.jsxs(ve,{children:[e.jsx(we,{children:S.success?e.jsx(Ue,{color:"success"}):e.jsx(gt,{color:"error"})}),e.jsx(_e,{primary:S.file,secondary:S.success?S.path:S.error})]},A))})]}),e.jsx(Xt,{children:e.jsx(z,{onClick:()=>E(!1),children:"Close"})})]})]})},Ta=({open:r,onClose:t,downloadInfo:s})=>{const[n,i]=u.useState(0),[o,a]=u.useState(""),[d,c]=u.useState(!1),[p,m]=u.useState(null),[w,f]=u.useState(!1);u.useEffect(()=>{r&&s&&(i(0),a("Starting download..."),c(!1),m(null),f(!1))},[r,s]);const D=()=>{d||t()},E=()=>{let _=0;const I=setInterval(()=>{_+=Math.random()*10,_>=90&&(_=90,clearInterval(I),a("Preparing download...")),i(_)},300)};return u.useEffect(()=>{r&&s&&E()},[r,s]),u.useEffect(()=>{s!=null&&s.downloadComplete&&(i(100),f(!0),a("Download complete!"))},[s==null?void 0:s.downloadComplete]),s?e.jsxs(ft,{open:r,onClose:D,maxWidth:"sm",fullWidth:!0,children:[e.jsx(mt,{children:e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(qt,{color:"primary"}),e.jsx(l,{variant:"h6",children:"Downloading File"})]})}),e.jsxs(yt,{children:[e.jsxs(h,{sx:{mb:2},children:[e.jsx(l,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1},children:s.isBulkDownload?`Bulk Download (${s.fileCount} files)`:s.filename}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.isBulkDownload?`${s.fileCount} files  Total size: ${(s.file_size/(1024*1024)).toFixed(2)} MB`:`Size: ${(s.file_size/(1024*1024)).toFixed(2)} MB`})]}),s.is_encrypted&&e.jsxs(xe,{severity:"info",sx:{mb:2},icon:e.jsx(bt,{}),children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:[" Encrypted File",s.isBulkDownload?"s":""]}),e.jsx(l,{variant:"body2",children:s.isBulkDownload?"Some files will be automatically decrypted during download.":"This file will be automatically decrypted during download."}),e.jsxs(h,{sx:{display:"flex",gap:1,mt:1},children:[e.jsx(ae,{label:"AES-GCM 256-bit",size:"small",color:"primary"}),e.jsx(ae,{label:"E2E Encrypted",size:"small",color:"success"})]})]}),p&&e.jsxs(xe,{severity:"error",sx:{mb:2},icon:e.jsx(gt,{}),children:[e.jsx(l,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:"Download Failed"}),e.jsx(l,{variant:"body2",children:p})]}),w&&e.jsxs(xe,{severity:"success",sx:{mb:2},icon:e.jsx(Ue,{}),children:[e.jsx(l,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:"Download Complete"}),e.jsx(l,{variant:"body2",children:s.isBulkDownload?s.is_encrypted?"Files downloaded and decrypted successfully!":"Files downloaded successfully!":s.is_encrypted?"File downloaded and decrypted successfully!":"File downloaded successfully!"})]}),e.jsxs(h,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",sx:{mb:1},children:o}),e.jsx(De,{variant:"determinate",value:n,sx:{height:8,borderRadius:4}}),e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[n.toFixed(1),"% complete"]})]}),d&&e.jsxs(h,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",sx:{mb:1},children:"Decrypting file..."}),e.jsx(De,{variant:"indeterminate",sx:{height:4,borderRadius:2}})]})]}),e.jsx(Xt,{children:e.jsx(z,{onClick:D,disabled:d,children:w?"Close":"Cancel"})})]}):null},Da=u.memo(({uploadManagerState:r})=>{var p,m,w,f;const t=r;if(!t)return null;const s=(p=t.uploadTotal)!=null?p:0,n=(m=t.uploadCompleted)!=null?m:0,i=(w=t.uploadInProgress)!=null?w:0,o=(f=t.uploadQueued)!=null?f:0;if(s===0||i===0&&o===0)return null;const a=s>0?Math.round(n/s*100):0;let d="";s>0?d=` Uploading ${n}/${s} files (${a}%)`:d=" Upload completed!";const c=()=>{te.cancelAllUploads()};return e.jsx(h,{sx:{px:{xs:2,md:3},pt:1.5},children:e.jsx(ne,{sx:{p:2,border:"1px solid #e0e0e0"},children:e.jsxs(Z,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(Oe,{sx:{color:"#60a5fa"}}),e.jsxs(h,{sx:{flex:1},children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600},children:d}),e.jsx(De,{variant:"determinate",value:a,sx:{mt:1,height:8,borderRadius:4}})]}),e.jsx(z,{variant:"outlined",color:"error",size:"small",onClick:c,sx:{minWidth:"auto"},children:"Cancel"})]})})})}),Fa=({onFileSelect:r,onFolderSelect:t,globalSearchQuery:s})=>{const n=Kt(),[i,o]=u.useState([]),[a,d]=u.useState([]),[c,p]=u.useState("root"),[m,w]=u.useState(new Set(["root"]));u.useState(new Set);const[f,D]=u.useState(new Set),[E,_]=u.useState(new Set),[I,T]=u.useState(""),[j,k]=u.useState(0),[v,B]=u.useState(null),[Y,se]=u.useState(!1),[pe,ue]=u.useState(!0),[be,Ce]=u.useState(!1);u.useState(!1);const[ie,Ge]=u.useState({total:0,completed:0,inProgress:0,queued:0}),[je,W]=u.useState({open:!1,count:0}),[pt,H]=u.useState({}),[Fe,L]=u.useState(null),[he,Q]=u.useState({current:0,total:0}),[Xe,ze]=u.useState(null),[At,Bt]=u.useState({}),[us,xr]=u.useState(0),[hs,Mt]=u.useState(""),[gr,Ur]=u.useState(!1),zr=!1,wt=u.useMemo(()=>ie.total>0&&(ie.inProgress>0||ie.queued>0),[ie.total,ie.inProgress,ie.queued]),sr=u.useMemo(()=>wt?{title:"Upload in progress...",subtitle:"Please wait for current upload to complete"}:{title:j===0?"No active files":"No hibernated files",subtitle:j===0?"Click here or drag files to upload":"Hibernate some files to see them here"},[wt,j]),[S,A]=u.useState(sr);u.useEffect(()=>{const x=setTimeout(()=>{A(sr)},200);return()=>clearTimeout(x)},[sr]);const{handleArchive:q,handleDelete:J,handleDownload:le,downloadDialogOpen:me,downloadInfo:G,setDownloadDialogOpen:re,setDownloadInfo:ke}=Ca(rt),Re=x=>{D(g=>{const y=new Set(g);return y.has(x)?y.delete(x):y.add(x),y})},Se=x=>{_(g=>{const y=new Set(g);return y.has(x)?y.delete(x):y.add(x),y})},Ae=()=>{const x=new Set(_t.map(y=>y.id)),g=new Set(nr.map(y=>y.path));D(x),_(g)},ge=()=>{D(new Set),_(new Set)},Le=()=>f.size+E.size,$e=()=>i.filter(x=>f.has(x.id)),fe=()=>a.filter(x=>E.has(x.path)),We=(x,g)=>{const y=[];for(const $ of g){const M=i.filter(O=>{var X;return(X=O.relative_path)==null?void 0:X.startsWith($.path)}).filter(O=>O.status==="archiving");M.length>0&&y.push({type:"folder_has_hibernating_files",folder:$.name,hibernatingCount:M.length,hibernatingFiles:M.map(O=>O.original_filename)})}const P=x.filter($=>$.status==="archiving");return P.length>0&&y.push({type:"files_already_hibernating",hibernatingFiles:P.map($=>$.original_filename)}),y},Wt=x=>{const g=i.filter(X=>{var N;return(N=X.relative_path)==null?void 0:N.startsWith(x)});if(g.length===0)return null;const y=g.reduce((X,N)=>(X[N.status]=(X[N.status]||0)+1,X),{}),P=g.length,$=y.archived||0,U=y.archiving||0,M=y.restoring||0;(y.uploaded||0)+(y.restored||0);const O=($+U)/P;return M>0?{type:"restoring",count:M,total:P,icon:e.jsx($r,{sx:{fontSize:14}}),color:"#fbbf24",label:`${M} waking`}:O>=.5?{type:"hibernated",count:$,total:P,icon:e.jsx(jt,{sx:{fontSize:14}}),color:"#94a3b8",label:`${$}/${P} hibernated`}:U>0?{type:"hibernating",count:U,total:P,icon:e.jsx(qr,{sx:{fontSize:14}}),color:"#a78bfa",label:`${U} hibernating`}:O>0?{type:"mixed",count:$,total:P,icon:e.jsx(jt,{sx:{fontSize:14}}),color:"#64748b",label:`${$}/${P} hibernated`}:null},tt=()=>C(K,null,function*(){const x=$e(),g=fe(),y=We(x,g);if(y.length>0){let U=` Cannot hibernate due to conflicts:

`;y.forEach(M=>{M.type==="folder_has_hibernating_files"?(U+=` Folder "${M.folder}" has ${M.hibernatingCount} files already hibernating
`,U+=`  Files: ${M.hibernatingFiles.slice(0,3).join(", ")}${M.hibernatingFiles.length>3?"...":""}

`):M.type==="files_already_hibernating"&&(U+=` ${M.hibernatingFiles.length} selected files are already hibernating
`,U+=`  Files: ${M.hibernatingFiles.slice(0,3).join(", ")}${M.hibernatingFiles.length>3?"...":""}

`)}),U+="Please wait for current hibernation to complete or select different files/folders.",alert(U);return}const P=[...x];for(const U of g){const M=i.filter(O=>{var X;return(X=O.relative_path)==null?void 0:X.startsWith(U.path)});P.push(...M)}const $=P.filter(U=>U.status==="uploaded"||U.status==="restored");if($.length===0){alert('No files available for hibernation. Files must be in "uploaded" or "restored" state.');return}ze("hibernate"),L("in_progress"),H({}),$.forEach(U=>{H(M=>ye(R({},M),{[U.id]:{status:"pending",progress:0}}))});try{let U=0,M=0;const O=10,X=[];for(let N=0;N<$.length;N+=O)X.push($.slice(N,N+O));Q({current:0,total:X.length});for(let N=0;N<X.length;N++){const de=X[N];Q({current:N+1,total:X.length}),yield Promise.all(de.map(oe=>C(K,null,function*(){try{H(ee=>ye(R({},ee),{[oe.id]:{status:"in_progress",progress:50}})),yield q(oe),H(ee=>ye(R({},ee),{[oe.id]:{status:"completed",progress:100}})),U++}catch(ee){console.error(`Failed to hibernate ${oe.original_filename}:`,ee),H(ce=>ye(R({},ce),{[oe.id]:{status:"error",progress:0}})),M++}}))),N<X.length-1&&(yield new Promise(oe=>setTimeout(oe,1e3)))}L("completed"),setTimeout(()=>{ge(),rt(),L(null),H({}),ze(null)},2e3)}catch(U){console.error("Bulk hibernation failed:",U),L("error"),setTimeout(()=>{L(null),H({}),ze(null)},3e3)}}),Rn=()=>C(K,null,function*(){const x=$e(),g=fe();try{for(const y of x)y.status==="archived"&&(yield Te.restoreFile(y.id,"Standard"));for(const y of g){const P=i.filter($=>{var U;return(U=$.relative_path)==null?void 0:U.startsWith(y.path)});for(const $ of P)$.status==="archived"&&(yield Te.restoreFile($.id,"Standard"))}ge(),rt()}catch(y){console.error("Bulk wake up failed:",y)}}),Tn=()=>C(K,null,function*(){const x=$e(),g=fe();if(x.length===0&&g.length===0)return;const y=[...x];for(const $ of g){const U=i.filter(M=>{var O;return(O=M.relative_path)==null?void 0:O.startsWith($.path)});y.push(...U)}const P=y.filter($=>$.status==="uploaded"||$.status==="restored");if(P.length===0){alert('No files available for download. Files must be in "uploaded" or "restored" state.');return}try{ke({filename:`bulk_download_${Date.now()}.zip`,file_size:P.reduce((N,de)=>N+de.file_size,0),is_encrypted:P.some(N=>N.is_encrypted),encryption_metadata:null,isBulkDownload:!0,fileCount:P.length}),re(!0);const $=(yield ds(()=>import("./utils-76a9f601.js").then(N=>N.j),["assets/utils-76a9f601.js","assets/vendor-950dbbc1.js"])).default,U=new $;for(let N=0;N<P.length;N++){const de=P[N];try{const oe=yield Te.downloadFile(de.id),{download_url:ee,filename:ce,file_size:qe,is_encrypted:Me,encryption_metadata:Je}=oe.data,St=yield fetch(ee);if(!St.ok)throw new gt(`Failed to download ${ce}: ${St.status}`);let Ze=yield St.blob(),fr=ce;if(Me&&Je&&Ye.isEnabled())try{const mr=new File([Ze],ce,{type:Ze.type}),xs=yield Ye.decryptFileAfterDownload(mr,Je);Ze=xs,fr=xs.name}catch(mr){throw console.error(`Decryption failed for ${ce}:`,mr),new gt(`Decryption failed for ${ce}: ${mr.message}`)}else if(Me&&!Ye.isEnabled())throw new gt(`File ${ce} is encrypted but encryption service is not enabled. Please set up your master password first.`);const ps=de.relative_path||"",Un=ps?`${ps}/${fr}`:fr;U.file(Un,Ze);const zn=Math.round((N+1)/P.length*100);console.log(`Added ${fr} to ZIP (${zn}%)`)}catch(oe){console.error(`Failed to process file ${de.original_filename}:`,oe)}}console.log("Generating ZIP file...");const M=yield U.generateAsync({type:"blob"});console.log(`ZIP generated successfully, size: ${M.size} bytes`);const O=window.URL.createObjectURL(M);console.log("Created download URL:",O);const X=document.createElement("a");X.href=O,X.download=`download_${Date.now()}.zip`,X.style.display="none",document.body.appendChild(X),console.log("Triggering download..."),X.click(),setTimeout(()=>{if(O&&O.startsWith("blob:"))console.log("Download triggered successfully");else{console.warn("Download may not have started, trying alternative method");const N=document.createElement("iframe");N.style.display="none",N.src=O,document.body.appendChild(N),setTimeout(()=>{document.body.removeChild(N)},2e3)}},500),setTimeout(()=>{document.body.removeChild(X),window.URL.revokeObjectURL(O),console.log("Download cleanup completed")},2e3),ke(N=>ye(R({},N),{downloadComplete:!0})),setTimeout(()=>{re(!1),ge(),console.log(`Bulk download completed: ${P.length} files in ZIP`)},3e3)}catch($){console.error("Bulk download failed:",$),re(!1),alert(`Bulk download failed: ${$.message}`)}}),Dn=()=>{const x=$e(),g=fe();if(x.length===0&&g.length===0)return;const y=g.reduce(($,U)=>$+(U.fileCount||0),0),P=x.length+y;W({open:!0,count:P})},Fn=()=>C(K,null,function*(){const x=$e(),g=fe();W({open:!1,count:0});const y=[...x];for(const U of g)try{console.log(`Fetching files for folder: ${U.path}`);const M=yield Te.getFiles({folder:U.path,paginate:!1});M.data&&Array.isArray(M.data.files)&&(y.push(...M.data.files),console.log(`Found ${M.data.files.length} files in folder ${U.path}`))}catch(M){console.error(`Error fetching files for folder ${U.path}:`,M)}const P=y.map(U=>U.id);console.log(`Total files to delete: ${P.length}`);const $=te.addDeleteOperation(P,"delete");ze("delete"),L("in_progress"),H({}),y.forEach(U=>{H(M=>ye(R({},M),{[U.id]:{status:"pending",progress:0}}))});try{te.updateDeleteOperation($,{status:"deleting",progress:0,completedFiles:0});const U=1e3,M=[];for(let N=0;N<P.length;N+=U)M.push(P.slice(N,N+U));Q({current:0,total:M.length});let O=0,X=0;for(let N=0;N<M.length;N++){const de=M[N];try{Q({current:N+1,total:M.length}),H(Je=>{const St=R({},Je);return de.forEach(Ze=>{St[Ze]={status:"in_progress",progress:50}}),St});const oe=yield Te.bulkDeleteFiles(de),{summary:ee,failed_files:ce}=oe.data;O+=ee.successfully_deleted,X+=ee.failed_deletions||0,de.forEach(Je=>{const St=ce?ce.find(Ze=>Ze.file_id===Je):null;H(St?Ze=>ye(R({},Ze),{[Je]:{status:"error",progress:0}}):Ze=>ye(R({},Ze),{[Je]:{status:"completed",progress:100}}))});const qe=O+X,Me=Math.round(qe/P.length*100);te.updateDeleteOperation($,{status:"uploading",progress:Me,completedFiles:qe}),N<M.length-1&&(yield new Promise(Je=>setTimeout(Je,100)))}catch(oe){console.error(`Batch ${N+1} failed:`,oe),de.forEach(ee=>{H(ce=>ye(R({},ce),{[ee]:{status:"error",progress:0}}))}),X+=de.length}}L("completed"),te.updateDeleteOperation($,{status:"completed",progress:100,completedFiles:O+X}),setTimeout(()=>{ge(),rt(),L(null),H({}),ze(null),te.queue=te.queue.filter(N=>N.id!==$),te._emit()},500)}catch(U){console.error("Bulk delete failed:",U),L("error"),te.updateDeleteOperation($,{status:"failed",progress:0,error:U.message}),setTimeout(()=>{L(null),H({}),ze(null),te.queue=te.queue.filter(M=>M.id!==$),te._emit()},3e3)}});u.useEffect(()=>{rt()},[c,I]),u.useEffect(()=>{const x=()=>{const y=Ye.getEncryptionStatus();Ur(y.enabled)};x();const g=setInterval(x,1e3);return()=>clearInterval(g)},[]),u.useEffect(()=>{let x,g="",y=null;return te.init().then(()=>{x=te.subscribe(P=>{if(!P)return;const $=`${P.total}-${P.completed}-${P.inProgress}-${P.queued}-${P.failed}`;$!==g&&(g=$,y&&clearTimeout(y),y=setTimeout(()=>{Ge(P),y=null},500))})}),()=>{x==null||x(),y&&clearTimeout(y)}},[]),u.useEffect(()=>{let x;const g=ie;if(!g)return;const{inProgress:y,queued:P,completed:$,total:U}=g;return(y===0&&P===0&&$>0||$===U)&&(x=setTimeout(()=>C(K,null,function*(){yield te.clearAll(),rt()}),5e3)),()=>{x&&clearTimeout(x)}},[ie==null?void 0:ie.inProgress,ie==null?void 0:ie.queued,ie==null?void 0:ie.completed,ie==null?void 0:ie.total]),u.useEffect(()=>{const x=setTimeout(()=>{T(s||"")},200);return()=>clearTimeout(x)},[s]);function rt(){return C(this,null,function*(){try{if(ue(!0),!He.getAccessToken()){console.error("No authentication token found"),o([]),d([]);return}const g=yield Te.getFiles({folder:c==="root"?"root":c,search:(I==null?void 0:I.trim())||"",paginate:!1});if(g.status!==200){console.error("API returned non-200 status:",g.status),o([]),d([]);return}let y=[],P=[];g.data&&Array.isArray(g.data.files)?(y=g.data.files,P=g.data.folders||[]):Array.isArray(g.data)?y=g.data:g.data&&Array.isArray(g.data.data)&&(y=g.data.data),Array.isArray(y)||(y=[]);const $=P.map(O=>({id:`folder_${O.name}`,original_filename:O.name,file_type:"folder",file_size:O.size||0,relative_path:O.relative_path,status:"uploaded",uploaded_at:new Date().toISOString(),fileCount:O.fileCount,size:O.size||0}));y=[...y,...$];const U=new Map,M=[];if(y.forEach(O=>{if(O.file_type==="folder"){const oe=(O.relative_path||"").split("/").filter(ee=>ee!=="");if(oe.length===0||oe.length===1&&oe[0]===O.original_filename){const ee=O.original_filename;U.set(ee,{name:O.original_filename,path:ee,parent:"root",fileCount:O.fileCount||0,size:O.size||0})}else{let ee="root";oe.forEach((ce,qe)=>{const Me=ee==="root"?ce:`${ee}/${ce}`;U.has(Me)||U.set(Me,{name:ce,path:Me,parent:ee,fileCount:0,size:0}),ee=Me})}return}const N=(O.relative_path||O.s3_key||"").split("/").filter(de=>de!=="");if(N.length===0)M.push(O);else{let de="root";N.forEach((oe,ee)=>{const ce=de==="root"?oe:`${de}/${oe}`;U.has(ce)||U.set(ce,{name:oe,path:ce,parent:de,fileCount:0,size:0}),de=ce}),M.push(O)}}),y.forEach(O=>{if(O.file_type==="folder")return;const N=(O.relative_path||O.s3_key||"").split("/").filter(oe=>oe!=="");let de="root";N.forEach((oe,ee)=>{const ce=de==="root"?oe:`${de}/${oe}`,qe=U.get(ce);qe&&qe.fileCount===0&&qe.size===0&&(qe.fileCount+=1,qe.size+=O.file_size||0),de=ce})}),c==="root"&&y.length>0&&y.every(O=>O.file_type==="folder")){const O=y.filter(X=>X.file_type==="folder"&&(!X.relative_path||X.relative_path==="")).map(X=>C(this,null,function*(){try{const de=(yield Te.getFiles({folder:X.original_filename,search:"",paginate:!1})).data.files||[],oe=de.filter(Me=>Me.file_type!=="folder").length,ee=de.filter(Me=>Me.file_type!=="folder").reduce((Me,Je)=>Me+(Je.file_size||0),0),ce=X.original_filename,qe=U.get(ce);return qe&&(qe.fileCount=oe,qe.size=ee),{folderPath:ce,fileCount:oe,size:ee}}catch(N){return console.error(`Error getting stats for folder ${X.original_filename}:`,N),{folderPath:X.original_filename,fileCount:0,size:0}}}));yield Promise.all(O)}o(M),d(Array.from(U.values()))}catch(x){console.error("Error loading files:",x)}finally{ue(!1)}})}const _t=u.useMemo(()=>{if(!i||i.length===0)return[];let x=i;if(I){const g=I.toLowerCase();x=i.filter(y=>{const P=(y.original_filename||"").toLowerCase(),$=(y.relative_path||y.s3_key||"").toLowerCase();return P.includes(g)||$.includes(g)})}else x=x.filter(g=>{const y=g.relative_path||"";if(c==="root")return!y||y==="";{const P=c;return y===P?!0:y.startsWith(P+"/")?y.substring(P.length+1).indexOf("/")===-1:!1}});return x},[i,j,I,c]),nr=u.useMemo(()=>{if(I)return[];let x;return c==="root"?x=a.filter(g=>g.parent==="root"):x=a.filter(g=>g.parent===c),x},[a,c,I]),Lr=x=>{if(!x)return"0 B";const g=1024,y=["B","KB","MB","GB","TB"],P=Math.floor(Math.log(x)/Math.log(g));return`${parseFloat((x/Math.pow(g,P)).toFixed(2))} ${y[P]}`},An=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),Wn=x=>{w(g=>{const y=new Set(g);return y.has(x)?y.delete(x):y.add(x),y})};return e.jsxs(h,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},height:"calc(100vh - 100px)",bgcolor:"background.default",borderRadius:0,overflow:"hidden",position:"relative"},children:[zr,e.jsxs(h,{sx:{flex:1,display:"flex",flexDirection:"column",position:"relative",minWidth:0,overflow:"hidden"},children:[e.jsx(h,{sx:{borderBottom:`1px solid ${b(n.palette.divider,.1)}`,bgcolor:b("#ffffff",.5)},children:e.jsx(h,{sx:{px:0,pt:1.5,pb:1},children:e.jsxs(Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",sx:{flexWrap:"nowrap",gap:1,overflowX:"auto"},children:[e.jsxs(Z,{direction:"row",spacing:1,alignItems:"center",sx:{flex:"0 0 auto",whiteSpace:"nowrap"},children:[e.jsx(Nn,{fontSize:"small",sx:{color:"text.secondary",cursor:"pointer"},onClick:()=>{p("root"),t==null||t("root")}}),c!=="root"&&c.split("/").filter(x=>x!=="root").map((x,g,y)=>{const P=y.slice(0,g+1).join("/");return e.jsxs(cr.Fragment,{children:[e.jsx(Hn,{fontSize:"small",sx:{color:"text.secondary"}}),e.jsx(l,{variant:"body2",sx:{color:g===y.length-1?"primary.main":"text.secondary",fontWeight:g===y.length-1?600:400,cursor:"pointer","&:hover":{textDecoration:"underline"},whiteSpace:"nowrap"},onClick:()=>{p(P),t==null||t(P)},children:x})]},P)})]}),e.jsxs(Z,{direction:"row",spacing:1,alignItems:"center",sx:{flex:"0 0 auto",whiteSpace:"nowrap"},children:[c!=="root"&&e.jsx(ot,{title:"Folder Details",children:e.jsx(Be,{size:"small",onClick:()=>se(!0),children:e.jsx(Js,{fontSize:"small"})})}),e.jsx(et,{size:"small",placeholder:"Search files...",value:I,onChange:x=>T(x.target.value),sx:{minWidth:{xs:160,md:240}}}),e.jsx(ot,{title:"Upload Files",children:e.jsx(z,{size:"small",startIcon:e.jsx(Oe,{}),onClick:()=>Ce(!0),disabled:wt,sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:"Upload"})}),e.jsx(ot,{title:"Create Folder",children:e.jsx(z,{size:"small",startIcon:e.jsx(Gn,{}),onClick:()=>C(K,null,function*(){var g,y;const x=prompt("Enter folder name:");if(x&&x.trim())try{const P=yield Te.createFolder(x.trim(),c==="root"?"":c);alert(`Folder "${x.trim()}" created successfully!`),window.location.reload()}catch(P){const $=((y=(g=P.response)==null?void 0:g.data)==null?void 0:y.error)||"Failed to create folder";alert(`Error: ${$}`)}}),sx:{textTransform:"none",fontWeight:600},children:"New Folder"})}),e.jsxs(h,{sx:{display:"flex",alignItems:"center",mr:1},children:[e.jsx(wr,{checked:Le()>0&&Le()===_t.length+nr.length,indeterminate:Le()>0&&Le()<_t.length+nr.length,onChange:x=>{x.target.checked?Ae():ge()},size:"small",sx:{color:"primary.main","&.Mui-checked":{color:"primary.main"}}}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary",ml:.5},children:"Select All"})]}),e.jsx(ot,{title:"Refresh",children:e.jsx(Be,{onClick:rt,size:"small",sx:{flex:"0 0 auto"},children:e.jsx(Yt,{fontSize:"small"})})}),Le()>0&&e.jsxs(e.Fragment,{children:[e.jsx(ot,{title:`Download ${Le()} items`,children:e.jsx(Be,{onClick:Tn,size:"small",sx:{bgcolor:b("#3b82f6",.1),"&:hover":{bgcolor:b("#3b82f6",.2)}},children:e.jsx(qt,{sx:{color:"#3b82f6"}})})}),e.jsx(ot,{title:`Hibernate ${Le()} items`,children:e.jsx(Be,{onClick:tt,size:"small",sx:{bgcolor:b("#a78bfa",.1),"&:hover":{bgcolor:b("#a78bfa",.2)}},children:e.jsx(bs,{sx:{color:"#a78bfa"}})})}),e.jsx(ot,{title:`Wake up ${Le()} items`,children:e.jsx(Be,{onClick:Rn,size:"small",sx:{bgcolor:b("#fbbf24",.1),"&:hover":{bgcolor:b("#fbbf24",.2)}},children:e.jsx($r,{sx:{color:"#fbbf24"}})})}),e.jsx(ot,{title:`Delete ${Le()} items`,children:e.jsx(Be,{onClick:Dn,size:"small",sx:{bgcolor:b("#ef4444",.1),"&:hover":{bgcolor:b("#ef4444",.2)}},children:e.jsx(Ut,{sx:{color:"#ef4444"}})})})]})]})]})})}),e.jsx(Da,{uploadManagerState:ie}),(()=>{const g=(ie.deleteOperations||[]).find(O=>O&&O.status==="deleting");if(!g)return null;const y=g.totalFiles||0,P=g.completedFiles||0;if(!(y>0))return null;const U=y>0?Math.round(P/y*100):0,M=y-P;return e.jsx(Or,{in:!0,timeout:150,children:e.jsx(h,{sx:{px:{xs:2,md:3},pt:1.5},children:e.jsxs(ne,{sx:{p:2,border:`1px solid ${b("#f59e0b",.2)}`,background:`linear-gradient(135deg, ${b("#f59e0b",.05)} 0%, ${b("#f59e0b",.02)} 100%)`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.15s ease"},children:[e.jsxs(Z,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(h,{sx:{p:1,borderRadius:"50%",bgcolor:b("#f59e0b",.1),display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ut,{sx:{color:"#f59e0b",fontSize:20}})}),e.jsxs(h,{sx:{flex:1},children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:600,color:"#f59e0b"},children:[" Deleting ",M," of ",y," files"]}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[P," completed  ",M," remaining"]})]}),e.jsxs(l,{variant:"caption",sx:{fontWeight:600,color:"#f59e0b",bgcolor:b("#f59e0b",.1),px:1.5,py:.5,borderRadius:1},children:[U,"%"]})]}),e.jsx(De,{variant:"determinate",value:U,sx:{mt:1.5,height:8,borderRadius:4,bgcolor:b("#f59e0b",.1),"& .MuiLinearProgress-bar":{bgcolor:"#f59e0b",borderRadius:4}}})]})})})})(),e.jsxs(h,{sx:{flex:1,overflow:"auto",pt:{xs:2,md:3},pr:{xs:2,md:2},pb:{xs:2,md:3},pl:{xs:2,md:3}},children:[_t.length>0&&e.jsxs(ne,{sx:{p:2.5,mb:3,bgcolor:"background.paper",border:`1px solid ${b(n.palette.divider,.1)}`},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(l,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:" File Status Summary"}),e.jsx(h,{sx:{display:"flex",alignItems:"center",gap:1},children:gr?e.jsx(ae,{icon:e.jsx(bt,{}),label:"E2E Encryption Enabled",size:"small",color:"success",variant:"outlined"}):e.jsx(ae,{icon:e.jsx(ns,{}),label:"E2E Encryption Disabled",size:"small",color:"default",variant:"outlined"})}),(()=>{const x=_t.reduce((g,y)=>(g[y.status]=(g[y.status]||0)+1,g),{});return e.jsxs(Z,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(ae,{label:`Hibernated: ${x.archived||0}`,size:"small",sx:{bgcolor:b("#94a3b8",.15),color:"#475569",fontWeight:600}}),e.jsx(ae,{label:`Hibernating: ${x.archiving||0}`,size:"small",sx:{bgcolor:b("#a78bfa",.15),color:"#6b21a8",fontWeight:600}}),e.jsx(ae,{label:`Awake Mode: ${(x.uploaded||0)+(x.restored||0)}`,size:"small",sx:{bgcolor:b("#60a5fa",.15),color:"#0c4a6e",fontWeight:600}})]})})()]}),e.jsx(h,{sx:{display:"none"},children:(()=>{const x=_t.reduce((g,y)=>(getFileStateConfig(y.status),g[y.status]=(g[y.status]||0)+1,g),{});return Object.entries(x).map(([g,y])=>{const P=getFileStateConfig(g);return e.jsx(ae,{icon:P.icon,label:`${P.label}: ${y}`,size:"small",sx:{bgcolor:b(P.color,.1),color:P.color,fontWeight:600,border:`1px solid ${b(P.color,.3)}`}},g)})})()})]}),Fe==="completed"&&e.jsx(h,{sx:{mb:4},children:e.jsx(ne,{sx:{p:2.5,bgcolor:b("#f3f4f6",.3),border:"1px solid",borderColor:"#6b7280"},children:e.jsxs(Z,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(Ue,{sx:{color:"#6b7280"}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#374151"},children:"Deletion Completed Successfully!"})]})})}),Fe==="error"&&e.jsx(h,{sx:{mb:4},children:e.jsx(ne,{sx:{p:2.5,bgcolor:b("#fee2e2",.3),border:"1px solid",borderColor:"#ef4444"},children:e.jsxs(Z,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(gt,{sx:{color:"#ef4444"}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#991b1b"},children:"Some files failed to delete"})]})})}),be&&!wt?e.jsxs(h,{children:[e.jsx(h,{sx:{mb:4,p:2.5,bgcolor:b("#f0f9ff",.5),borderRadius:2},children:e.jsxs(Z,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(Oe,{sx:{color:"#60a5fa"}}),e.jsxs(h,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600},children:"Upload Files"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Uploading to: ",e.jsx("strong",{children:c==="root"?"Root Directory":c})]})]}),e.jsx(h,{sx:{flex:1}}),e.jsx(Be,{onClick:()=>Ce(!1),sx:{bgcolor:b("#ef4444",.1),"&:hover":{bgcolor:b("#ef4444",.2)}},children:e.jsx(Zs,{sx:{color:"#ef4444"}})})]})}),e.jsx(Pn,{open:!0,onClose:()=>Ce(!1),onUploadComplete:()=>{Ce(!1),xr(0),Mt(""),rt(),loadFolderStructure()},onUploadProgress:(x,g)=>{Bt(y=>ye(R({},y),{[g]:x})),typeof g=="string"&&g.includes("files")&&(xr(Math.round(x)),Mt(g))},defaultRelativePath:c==="root"?"":c})]}):pe?e.jsx(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(De,{sx:{width:"50%"}})}):(()=>_t.length===0&&nr.length===0&&!I)()?e.jsxs(h,{sx:R({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:2,cursor:"pointer",borderRadius:3,border:`2px dashed ${b("#60a5fa",.3)}`,bgcolor:b("#f0f9ff",.3),transition:"all 0.3s","&:hover":{borderColor:"#60a5fa",bgcolor:b("#f0f9ff",.5),transform:"scale(1.02)"}},wt&&{opacity:.5,pointerEvents:"none",cursor:"not-allowed"}),onClick:()=>{wt||Ce(!0)},children:[e.jsx(Oe,{sx:{fontSize:80,color:b("#60a5fa",.5)}}),e.jsx(l,{variant:"h6",color:"text.secondary",children:S.title}),e.jsx(l,{variant:"body2",color:"text.secondary",children:S.subtitle}),j===0&&e.jsx(z,{variant:"contained",startIcon:e.jsx(Oe,{}),sx:{mt:2,bgcolor:"#60a5fa","&:hover":{bgcolor:"#3b82f6"},textTransform:"none",fontWeight:600},children:"Upload Files"})]}):e.jsxs(F,{container:!0,spacing:2,children:[nr.map(x=>e.jsx(F,{item:!0,xs:12,sm:6,md:3,lg:2,xl:2,children:e.jsx(Or,{in:!0,timeout:300,children:e.jsxs(Pe,{sx:R({height:"100%",cursor:"pointer",transition:"all 0.3s",background:"background.paper",border:`1px solid ${b("#60a5fa",.2)}`,position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${b("#60a5fa",.2)}`,borderColor:"#60a5fa"}},E.has(x.path)&&{borderColor:"#60a5fa",bgcolor:b("#60a5fa",.1)}),onClick:g=>{g.target.type!=="checkbox"&&(p(x.path),t==null||t(x.path),Wn(x.path))},children:[e.jsx(h,{sx:{position:"absolute",top:8,right:8,zIndex:1},onClick:g=>g.stopPropagation(),children:e.jsx(wr,{checked:E.has(x.path),onChange:()=>Se(x.path),size:"small",sx:{color:"#60a5fa","&.Mui-checked":{color:"#60a5fa"}}})}),e.jsx(Ie,{sx:{px:1.5,py:1.5},children:e.jsxs(Z,{spacing:1.5,children:[e.jsx(h,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:80,borderRadius:2,background:`linear-gradient(135deg, ${b("#60a5fa",.1)}, ${b("#a78bfa",.1)})`},children:e.jsx(ir,{sx:{fontSize:48,color:"#60a5fa"}})}),e.jsxs(h,{children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600,mb:.25,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.name}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{lineHeight:1},children:[x.fileCount," files  ",Lr(x.size)]})]}),(()=>{const g=Wt(x.path);return g?e.jsx(ae,{icon:g.icon,label:g.label,size:"small",sx:{bgcolor:b(g.color,.1),color:g.color,fontWeight:600,borderRadius:1.5,border:`1px solid ${b(g.color,.3)}`,fontSize:"0.75rem",height:24}}):null})()]})})]})})},`folder-${x.path}`)),_t.map(x=>{const g=getFileStateConfig(x.status),y=["archiving","restoring"].includes(x.status);return e.jsx(F,{item:!0,xs:12,sm:6,md:3,lg:2,xl:2,children:e.jsx(Or,{in:!0,timeout:300,children:e.jsxs(Pe,{sx:R(R({height:"100%",cursor:"pointer",transition:"all 0.3s",background:"background.paper",border:`1px solid ${b(g.color,.2)}`,position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${b(g.color,.2)}`,borderColor:g.color}},g.glow&&{animation:`${glow} 2s infinite`,boxShadow:`0 0 20px ${b(g.color,.3)}`}),f.has(x.id)&&{borderColor:g.color,bgcolor:b(g.color,.1)}),onClick:P=>{P.target.type!=="checkbox"&&(B(x),r==null||r(x,"view"))},children:[e.jsx(h,{sx:{position:"absolute",top:8,right:8,zIndex:1},onClick:P=>P.stopPropagation(),children:e.jsx(wr,{checked:f.has(x.id),onChange:()=>Re(x.id),size:"small",sx:{color:g.color,"&.Mui-checked":{color:g.color}}})}),e.jsx(Ie,{children:e.jsxs(Z,{spacing:1.5,children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:80,borderRadius:2,background:`linear-gradient(135deg, ${b(g.color,.1)} 0%, ${b(g.color,.05)} 100%)`,position:"relative",overflow:"hidden"},children:[e.jsx(Lt,{sx:R({fontSize:48,color:g.color},g.animation&&{animation:`${g.animation} 2s infinite`})}),y&&e.jsx(De,{sx:{position:"absolute",bottom:0,left:0,right:0,height:3,bgcolor:b(g.color,.1),"& .MuiLinearProgress-bar":{bgcolor:g.color}}})]}),e.jsx(ot,{title:x.original_filename,children:e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.original_filename}),x.is_encrypted&&e.jsx(ot,{title:"Encrypted with E2E encryption",children:e.jsx(bt,{sx:{fontSize:12,color:"success.main"}})})]})}),e.jsx(Z,{spacing:0,children:e.jsx(l,{variant:"caption",color:"text.secondary",sx:{lineHeight:1},children:Lr(x.file_size)})}),e.jsx(ae,{icon:g.icon,label:g.label,size:"small",sx:{bgcolor:b(g.color,.1),color:g.color,fontWeight:600,borderRadius:1.5}})]})})]})})},x.id)})]})]})]}),v&&e.jsx(qn,{direction:"left",in:!!v,mountOnEnter:!0,unmountOnExit:!0,children:e.jsxs(ne,{elevation:0,sx:{width:{xs:"100%",lg:320},height:{xs:"auto",lg:"100%"},maxHeight:{xs:"400px",lg:"none"},borderRadius:0,borderLeft:{xs:"none",lg:`1px solid ${b(n.palette.divider,.1)}`},borderTop:{xs:`1px solid ${b(n.palette.divider,.1)}`,lg:"none"},background:"background.paper",display:"flex",flexDirection:"column",p:3,gap:2,flexShrink:0,overflow:"auto"},children:[e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700},children:"File Details"}),e.jsx(Be,{size:"small",onClick:()=>B(null),children:e.jsx(js,{})})]}),e.jsx(h,{sx:{height:150,borderRadius:2,background:`linear-gradient(135deg, ${b("#60a5fa",.1)} 0%, ${b("#a78bfa",.1)} 100%)`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Lt,{sx:{fontSize:64,color:"#60a5fa"}})}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,wordBreak:"break-word"},children:v.original_filename}),e.jsx(Gt,{}),e.jsxs(Z,{spacing:2,children:[e.jsxs(h,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Size"}),e.jsx(l,{variant:"body2",children:Lr(v.file_size)})]}),e.jsxs(h,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Uploaded"}),e.jsx(l,{variant:"body2",children:An(v.uploaded_at)})]}),e.jsxs(h,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Status"}),e.jsx(ae,{icon:getFileStateConfig(v.status).icon,label:getFileStateConfig(v.status).label,size:"small",sx:{mt:.5,bgcolor:b(getFileStateConfig(v.status).color,.1),color:getFileStateConfig(v.status).color,fontWeight:600}})]}),v.glacier_archive_id&&e.jsxs(h,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Archive ID"}),e.jsx(l,{variant:"caption",sx:{display:"block",mt:.5,fontFamily:"monospace",bgcolor:b("#f1f5f9",.5),p:1,borderRadius:1,wordBreak:"break-all"},children:v.glacier_archive_id})]})]}),(()=>{const x=ie.items||[],g=(v==null?void 0:v.relative_path)||"";if(!g)return null;const P=x.filter(ee=>ee.operationType==="upload"||!ee.operationType).filter(ee=>{const ce=ee.relativePath||"";return ce===g||ce.startsWith(g+"/")||ce.startsWith(g)}),$=P.length,U=P.filter(ee=>ee.status==="completed").length,M=P.filter(ee=>ee.status==="uploading").length,O=P.filter(ee=>ee.status==="queued").length,X=$>0&&(M>0||O>0),N=$>0?Math.round(P.reduce((ee,ce)=>ee+(ce.progress||0),0)/$):0,de=$>0?Math.max(N,Math.round(U/$*100)):0,oe=M===0&&O>0;return!X&&de===0?null:e.jsxs(h,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Upload Status"}),e.jsxs(Z,{direction:"row",alignItems:"center",spacing:1,sx:{mt:.5},children:[e.jsx(Oe,{sx:{color:"#60a5fa"}}),e.jsx(l,{variant:"body2",sx:{fontWeight:600},children:oe?"Starting uploads":`Uploading ${Math.max(Math.floor(($-U)/100)*100,0)} of ${$} files`})]}),oe?e.jsx(De,{variant:"indeterminate",sx:{mt:1,height:8,borderRadius:4}}):e.jsxs(e.Fragment,{children:[e.jsx(De,{variant:"determinate",value:de,sx:{mt:1,height:8,borderRadius:4}}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[de,"% complete  ",M," in progress  ",O," queued  ",U," completed"]})]})]})})(),e.jsx(Gt,{}),e.jsxs(Z,{spacing:1,children:[e.jsx(z,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(qt,{}),sx:{textTransform:"none",fontWeight:600},onClick:()=>le(v),children:"Download"}),v.status==="uploaded"&&e.jsx(z,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(bs,{}),onClick:()=>C(K,null,function*(){try{yield q(v),rt()}catch(x){console.error("Hibernate failed:",x)}}),sx:{textTransform:"none",fontWeight:600,color:"#a78bfa",borderColor:"#a78bfa"},children:"Hibernate"}),v.status==="archived"&&e.jsx(z,{fullWidth:!0,variant:"outlined",startIcon:e.jsx($r,{}),onClick:()=>C(K,null,function*(){try{yield Te.restoreFile(v.id,"Standard"),yield rt()}catch(x){console.error("Wake failed:",x)}}),sx:{textTransform:"none",fontWeight:600,color:"#fbbf24",borderColor:"#fbbf24"},children:"Wake Up"}),e.jsx(z,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(_r,{}),sx:{textTransform:"none",fontWeight:600},children:"Share"}),e.jsx(z,{fullWidth:!0,variant:"outlined",color:"error",startIcon:e.jsx(Ut,{}),onClick:()=>C(K,null,function*(){try{yield J(v),B(null),rt()}catch(x){console.error("Delete failed:",x)}}),sx:{textTransform:"none",fontWeight:600},children:"Delete"})]})]})}),(()=>{if(v||c==="root")return null;const x=Y;return e.jsx(Vn,{anchor:"right",open:x,onClose:()=>se(!1),sx:{zIndex:g=>g.zIndex.drawer+1},children:e.jsxs(h,{sx:{width:{xs:320,sm:360},p:3,display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700},children:"Folder Details"}),e.jsx(Be,{size:"small",onClick:()=>se(!1),children:e.jsx(js,{})})]}),e.jsx(h,{sx:{height:120,borderRadius:2,background:`linear-gradient(135deg, ${b("#60a5fa",.1)} 0%, ${b("#a78bfa",.1)} 100%)`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ir,{sx:{fontSize:64,color:"#60a5fa"}})}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,wordBreak:"break-word"},children:c}),e.jsx(Gt,{})]})})})(),e.jsxs(ft,{open:je.open,onClose:()=>W({open:!1,count:0}),maxWidth:"sm",fullWidth:!0,children:[e.jsxs(mt,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ut,{color:"error"}),"Confirm Bulk Delete"]}),e.jsxs(yt,{children:[e.jsxs(l,{variant:"body1",children:["Are you sure you want to delete ",e.jsx("strong",{children:je.count})," items?"]}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This action cannot be undone. All selected files and folders will be permanently removed."})]}),e.jsxs(Xt,{children:[e.jsx(z,{onClick:()=>W({open:!1,count:0}),color:"inherit",children:"Cancel"}),e.jsxs(z,{onClick:Fn,color:"error",variant:"contained",startIcon:e.jsx(Ut,{}),children:["Delete ",je.count," Items"]})]})]}),e.jsx(Ta,{open:me,onClose:()=>re(!1),downloadInfo:G})]})},Aa=r=>!r||typeof r!="string"?"":r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/<iframe[^>]*>.*?<\/iframe>/gi,"").replace(/<object[^>]*>.*?<\/object>/gi,"").replace(/<embed[^>]*>.*?<\/embed>/gi,"").replace(/<form[^>]*>.*?<\/form>/gi,"").replace(/<input[^>]*>/gi,"").replace(/<textarea[^>]*>.*?<\/textarea>/gi,"").replace(/<select[^>]*>.*?<\/select>/gi,"").replace(/<link[^>]*>/gi,"").replace(/<meta[^>]*>/gi,"").replace(/<style[^>]*>.*?<\/style>/gi,"").replace(/<base[^>]*>/gi,"").replace(/<applet[^>]*>.*?<\/applet>/gi,"").replace(/<param[^>]*>/gi,"").replace(/<blink[^>]*>.*?<\/blink>/gi,"").replace(/<marquee[^>]*>.*?<\/marquee>/gi,"").replace(/<keygen[^>]*>/gi,"").replace(/<isindex[^>]*>/gi,"").replace(/<listing[^>]*>.*?<\/listing>/gi,"").replace(/<plaintext[^>]*>.*?<\/plaintext>/gi,"").replace(/<xmp[^>]*>.*?<\/xmp>/gi,"").replace(/<xml[^>]*>.*?<\/xml>/gi,"").replace(/<svg[^>]*>.*?<\/svg>/gi,"").replace(/<math[^>]*>.*?<\/math>/gi,"").substring(0,1e3),Wa=({open:r,file:t,onClose:s,onAction:n,loading:i=!1})=>{const[o,a]=u.useState(0),[d,c]=u.useState(null),[p,m]=u.useState(!1);u.useEffect(()=>(t&&r&&w(),()=>{d&&URL.revokeObjectURL(d)}),[t,r]);const w=()=>C(K,null,function*(){if(t){m(!0);try{(t.file_type.startsWith("image/")||t.file_type.startsWith("video/"))&&c("/api/placeholder/400/300")}catch(k){console.error("Error generating preview:",k)}finally{m(!1)}}}),f=k=>{const v=k.file_type.toLowerCase();return v.startsWith("image/")?e.jsx(Kn,{color:"primary",sx:{fontSize:48}}):v.startsWith("video/")?e.jsx(Xn,{color:"secondary",sx:{fontSize:48}}):v.startsWith("audio/")?e.jsx(Jn,{color:"success",sx:{fontSize:48}}):v.includes("pdf")||v.includes("document")?e.jsx(vs,{color:"error",sx:{fontSize:48}}):v.includes("text")||v.includes("code")?e.jsx(Qs,{color:"info",sx:{fontSize:48}}):v.includes("zip")||v.includes("archive")?e.jsx(Et,{color:"warning",sx:{fontSize:48}}):e.jsx(Lt,{color:"action",sx:{fontSize:48}})},D=k=>{switch(k){case"uploaded":return e.jsx(or,{color:"success"});case"archiving":return e.jsx(_s,{color:"warning"});case"archived":return e.jsx(Et,{color:"info"});case"restoring":return e.jsx(_s,{color:"warning"});case"restored":return e.jsx(or,{color:"success"});case"failed":return e.jsx(Zn,{color:"error"});default:return e.jsx(Oe,{color:"action"})}},E=k=>{switch(k){case"uploaded":return"success";case"archiving":return"warning";case"archived":return"info";case"restoring":return"warning";case"restored":return"success";case"failed":return"error";default:return"default"}},_=k=>{if(k===0)return"0 Bytes";const v=1024,B=["Bytes","KB","MB","GB","TB"],Y=Math.floor(Math.log(k)/Math.log(v));return parseFloat((k/Math.pow(v,Y)).toFixed(2))+" "+B[Y]},I=k=>new Date(k).toLocaleString(),T=k=>{n&&n(t,k)},j=(k,v)=>{a(v)};return t?e.jsxs(ft,{open:r,onClose:s,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"90vh"}},children:[e.jsx(mt,{children:e.jsxs(h,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:2},children:[f(t),e.jsxs(h,{children:[e.jsx(l,{variant:"h6",noWrap:!0,sx:{maxWidth:400},children:t.original_filename}),e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(ae,{icon:D(t.status),label:t.status,color:E(t.status),size:"small"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:_(t.file_size)})]})]})]}),e.jsx(Be,{onClick:s,children:e.jsx(Zs,{})})]})}),e.jsxs(yt,{sx:{p:0},children:[e.jsx(h,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(ss,{value:o,onChange:j,children:[e.jsx(Ht,{label:"Preview"}),e.jsx(Ht,{label:"Details"}),e.jsx(Ht,{label:"History"}),e.jsx(Ht,{label:"Actions"})]})}),e.jsxs(h,{sx:{p:3},children:[o===0&&e.jsxs(h,{children:[e.jsx(ne,{sx:{p:3,textAlign:"center",mb:3},children:p?e.jsxs(h,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(De,{sx:{width:"100%"}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Loading preview..."})]}):t.file_type.startsWith("image/")?e.jsxs(h,{children:[e.jsx("img",{src:d||"/api/placeholder/400/300",alt:Aa(t.original_filename),style:{maxWidth:"100%",maxHeight:400,objectFit:"contain",borderRadius:8},onError:k=>{k.target.style.display="none",k.target.nextSibling.style.display="block"}}),e.jsx(h,{sx:{display:"none",mt:2},children:e.jsx(xe,{severity:"info",children:"Preview not available for this image"})})]}):t.file_type.startsWith("video/")?e.jsx(h,{children:e.jsxs("video",{controls:!0,style:{maxWidth:"100%",maxHeight:400,borderRadius:8},children:[e.jsx("source",{src:d||"/api/placeholder/400/300",type:t.file_type}),"Your browser does not support the video tag."]})}):e.jsxs(h,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[f(t),e.jsx(l,{variant:"h6",color:"text.secondary",children:"Preview not available"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"This file type cannot be previewed"})]})}),e.jsxs(F,{container:!0,spacing:2,children:[e.jsx(F,{item:!0,xs:12,sm:6,md:3,children:e.jsx(z,{variant:"outlined",startIcon:e.jsx(qt,{}),fullWidth:!0,onClick:()=>T("download"),children:"Download"})}),t.status==="uploaded"&&e.jsx(F,{item:!0,xs:12,sm:6,md:3,children:e.jsx(z,{variant:"outlined",startIcon:e.jsx(Et,{}),fullWidth:!0,onClick:()=>T("archive"),children:"Put to Sleep"})}),t.status==="archived"&&e.jsx(F,{item:!0,xs:12,sm:6,md:3,children:e.jsx(z,{variant:"outlined",startIcon:e.jsx(br,{}),fullWidth:!0,onClick:()=>T("restore"),children:"Restore"})}),e.jsx(F,{item:!0,xs:12,sm:6,md:3,children:e.jsx(z,{variant:"outlined",startIcon:e.jsx(_r,{}),fullWidth:!0,onClick:()=>T("share"),children:"Share"})})]})]}),o===1&&e.jsxs(h,{children:[e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Pe,{children:e.jsxs(Ie,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"File Information"}),e.jsxs(ct,{dense:!0,children:[e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(Lt,{})}),e.jsx(_e,{primary:"Filename",secondary:t.original_filename})]}),e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(dt,{})}),e.jsx(_e,{primary:"Size",secondary:_(t.file_size)})]}),e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(vs,{})}),e.jsx(_e,{primary:"Type",secondary:t.file_type})]}),e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(Yn,{})}),e.jsx(_e,{primary:"Uploaded",secondary:I(t.uploaded_at)})]}),t.archived_at&&e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(Et,{})}),e.jsx(_e,{primary:"Archived",secondary:I(t.archived_at)})]})]})]})})}),e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Pe,{children:e.jsxs(Ie,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Status & Metadata"}),e.jsxs(ct,{dense:!0,children:[e.jsxs(ve,{children:[e.jsx(we,{children:D(t.status)}),e.jsx(_e,{primary:"Status",secondary:t.status}),e.jsx(ae,{label:t.status,color:E(t.status),size:"small"})]}),t.checksum&&e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(Ue,{})}),e.jsx(_e,{primary:"Checksum",secondary:t.checksum})]}),t.glacier_archive_id&&e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(Et,{})}),e.jsx(_e,{primary:"Glacier ID",secondary:t.glacier_archive_id})]}),t.restore_tier&&e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(Dr,{})}),e.jsx(_e,{primary:"Restore Tier",secondary:t.restore_tier})]})]})]})})})]}),t.description&&e.jsx(Pe,{sx:{mt:3},children:e.jsxs(Ie,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Description"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:t.description})]})})]}),o===2&&e.jsxs(h,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"File History"}),e.jsxs(ct,{children:[e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(Oe,{color:"primary"})}),e.jsx(_e,{primary:"File uploaded",secondary:I(t.uploaded_at)})]}),t.status==="archived"&&e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(Et,{color:"info"})}),e.jsx(_e,{primary:"File archived",secondary:t.archived_at?I(t.archived_at):"Recently"})]}),t.status==="restored"&&e.jsxs(ve,{children:[e.jsx(we,{children:e.jsx(br,{color:"success"})}),e.jsx(_e,{primary:"File restored",secondary:"Recently"})]})]})]}),o===3&&e.jsxs(h,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Available Actions"}),e.jsxs(F,{container:!0,spacing:2,children:[e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Pe,{sx:{height:"100%"},children:e.jsxs(Ie,{sx:{textAlign:"center"},children:[e.jsx(qt,{color:"primary",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Download"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Download this file to your device"}),e.jsx(z,{variant:"contained",startIcon:e.jsx(qt,{}),fullWidth:!0,onClick:()=>T("download"),children:"Download"})]})})}),t.status==="uploaded"&&e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Pe,{sx:{height:"100%"},children:e.jsxs(Ie,{sx:{textAlign:"center"},children:[e.jsx(Et,{color:"info",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Archive"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Move file to Glacier for long-term storage"}),e.jsx(z,{variant:"contained",startIcon:e.jsx(Et,{}),fullWidth:!0,onClick:()=>T("archive"),children:"Archive"})]})})}),t.status==="archived"&&e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Pe,{sx:{height:"100%"},children:e.jsxs(Ie,{sx:{textAlign:"center"},children:[e.jsx(br,{color:"warning",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Restore"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Restore file from Glacier (takes 3-5 hours)"}),e.jsx(z,{variant:"contained",startIcon:e.jsx(br,{}),fullWidth:!0,onClick:()=>T("restore"),children:"Restore"})]})})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Pe,{sx:{height:"100%"},children:e.jsxs(Ie,{sx:{textAlign:"center"},children:[e.jsx(_r,{color:"success",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Share"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Generate a shareable link"}),e.jsx(z,{variant:"outlined",startIcon:e.jsx(_r,{}),fullWidth:!0,onClick:()=>T("share"),children:"Share"})]})})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Pe,{sx:{height:"100%"},children:e.jsxs(Ie,{sx:{textAlign:"center"},children:[e.jsx(ws,{color:"action",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Rename"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Change the filename"}),e.jsx(z,{variant:"outlined",startIcon:e.jsx(ws,{}),fullWidth:!0,onClick:()=>T("rename"),children:"Rename"})]})})}),e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Pe,{sx:{height:"100%"},children:e.jsxs(Ie,{sx:{textAlign:"center"},children:[e.jsx(Ut,{color:"error",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Delete"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Permanently delete this file"}),e.jsx(z,{variant:"outlined",color:"error",startIcon:e.jsx(Ut,{}),fullWidth:!0,onClick:()=>T("delete"),children:"Delete"})]})})})]})]})]})]}),e.jsx(Xt,{children:e.jsx(z,{onClick:s,children:"Close"})})]}):null},Ua=({open:r,onClose:t,onPasswordSet:s})=>{const[n,i]=u.useState(""),[o,a]=u.useState(""),[d,c]=u.useState(!1),[p,m]=u.useState(!1),[w,f]=u.useState(!1),[D,E]=u.useState(""),[_,I]=u.useState(!1),[T,j]=u.useState(0),[k,v]=u.useState(""),[B,Y]=u.useState(null),se=ue=>C(K,null,function*(){if(ue.preventDefault(),E(""),Y(null),!n){E("Password is required");return}if(n.length<8){E("Password must be at least 8 characters long");return}if(n!==o){E("Passwords do not match");return}I(!0),j(0),v("Initializing encryption...");try{j(25),v("Setting up encryption keys..."),yield Ye.initializeEncryption(n),j(50),v("Testing encryption...");const be=yield Ye.testEncryption();if(Y(be),!be.success)throw new gt(be.error||"Encryption test failed");j(75),v("Finalizing setup..."),w&&(localStorage.setItem("encryption_enabled","true"),localStorage.setItem("encryption_initialized",Date.now().toString())),j(100),v("Encryption ready!"),yield new Promise(Ce=>setTimeout(Ce,500)),s(n),i(""),a(""),t()}catch(be){console.error("Encryption initialization failed:",be),E(`Encryption setup failed: ${be.message}`),Ye.disableEncryption()}finally{I(!1),j(0),v("")}}),pe=()=>{_||(i(""),a(""),E(""),Y(null),t())};return e.jsxs(ft,{open:r,onClose:pe,maxWidth:"sm",fullWidth:!0,children:[e.jsx(mt,{children:e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ft,{color:"primary"}),e.jsx(l,{variant:"h6",children:"Set Master Password"})]})}),e.jsxs(yt,{children:[e.jsxs(xe,{severity:"info",sx:{mb:2},children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1},children:" True End-to-End Encryption"}),e.jsxs(l,{variant:"body2",sx:{mb:1},children:["Your master password encrypts all files using ",e.jsx("strong",{children:"AES-GCM 256-bit encryption"})," before upload. Only you can decrypt them - not even we can access your files."]}),e.jsxs(h,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:[e.jsx(ae,{label:"AES-GCM 256-bit",size:"small",color:"primary"}),e.jsx(ae,{label:"PBKDF2 (100k iterations)",size:"small",color:"primary"}),e.jsx(ae,{label:"Zero-Knowledge",size:"small",color:"primary"}),e.jsx(ae,{label:"Open Source",size:"small",color:"success"})]}),e.jsx(l,{variant:"body2",sx:{mt:1,fontStyle:"italic"},children:"Choose a strong password and keep it safe - it cannot be recovered if lost."})]}),D&&e.jsx(xe,{severity:"error",sx:{mb:2},children:D}),B&&e.jsxs(xe,{severity:B.success?"success":"error",sx:{mb:2},icon:B.success?e.jsx(Ue,{}):e.jsx(gt,{}),children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1},children:B.success?" Encryption Test Passed":" Encryption Test Failed"}),e.jsx(l,{variant:"body2",children:B.message}),B.success&&e.jsxs(l,{variant:"body2",sx:{mt:1},children:["Duration: ",B.duration,"ms | Compression: ",B.compressionRatio,"x"]})]}),_&&e.jsxs(h,{sx:{mb:2},children:[e.jsx(l,{variant:"body2",sx:{mb:1},children:k}),e.jsx(De,{variant:"determinate",value:T,sx:{height:8,borderRadius:4}})]}),e.jsxs(h,{component:"form",onSubmit:se,children:[e.jsx(et,{fullWidth:!0,label:"Master Password",type:d?"text":"password",value:n,onChange:ue=>i(ue.target.value),margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(jr,{position:"start",children:e.jsx(bt,{})}),endAdornment:e.jsx(jr,{position:"end",children:e.jsx(Be,{onClick:()=>c(!d),edge:"end",children:d?e.jsx(Ss,{}):e.jsx(kr,{})})})},helperText:"Minimum 8 characters, used to derive encryption keys",disabled:_}),e.jsx(et,{fullWidth:!0,label:"Confirm Password",type:p?"text":"password",value:o,onChange:ue=>a(ue.target.value),margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(jr,{position:"start",children:e.jsx(bt,{})}),endAdornment:e.jsx(jr,{position:"end",children:e.jsx(Be,{onClick:()=>m(!p),edge:"end",children:p?e.jsx(Ss,{}):e.jsx(kr,{})})})},disabled:_}),e.jsx(Qn,{control:e.jsx(wr,{checked:w,onChange:ue=>f(ue.target.checked),disabled:_}),label:"Remember password for this session (not recommended for shared devices)",sx:{mt:2}})]})]}),e.jsxs(Xt,{children:[e.jsx(z,{onClick:pe,disabled:_,children:"Cancel"}),e.jsx(z,{onClick:se,variant:"contained",color:"primary",disabled:!n||!o||_,startIcon:_?e.jsx(Ft,{}):e.jsx(bt,{}),children:_?"Setting Up Encryption...":"Enable E2E Encryption"})]})]})},In=()=>{const r=Kt(),[t,s]=u.useState("security"),n=c=>(p,m)=>{s(m?c:!1)},i=[{service:"Google Drive",storage:"1 TB",monthlyPrice:"1,300",keyNotes:"Simple, but costly"},{service:"Dropbox",storage:"1 TB",monthlyPrice:"1,500",keyNotes:"Smooth, but pricey"},{service:"OneDrive",storage:"1 TB",monthlyPrice:"1,250",keyNotes:"Great for Office users"},{service:" DataHibernate",storage:"1 TB",monthlyPrice:"249",keyNotes:` Same AWS reliability
 End-to-End Encrypted
 Transparent, Indian pricing`}],o=[{icon:e.jsx(bt,{}),title:"True End-to-End Encryption",description:"AES-GCM 256-bit encryption with PBKDF2 key derivation. Files are encrypted before upload - even we cannot decrypt them.",details:["Military-grade AES-GCM 256-bit encryption","PBKDF2 with 100,000 iterations","Random IV per file prevents pattern analysis","Authentication tags ensure integrity","Zero-knowledge architecture"]},{icon:e.jsx(Qs,{}),title:"Open Source Encryption",description:"Our encryption code is completely open source, allowing security audits and building trust through transparency.",details:["Full source code available on GitHub","Security researchers can audit the code","No hidden backdoors or vulnerabilities","Community-driven security improvements","Transparent implementation"]},{icon:e.jsx(ai,{}),title:"Master Password Protection",description:"Your master password is never stored on our servers. Keys are derived client-side using industry-standard algorithms.",details:["Password never leaves your device","Keys derived using PBKDF2","No key storage on servers","Client-side encryption only","Password cannot be recovered if lost"]},{icon:e.jsx(li,{}),title:"Secure Infrastructure",description:"Built on AWS infrastructure with additional security layers and compliance certifications.",details:["AWS S3 with server-side encryption","HTTPS/TLS for all communications","SOC 2 Type II compliance","GDPR compliant data handling","Regular security audits"]}],a=[{icon:e.jsx(or,{}),title:"99.99% Uptime SLA",description:"Built on AWS infrastructure with redundancy and failover mechanisms.",details:["Multi-region data replication","Automatic failover systems","24/7 monitoring and alerting","99.99% uptime guarantee","Disaster recovery protocols"]},{icon:e.jsx(dt,{}),title:"Glacier Deep Archive",description:"Long-term storage with automatic tiering to reduce costs while maintaining accessibility.",details:["Automatic tiering to Glacier","Instant retrieval for hot data","Cost-effective cold storage","Data integrity verification","Automated lifecycle management"]},{icon:e.jsx(Dr,{}),title:"High Performance",description:"Optimized for speed with CDN integration and parallel processing.",details:["Global CDN for fast downloads","Parallel upload processing","Streaming uploads for large files","Optimized data compression","Smart caching mechanisms"]}],d=[{icon:e.jsx(Br,{}),title:"Zero-Knowledge Architecture",description:"We cannot see your files, even if we wanted to. Only you have the keys to decrypt your data.",details:["Server never sees plaintext data","No access to encryption keys","Cannot decrypt user files","Privacy by design","Legal protection for users"]},{icon:e.jsx(Vr,{}),title:"GDPR Compliant",description:"Full compliance with privacy regulations including GDPR, CCPA, and other data protection laws.",details:["Right to be forgotten","Data portability","Consent management","Privacy by design","Regular compliance audits"]},{icon:e.jsx(kr,{}),title:"Transparent Operations",description:"Open about our practices, policies, and any data processing activities.",details:["Open source code","Transparent privacy policy","Regular security reports","Community oversight","No hidden data collection"]}];return e.jsxs(h,{sx:{flex:1,overflow:"auto",pt:{xs:2,md:3},pr:{xs:2,md:2},pb:{xs:2,md:3},pl:{xs:2,md:3}},children:[e.jsx(ne,{sx:{p:2.5,mb:3,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:e.jsxs(h,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:700,mb:2,color:"text.primary"},children:"Why Choose Data Hibernate?"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",maxWidth:600,mx:"auto"},children:"Save money while keeping your files safe. Simple, secure, and affordable cloud storage."})]})}),e.jsxs(F,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(F,{item:!0,xs:12,md:3,children:e.jsxs(ne,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:[e.jsx(Ft,{sx:{fontSize:48,color:"#60a5fa",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Secure"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Your files are encrypted and safe"})]})}),e.jsx(F,{item:!0,xs:12,md:3,children:e.jsxs(ne,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:[e.jsx(Br,{sx:{fontSize:48,color:"#a78bfa",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Private"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"We can't see your files - only you can"})]})}),e.jsx(F,{item:!0,xs:12,md:3,children:e.jsxs(ne,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:[e.jsx(or,{sx:{fontSize:48,color:"#94a3b8",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Reliable"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Built on AWS - same reliability as big companies"})]})}),e.jsx(F,{item:!0,xs:12,md:3,children:e.jsxs(ne,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:[e.jsx(ei,{sx:{fontSize:48,color:"#10b981",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Low Cost"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Save up to 80% compared to Google Drive & Dropbox"})]})})]}),e.jsxs(ne,{sx:{p:2.5,mb:3,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:" Compare & Save Instantly"}),e.jsx(ti,{component:ne,variant:"outlined",children:e.jsxs(ri,{children:[e.jsx(si,{children:e.jsxs(Es,{sx:{bgcolor:"grey.50"},children:[e.jsx(Ct,{sx:{fontWeight:600},children:"Service"}),e.jsx(Ct,{sx:{fontWeight:600},children:"Storage"}),e.jsx(Ct,{sx:{fontWeight:600},children:"Monthly Price (1 TB)"}),e.jsx(Ct,{sx:{fontWeight:600},children:"Key Notes"})]})}),e.jsx(ni,{children:i.map((c,p)=>e.jsxs(Es,{sx:{bgcolor:c.service===" DataHibernate"?b(r.palette.success.main,.1):"inherit","&:hover":{bgcolor:b(r.palette.primary.main,.05)}},children:[e.jsx(Ct,{sx:{fontWeight:c.service===" DataHibernate"?600:"normal"},children:c.service}),e.jsx(Ct,{children:c.storage}),e.jsx(Ct,{sx:{fontWeight:c.service===" DataHibernate"?600:"normal"},children:c.monthlyPrice}),e.jsx(Ct,{children:e.jsx(l,{variant:"body2",sx:{whiteSpace:"pre-line"},children:c.keyNotes})})]},c.service))})]})}),e.jsx(xe,{severity:"success",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Save up to 80% compared to Google Drive and Dropbox!"}),"Plus you get the same AWS reliability with end-to-end encryption."]})})]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsxs(ne,{sx:{height:"100%",p:2.5,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(Ft,{sx:{color:"#60a5fa"}}),"Security Features"]}),o.map((c,p)=>e.jsxs(Cs,{expanded:t===`security-${p}`,onChange:n(`security-${p}`),sx:{mb:1},children:[e.jsx(ks,{expandIcon:e.jsx(Ps,{}),children:e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.icon,e.jsx(l,{variant:"subtitle1",sx:{fontWeight:500},children:c.title})]})}),e.jsxs(Is,{children:[e.jsx(l,{variant:"body2",sx:{mb:2},children:c.description}),e.jsx(ct,{dense:!0,children:c.details.map((m,w)=>e.jsxs(ve,{sx:{py:.5},children:[e.jsx(we,{sx:{minWidth:32},children:e.jsx(Ue,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(_e,{primary:m,primaryTypographyProps:{variant:"body2"}})]},w))})]})]},p))]})}),e.jsx(F,{item:!0,xs:12,md:6,children:e.jsxs(ne,{sx:{height:"100%",p:2.5,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(or,{sx:{color:"#94a3b8"}}),"Reliability Features"]}),a.map((c,p)=>e.jsxs(Cs,{expanded:t===`reliability-${p}`,onChange:n(`reliability-${p}`),sx:{mb:1},children:[e.jsx(ks,{expandIcon:e.jsx(Ps,{}),children:e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.icon,e.jsx(l,{variant:"subtitle1",sx:{fontWeight:500},children:c.title})]})}),e.jsxs(Is,{children:[e.jsx(l,{variant:"body2",sx:{mb:2},children:c.description}),e.jsx(ct,{dense:!0,children:c.details.map((m,w)=>e.jsxs(ve,{sx:{py:.5},children:[e.jsx(we,{sx:{minWidth:32},children:e.jsx(Ue,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(_e,{primary:m,primaryTypographyProps:{variant:"body2"}})]},w))})]})]},p))]})}),e.jsx(F,{item:!0,xs:12,children:e.jsxs(ne,{sx:{p:2.5,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(Br,{sx:{color:"#a78bfa"}}),"Privacy Features"]}),e.jsx(F,{container:!0,spacing:2,children:d.map((c,p)=>e.jsx(F,{item:!0,xs:12,md:4,children:e.jsxs(h,{sx:{p:2,border:`1px solid ${b(r.palette.divider,.2)}`,borderRadius:1},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.icon,e.jsx(l,{variant:"subtitle1",sx:{fontWeight:500},children:c.title})]}),e.jsx(l,{variant:"body2",sx:{mb:2},children:c.description}),e.jsx(ct,{dense:!0,children:c.details.map((m,w)=>e.jsxs(ve,{sx:{py:.5},children:[e.jsx(we,{sx:{minWidth:32},children:e.jsx(Ue,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(_e,{primary:m,primaryTypographyProps:{variant:"body2"}})]},w))})]})},p))})]})})]}),e.jsxs(ne,{sx:{mt:4,p:2.5,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h5",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(Mr,{sx:{color:"#60a5fa"}}),"Open Source E2E Encryption"]}),e.jsxs(F,{container:!0,spacing:3,children:[e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Why Open Source?"}),e.jsxs(ct,{children:[e.jsxs(ve,{sx:{py:.5},children:[e.jsx(we,{sx:{minWidth:32},children:e.jsx(kr,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(_e,{primary:"Transparency - Users can verify the encryption implementation",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(ve,{sx:{py:.5},children:[e.jsx(we,{sx:{minWidth:32},children:e.jsx(ii,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(_e,{primary:"Security Audits - Researchers can review and improve the code",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(ve,{sx:{py:.5},children:[e.jsx(we,{sx:{minWidth:32},children:e.jsx(Vr,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(_e,{primary:"Trust Building - No hidden backdoors or vulnerabilities",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(ve,{sx:{py:.5},children:[e.jsx(we,{sx:{minWidth:32},children:e.jsx(oi,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(_e,{primary:"Community Contributions - Security improvements from the community",primaryTypographyProps:{variant:"body2"}})]})]})]}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Technical Implementation"}),e.jsxs(h,{sx:{bgcolor:"background.paper",p:2,borderRadius:1,border:`1px solid ${b(r.palette.divider,.2)}`},children:[e.jsx(l,{variant:"body2",component:"pre",sx:{fontFamily:"monospace",fontSize:"0.875rem",mb:2},children:`// Core Encryption Library
class GlacierEncryption {
  constructor() {
    this.algorithm = 'AES-GCM';
    this.keyLength = 256;
    this.pbkdf2Iterations = 100000;
  }
  
  async encryptFile(fileData, password) {
    const salt = this.generateSalt();
    const iv = this.generateIV();
    const key = await this.deriveKey(password, salt);
    
    return await crypto.subtle.encrypt({
      name: this.algorithm,
      iv: iv
    }, key, fileData);
  }
}`}),e.jsx(z,{variant:"outlined",startIcon:e.jsx(Mr,{}),href:"https://github.com/your-org/datahibernate-encryption",target:"_blank",sx:{mt:1},children:"View Source Code"})]})]})]}),e.jsx(xe,{severity:"info",sx:{mt:3},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Coming Soon:"})," The complete E2E encryption source code will be available on GitHub for public review and contribution. This includes the core encryption library, key derivation functions, and all security-related components."]})})]}),e.jsxs(ne,{sx:{mt:4,p:2.5,bgcolor:"background.paper",border:`1px solid ${b(r.palette.divider,.1)}`,textAlign:"center"},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Ready to Secure Your Data?"}),e.jsx(l,{variant:"body1",sx:{mb:3,color:"text.secondary"},children:"Join thousands of users who trust Data Hibernate for their most sensitive data"}),e.jsxs(Z,{direction:"row",spacing:2,justifyContent:"center",children:[e.jsx(z,{variant:"contained",size:"large",startIcon:e.jsx(Oe,{}),children:"Start Uploading"}),e.jsx(z,{variant:"outlined",size:"large",startIcon:e.jsx(Mr,{}),children:"View on GitHub"})]})]})]})},za=()=>{var pt;const r=Kt(),t=en(r.breakpoints.down("md")),[s,n]=u.useState("overview"),[i,o]=u.useState(null),[a,d]=u.useState(null),[c,p]=u.useState(!0),[m,w]=u.useState(null),[f,D]=u.useState(""),[E,_]=u.useState(!1),[I,T]=u.useState(!1),[j,k]=u.useState(null),v=[{id:"overview",label:"Overview",icon:e.jsx(dt,{}),view:"overview"},{id:"hibernate",label:"Data Manager",icon:e.jsx(jt,{}),view:"hibernate"},{id:"plans",label:"Plans",icon:e.jsx(Oe,{}),view:"plans"},{id:"why",label:"Why Data Hibernate",icon:e.jsx(Js,{}),view:"why"}];u.useEffect(()=>{B(),Y();const H=window.location.hash.substring(1);H&&["overview","hibernate","plans","why"].includes(H)&&n(H)},[]);const B=()=>C(K,null,function*(){try{const H=yield ht.getUser();d(H.data)}catch(H){console.error("Error loading user data:",H)}finally{p(!1)}}),Y=()=>{const H=Ye.getEncryptionStatus();_(H.enabled),k(H)},se=()=>{E?(Ye.disableEncryption(),_(!1),k(null)):T(!0)},pe=H=>{Y(),T(!1)},ue=()=>C(K,null,function*(){try{({}).VITE_USE_SECURE_AUTH==="true"?yield ht.secureLogout():He.clearTokens(),window.location.href="/login"}catch(H){({}).VITE_DEBUG==="true"&&console.error("Error during logout:",H),window.location.href="/login"}}),be=H=>{w(H.currentTarget)},Ce=()=>{w(null)},ie=(H,Fe)=>C(K,null,function*(){Fe==="view"&&o(H)}),Ge=H=>{},je=()=>{switch(s){case"overview":return e.jsx(Gs,{});case"hibernate":return e.jsx(Fa,{onFileSelect:ie,onFolderSelect:Ge,globalSearchQuery:f});case"plans":return e.jsx(kn,{});case"why":return e.jsx(In,{});default:return e.jsx(Gs,{})}},W=(H,Fe)=>{n(Fe)};return c?e.jsx(h,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(De,{sx:{width:"100%",maxWidth:400}})}):e.jsxs(h,{sx:{display:"flex",flexDirection:"column",height:"100vh",bgcolor:"grey.50"},children:[e.jsx(ci,{position:"static",elevation:1,sx:{bgcolor:"white",color:"text.primary"},children:e.jsxs(di,{sx:{minHeight:{xs:56,sm:64},px:{xs:1,sm:2},flexWrap:{xs:"wrap",sm:"nowrap"}},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",mr:{xs:2,sm:4},minWidth:{xs:"auto",sm:"auto"}},children:[e.jsx(h,{component:"img",src:"/icon.png",alt:"DataHibernate Logo",sx:{width:{xs:28,sm:32},height:{xs:28,sm:32},mr:{xs:1,sm:1.5},borderRadius:1}}),e.jsx(l,{variant:"h6",component:"div",sx:{fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.25rem"},display:{xs:"none",sm:"block"}},children:"Data Hibernate"})]}),e.jsx(ss,{value:s,onChange:W,sx:{flexGrow:1,"& .MuiTab-root":{minHeight:{xs:40,sm:48},fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},textTransform:"none",fontWeight:600},"& .MuiTabs-indicator":{height:{xs:2,sm:3}}},variant:t?"scrollable":"standard",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:v.map(H=>e.jsx(Ht,{value:H.view,label:H.label,icon:H.icon,iconPosition:"start",sx:{minHeight:{xs:40,sm:48},fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},"& .MuiSvgIcon-root":{fontSize:{xs:"1rem",sm:"1.25rem"}}}},H.id))}),e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:{xs:.5,sm:1},ml:{xs:1,sm:2}},children:[e.jsx(Be,{color:"inherit",onClick:se,title:E?"Disable E2E Encryption":"Enable E2E Encryption",size:"small",sx:{color:E?"success.main":"text.secondary","&:hover":{bgcolor:E?"success.light":"action.hover"},p:{xs:.5,sm:1}},children:E?e.jsx(bt,{}):e.jsx(ns,{})}),e.jsx(Be,{color:"inherit",size:"small",sx:{p:{xs:.5,sm:1}},children:e.jsx(ui,{badgeContent:0,color:"error",children:e.jsx(hi,{})})}),e.jsx(Be,{color:"inherit",onClick:be,size:"small",sx:{p:{xs:.5,sm:1}},children:e.jsx(pi,{sx:{width:{xs:28,sm:32},height:{xs:28,sm:32},bgcolor:"primary.main",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:((pt=a==null?void 0:a.username)==null?void 0:pt.charAt(0))||"U"})})]})]})}),e.jsx(h,{sx:{flexGrow:1,overflow:"auto",bgcolor:"grey.50"},children:je()}),m&&e.jsxs(xi,{anchorEl:m,open:!!m,onClose:Ce,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(Rs,{onClick:Ce,children:[e.jsx(Xs,{sx:{mr:1}}),"Settings"]}),e.jsxs(Rs,{onClick:ue,children:[e.jsx(gi,{sx:{mr:1}}),"Logout"]})]}),i&&e.jsx(Wa,{file:i,open:!!i,onClose:()=>o(null)}),e.jsx(Ua,{open:I,onClose:()=>T(!1),onPasswordSet:pe})]})},La=()=>{const[r]=pn(),t=vt(),[s,n]=u.useState("verifying"),[i,o]=u.useState(""),[a,d]=u.useState(""),[c,p]=u.useState(!1),m=r.get("token");u.useEffect(()=>{m?w(m):(n("error"),o("No verification token provided"))},[m]);const w=_=>C(K,null,function*(){var I,T;try{const j=yield ht.verifyEmail({token:_});n("success"),o(j.data.message)}catch(j){const k=((T=(I=j.response)==null?void 0:I.data)==null?void 0:T.error)||"Verification failed";k.includes("expired")?(n("expired"),o("Your verification link has expired. Please request a new verification email.")):(n("error"),o(k))}}),f=()=>C(K,null,function*(){var _,I;if(!a){o("Please enter your email address");return}p(!0);try{yield ht.resendVerification({email:a}),o("Verification email sent! Please check your inbox.")}catch(T){o(((I=(_=T.response)==null?void 0:_.data)==null?void 0:I.error)||"Failed to resend verification email")}finally{p(!1)}}),D=()=>{switch(s){case"success":return e.jsx(Ue,{color:"success",sx:{fontSize:60}});case"error":case"expired":return e.jsx(fi,{color:"error",sx:{fontSize:60}});default:return e.jsx(Vt,{size:60})}},E=()=>{switch(s){case"success":return"success";case"error":case"expired":return"error";default:return"info"}};return e.jsx(Pe,{sx:{maxWidth:500,mx:"auto",mt:8},children:e.jsxs(Ie,{children:[e.jsx(h,{sx:{textAlign:"center",mb:3},children:D()}),e.jsx(l,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Email Verification"}),i&&e.jsx(xe,{severity:E(),sx:{mb:3},children:i}),s==="success"&&e.jsx(h,{sx:{textAlign:"center"},children:e.jsx(z,{variant:"contained",onClick:()=>t("/login"),sx:{mt:2},children:"Go to Login"})}),(s==="error"||s==="expired")&&e.jsxs(h,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s==="expired"?"Your verification link has expired. Enter your email address to get a new verification email.":"Didn't receive the email? Enter your email address to resend the verification email."}),e.jsx(et,{fullWidth:!0,label:"Email Address",type:"email",value:a,onChange:_=>d(_.target.value),sx:{mb:2}}),e.jsx(z,{fullWidth:!0,variant:"contained",startIcon:e.jsx(Yt,{}),onClick:f,disabled:c,children:c?"Sending...":"Resend Verification Email"}),e.jsx(z,{fullWidth:!0,variant:"outlined",onClick:()=>t("/login"),sx:{mt:1},children:"Back to Login"})]}),s==="verifying"&&e.jsx(l,{variant:"body2",color:"text.secondary",align:"center",children:"Verifying your email address..."})]})})},$a=()=>{const[r,t]=u.useState(!1);u.useEffect(()=>{const i=()=>{const a=Ye.getEncryptionStatus();t(a.enabled)};i();const o=setInterval(i,1e3);return()=>clearInterval(o)},[]);const s=i=>{const o=i.filter(d=>d.success),a=i.filter(d=>!d.success);alert(`Upload completed! ${o.length} files uploaded successfully, ${a.length} failed.`)},n=(i,o)=>{};return e.jsx("div",{className:"min-h-screen bg-gray-100 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Data Hibernate Platform"}),e.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"Upload your files directly to S3"}),e.jsx(h,{sx:{display:"flex",justifyContent:"center",mb:2},children:r?e.jsx(ae,{icon:e.jsx(bt,{}),label:"E2E Encryption Enabled",color:"success",variant:"outlined",sx:{fontWeight:600}}):e.jsx(ae,{icon:e.jsx(ns,{}),label:"E2E Encryption Disabled",color:"default",variant:"outlined",sx:{fontWeight:600}})}),!r&&e.jsx(xe,{severity:"info",sx:{maxWidth:600,mx:"auto",mb:4},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:" E2E Encryption Disabled"}),e.jsx("br",{}),"Files will be uploaded without encryption. Enable E2E encryption from the dashboard for maximum security."]})})]}),e.jsx(Pn,{onUploadComplete:s,onUploadProgress:n})]})})},Oa=()=>{const r=Kt();en(r.breakpoints.down("md"));const t=[{icon:e.jsx(jt,{sx:{fontSize:40,color:"#4f46e5"}}),title:"Deep Hibernate",subtitle:" Long-term archival storage",features:["Stored safely in AWS Glacier Deep Archive","Ultra-low cost for long-term data","Restore in ~12 hours","10 GB free retrieval every 6 months"],pricing:[{storage:"100 GB",price:"599/year"},{storage:"1 TB",price:"2,999/year"}],description:"Perfect for memories, backups, and data you rarely need",color:"#1976d2",gradient:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",lightColor:"#e3f2fd",darkColor:"#1565c0",bgColor:"#f8fafc",textColor:"#1e293b"},{icon:e.jsx(Cr,{sx:{fontSize:40,color:"#2563eb"}}),title:"Smart Hibernate",subtitle:" Flexible retrieval storage",features:["Stored on AWS Glacier Flexible Retrieval","Retrieve anytime within hours","Includes 10 GB free per month","Extra retrieval at 2/GB"],pricing:[{storage:"100 GB",price:"1,079/year"},{storage:"1 TB",price:"4,799/year"}],description:"Balance between cost and accessibility for regular backups",color:"#1976d2",gradient:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",lightColor:"#e3f2fd",darkColor:"#1565c0",bgColor:"#f8fafc",textColor:"#1e293b"}],s=[{icon:e.jsx(Vr,{}),text:"Built on AWS  Trusted globally"},{icon:e.jsx(yi,{}),text:"Up to 80% cheaper than big tech storage"},{icon:e.jsx(bi,{}),text:"No confusing tech  just simple plans"},{icon:e.jsx(ji,{}),text:"Made for India  affordable, reliable, transparent"},{icon:e.jsx(vi,{}),text:"You pay once. We take care of the rest."}];return e.jsxs(h,{sx:{minHeight:"100vh",bgcolor:"grey.50"},children:[e.jsx(ne,{elevation:0,sx:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",py:{xs:8,md:12},borderRadius:0,position:"relative",overflow:"hidden"},children:e.jsx(nt,{maxWidth:"lg",children:e.jsxs(F,{container:!0,spacing:4,alignItems:"center",children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsxs(h,{sx:{textAlign:{xs:"center",md:"left"}},children:[e.jsx(ae,{icon:e.jsx(Oe,{}),label:" DataHibernate",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",mb:3,fontSize:"1.1rem",fontWeight:600,borderRadius:3}}),e.jsx(l,{variant:"h1",sx:{fontSize:{xs:"2.5rem",md:"3.5rem"},fontWeight:800,lineHeight:1.2,mb:3},children:"Upload. Forget. Sleep Easy."}),e.jsx(l,{variant:"h5",sx:{fontSize:{xs:"1.2rem",md:"1.5rem"},fontWeight:300,mb:4,opacity:.9},children:"Your memories deserve rest, too."}),e.jsx(l,{variant:"body1",sx:{fontSize:"1.1rem",mb:4,opacity:.8,lineHeight:1.6},children:"A secure, long-term cloud vault built for people who don't want to think about storage ever again. Whether it's old photos, work archives, or personal backups  just upload once and let it sleep in peace."}),e.jsxs(Z,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(z,{variant:"contained",size:"large",endIcon:e.jsx(Ts,{}),sx:{bgcolor:"white",color:"#1976d2",px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.2)","&:hover":{bgcolor:"rgba(255,255,255,0.9)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.3)"}},onClick:()=>window.location.href="/login",children:"Get Started"}),e.jsx(z,{variant:"outlined",size:"large",sx:{borderColor:"white",color:"white",px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:3,"&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},onClick:()=>window.location.href="/why",children:"Why Choose Us?"})]})]})}),e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(h,{sx:{textAlign:"center"},children:e.jsx(h,{component:"img",src:"/icon.png",alt:"DataHibernate Logo",sx:{width:{xs:200,md:300},height:"auto",filter:"drop-shadow(0 10px 20px rgba(0,0,0,0.3))"}})})})]})})}),e.jsxs(nt,{maxWidth:"lg",sx:{py:8},children:[e.jsxs(h,{sx:{textAlign:"center",mb:6},children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Choose Your Hibernation Plan"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",maxWidth:700,mx:"auto",lineHeight:1.6},children:"Select the perfect storage solution for your data needs. Each plan offers different balance between cost, storage capacity, and retrieval speed."})]}),e.jsx(F,{container:!0,spacing:4,children:t.map((n,i)=>e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(Pe,{sx:{height:"100%",position:"relative",border:`2px solid ${b(n.color,.15)}`,borderRadius:4,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)","&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:`0 20px 60px ${b(n.color,.25)}`,borderColor:n.color}},children:e.jsx(Ie,{sx:{p:4},children:e.jsxs(Z,{spacing:4,children:[e.jsxs(h,{sx:{textAlign:"center"},children:[e.jsx(h,{sx:{p:3,borderRadius:"50%",bgcolor:n.lightColor,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${n.color}`,mx:"auto",width:80,height:80,mb:3},children:cr.cloneElement(n.icon,{sx:{fontSize:40,color:n.color}})}),e.jsx(l,{variant:"h4",sx:{fontWeight:800,mb:2,color:n.textColor},children:n.title}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",lineHeight:1.5},children:n.description})]}),e.jsx(ct,{dense:!0,children:n.features.map((o,a)=>e.jsxs(ve,{sx:{px:0},children:[e.jsx(we,{sx:{minWidth:36},children:e.jsx(Ue,{sx:{color:n.color,fontSize:20}})}),e.jsx(_e,{primary:o,primaryTypographyProps:{fontSize:"0.9rem"}})]},a))}),e.jsx(h,{sx:{textAlign:"center",p:3,bgcolor:n.lightColor,borderRadius:3,border:`1px solid ${b(n.color,.2)}`},children:n.pricing.map((o,a)=>e.jsxs(h,{sx:{mb:a===0?2:0},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:800,mb:1,color:n.textColor},children:o.price}),e.jsxs(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:[o.storage," Storage"]})]},a))}),e.jsx(z,{fullWidth:!0,variant:"contained",sx:{bgcolor:n.color,borderRadius:3,py:3,fontSize:"1.1rem",fontWeight:700,textTransform:"none",boxShadow:`0 4px 16px ${b(n.color,.2)}`,transition:"all 0.3s ease","&:hover":{bgcolor:n.darkColor,transform:"translateY(-2px)",boxShadow:`0 8px 24px ${b(n.color,.3)}`}},children:"Choose Plan"})]})})})},i))})]}),e.jsx(ne,{elevation:0,sx:{bgcolor:"#f8fafc",py:8,borderRadius:0},children:e.jsxs(nt,{maxWidth:"lg",children:[e.jsx(h,{sx:{textAlign:"center",mb:6},children:e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Why Choose DataHibernate?"})}),e.jsx(F,{container:!0,spacing:4,children:s.map((n,i)=>e.jsx(F,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(ne,{sx:{p:4,textAlign:"center",height:"100%",borderRadius:3,transition:"all 0.3s ease",border:"1px solid rgba(0,0,0,0.05)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 32px rgba(0,0,0,0.15)"}},children:[e.jsx(h,{sx:{color:"#1976d2",mb:3},children:cr.cloneElement(n.icon,{sx:{fontSize:48}})}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#1e293b"},children:n.text})]})},i))})]})}),e.jsx(nt,{maxWidth:"lg",sx:{py:8},children:e.jsxs(F,{container:!0,spacing:6,alignItems:"center",children:[e.jsx(F,{item:!0,xs:12,md:6,children:e.jsx(h,{component:"img",src:"/icon.png",alt:"DataHibernate",sx:{width:"100%",maxWidth:400,height:"auto",mx:"auto",display:"block",filter:"drop-shadow(0 8px 16px rgba(0,0,0,0.1))"}})}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Your Data's Second Home"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",lineHeight:1.6,mb:3},children:"From family albums to startup archives  DataHibernate ensures your files are sleeping safely in the cloud, ready whenever you need them again."}),e.jsx(l,{variant:"body1",sx:{fontSize:"1.1rem",lineHeight:1.7,mb:4,color:"text.secondary"},children:"Think of it as hibernation for your data  calm, secure, and waiting patiently for your call."}),e.jsxs(Z,{direction:"row",spacing:2,flexWrap:"wrap",children:[e.jsx(ae,{icon:e.jsx(Ft,{}),label:"Secure",sx:{bgcolor:"#e0e7ff",color:"#4f46e5",fontWeight:600,borderRadius:3}}),e.jsx(ae,{icon:e.jsx(dt,{}),label:"Reliable",sx:{bgcolor:"#dbeafe",color:"#2563eb",fontWeight:600,borderRadius:3}}),e.jsx(ae,{icon:e.jsx(mi,{}),label:"Affordable",sx:{bgcolor:"#dcfce7",color:"#16a34a",fontWeight:600,borderRadius:3}}),e.jsx(ae,{icon:e.jsx(Dr,{}),label:"Fast",sx:{bgcolor:"#fef3c7",color:"#d97706",fontWeight:600,borderRadius:3}})]})]})]})}),e.jsx(ne,{elevation:0,sx:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",py:8,textAlign:"center",borderRadius:0},children:e.jsxs(nt,{maxWidth:"md",children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800},children:" Start Your Hibernate Journey Today"}),e.jsxs(l,{variant:"h6",sx:{mb:4,opacity:.9,lineHeight:1.6},children:["Choose your plan  Upload  Relax.",e.jsx("br",{}),"No hidden charges. No monthly stress.",e.jsx("br",{}),"Just pure, long-term peace."]}),e.jsx(z,{variant:"contained",size:"large",endIcon:e.jsx(Ts,{}),sx:{bgcolor:"white",color:"#1976d2",px:6,py:2,fontSize:"1.2rem",fontWeight:600,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.2)","&:hover":{bgcolor:"rgba(255,255,255,0.9)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.3)"}},onClick:()=>window.location.href="/login",children:"Get Started "})]})}),e.jsx(ne,{elevation:0,sx:{bgcolor:"#1e293b",color:"white",py:6,borderRadius:0},children:e.jsxs(nt,{maxWidth:"lg",children:[e.jsxs(F,{container:!0,spacing:4,children:[e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(h,{component:"img",src:"/icon.png",alt:"DataHibernate",sx:{width:48,height:48,mr:2}}),e.jsx(l,{variant:"h5",sx:{fontWeight:800},children:"DataHibernate"})]}),e.jsx(l,{variant:"body1",sx:{color:"#94a3b8",mb:3,lineHeight:1.6},children:"Secure, affordable cloud storage for your digital memories. Built for India, trusted globally."})]}),e.jsxs(F,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",sx:{mb:3,fontWeight:700},children:"Quick Links"}),e.jsxs(Z,{direction:"row",spacing:3,flexWrap:"wrap",children:[e.jsx(Qe,{href:"/login",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Login"}),e.jsx(Qe,{href:"/register",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Register"}),e.jsx(Qe,{href:"/why",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Why Choose Us"}),e.jsx(Qe,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Privacy Policy"}),e.jsx(Qe,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Terms of Service"}),e.jsx(Qe,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Support"}),e.jsx(Qe,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Contact"})]})]})]}),e.jsx(Gt,{sx:{my:4,borderColor:"#334155"}}),e.jsx(l,{variant:"body2",sx:{color:"#94a3b8",textAlign:"center"},children:" 2024 DataHibernate. All rights reserved. Built with  for digital peace of mind."})]})})]})},Ba=wi({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'}}),Ma=()=>{const r=tr();return u.useEffect(()=>{const t=document.title||"Data Hibernate",s=r.pathname;Dt.trackPageView(t,s)},[r]),null},Na=()=>e.jsxs(_i,{theme:Ba,children:[e.jsx(Si,{}),e.jsx(nt,{maxWidth:!1,disableGutters:!0,children:e.jsx(h,{sx:{minHeight:"100vh"},children:e.jsxs(jo,{children:[e.jsx(Ma,{}),e.jsxs(xo,{children:[e.jsx(st,{path:"/",element:e.jsx(Oa,{})}),e.jsx(st,{path:"/login",element:e.jsx(xa,{})}),e.jsx(st,{path:"/register",element:e.jsx(ga,{})}),e.jsx(st,{path:"/forgot-password",element:e.jsx(fa,{})}),e.jsx(st,{path:"/reset-password",element:e.jsx(ma,{})}),e.jsx(st,{path:"/why",element:e.jsx(In,{})}),e.jsx(st,{path:"/verify-email",element:e.jsx(La,{})}),e.jsx(st,{path:"/dashboard",element:e.jsx(Hr,{children:e.jsx(za,{})})}),e.jsx(st,{path:"/upload",element:e.jsx(Hr,{children:e.jsx($a,{})})}),e.jsx(st,{path:"/plans",element:e.jsx(Hr,{children:e.jsx(kn,{})})})]})]})})})]});"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(r=>{r.forEach(t=>{t.unregister()})});const Ha=tn(document.getElementById("root"));Ha.render(e.jsx(Na,{}));console.log("VITE_API_BASE_URL:",{}.VITE_API_BASE_URL)});export default Ga();
