var Jn=Object.defineProperty,Zn=Object.defineProperties;var Qn=Object.getOwnPropertyDescriptors;var Sr=Object.getOwnPropertySymbols;var Cs=Object.prototype.hasOwnProperty,ks=Object.prototype.propertyIsEnumerable;var Xt=Math.pow,Es=(r,t,s)=>t in r?Jn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,k=(r,t)=>{for(var s in t||(t={}))Cs.call(t,s)&&Es(r,s,t[s]);if(Sr)for(var s of Sr(t))ks.call(t,s)&&Es(r,s,t[s]);return r},ve=(r,t)=>Zn(r,Qn(t));var Ps=(r,t)=>{var s={};for(var n in r)Cs.call(r,n)&&t.indexOf(n)<0&&(s[n]=r[n]);if(r!=null&&Sr)for(var n of Sr(r))t.indexOf(n)<0&&ks.call(r,n)&&(s[n]=r[n]);return s};var ei=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var w=(r,t,s)=>new Promise((n,i)=>{var o=c=>{try{d(s.next(c))}catch(h){i(h)}},a=c=>{try{d(s.throw(c))}catch(h){i(h)}},d=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,a);d((s=s.apply(r,t)).next())});import{j as e,B as p,C as Qt,a as ct,P as ce,T as l,A as we,b as ot,c as U,L as it,d as He,I as Ve,R as er,G as A,e as Le,f as Oe,g as ge,h as rt,S as Wt,i as $e,k as _t,l as gt,u as St,m as ps,n as Jt,o as te,p as v,q as ts,D as bt,r as jt,s as vt,t as sr,v as Fr,w as tr,x as on,y as $r,F as hr,z as Nt,E as xt,H as Re,J as Ie,K as De,M as ti,N as dt,O as Zt,Q as wt,U as ri,V as si,W as pt,X as an,Y as ni,Z as Ar,_ as xs,$ as Br,a0 as Gt,a1 as rs,a2 as ii,a3 as oi,a4 as ln,a5 as Ir,a6 as ai,a7 as cn,a8 as Pt,a9 as Er,aa as Rs,ab as li,ac as Is,ad as ci,ae as di,af as ui,ag as dn,ah as hi,ai as pr,aj as Ds,ak as Cr,al as Ts,am as Wr,an as pi,ao as Xr,ap as xi,aq as gi,ar as fi,as as mi,at as Fs,au as Rt,av as yi,aw as As,ax as Ws,ay as zs,az as Us,aA as Jr,aB as bi,aC as ss,aD as ji,aE as vi,aF as wi,aG as un,aH as _i,aI as Si,aJ as hn,aK as Ei,aL as Ci,aM as ki,aN as Pi,aO as Ls,aP as Ri,aQ as Ii,aR as Os,aS as Di,aT as Ti,aU as Fi,aV as Ai,aW as Wi,aX as zi,aY as Ui,aZ as Li}from"./ui-8a7a4b5e.js";import{c as Oi,r as u,a as fr}from"./vendor-950dbbc1.js";import{a as zr}from"./utils-76a9f601.js";var cl=ei(Y=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();var pn,$s=Oi;pn=$s.createRoot,$s.hydrateRoot;/**
 * @remix-run/router v1.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mr(){return mr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},mr.apply(this,arguments)}var Tt;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Tt||(Tt={}));const Bs="popstate";function $i(r){r===void 0&&(r={});function t(n,i){let{pathname:o,search:a,hash:d}=n.location;return ns("",{pathname:o,search:a,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:Ur(i)}return Mi(t,s,null,r)}function ze(r,t){if(r===!1||r===null||typeof r=="undefined")throw new Error(t)}function gs(r,t){if(!r){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(s){}}}function Bi(){return Math.random().toString(36).substr(2,8)}function Ms(r,t){return{usr:r.state,key:r.key,idx:t}}function ns(r,t,s,n){return s===void 0&&(s=null),mr({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?nr(t):t,{state:s,key:t&&t.key||n||Bi()})}function Ur(r){let{pathname:t="/",search:s="",hash:n=""}=r;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function nr(r){let t={};if(r){let s=r.indexOf("#");s>=0&&(t.hash=r.substr(s),r=r.substr(0,s));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function Mi(r,t,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,d=Tt.Pop,c=null,h=g();h==null&&(h=0,a.replaceState(mr({},a.state,{idx:h}),""));function g(){return(a.state||{idx:null}).idx}function f(){d=Tt.Pop;let E=g(),T=E==null?null:E-h;h=E,c&&c({action:d,location:y.location,delta:T})}function x(E,T){d=Tt.Push;let b=ns(y.location,E,T);s&&s(b,E),h=g()+1;let $=Ms(b,h),_=y.createHref(b);try{a.pushState($,"",_)}catch(R){i.location.assign(_)}o&&c&&c({action:d,location:y.location,delta:1})}function C(E,T){d=Tt.Replace;let b=ns(y.location,E,T);s&&s(b,E),h=g();let $=Ms(b,h),_=y.createHref(b);a.replaceState($,"",_),o&&c&&c({action:d,location:y.location,delta:0})}function m(E){let T=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof E=="string"?E:Ur(E);return ze(T,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,T)}let y={get action(){return d},get location(){return r(i,a)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Bs,f),c=E,()=>{i.removeEventListener(Bs,f),c=null}},createHref(E){return t(i,E)},createURL:m,encodeLocation(E){let T=m(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:C,go(E){return a.go(E)}};return y}var Ns;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ns||(Ns={}));function Ni(r,t,s){s===void 0&&(s="/");let n=typeof t=="string"?nr(t):t,i=fs(n.pathname||"/",s);if(i==null)return null;let o=xn(r);Hi(o);let a=null;for(let d=0;a==null&&d<o.length;++d)a=Qi(o[d],ro(i));return a}function xn(r,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(o,a,d)=>{let c={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(ze(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let h=At([n,c.relativePath]),g=s.concat(c);o.children&&o.children.length>0&&(ze(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),xn(o.children,t,g,h)),!(o.path==null&&!o.index)&&t.push({path:h,score:Ji(h,o.index),routesMeta:g})};return r.forEach((o,a)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,a);else for(let c of gn(o.path))i(o,a,c)}),t}function gn(r){let t=r.split("/");if(t.length===0)return[];let[s,...n]=t,i=s.endsWith("?"),o=s.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=gn(n.join("/")),d=[];return d.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&d.push(...a),d.map(c=>r.startsWith("/")&&c===""?"/":c)}function Hi(r){r.sort((t,s)=>t.score!==s.score?s.score-t.score:Zi(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const Gi=/^:\w+$/,qi=3,Vi=2,Yi=1,Ki=10,Xi=-2,Hs=r=>r==="*";function Ji(r,t){let s=r.split("/"),n=s.length;return s.some(Hs)&&(n+=Xi),t&&(n+=Vi),s.filter(i=>!Hs(i)).reduce((i,o)=>i+(Gi.test(o)?qi:o===""?Yi:Ki),n)}function Zi(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function Qi(r,t){let{routesMeta:s}=r,n={},i="/",o=[];for(let a=0;a<s.length;++a){let d=s[a],c=a===s.length-1,h=i==="/"?t:t.slice(i.length)||"/",g=eo({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},h);if(!g)return null;Object.assign(n,g.params);let f=d.route;o.push({params:n,pathname:At([i,g.pathname]),pathnameBase:oo(At([i,g.pathnameBase])),route:f}),g.pathnameBase!=="/"&&(i=At([i,g.pathnameBase]))}return o}function eo(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[s,n]=to(r.path,r.caseSensitive,r.end),i=t.match(s);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:n.reduce((h,g,f)=>{if(g==="*"){let x=d[f]||"";a=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}return h[g]=so(d[f]||"",g),h},{}),pathname:o,pathnameBase:a,pattern:r}}function to(r,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),gs(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,d)=>(n.push(d),"/([^\\/]+)"));return r.endsWith("*")?(n.push("*"),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function ro(r){try{return decodeURI(r)}catch(t){return gs(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function so(r,t){try{return decodeURIComponent(r)}catch(s){return gs(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+r+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),r}}function fs(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=r.charAt(s);return n&&n!=="/"?null:r.slice(s)||"/"}function no(r,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:i=""}=typeof r=="string"?nr(r):r;return{pathname:s?s.startsWith("/")?s:io(s,t):t,search:ao(n),hash:lo(i)}}function io(r,t){let s=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Zr(r,t,s,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fn(r){return r.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function mn(r,t,s,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=nr(r):(i=mr({},r),ze(!i.pathname||!i.pathname.includes("?"),Zr("?","pathname","search",i)),ze(!i.pathname||!i.pathname.includes("#"),Zr("#","pathname","hash",i)),ze(!i.search||!i.search.includes("#"),Zr("#","search","hash",i)));let o=r===""||i.pathname==="",a=o?"/":i.pathname,d;if(n||a==null)d=s;else{let f=t.length-1;if(a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),f-=1;i.pathname=x.join("/")}d=f>=0?t[f]:"/"}let c=no(i,d),h=a&&a!=="/"&&a.endsWith("/"),g=(o||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(h||g)&&(c.pathname+="/"),c}const At=r=>r.join("/").replace(/\/\/+/g,"/"),oo=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ao=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,lo=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function co(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const yn=["post","put","patch","delete"];new Set(yn);const uo=["get",...yn];new Set(uo);/**
 * React Router v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lr(){return Lr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},Lr.apply(this,arguments)}const ms=u.createContext(null),bn=u.createContext(null),ir=u.createContext(null),Mr=u.createContext(null),or=u.createContext({outlet:null,matches:[]}),jn=u.createContext(null);function ho(r,t){let{relative:s}=t===void 0?{}:t;ar()||ze(!1);let{basename:n,navigator:i}=u.useContext(ir),{hash:o,pathname:a,search:d}=wn(r,{relative:s}),c=a;return n!=="/"&&(c=a==="/"?n:At([n,a])),i.createHref({pathname:c,search:d,hash:o})}function ar(){return u.useContext(Mr)!=null}function lr(){return ar()||ze(!1),u.useContext(Mr).location}function vn(r){u.useContext(ir).static||u.useLayoutEffect(r)}function Et(){return u.useContext(ms)!=null?Eo():po()}function po(){ar()||ze(!1);let{basename:r,navigator:t}=u.useContext(ir),{matches:s}=u.useContext(or),{pathname:n}=lr(),i=JSON.stringify(fn(s).map(d=>d.pathnameBase)),o=u.useRef(!1);return vn(()=>{o.current=!0}),u.useCallback(function(d,c){if(c===void 0&&(c={}),!o.current)return;if(typeof d=="number"){t.go(d);return}let h=mn(d,JSON.parse(i),n,c.relative==="path");r!=="/"&&(h.pathname=h.pathname==="/"?r:At([r,h.pathname])),(c.replace?t.replace:t.push)(h,c.state,c)},[r,t,i,n])}function wn(r,t){let{relative:s}=t===void 0?{}:t,{matches:n}=u.useContext(or),{pathname:i}=lr(),o=JSON.stringify(fn(n).map(a=>a.pathnameBase));return u.useMemo(()=>mn(r,JSON.parse(o),i,s==="path"),[r,o,i,s])}function xo(r,t){return go(r,t)}function go(r,t,s){ar()||ze(!1);let{navigator:n}=u.useContext(ir),{matches:i}=u.useContext(or),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let c=lr(),h;if(t){var g;let y=typeof t=="string"?nr(t):t;d==="/"||(g=y.pathname)!=null&&g.startsWith(d)||ze(!1),h=y}else h=c;let f=h.pathname||"/",x=d==="/"?f:f.slice(d.length)||"/",C=Ni(r,{pathname:x}),m=jo(C&&C.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:At([d,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:At([d,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,s);return t&&m?u.createElement(Mr.Provider,{value:{location:Lr({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Tt.Pop}},m):m}function fo(){let r=So(),t=co(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),s=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),s?u.createElement("pre",{style:i},s):null,o)}const mo=u.createElement(fo,null);class yo extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error?u.createElement(or.Provider,{value:this.props.routeContext},u.createElement(jn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bo(r){let{routeContext:t,match:s,children:n}=r,i=u.useContext(ms);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),u.createElement(or.Provider,{value:t},n)}function jo(r,t,s){var n;if(t===void 0&&(t=[]),s===void 0&&(s=null),r==null){var i;if((i=s)!=null&&i.errors)r=s.matches;else return null}let o=r,a=(n=s)==null?void 0:n.errors;if(a!=null){let d=o.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));d>=0||ze(!1),o=o.slice(0,Math.min(o.length,d+1))}return o.reduceRight((d,c,h)=>{let g=c.route.id?a==null?void 0:a[c.route.id]:null,f=null;s&&(f=c.route.errorElement||mo);let x=t.concat(o.slice(0,h+1)),C=()=>{let m;return g?m=f:c.route.element?m=c.route.element:m=d,u.createElement(bo,{match:c,routeContext:{outlet:d,matches:x},children:m})};return s&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?u.createElement(yo,{location:s.location,revalidation:s.revalidation,component:f,error:g,children:C(),routeContext:{outlet:null,matches:x}}):C()},null)}var is;(function(r){r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate"})(is||(is={}));var yr;(function(r){r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId"})(yr||(yr={}));function vo(r){let t=u.useContext(ms);return t||ze(!1),t}function wo(r){let t=u.useContext(bn);return t||ze(!1),t}function _o(r){let t=u.useContext(or);return t||ze(!1),t}function _n(r){let t=_o(),s=t.matches[t.matches.length-1];return s.route.id||ze(!1),s.route.id}function So(){var r;let t=u.useContext(jn),s=wo(yr.UseRouteError),n=_n(yr.UseRouteError);return t||((r=s.errors)==null?void 0:r[n])}function Eo(){let{router:r}=vo(is.UseNavigateStable),t=_n(yr.UseNavigateStable),s=u.useRef(!1);return vn(()=>{s.current=!0}),u.useCallback(function(i,o){o===void 0&&(o={}),s.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,Lr({fromRouteId:t},o)))},[r,t])}function Co(r){let{to:t,replace:s,state:n,relative:i}=r;ar()||ze(!1);let o=u.useContext(bn),a=Et();return u.useEffect(()=>{o&&o.navigation.state!=="idle"||a(t,{replace:s,state:n,relative:i})}),null}function lt(r){ze(!1)}function ko(r){let{basename:t="/",children:s=null,location:n,navigationType:i=Tt.Pop,navigator:o,static:a=!1}=r;ar()&&ze(!1);let d=t.replace(/^\/*/,"/"),c=u.useMemo(()=>({basename:d,navigator:o,static:a}),[d,o,a]);typeof n=="string"&&(n=nr(n));let{pathname:h="/",search:g="",hash:f="",state:x=null,key:C="default"}=n,m=u.useMemo(()=>{let y=fs(h,d);return y==null?null:{location:{pathname:y,search:g,hash:f,state:x,key:C},navigationType:i}},[d,h,g,f,x,C,i]);return m==null?null:u.createElement(ir.Provider,{value:c},u.createElement(Mr.Provider,{children:s,value:m}))}function Po(r){let{children:t,location:s}=r;return xo(os(t),s)}var Gs;(function(r){r[r.pending=0]="pending",r[r.success=1]="success",r[r.error=2]="error"})(Gs||(Gs={}));new Promise(()=>{});function os(r,t){t===void 0&&(t=[]);let s=[];return u.Children.forEach(r,(n,i)=>{if(!u.isValidElement(n))return;let o=[...t,i];if(n.type===u.Fragment){s.push.apply(s,os(n.props.children,o));return}n.type!==lt&&ze(!1),!n.props.index||!n.props.children||ze(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=os(n.props.children,o)),s.push(a)}),s}/**
 * React Router DOM v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function as(){return as=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},as.apply(this,arguments)}function Ro(r,t){if(r==null)return{};var s={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(s[i]=r[i]);return s}function Io(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Do(r,t){return r.button===0&&(!t||t==="_self")&&!Io(r)}function ls(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,s)=>{let n=r[s];return t.concat(Array.isArray(n)?n.map(i=>[s,i]):[[s,n]])},[]))}function To(r,t){let s=ls(r);if(t)for(let n of t.keys())s.has(n)||t.getAll(n).forEach(i=>{s.append(n,i)});return s}const Fo=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Ao(r){let{basename:t,children:s,window:n}=r,i=u.useRef();i.current==null&&(i.current=$i({window:n,v5Compat:!0}));let o=i.current,[a,d]=u.useState({action:o.action,location:o.location});return u.useLayoutEffect(()=>o.listen(d),[o]),u.createElement(ko,{basename:t,children:s,location:a.location,navigationType:a.action,navigator:o})}const Wo=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",zo=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,br=u.forwardRef(function(t,s){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:d,target:c,to:h,preventScrollReset:g}=t,f=Ro(t,Fo),{basename:x}=u.useContext(ir),C,m=!1;if(typeof h=="string"&&zo.test(h)&&(C=h,Wo))try{let b=new URL(window.location.href),$=h.startsWith("//")?new URL(b.protocol+h):new URL(h),_=fs($.pathname,x);$.origin===b.origin&&_!=null?h=_+$.search+$.hash:m=!0}catch(b){}let y=ho(h,{relative:i}),E=Uo(h,{replace:a,state:d,target:c,preventScrollReset:g,relative:i});function T(b){n&&n(b),b.defaultPrevented||E(b)}return u.createElement("a",as({},f,{href:C||y,onClick:m||o?n:T,ref:s,target:c}))});var qs;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmitImpl="useSubmitImpl",r.UseFetcher="useFetcher"})(qs||(qs={}));var Vs;(function(r){r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Vs||(Vs={}));function Uo(r,t){let{target:s,replace:n,state:i,preventScrollReset:o,relative:a}=t===void 0?{}:t,d=Et(),c=lr(),h=wn(r,{relative:a});return u.useCallback(g=>{if(Do(g,s)){g.preventDefault();let f=n!==void 0?n:Ur(c)===Ur(h);d(r,{replace:f,state:i,preventScrollReset:o,relative:a})}},[c,d,h,n,i,s,r,o,a])}function Sn(r){let t=u.useRef(ls(r)),s=u.useRef(!1),n=lr(),i=u.useMemo(()=>To(n.search,s.current?null:t.current),[n.search]),o=Et(),a=u.useCallback((d,c)=>{const h=ls(typeof d=="function"?d(i):d);s.current=!0,o("?"+h,c)},[o,i]);return[i,a]}const rr={baseURL:"https://datahibernate.in/api/",timeout:3e4,withCredentials:!0},kr=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent),Pr=navigator.deviceMemory&&navigator.deviceMemory<4,xr={timeout:3e5,bulkBatchSize:kr||Pr?1e3:1500,webWorkerBatchSize:kr||Pr?1e3:1500,mainBatchSize:kr||Pr?1e3:1500,maxConcurrentUploads:kr?12:Pr?16:24,minConcurrentUploads:6,maxConcurrentWorkers:4},mt={TOKEN:"token",REFRESH_TOKEN:"refreshToken",USER:"user"},tt={MAX_FILE_SIZE:5*1024*1024*1024,MAX_TOTAL_SIZE:15*1024*1024*1024,MAX_FILES:1e5,MAX_SESSION_SIZE:50*1024*1024*1024,CHUNK_SIZE:8*1024*1024,MEMORY_LIMIT:100*1024*1024},gr={UPLOAD_SUCCESS:"Files uploaded successfully",UPLOAD_FAILED:"Upload failed",ARCHIVE_SUCCESS:"File archived successfully",ARCHIVE_FAILED:"Archive failed",RESTORE_SUCCESS:"File restored successfully",RESTORE_FAILED:"Restore failed",DOWNLOAD_SUCCESS:"Download started",DOWNLOAD_FAILED:"Download failed",S3_CONFIG_REQUIRED:"S3 configuration required. Please configure S3 settings first.",FILE_TOO_LARGE:"File too large",NETWORK_ERROR:"Network error. Please check your connection.",UNAUTHORIZED:"Unauthorized access",FORBIDDEN:"Access forbidden",NOT_FOUND:"Resource not found",SERVER_ERROR:"Server error. Please try again later.",FILE_SIZE_EXCEEDED:"File size exceeds the maximum limit of 5GB",TOTAL_SIZE_EXCEEDED:"Total upload size exceeds the limit of 15GB",SESSION_SIZE_EXCEEDED:"Upload session size exceeds the limit of 50GB",STORAGE_LIMIT_EXCEEDED:"Storage limit exceeded. Please subscribe to a hibernation plan to continue.",MEMORY_LIMIT_EXCEEDED:"File processing exceeds memory limit. Please upload smaller files.",TOO_MANY_FILES:"Too many files selected. Maximum 100,000 files per upload.",INVALID_FILE_TYPE:"File type not allowed. Please check allowed file types.",UPLOAD_CANCELLED:"Upload cancelled by user",UPLOAD_TIMEOUT:"Upload timeout. Please try again with smaller files.",NETWORK_TIMEOUT:"Network timeout. Please check your connection.",PARTIAL_UPLOAD_FAILED:"Some files failed to upload. Please retry failed files.",CONCURRENT_UPLOAD_LIMIT:"Too many concurrent uploads. Please wait for current uploads to complete."},Ke={EMAIL_REGEX:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,USERNAME_MIN_LENGTH:3,USERNAME_MAX_LENGTH:30,PASSWORD_MIN_LENGTH:8,PASSWORD_MAX_LENGTH:128},ht={isValidJWT:r=>{if(!r||typeof r!="string")return!1;try{const t=r.split(".");if(t.length!==3)return!1;const s=JSON.parse(atob(t[1])),n=Date.now()/1e3;return s.exp&&s.exp<n?!1:!!(s.user_id&&s.exp)}catch(t){return!1}},getTokenPayload:r=>{if(!r)return null;try{const t=r.split(".");return t.length!==3?null:JSON.parse(atob(t[1]))}catch(t){return null}},isTokenExpired:r=>{const t=ht.getTokenPayload(r);return!t||!t.exp?!0:t.exp<Date.now()/1e3}};class Lo{constructor(){this.isProduction=!0,this.useHttpOnly=this.supportsHttpOnly(),this.csrfToken=null}supportsHttpOnly(){return!1}setCSRFToken(t){this.csrfToken=t}getCSRFToken(){return this.csrfToken}setAccessToken(t){if(!ht.isValidJWT(t))throw new Error("Invalid token format");this.useHttpOnly?console.log("Access token validated and stored in httpOnly cookie"):this.setSecureLocalStorage(mt.TOKEN,t)}setRefreshToken(t){if(!ht.isValidJWT(t))throw new Error("Invalid refresh token format");this.useHttpOnly?console.log("Refresh token validated and stored in httpOnly cookie"):this.setSecureLocalStorage(mt.REFRESH_TOKEN,t)}getAccessToken(){if(this.useHttpOnly)return"httpOnly_cookie";{const t=localStorage.getItem(mt.TOKEN);return ht.isValidJWT(t)?t:null}}getRefreshToken(){if(this.useHttpOnly)return"httpOnly_cookie";{const t=localStorage.getItem(mt.REFRESH_TOKEN);return ht.isValidJWT(t)?t:null}}clearTokens(){this.useHttpOnly?console.log("Clearing httpOnly cookies via logout endpoint"):(localStorage.removeItem(mt.TOKEN),localStorage.removeItem(mt.REFRESH_TOKEN),localStorage.removeItem(mt.USER))}isAuthenticated(){return w(this,null,function*(){if(this.useHttpOnly)try{return(yield fetch("https://datahibernate.in/api/auth/secure/user/",{method:"GET",credentials:"include",headers:this.getAuthHeaders()})).ok}catch(t){return console.error("Authentication check failed:",t),!1}else{const t=this.getAccessToken();return t&&ht.isValidJWT(t)&&!ht.isTokenExpired(t)}})}setSecureLocalStorage(t,s){try{if((t===mt.TOKEN||t===mt.REFRESH_TOKEN)&&!ht.isValidJWT(s))throw new Error("Invalid token format");if(localStorage.setItem(t,s),localStorage.getItem(t)!==s)throw new Error("Failed to store token securely")}catch(n){throw console.error("Failed to store token:",n),n}}getTokenPayload(){if(this.useHttpOnly)return null;{const t=this.getAccessToken();return t?ht.getTokenPayload(t):null}}isTokenExpired(){if(this.useHttpOnly)return!1;{const t=this.getAccessToken();return t?ht.isTokenExpired(t):!0}}getAuthHeaders(){const t={};if(this.useHttpOnly)this.csrfToken&&(t["X-CSRFToken"]=this.csrfToken);else{const s=this.getAccessToken();s&&(t.Authorization=`Bearer ${s}`)}return t}}const Je=new Lo,Qr=({children:r})=>{const[t,s]=u.useState(!0),[n,i]=u.useState(!1);return u.useEffect(()=>{(()=>w(Y,null,function*(){try{const a=yield Je.isAuthenticated();i(a),a||Je.clearTokens()}catch(a){console.error("Authentication check failed:",a),i(!1),Je.clearTokens()}finally{s(!1)}}))()},[]),t?e.jsx(p,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",sx:{bgcolor:"background.default"},children:e.jsx(Qt,{})}):n?r:e.jsx(Co,{to:"/login",replace:!0})},B=zr.create(rr);B.interceptors.request.use(r=>{const t=Je.getAuthHeaders();return Object.assign(r.headers,t),r},r=>Promise.reject(r));B.interceptors.response.use(r=>r,r=>w(Y,null,function*(){var s,n;const t=r.config;if(((s=r.response)==null?void 0:s.status)===401&&!t._retry){t._retry=!0;try{const i=Je.getRefreshToken();if(i){const o=yield zr.post(`${rr.baseURL}auth/refresh/`,{refresh:i}),{access:a}=o.data;return Je.setAccessToken(a),t.headers.Authorization=`Bearer ${a}`,B(t)}}catch(i){return Je.clearTokens(),window.location.href="/login",Promise.reject(i)}}if(((n=r.response)==null?void 0:n.status)===402){const i=r.response.data;if(i.plan_required){if(i.free_tier_used&&i.free_tier_limit){const o=(i.free_tier_used/1073741824).toFixed(1),a=(i.free_tier_limit/Xt(1024,3)).toFixed(0);alert(`Free tier limit exceeded!

You have used ${o}GB of your ${a}GB free allowance.

Please subscribe to a hibernation plan to continue uploading files.`)}else window.location.href="/plans";return Promise.reject(r)}else if(i.plan_expired)return alert(`Your hibernation plan has expired. Please renew your subscription.
Expired on: ${new Date(i.expires_at).toLocaleDateString()}`),window.location.href="/plans",Promise.reject(r)}return Promise.reject(r)}));const zt={secureLogin:r=>B.post("auth/secure/login/",r),secureRefresh:()=>B.post("auth/secure/refresh/"),secureLogout:()=>B.post("auth/secure/logout/"),secureGetUser:()=>B.get("auth/secure/user/"),secureRegister:r=>B.post("auth/secure/register/",r),login:r=>B.post("auth/login/",r),register:r=>B.post("auth/register/",r),refresh:()=>B.post("auth/refresh/"),getUser:()=>B.get("auth/user/"),verifyEmail:r=>B.post("auth/verify-email/",r),resendVerification:r=>B.post("auth/resend-verification/",r),requestPasswordReset:r=>B.post("auth/request-password-reset/",r),resetPassword:r=>B.post("auth/reset-password/",r)},Pe={getFiles:(r={})=>{const t=new URLSearchParams;return r.folder!==void 0&&t.set("folder",r.folder),r.search&&t.set("search",r.search),r.paginate===!1&&t.set("paginate","false"),r.cacheBust&&t.set("_t",r.cacheBust),B.get("media-files/list_optimized/",{params:Object.fromEntries(t)})},archiveFile:r=>B.post(`media-files/${r}/archive/`),restoreFile:(r,t="Standard")=>B.post(`media-files/${r}/restore/`,{restore_tier:t}),downloadFile:r=>B.get(`media-files/${r}/download/`),bulkDownloadFiles:r=>B.post("media-files/bulk_download/",{file_ids:r}),deleteFile:r=>B.delete(`media-files/${r}/`),bulkArchiveFiles:r=>B.post("media-files/bulk_archive/",{file_ids:r}),bulkRestoreFiles:(r,t="Standard")=>B.post("media-files/bulk_restore/",{file_ids:r,restore_tier:t}),bulkDeleteFiles:r=>{const t=zr.create(ve(k({},rr),{timeout:3e5}));return t.interceptors.request.use(s=>{const n=Je.getAuthHeaders();return Object.assign(s.headers,n),s},s=>Promise.reject(s)),t.post("media-files/bulk_delete/",{file_ids:r})},deleteAllFiles:(r=!0)=>B.post("media-files/delete_all/",{confirm_delete_all:r}),getRestoreTiers:()=>B.get("media-files/restore_tiers/"),getSmartTierSuggestion:(r,t)=>B.post("media-files/get_smart_tier_suggestion/",{file_size:r,file_type:t}),getStorageCosts:()=>B.get("media-files/get_storage_costs/"),getStorageCostsINR:()=>B.get("media-files/get_storage_costs_inr/"),autoHibernateFiles:r=>B.post("media-files/auto_hibernate_files/",r),createFolder:(r,t="")=>B.post("create-folder/",{folder_name:r,parent_path:t}),getPresignedUrls:r=>{const t=zr.create(ve(k({},rr),{timeout:6e4}));return t.interceptors.request.use(s=>{const n=Je.getAuthHeaders();return Object.assign(s.headers,n),s},s=>Promise.reject(s)),t.post("media-files/get_presigned_urls/",r)},markUploadComplete:r=>B.post("media-files/mark_upload_complete/",{file_ids:r}),getFolderStructure:(r=!1)=>{const t=r?{_t:Date.now()}:{};return B.get("media-files/folder_structure/",{params:t})}},Oo={getJobs:()=>B.get("archive-jobs/"),getJobStats:()=>B.get("archive-jobs/stats/")},$o={getConfig:()=>B.get("s3-config/"),saveConfig:r=>B.post("s3-config/",r)},Ut={getPlans:()=>B.get("hibernation-plans/"),getPlansGroupedByTier:()=>B.get("hibernation-plans/grouped_by_tier/"),getCurrentPlan:()=>B.get("user-hibernation-plans/current_plan/"),getStorageUsage:()=>B.get("user-hibernation-plans/storage_usage/"),subscribe:r=>B.post("user-hibernation-plans/subscribe/",{plan_id:r}),cancelSubscription:()=>B.post("user-hibernation-plans/cancel_subscription/"),getUsageStats:()=>B.get("user-hibernation-plans/usage_stats/")},Dr={createOrder:(r,t)=>B.post("/payments/create_order/",{plan_id:r,amount_inr:t,currency:"INR"}),verifyPayment:(r,t,s,n)=>B.post("/payments/verify_payment/",{payment_id:r,razorpay_order_id:t,razorpay_payment_id:s,razorpay_signature:n}),getPaymentStatus:r=>B.get(`/payments/status/?payment_id=${r}`),getAll:()=>B.get("/payments/"),getStats:()=>B.get("/payments/stats/")},En={getPresignedUrl:r=>B.post("uppy/presigned-url/",r),markUploadComplete:r=>B.post("uppy/upload-complete/",r),createSession:r=>B.post("uppy/create-session/",r),getProgress:r=>B.get(`uppy/upload-progress/?sessionId=${r}`),listFiles:()=>B.get("uppy/files/")},Cn=Object.freeze(Object.defineProperty({__proto__:null,authAPI:zt,default:B,hibernationAPI:Ut,jobAPI:Oo,mediaAPI:Pe,paymentAPI:Dr,s3ConfigAPI:$o,uppyAPI:En},Symbol.toStringTag,{value:"Module"}));class Bo{constructor(){this.measurementId="G-EH6V4R00H3",this.isInitialized=!1,this.init()}init(){typeof window!="undefined"&&window.gtag?(this.isInitialized=!0,console.log("Google Analytics initialized")):console.warn("Google Analytics not loaded")}trackPageView(t,s){this.isInitialized&&window.gtag("config",this.measurementId,{page_title:t,page_location:window.location.href,page_path:s})}trackRegistration(t="email"){this.isInitialized&&window.gtag("event","sign_up",{method:t,event_category:"engagement",event_label:"user_registration"})}trackLogin(t="email"){this.isInitialized&&window.gtag("event","login",{method:t,event_category:"engagement",event_label:"user_login"})}trackFileUpload(t,s,n="web"){this.isInitialized&&window.gtag("event","file_upload",{event_category:"file_management",event_label:"upload",value:t,custom_parameters:{file_count:t,total_size_mb:Math.round(s/(1024*1024)),upload_method:n}})}trackFileDownload(t,s){this.isInitialized&&window.gtag("event","file_download",{event_category:"file_management",event_label:"download",value:t,custom_parameters:{file_count:t,total_size_mb:Math.round(s/(1024*1024))}})}trackFileDeletion(t,s){this.isInitialized&&window.gtag("event","file_deletion",{event_category:"file_management",event_label:"delete",value:t,custom_parameters:{file_count:t,total_size_mb:Math.round(s/(1024*1024))}})}trackPlanSubscription(t,s,n){this.isInitialized&&window.gtag("event","purchase",{event_category:"ecommerce",event_label:"plan_subscription",value:s,currency:"INR",custom_parameters:{plan_name:t,plan_price:s,plan_storage_gb:n}})}trackPayment(t,s,n="INR"){this.isInitialized&&window.gtag("event","purchase",{event_category:"ecommerce",event_label:"payment",value:s,currency:n,custom_parameters:{payment_method:t,amount:s}})}trackSearch(t,s){this.isInitialized&&window.gtag("event","search",{event_category:"engagement",event_label:"file_search",search_term:t,custom_parameters:{result_count:s}})}trackError(t,s,n){this.isInitialized&&window.gtag("event","exception",{event_category:"error",event_label:t,description:s,custom_parameters:{error_location:n,error_type:t}})}trackCustomEvent(t,s,n,i=null,o={}){if(!this.isInitialized)return;const a=k({event_category:s,event_label:n},o);i!==null&&(a.value=i),window.gtag("event",t,a)}trackEngagementTime(t,s){this.isInitialized&&window.gtag("event","engagement_time",{event_category:"engagement",event_label:s,value:t,custom_parameters:{time_spent_seconds:t,page_name:s}})}trackFeatureUsage(t,s="used"){this.isInitialized&&window.gtag("event","feature_usage",{event_category:"engagement",event_label:t,custom_parameters:{feature_name:t,action:s}})}}const qt=new Bo,Mo=Object.prototype.toString;function No(r,t){return Mo.call(r)===`[object ${t}]`}function kn(r){return No(r,"Object")}function ys(r){return!!(r&&r.then&&typeof r.then=="function")}function Rr(r){return r&&r.Math==Math?r:void 0}const ut=typeof globalThis=="object"&&Rr(globalThis)||typeof window=="object"&&Rr(window)||typeof self=="object"&&Rr(self)||typeof global=="object"&&Rr(global)||function(){return this}()||{};function Pn(r,t,s){const n=s||ut,i=n.__SENTRY__=n.__SENTRY__||{};return i[r]||(i[r]=t())}const Ho=typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__,Go="Sentry Logger ",Ys=["debug","info","warn","error","log","assert","trace"],Ks={};function Rn(r){if(!("console"in ut))return r();const t=ut.console,s={},n=Object.keys(Ks);n.forEach(i=>{const o=Ks[i];s[i]=t[i],t[i]=o});try{return r()}finally{n.forEach(i=>{t[i]=s[i]})}}function qo(){let r=!1;const t={enable:()=>{r=!0},disable:()=>{r=!1},isEnabled:()=>r};return Ho?Ys.forEach(s=>{t[s]=(...n)=>{r&&Rn(()=>{ut.console[s](`${Go}[${s}]:`,...n)})}}):Ys.forEach(s=>{t[s]=()=>{}}),t}const Ft=qo();function Mt(r){return cs(r,new Map)}function cs(r,t){if(Vo(r)){const s=t.get(r);if(s!==void 0)return s;const n={};t.set(r,n);for(const i of Object.keys(r))typeof r[i]!="undefined"&&(n[i]=cs(r[i],t));return n}if(Array.isArray(r)){const s=t.get(r);if(s!==void 0)return s;const n=[];return t.set(r,n),r.forEach(i=>{n.push(cs(i,t))}),n}return r}function Vo(r){if(!kn(r))return!1;try{const t=Object.getPrototypeOf(r).constructor.name;return!t||t==="Object"}catch(t){return!0}}function ft(){const r=ut,t=r.crypto||r.msCrypto;let s=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(s=()=>{const n=new Uint8Array(1);return t.getRandomValues(n),n[0]})}catch(n){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,n=>(n^(s()&15)>>n/4).toString(16))}function Yo(r){return Array.isArray(r)?r:[r]}var yt;(function(r){r[r.PENDING=0]="PENDING";const s=1;r[r.RESOLVED=s]="RESOLVED";const n=2;r[r.REJECTED=n]="REJECTED"})(yt||(yt={}));class Dt{constructor(t){Dt.prototype.__init.call(this),Dt.prototype.__init2.call(this),Dt.prototype.__init3.call(this),Dt.prototype.__init4.call(this),this._state=yt.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(s){this._reject(s)}}then(t,s){return new Dt((n,i)=>{this._handlers.push([!1,o=>{if(!t)n(o);else try{n(t(o))}catch(a){i(a)}},o=>{if(!s)i(o);else try{n(s(o))}catch(a){i(a)}}]),this._executeHandlers()})}catch(t){return this.then(s=>s,t)}finally(t){return new Dt((s,n)=>{let i,o;return this.then(a=>{o=!1,i=a,t&&t()},a=>{o=!0,i=a,t&&t()}).then(()=>{if(o){n(i);return}s(i)})})}__init(){this._resolve=t=>{this._setResult(yt.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(yt.REJECTED,t)}}__init3(){this._setResult=(t,s)=>{if(this._state===yt.PENDING){if(ys(s)){s.then(this._resolve,this._reject);return}this._state=t,this._value=s,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===yt.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(s=>{s[0]||(this._state===yt.RESOLVED&&s[1](this._value),this._state===yt.REJECTED&&s[2](this._value),s[0]=!0)})}}}const In=1e3;function bs(){return Date.now()/In}function Ko(){const{performance:r}=ut;if(!r||!r.now)return bs;const t=Date.now()-r.now(),s=r.timeOrigin==null?t:r.timeOrigin;return()=>(s+r.now())/In}const Dn=Ko();(()=>{const{performance:r}=ut;if(!r||!r.now)return;const t=3600*1e3,s=r.now(),n=Date.now(),i=r.timeOrigin?Math.abs(r.timeOrigin+s-n):t,o=i<t,a=r.timing&&r.timing.navigationStart,c=typeof a=="number"?Math.abs(a+s-n):t,h=c<t;return o||h?i<=c?r.timeOrigin:a:n})();const Tr=typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__,Tn="production";function Xo(){return Pn("globalEventProcessors",()=>[])}function ds(r,t,s,n=0){return new Dt((i,o)=>{const a=r[n];if(t===null||typeof a!="function")i(t);else{const d=a(k({},t),s);Tr&&a.id&&d===null&&Ft.log(`Event processor "${a.id}" dropped event`),ys(d)?d.then(c=>ds(r,c,s,n+1).then(i)).then(null,o):ds(r,d,s,n+1).then(i).then(null,o)}})}function Jo(r){const t=Dn(),s={sid:ft(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Qo(s)};return r&&Nr(s,r),s}function Nr(r,t={}){if(t.user&&(!r.ipAddress&&t.user.ip_address&&(r.ipAddress=t.user.ip_address),!r.did&&!t.did&&(r.did=t.user.id||t.user.email||t.user.username)),r.timestamp=t.timestamp||Dn(),t.abnormal_mechanism&&(r.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(r.ignoreDuration=t.ignoreDuration),t.sid&&(r.sid=t.sid.length===32?t.sid:ft()),t.init!==void 0&&(r.init=t.init),!r.did&&t.did&&(r.did=`${t.did}`),typeof t.started=="number"&&(r.started=t.started),r.ignoreDuration)r.duration=void 0;else if(typeof t.duration=="number")r.duration=t.duration;else{const s=r.timestamp-r.started;r.duration=s>=0?s:0}t.release&&(r.release=t.release),t.environment&&(r.environment=t.environment),!r.ipAddress&&t.ipAddress&&(r.ipAddress=t.ipAddress),!r.userAgent&&t.userAgent&&(r.userAgent=t.userAgent),typeof t.errors=="number"&&(r.errors=t.errors),t.status&&(r.status=t.status)}function Zo(r,t){let s={};t?s={status:t}:r.status==="ok"&&(s={status:"exited"}),Nr(r,s)}function Qo(r){return Mt({sid:`${r.sid}`,init:r.init,started:new Date(r.started*1e3).toISOString(),timestamp:new Date(r.timestamp*1e3).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}const ea=1;function ta(r){const{spanId:t,traceId:s}=r.spanContext(),{data:n,op:i,parent_span_id:o,status:a,tags:d,origin:c}=Or(r);return Mt({data:n,op:i,parent_span_id:o,span_id:t,status:a,tags:d,trace_id:s,origin:c})}function Or(r){return ra(r)?r.getSpanJSON():typeof r.toJSON=="function"?r.toJSON():{}}function ra(r){return typeof r.getSpanJSON=="function"}function sa(r){const{traceFlags:t}=r.spanContext();return!!(t&ea)}function na(r){if(r)return ia(r)?{captureContext:r}:aa(r)?{captureContext:r}:r}function ia(r){return r instanceof Ht||typeof r=="function"}const oa=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function aa(r){return Object.keys(r).some(t=>oa.includes(t))}function la(r,t){return cr().captureException(r,na(t))}function ca(r,t){cr().addBreadcrumb(r,t)}function da(r){cr().setUser(r)}function ua(...r){const t=cr();if(r.length===2){const[s,n]=r;return s?t.withScope(()=>(t.getStackTop().scope=s,n(s))):t.withScope(n)}return t.withScope(r[0])}function ha(){return cr().getClient()}function pa(){return cr().getScope()}function Fn(r){return r.transaction}function xa(r,t,s){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=s&&s.getUser()||{},a=Mt({environment:n.environment||Tn,release:n.release,user_segment:o,public_key:i,trace_id:r});return t.emit&&t.emit("createDsc",a),a}function ga(r){const t=ha();if(!t)return{};const s=xa(Or(r).trace_id||"",t,pa()),n=Fn(r);if(!n)return s;const i=n&&n._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:o,source:a}=n.metadata;o!=null&&(s.sample_rate=`${o}`);const d=Or(n);return a&&a!=="url"&&(s.transaction=d.description),s.sampled=String(sa(n)),t.emit&&t.emit("createDsc",s),s}function fa(r,t){const{fingerprint:s,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=t;ma(r,t),n&&ja(r,n),va(r,s),ya(r,i),ba(r,o)}function ma(r,t){const{extra:s,tags:n,user:i,contexts:o,level:a,transactionName:d}=t,c=Mt(s);c&&Object.keys(c).length&&(r.extra=k(k({},c),r.extra));const h=Mt(n);h&&Object.keys(h).length&&(r.tags=k(k({},h),r.tags));const g=Mt(i);g&&Object.keys(g).length&&(r.user=k(k({},g),r.user));const f=Mt(o);f&&Object.keys(f).length&&(r.contexts=k(k({},f),r.contexts)),a&&(r.level=a),d&&(r.transaction=d)}function ya(r,t){const s=[...r.breadcrumbs||[],...t];r.breadcrumbs=s.length?s:void 0}function ba(r,t){r.sdkProcessingMetadata=k(k({},r.sdkProcessingMetadata),t)}function ja(r,t){r.contexts=k({trace:ta(t)},r.contexts);const s=Fn(t);if(s){r.sdkProcessingMetadata=k({dynamicSamplingContext:ga(t)},r.sdkProcessingMetadata);const n=Or(s).description;n&&(r.tags=k({transaction:n},r.tags))}}function va(r,t){r.fingerprint=r.fingerprint?Yo(r.fingerprint):[],t&&(r.fingerprint=r.fingerprint.concat(t)),r.fingerprint&&!r.fingerprint.length&&delete r.fingerprint}const wa=100;class Ht{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Xs()}static clone(t){return t?t.clone():new Ht}clone(){const t=new Ht;return t._breadcrumbs=[...this._breadcrumbs],t._tags=k({},this._tags),t._extra=k({},this._extra),t._contexts=k({},this._contexts),t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata=k({},this._sdkProcessingMetadata),t._propagationContext=k({},this._propagationContext),t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Nr(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags=k(k({},this._tags),t),this._notifyScopeListeners(),this}setTag(t,s){return this._tags=ve(k({},this._tags),{[t]:s}),this._notifyScopeListeners(),this}setExtras(t){return this._extra=k(k({},this._extra),t),this._notifyScopeListeners(),this}setExtra(t,s){return this._extra=ve(k({},this._extra),{[t]:s}),this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,s){return s===null?delete this._contexts[t]:this._contexts[t]=s,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const s=typeof t=="function"?t(this):t;if(s instanceof Ht){const n=s.getScopeData();this._tags=k(k({},this._tags),n.tags),this._extra=k(k({},this._extra),n.extra),this._contexts=k(k({},this._contexts),n.contexts),n.user&&Object.keys(n.user).length&&(this._user=n.user),n.level&&(this._level=n.level),n.fingerprint.length&&(this._fingerprint=n.fingerprint),s.getRequestSession()&&(this._requestSession=s.getRequestSession()),n.propagationContext&&(this._propagationContext=n.propagationContext)}else if(kn(s)){const n=t;this._tags=k(k({},this._tags),n.tags),this._extra=k(k({},this._extra),n.extra),this._contexts=k(k({},this._contexts),n.contexts),n.user&&(this._user=n.user),n.level&&(this._level=n.level),n.fingerprint&&(this._fingerprint=n.fingerprint),n.requestSession&&(this._requestSession=n.requestSession),n.propagationContext&&(this._propagationContext=n.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Xs(),this}addBreadcrumb(t,s){const n=typeof s=="number"?s:wa;if(n<=0)return this;const i=k({timestamp:bs()},t),o=this._breadcrumbs;return o.push(i),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:s,_contexts:n,_tags:i,_extra:o,_user:a,_level:d,_fingerprint:c,_eventProcessors:h,_propagationContext:g,_sdkProcessingMetadata:f,_transactionName:x,_span:C}=this;return{breadcrumbs:t,attachments:s,contexts:n,tags:i,extra:o,user:a,level:d,fingerprint:c||[],eventProcessors:h,propagationContext:g,sdkProcessingMetadata:f,transactionName:x,span:C}}applyToEvent(t,s={},n=[]){fa(t,this.getScopeData());const i=[...n,...Xo(),...this._eventProcessors];return ds(i,t,s)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=k(k({},this._sdkProcessingMetadata),t),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,s){const n=s&&s.event_id?s.event_id:ft();if(!this._client)return Ft.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(t,ve(k({originalException:t,syntheticException:i},s),{event_id:n}),this),n}captureMessage(t,s,n){const i=n&&n.event_id?n.event_id:ft();if(!this._client)return Ft.warn("No client configured on scope - will not capture message!"),i;const o=new Error(t);return this._client.captureMessage(t,s,ve(k({originalException:t,syntheticException:o},n),{event_id:i}),this),i}captureEvent(t,s){const n=s&&s.event_id?s.event_id:ft();return this._client?(this._client.captureEvent(t,ve(k({},s),{event_id:n}),this),n):(Ft.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Xs(){return{traceId:ft(),spanId:ft().substring(16)}}const _a="7.120.4",An=parseFloat(_a),Sa=100;class Wn{constructor(t,s,n,i=An){this._version=i;let o;s?o=s:(o=new Ht,o.setClient(t));let a;n?a=n:(a=new Ht,a.setClient(t)),this._stack=[{scope:o}],t&&this.bindClient(t),this._isolationScope=a}isOlderThan(t){return this._version<t}bindClient(t){const s=this.getStackTop();s.client=t,s.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const s=this.pushScope();let n;try{n=t(s)}catch(i){throw this.popScope(),i}return ys(n)?n.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,s){const n=this._lastEventId=s&&s.event_id?s.event_id:ft(),i=new Error("Sentry syntheticException");return this.getScope().captureException(t,ve(k({originalException:t,syntheticException:i},s),{event_id:n})),n}captureMessage(t,s,n){const i=this._lastEventId=n&&n.event_id?n.event_id:ft(),o=new Error(t);return this.getScope().captureMessage(t,s,ve(k({originalException:t,syntheticException:o},n),{event_id:i})),i}captureEvent(t,s){const n=s&&s.event_id?s.event_id:ft();return t.type||(this._lastEventId=n),this.getScope().captureEvent(t,ve(k({},s),{event_id:n})),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,s){const{scope:n,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=Sa}=i.getOptions&&i.getOptions()||{};if(a<=0)return;const d=bs(),c=k({timestamp:d},t),h=o?Rn(()=>o(c,s)):c;h!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",h,s),n.addBreadcrumb(h,a))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,s){this.getScope().setTag(t,s),this.getIsolationScope().setTag(t,s)}setExtra(t,s){this.getScope().setExtra(t,s),this.getIsolationScope().setExtra(t,s)}setContext(t,s){this.getScope().setContext(t,s),this.getIsolationScope().setContext(t,s)}configureScope(t){const{scope:s,client:n}=this.getStackTop();n&&t(s)}run(t){const s=Js(this);try{t(this)}finally{Js(s)}}getIntegration(t){const s=this.getClient();if(!s)return null;try{return s.getIntegration(t)}catch(n){return Tr&&Ft.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,s){const n=this._callExtensionMethod("startTransaction",t,s);return Tr&&!n&&(this.getClient()?Ft.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):Ft.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const s=this.getStackTop().scope,n=s.getSession();n&&Zo(n),this._sendSessionUpdate(),s.setSession()}startSession(t){const{scope:s,client:n}=this.getStackTop(),{release:i,environment:o=Tn}=n&&n.getOptions()||{},{userAgent:a}=ut.navigator||{},d=Jo(k(k({release:i,environment:o,user:s.getUser()},a&&{userAgent:a}),t)),c=s.getSession&&s.getSession();return c&&c.status==="ok"&&Nr(c,{status:"exited"}),this.endSession(),s.setSession(d),d}shouldSendDefaultPii(){const t=this.getClient(),s=t&&t.getOptions();return!!(s&&s.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:s}=this.getStackTop(),n=t.getSession();n&&s&&s.captureSession&&s.captureSession(n)}_callExtensionMethod(t,...s){const i=Hr().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,s);Tr&&Ft.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function Hr(){return ut.__SENTRY__=ut.__SENTRY__||{extensions:{},hub:void 0},ut}function Js(r){const t=Hr(),s=us(t);return zn(t,r),s}function cr(){const r=Hr();if(r.__SENTRY__&&r.__SENTRY__.acs){const t=r.__SENTRY__.acs.getCurrentHub();if(t)return t}return Ea(r)}function Ea(r=Hr()){return(!Ca(r)||us(r).isOlderThan(An))&&zn(r,new Wn),us(r)}function Ca(r){return!!(r&&r.__SENTRY__&&r.__SENTRY__.hub)}function us(r){return Pn("hub",()=>new Wn,r)}function zn(r,t){if(!r)return!1;const s=r.__SENTRY__=r.__SENTRY__||{};return s.hub=t,!0}try{console.log("Sentry temporarily disabled to avoid 403 errors")}catch(r){console.warn("Sentry initialization failed:",r)}const ka=r=>{try{da({id:r==null?void 0:r.id,username:r==null?void 0:r.username,email:r==null?void 0:r.email})}catch(t){console.warn("Failed to set Sentry user context:",t)}},Un=(r,t={})=>{try{ua(s=>{Object.keys(t).forEach(n=>{s.setContext(n,t[n])}),la(r)})}catch(s){console.warn("Failed to capture exception in Sentry:",s),console.error("Original error:",r)}},Pa=(r,t="custom",s="info",n={})=>{try{ca({message:r,category:t,level:s,data:n,timestamp:Date.now()/1e3})}catch(i){console.warn("Failed to add Sentry breadcrumb:",i)}},Ra=()=>{const[r,t]=u.useState(""),[s,n]=u.useState(""),[i,o]=u.useState(""),[a,d]=u.useState(!1),c=Et(),h=()=>{const x={};return r.trim()?r.length<Ke.USERNAME_MIN_LENGTH?x.username=`Username must be at least ${Ke.USERNAME_MIN_LENGTH} characters`:r.length>Ke.USERNAME_MAX_LENGTH&&(x.username=`Username must be less than ${Ke.USERNAME_MAX_LENGTH} characters`):x.username="Username is required",s?s.length<Ke.PASSWORD_MIN_LENGTH&&(x.password=`Password must be at least ${Ke.PASSWORD_MIN_LENGTH} characters`):x.password="Password is required",x},g=x=>{var C,m,y;return((C=x.response)==null?void 0:C.status)===401?"Invalid username or password. Please check your credentials.":((m=x.response)==null?void 0:m.status)===429?"Too many login attempts. Please try again later.":((y=x.response)==null?void 0:y.status)>=500?"Server error. Please try again later.":x.code==="NETWORK_ERROR"||!x.response?"Network error. Please check your connection.":"Login failed. Please try again."},f=x=>w(Y,null,function*(){x.preventDefault(),d(!0),o("");const C=h();if(Object.keys(C).length>0){o(Object.values(C)[0]),d(!1);return}try{{const y=yield zt.login({username:r,password:s}),{access:E,refresh:T}=y.data;Je.setAccessToken(E),Je.setRefreshToken(T),qt.trackLogin("email"),ka({username:r}),c("/dashboard")}}catch(m){const y=g(m);o(y),qt.trackError("login_error",y,"login_form"),Un(m,{tags:{component:"Login",action:"login_attempt"},extra:{username:r,error_message:y}}),{}.VITE_DEBUG==="true"&&console.error("Login error:",m)}finally{d(!1)}});return e.jsx(p,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(ct,{maxWidth:"sm",children:e.jsxs(ce,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Welcome back! Login to your account"})]}),i&&e.jsx(we,{severity:"error",sx:{mb:3,borderRadius:2},children:i}),e.jsxs(p,{component:"form",onSubmit:f,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(ot,{label:"Username",value:r,onChange:x=>t(x.target.value),required:!0,fullWidth:!0,autoComplete:"username",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(ot,{type:"password",label:"Password",value:s,onChange:x=>n(x.target.value),required:!0,fullWidth:!0,autoComplete:"current-password",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(U,{type:"submit",variant:"contained",fullWidth:!0,disabled:a,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"}},children:a?"Logging in...":"Login"})]}),e.jsxs(p,{sx:{mt:4,textAlign:"center"},children:[e.jsx(l,{variant:"body2",sx:{color:"#64748b",mb:1},children:e.jsx(it,{component:br,to:"/forgot-password",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Forgot your password?"})}),e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Don't have an account?"," ",e.jsx(it,{component:br,to:"/register",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Register here"})]})]})]})})})},Ia=()=>{const[r,t]=u.useState({username:"",email:"",password:""}),[s,n]=u.useState(""),[i,o]=u.useState(!1),a=Et(),d=()=>{const x={};return r.username.trim()?r.username.length<Ke.USERNAME_MIN_LENGTH?x.username=`Username must be at least ${Ke.USERNAME_MIN_LENGTH} characters`:r.username.length>Ke.USERNAME_MAX_LENGTH&&(x.username=`Username must be less than ${Ke.USERNAME_MAX_LENGTH} characters`):x.username="Username is required",r.email.trim()?Ke.EMAIL_REGEX.test(r.email)||(x.email="Please enter a valid email address"):x.email="Email is required",r.password?r.password.length<Ke.PASSWORD_MIN_LENGTH?x.password=`Password must be at least ${Ke.PASSWORD_MIN_LENGTH} characters`:r.password.length>Ke.PASSWORD_MAX_LENGTH&&(x.password=`Password must be less than ${Ke.PASSWORD_MAX_LENGTH} characters`):x.password="Password is required",x},c=x=>{var C,m,y,E,T,b;return((C=x.response)==null?void 0:C.status)===400?((m=x.response.data)==null?void 0:m.error)||"Invalid registration data. Please check your input.":((y=x.response)==null?void 0:y.status)===409?"Username or email already exists. Please choose different credentials.":((E=x.response)==null?void 0:E.status)===201?((T=x.response.data)==null?void 0:T.error)||"Registration successful but email verification failed.":((b=x.response)==null?void 0:b.status)>=500?"Server error. Please try again later.":x.code==="NETWORK_ERROR"||!x.response?"Network error. Please check your connection.":"Registration failed. Please try again."},h=x=>{var C;return(C=x.data)!=null&&C.message?x.data.message:"Registration successful! Please check your email to verify your account."},g=x=>{t(ve(k({},r),{[x.target.name]:x.target.value}))},f=x=>w(Y,null,function*(){x.preventDefault(),o(!0),n("");const C=d();if(Object.keys(C).length>0){n(Object.values(C)[0]),o(!1);return}try{const m=yield zt.register(r),y=h(m);n(y),t({username:"",email:"",password:""}),qt.trackRegistration("email"),setTimeout(()=>{a("/login")},4e3)}catch(m){const y=c(m);n(y),qt.trackError("registration_error",y,"register_form"),{}.VITE_DEBUG==="true"&&console.error("Registration error:",m)}finally{o(!1)}});return e.jsx(p,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(ct,{maxWidth:"sm",children:e.jsxs(ce,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Join us! Create your account"})]}),s&&e.jsx(we,{severity:s.includes("successful")||s.includes("Registration successful")||s.includes("check your email")?"success":"error",sx:{mb:3,borderRadius:2},children:s}),e.jsxs(p,{component:"form",onSubmit:f,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(ot,{name:"username",label:"Username",value:r.username,onChange:g,required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(ot,{name:"email",label:"Email",type:"email",value:r.email,onChange:g,required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(ot,{name:"password",type:"password",label:"Password",value:r.password,onChange:g,required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(U,{type:"submit",variant:"contained",fullWidth:!0,disabled:i,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(25, 118, 210, 0.3)",color:"rgba(255, 255, 255, 0.7)"}},children:i?"Creating Account...":"Create Account"})]}),e.jsx(p,{sx:{mt:4,textAlign:"center"},children:e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Already have an account?"," ",e.jsx(it,{component:br,to:"/login",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Login here"})]})})]})})})},Da=()=>{const[r,t]=u.useState(""),[s,n]=u.useState(!1),[i,o]=u.useState(""),[a,d]=u.useState(""),c=Et(),h=g=>w(Y,null,function*(){var f,x,C;if(g.preventDefault(),n(!0),d(""),o(""),!r){d("Email is required"),n(!1);return}try{const m=yield zt.requestPasswordReset({email:r});o(m.data.message||"Password reset email sent successfully. Please check your email."),t(""),setTimeout(()=>{c("/login")},3e3)}catch(m){((f=m.response)==null?void 0:f.status)===200?(o("If an account with this email exists, a password reset email has been sent."),setTimeout(()=>{c("/login")},3e3)):d(((C=(x=m.response)==null?void 0:x.data)==null?void 0:C.error)||"Failed to send password reset email. Please try again.")}finally{n(!1)}});return e.jsx(p,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(ct,{maxWidth:"sm",children:e.jsxs(ce,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Reset your password"})]}),a&&e.jsx(we,{severity:"error",sx:{mb:3,borderRadius:2},children:a}),i&&e.jsx(we,{severity:"success",sx:{mb:3,borderRadius:2},children:i}),e.jsxs(p,{component:"form",onSubmit:h,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(ot,{name:"email",label:"Email Address",type:"email",value:r,onChange:g=>t(g.target.value),required:!0,fullWidth:!0,disabled:s,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(U,{type:"submit",variant:"contained",fullWidth:!0,disabled:s,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(25, 118, 210, 0.3)",color:"rgba(255, 255, 255, 0.7)"}},children:s?"Sending...":"Send Reset Email"})]}),e.jsx(p,{sx:{mt:4,textAlign:"center"},children:e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Remember your password?"," ",e.jsx(it,{component:br,to:"/login",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Login here"})]})})]})})})},Ta=()=>{const[r,t]=u.useState(""),[s,n]=u.useState(""),[i,o]=u.useState(!1),[a,d]=u.useState(""),[c,h]=u.useState(""),[g]=Sn(),f=Et(),x=g.get("token");u.useEffect(()=>{x||h("Invalid reset link. Please request a new password reset.")},[x]);const C=m=>w(Y,null,function*(){var y,E;if(m.preventDefault(),o(!0),h(""),d(""),!r){h("Password is required"),o(!1);return}if(r.length<8){h("Password must be at least 8 characters long"),o(!1);return}if(r!==s){h("Passwords do not match"),o(!1);return}if(!x){h("Invalid reset token"),o(!1);return}try{const T=yield zt.resetPassword({token:x,password:r});d(T.data.message||"Password reset successfully. You can now login with your new password."),t(""),n(""),setTimeout(()=>{f("/login")},3e3)}catch(T){h(((E=(y=T.response)==null?void 0:y.data)==null?void 0:E.error)||"Failed to reset password. Please try again.")}finally{o(!1)}});return e.jsx(p,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:4},children:e.jsx(ct,{maxWidth:"sm",children:e.jsxs(ce,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:48,height:48,mr:2,borderRadius:2}}),e.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:800,color:"#1e293b"},children:"Data Hibernate"})]}),e.jsx(l,{variant:"h6",sx:{color:"#64748b",fontWeight:400},children:"Set your new password"})]}),c&&e.jsx(we,{severity:"error",sx:{mb:3,borderRadius:2},children:c}),a&&e.jsx(we,{severity:"success",sx:{mb:3,borderRadius:2},children:a}),e.jsxs(p,{component:"form",onSubmit:C,sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(ot,{name:"password",label:"New Password",type:"password",value:r,onChange:m=>t(m.target.value),required:!0,fullWidth:!0,disabled:i,variant:"outlined",helperText:"Password must be at least 8 characters long",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(ot,{name:"confirmPassword",label:"Confirm New Password",type:"password",value:s,onChange:m=>n(m.target.value),required:!0,fullWidth:!0,disabled:i,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(U,{type:"submit",variant:"contained",fullWidth:!0,disabled:i||!x,sx:{mt:2,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:"0 4px 16px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #0d47a1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(25, 118, 210, 0.3)",color:"rgba(255, 255, 255, 0.7)"}},children:i?"Resetting...":"Reset Password"})]}),e.jsx(p,{sx:{mt:4,textAlign:"center"},children:e.jsxs(l,{variant:"body2",sx:{color:"#64748b"},children:["Remember your password?"," ",e.jsx(it,{component:br,to:"/login",sx:{color:"#1976d2",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Login here"})]})})]})})})},Fa=(r,t={})=>{if(!r)return"N/A";const n=k(k({},{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),t);return new Date(r).toLocaleString(void 0,n)},Aa=(r,t=2)=>r===0?"0 GB":`${(r/(1024*1024*1024)).toFixed(t)} GB`,Zs=()=>{var y,E,T,b,$,_,R;const[r,t]=u.useState(null),[s,n]=u.useState(null),[i,o]=u.useState(!0),[a,d]=u.useState(null);u.useEffect(()=>{c()},[]);const c=()=>w(Y,null,function*(){try{o(!0),d(null);const[z,D]=yield Promise.all([Ut.getCurrentPlan(),Ut.getUsageStats()]);t(z.data),n(D.data)}catch(z){console.error("Error loading overview data:",z),d("Failed to load overview data")}finally{o(!1)}}),h=()=>{if(!r||!r.plan)return{name:"Free Tier",storage:"15 GB",color:"info",icon:e.jsx(gt,{}),description:"Free storage allowance"};const z=r.plan,se={"100gb":{storage:"100 GB",color:"primary"},"500gb":{storage:"500 GB",color:"warning"},"1tb":{storage:"1 TB",color:"error"}}[z.storage_tier]||{storage:"Unknown",color:"primary"};return{name:z.name.replace("_"," ").replace(/\b\w/g,le=>le.toUpperCase()),storage:se.storage,color:se.color,icon:e.jsx(_t,{}),description:z.description}},g=()=>{var le,pe,Te,de;if(!s)return 0;const D=((de=(Te=(pe=(le=s.current_storage)==null?void 0:le.bytes)!=null?pe:s.storage_used_bytes)!=null?Te:s.total_storage_bytes)!=null?de:0)/Xt(1024,3),se=r&&r.plan?r.plan.storage_tier==="100gb"?100:r.plan.storage_tier==="500gb"?500:1024:15;return Math.min(D/se*100,100)},f=()=>{const z=g();return z>=90?"error":z>=75?"warning":"primary"};if(i)return e.jsx(p,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(He,{sx:{width:"100%",maxWidth:400}})});if(a)return e.jsx(we,{severity:"error",action:e.jsx(U,{color:"inherit",size:"small",onClick:c,children:"Retry"}),children:a});const x=h(),C=g(),m=f();return e.jsxs(p,{sx:{maxWidth:1200,mx:"auto",p:4},children:[e.jsxs(p,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:[e.jsx(l,{variant:"h4",sx:{fontWeight:800,color:"text.primary"},children:"Storage Overview"}),e.jsx(Ve,{onClick:c,sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary","&:hover":{bgcolor:"grey.200",transform:"scale(1.05)"},transition:"all 0.3s ease"},children:e.jsx(er,{})})]}),e.jsxs(A,{container:!0,spacing:3,children:[e.jsx(A,{item:!0,xs:12,md:4,children:e.jsx(Le,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}},children:e.jsxs(Oe,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(p,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(p,{sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary",mr:2},children:x.icon}),e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:"Current Plan"})]}),e.jsx(ge,{label:x.name,color:x.color,size:"large",sx:{mb:3,fontWeight:600,fontSize:"0.9rem",height:32}}),e.jsxs(p,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(l,{variant:"h3",sx:{fontWeight:800,color:"text.primary",mb:2},children:x.storage}),e.jsx(l,{variant:"body1",sx:{color:"text.secondary",mb:3,lineHeight:1.6},children:x.description})]}),r&&e.jsx(p,{sx:{p:2,bgcolor:"grey.50",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(l,{variant:"caption",sx:{color:"text.secondary",fontWeight:500},children:["Expires: ",Fa(r.expires_at)]})})]})})}),e.jsx(A,{item:!0,xs:12,md:4,children:e.jsx(Le,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}},children:e.jsxs(Oe,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(p,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(p,{sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary",mr:2},children:e.jsx(rt,{})}),e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:"Storage Usage"})]}),e.jsxs(p,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(l,{variant:"h3",sx:{fontWeight:800,color:"text.primary",mb:2},children:Aa((b=(T=(E=(y=s==null?void 0:s.current_storage)==null?void 0:y.bytes)!=null?E:s==null?void 0:s.storage_used_bytes)!=null?T:s==null?void 0:s.total_storage_bytes)!=null?b:0)}),e.jsxs(p,{sx:{mb:3},children:[e.jsx(He,{variant:"determinate",value:C,color:m,sx:{height:10,borderRadius:5,mb:2,bgcolor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:5}}}),e.jsxs(l,{variant:"body1",sx:{color:"text.secondary",fontWeight:500},children:[C.toFixed(1),"% of ",x.storage," used"]})]})]}),s&&e.jsx(p,{sx:{p:2,bgcolor:"grey.50",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(l,{variant:"caption",sx:{color:"text.secondary",fontWeight:500},children:[((R=(_=($=s.current_storage)==null?void 0:$.gb)!=null?_:s.storage_used_gb)!=null?R:0).toFixed(1)," GB stored"]})})]})})}),e.jsx(A,{item:!0,xs:12,md:4,children:e.jsx(Le,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}},children:e.jsxs(Oe,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(p,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(p,{sx:{p:1.5,borderRadius:2,bgcolor:"grey.100",color:"text.secondary",mr:2},children:e.jsx(Wt,{})}),e.jsx(l,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:"Account Status"})]}),e.jsx(p,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:e.jsxs(p,{sx:{mb:3},children:[e.jsxs(p,{display:"flex",alignItems:"center",mb:2,children:[e.jsx($e,{sx:{color:"text.secondary",mr:1}}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:"Storage Active"})]}),e.jsxs(p,{display:"flex",alignItems:"center",mb:2,children:[e.jsx($e,{sx:{color:"text.secondary",mr:1}}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:"Encryption Enabled"})]}),e.jsxs(p,{display:"flex",alignItems:"center",children:[e.jsx($e,{sx:{color:"text.secondary",mr:1}}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:"Backup Secure"})]})]})}),e.jsx(p,{sx:{p:2,bgcolor:"grey.50",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:e.jsx(l,{variant:"caption",sx:{color:"text.secondary",fontWeight:600},children:"✓ All systems operational"})})]})})}),e.jsx(A,{item:!0,xs:12,children:e.jsxs(ce,{sx:{p:4,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)"},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,mb:3,color:"text.primary"},children:"Quick Actions"}),e.jsxs(A,{container:!0,spacing:3,children:[e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(U,{variant:"contained",fullWidth:!0,startIcon:e.jsx(rt,{}),onClick:()=>window.location.href="/upload",sx:{py:2,borderRadius:2,fontSize:"1rem",fontWeight:600,boxShadow:"0 4px 12px rgba(0,0,0,0.15)","&:hover":{boxShadow:"0 6px 16px rgba(0,0,0,0.2)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"Upload Files"})}),e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(U,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(_t,{}),onClick:()=>{window.location.href="/dashboard#hibernate"},sx:{py:2,borderRadius:2,fontSize:"1rem",fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"Manage Files"})}),e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(U,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(gt,{}),onClick:()=>window.location.href="/plans",sx:{py:2,borderRadius:2,fontSize:"1rem",fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"View Plans"})})]})]})}),!r&&C>50&&e.jsx(A,{item:!0,xs:12,children:e.jsx(we,{severity:"warning",sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)"},action:e.jsx(U,{color:"inherit",size:"small",onClick:()=>window.location.href="/plans",sx:{fontWeight:600,borderRadius:2,px:2,py:1},children:"View Plans"}),children:e.jsxs(l,{variant:"body1",sx:{fontWeight:500},children:["You're using ",C.toFixed(1),"% of your free storage. Consider upgrading to a hibernation plan for more space and features."]})})})]})]})};class Wa{constructor(){this.razorpay=null}initializeRazorpay(t){if(typeof window!="undefined"){if(!t)throw new Error("Razorpay key ID is required");if(typeof window.Razorpay=="undefined")throw new Error("Razorpay script not loaded. Please refresh the page and try again.");const s={}.VITE_ENVIRONMENT==="production",n=s?"production":"development";this.razorpay=new window.Razorpay(k({key:t,currency:"INR",name:"Glacier Archival",description:"Hibernation Plan Subscription",image:"/logo.png",theme:{color:"#6b7280"}},s&&{modal:{ondismiss:()=>{console.log("Payment modal dismissed")}}})),console.log(`Razorpay initialized in ${n} mode with key: ${t.substring(0,10)}...`)}else throw new Error("Razorpay can only be initialized in browser environment")}createPaymentOrder(t,s){return w(this,null,function*(){var n,i,o,a;try{return(yield Dr.createOrder(t,s)).data}catch(d){throw console.error("Error creating payment order:",d),((n=d.response)==null?void 0:n.status)===500?new Error("Payment system is temporarily unavailable. Please contact support at support@datahibernate.in"):((i=d.response)==null?void 0:i.status)===400?new Error("Invalid payment request. Please refresh the page and try again."):d.response?new Error(((a=(o=d.response)==null?void 0:o.data)==null?void 0:a.error)||"Payment system is currently unavailable. Please contact support."):new Error("Network error. Please check your internet connection and try again.")}})}processPayment(t){return w(this,null,function*(){return new Promise((s,n)=>{if(!this.razorpay){n(new Error("Payment system is not initialized. Please refresh the page and try again."));return}const i={order_id:t.razorpay_order_id,amount:t.amount,currency:t.currency,name:t.plan.name,description:`${t.plan.storage_tier} - ${t.plan.name}`,prefill:{name:"",email:""},notes:{plan_id:t.plan.id,payment_id:t.payment_id},handler:o=>w(this,null,function*(){try{const a=yield Dr.verifyPayment(t.payment_id,o.razorpay_order_id,o.razorpay_payment_id,o.razorpay_signature);s({success:!0,paymentData:a.data,razorpayResponse:o})}catch(a){console.error("Payment verification failed:",a),n(new Error("Payment verification failed. Please contact support at support@datahibernate.in for assistance."))}}),modal:{ondismiss:()=>{n(new Error("Payment was cancelled. You can try again when ready."))}}};this.razorpay.open(i)})})}getPaymentStatus(t){return w(this,null,function*(){var s,n;try{return(yield Dr.getPaymentStatus(t)).data}catch(i){throw console.error("Error getting payment status:",i),new Error(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to get payment status")}})}formatAmount(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}getPaymentMethods(){return[{id:"card",name:"Credit/Debit Card",icon:"💳"},{id:"upi",name:"UPI",icon:"📱"},{id:"netbanking",name:"Net Banking",icon:"🏦"},{id:"wallet",name:"Wallet",icon:"👛"}]}}const es=({onPlanSelect:r,currentPlan:t,onClose:s})=>{var Qe,M,Be;St();const[n,i]=u.useState({}),[o,a]=u.useState(!0),[d,c]=u.useState(null),[h,g]=u.useState(null),[f,x]=u.useState(!1),[C]=u.useState(()=>new Wa),[m,y]=u.useState(!1),[E,T]=u.useState(null);u.useState(!1);const[b,$]=u.useState(0);u.useEffect(()=>{_()},[]);const _=()=>w(Y,null,function*(){try{a(!0);const F=yield Ut.getPlansGroupedByTier();i(F.data.plans||F.data)}catch(F){c("Failed to load hibernation plans"),console.error("Error loading plans:",F)}finally{a(!1)}}),R=F=>w(Y,null,function*(){try{y(!0),T(null);const re=(yield Ut.getPlansGroupedByTier()).data.razorpay_key_id,st=window.location.hostname==="localhost";if(!re)throw new Error("Payment system is currently unavailable. Please contact support at support@datahibernate.in");if(!st&&re==="rzp_test_1234567890")throw new Error("Payment system is not properly configured. Please contact support at support@datahibernate.in");C.initializeRazorpay(re);const Me=yield C.createPaymentOrder(F.id,parseFloat(F.annual_price_inr)),Lt=yield C.processPayment(Me);Lt.success&&(r(Lt.paymentData.plan),x(!1),alert("Payment successful! Your hibernation plan has been activated."))}catch(be){console.error("Payment error:",be);let re="Payment is currently unavailable. Please try again later or contact support.";be.message.includes("Razorpay")?re="Payment system is temporarily unavailable. Please contact support at support@datahibernate.in for assistance.":be.message.includes("network")||be.message.includes("Network")?re="Network error occurred. Please check your internet connection and try again.":be.message.includes("cancelled")?re="Payment was cancelled. You can try again when ready.":be.message.includes("verification")&&(re="Payment verification failed. Please contact support at support@datahibernate.in."),T(re)}finally{y(!1)}}),z=F=>{switch(F){case"deep_freeze":return e.jsx(_t,{sx:{fontSize:40,color:"#4f46e5"}});case"flexible_archive":return e.jsx(Fr,{sx:{fontSize:40,color:"#2563eb"}});default:return e.jsx(gt,{sx:{fontSize:40,color:"#4f46e5"}})}},D=F=>{switch(F){case"deep_freeze":return"#4f46e5";case"flexible_archive":return"#2563eb";default:return"#4f46e5"}},se=F=>{switch(F){case"deep_freeze":return"Deep Hibernate";case"flexible_archive":return"Smart Hibernate";default:return"Hibernation Plan"}},le=F=>{const be={deep_freeze:{title:"Deep Hibernate",subtitle:"🌙 Long-term archival storage",description:"Perfect for memories, backups, and data you rarely need",icon:e.jsx(_t,{}),color:"#4f46e5",gradient:"linear-gradient(135deg, #4f46e5 0%, #3730a3 100%)",lightColor:"#e0e7ff",darkColor:"#312e81",bgColor:"#f8fafc",textColor:"#1e293b"},flexible_archive:{title:"Smart Hibernate",subtitle:"🌤️ Flexible retrieval storage",description:"Balance between cost and accessibility for regular backups",icon:e.jsx(Fr,{}),color:"#2563eb",gradient:"linear-gradient(135deg, #2563eb 0%, #1e40af 100%)",lightColor:"#dbeafe",darkColor:"#1e3a8a",bgColor:"#f8fafc",textColor:"#1e293b"}};return be[F]||be.deep_freeze},pe=F=>F===0?"Instant":F<1?"Minutes":`${F} hours`,Te=F=>{if(F==null||F==="NaN"||isNaN(F))return"0 GB";const be=F/Xt(1024,3);return be>=1e3?`${(be/1024).toFixed(1)} TB`:`${be.toFixed(0)} GB`};if(o)return e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(Qt,{})});if(d)return e.jsx(we,{severity:"error",sx:{mb:2},children:d});const de=["deep_freeze","flexible_archive"],Ze=de[b],Ce=n[Ze]||[],L=le(Ze);return e.jsxs(p,{sx:{p:4,maxWidth:1200,mx:"auto"},children:[e.jsxs(p,{sx:{textAlign:"center",mb:6},children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Choose Your Hibernation Plan"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",maxWidth:700,mx:"auto",lineHeight:1.6},children:"Select the perfect storage solution for your data needs. Each plan offers different balance between cost, storage capacity, and retrieval speed."})]}),e.jsx(ce,{sx:{mb:6,borderRadius:3,overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:e.jsx(ps,{value:b,onChange:(F,be)=>$(be),variant:"fullWidth",sx:{"& .MuiTab-root":{py:3,px:4,fontSize:"1.1rem",fontWeight:700,textTransform:"none",transition:"all 0.3s ease"},"& .MuiTabs-indicator":{height:4,borderRadius:"2px 2px 0 0"}},children:de.map((F,be)=>{const re=le(F),st=n[F]||[],Me=t&&st.some(Lt=>{var Vt;return Lt.id===((Vt=t.plan)==null?void 0:Vt.id)});return e.jsx(Jt,{label:e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[re.icon,e.jsxs(p,{children:[e.jsx(l,{variant:"subtitle1",sx:{fontWeight:600},children:re.title}),e.jsx(l,{variant:"caption",sx:{color:"text.secondary"},children:re.subtitle})]}),Me&&e.jsx(ge,{label:"Active",size:"small",color:"success",sx:{ml:1}})]}),sx:{background:b===be?re.bgColor:"transparent",color:b===be?re.textColor:"text.primary",border:b===be?`2px solid ${re.color}`:"2px solid transparent","&:hover":{background:b===be?re.bgColor:v(re.color,.05),border:`2px solid ${v(re.color,.3)}`}}},F)})})}),e.jsx(ce,{sx:{p:4,mb:6,background:L.bgColor,color:L.textColor,borderRadius:3,boxShadow:`0 8px 24px ${v(L.color,.1)}`,border:`1px solid ${v(L.color,.2)}`},children:e.jsxs(te,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(p,{sx:{p:3,borderRadius:"50%",bgcolor:L.lightColor,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${L.color}`},children:fr.cloneElement(L.icon,{sx:{fontSize:48,color:L.color}})}),e.jsxs(p,{children:[e.jsx(l,{variant:"h4",sx:{fontWeight:800,mb:2,color:L.textColor},children:L.title}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",lineHeight:1.5},children:L.description})]})]})}),e.jsx(A,{container:!0,spacing:4,children:Ce.map((F,be)=>{var Me;const re=((Me=t==null?void 0:t.plan)==null?void 0:Me.id)===F.id,st=be===1;return e.jsx(A,{item:!0,xs:12,md:4,children:e.jsxs(Le,{sx:k(k({height:"100%",position:"relative",border:`2px solid ${v(L.color,.15)}`,borderRadius:4,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)","&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:`0 20px 60px ${v(L.color,.25)}`,borderColor:L.color}},re&&{borderColor:L.color,background:`linear-gradient(145deg, ${v(L.color,.05)} 0%, ${v(L.color,.02)} 100%)`,boxShadow:`0 8px 32px ${v(L.color,.15)}`}),st&&!re&&{borderColor:L.color,boxShadow:`0 8px 32px ${v(L.color,.2)}`,background:`linear-gradient(145deg, ${v(L.color,.02)} 0%, #ffffff 100%)`}),children:[st&&!re&&e.jsx(ge,{label:"★ Most Popular",sx:{position:"absolute",top:20,right:20,zIndex:1,bgcolor:L.color,color:"white",fontWeight:700,fontSize:"0.875rem",borderRadius:2,boxShadow:`0 4px 12px ${v(L.color,.3)}`}}),re&&e.jsx(ge,{label:"✓ Current Plan",sx:{position:"absolute",top:20,right:20,zIndex:1,bgcolor:"#10b981",color:"white",fontWeight:700,fontSize:"0.875rem",borderRadius:2,boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"}}),e.jsx(Oe,{sx:{p:4},children:e.jsxs(te,{spacing:4,children:[e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h2",sx:{fontWeight:800,color:L.color,mb:2},children:Te(F.storage_size_bytes)}),e.jsx(l,{variant:"h6",color:"text.secondary",sx:{fontWeight:600},children:"Storage Capacity"})]}),e.jsxs(p,{sx:{textAlign:"center",p:3,bgcolor:L.lightColor,borderRadius:3,border:`1px solid ${v(L.color,.2)}`},children:[e.jsxs(l,{variant:"h3",sx:{fontWeight:800,mb:1,color:L.textColor},children:["₹",F.annual_price_inr]}),e.jsxs(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:["per year (₹",F.user_cost_inr,"/month)"]})]}),e.jsx(U,{fullWidth:!0,variant:re?"outlined":"contained",onClick:()=>R(F),disabled:re,sx:{bgcolor:re?"transparent":L.color,color:re?L.textColor:"white",borderColor:L.color,borderRadius:3,py:3,fontSize:"1.1rem",fontWeight:700,textTransform:"none",boxShadow:re?"none":`0 4px 16px ${v(L.color,.2)}`,transition:"all 0.3s ease","&:hover":{bgcolor:re?L.lightColor:L.darkColor,transform:re?"none":"translateY(-2px)",boxShadow:re?"none":`0 8px 24px ${v(L.color,.3)}`},"&:disabled":{bgcolor:"transparent",color:L.color,borderColor:L.color}},children:re?"✓ Current Plan":"Select Plan"})]})})]})},F.id)})}),e.jsxs(ce,{sx:{p:4,mt:6,background:L.bgColor,borderRadius:3,boxShadow:`0 4px 16px ${v(L.color,.08)}`,border:`1px solid ${v(L.color,.15)}`},children:[e.jsxs(l,{variant:"h5",sx:{fontWeight:700,mb:4,color:L.textColor,textAlign:"center"},children:[L.title," Features"]}),e.jsxs(A,{container:!0,spacing:4,children:[e.jsx(A,{item:!0,xs:12,md:4,children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2,p:3,bgcolor:v(L.color,.05),borderRadius:3,height:"100%"},children:[e.jsx(p,{sx:{p:2,bgcolor:L.lightColor,borderRadius:2},children:e.jsx(ts,{sx:{fontSize:32,color:L.color}})}),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,mb:1,color:"text.primary"},children:"Restore Time"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:pe(((Qe=Ce[0])==null?void 0:Qe.restore_time_hours)||12)})]})]})}),e.jsx(A,{item:!0,xs:12,md:4,children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2,p:3,bgcolor:v(L.color,.05),borderRadius:3,height:"100%"},children:[e.jsx(p,{sx:{p:2,bgcolor:L.lightColor,borderRadius:2},children:e.jsx(Wt,{sx:{fontSize:32,color:L.color}})}),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700,mb:1,color:"text.primary"},children:"Retrieval Allowance"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:((M=Ce[0])==null?void 0:M.free_retrieval_gb)>0?`${Ce[0].free_retrieval_gb} GB free every ${Ce[0].retrieval_period_months} months`:"Unlimited retrievals"})]})]})}),e.jsx(A,{item:!0,xs:12,md:4,children:e.jsx(p,{sx:{p:3,bgcolor:v(L.color,.08),borderRadius:3,border:`1px solid ${v(L.color,.2)}`,textAlign:"center",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(l,{variant:"body1",sx:{fontStyle:"italic",fontWeight:500,color:L.textColor},children:['"',((Be=Ce[0])==null?void 0:Be.user_message)||"Your data sleeps safely — wake it only when needed.",'"']})})})]})]}),e.jsxs(bt,{open:f,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(jt,{sx:{textAlign:"center",pb:1},children:e.jsx(l,{variant:"h5",sx:{fontWeight:700},children:"Confirm Subscription"})}),e.jsx(vt,{children:h&&e.jsxs(te,{spacing:3,children:[e.jsx(ce,{sx:{p:3,background:le(h.name).gradient,color:"white",borderRadius:2},children:e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(p,{sx:{p:2,borderRadius:"50%",bgcolor:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:z(h.name)}),e.jsxs(p,{children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:700},children:[se(h.name)," - ",Te(h.storage_size_bytes)]}),e.jsx(l,{variant:"body2",sx:{opacity:.9},children:h.description})]})]})}),E&&e.jsxs(we,{severity:"error",sx:{mb:2,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)"},action:e.jsx(U,{color:"inherit",size:"small",onClick:()=>T(null),sx:{fontWeight:600,borderRadius:2,px:2,py:1},children:"Dismiss"}),children:[e.jsx(l,{variant:"body1",sx:{fontWeight:500},children:E}),E.includes("support@datahibernate.in")&&e.jsx(l,{variant:"body2",sx:{mt:1,opacity:.8},children:"We apologize for the inconvenience. Our team is working to resolve this issue."})]}),e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsxs(l,{variant:"h4",sx:{fontWeight:700,color:D(h.name)},children:["₹",h.annual_price_inr]}),e.jsxs(l,{variant:"body1",color:"text.secondary",children:["per year (₹",h.user_cost_inr,"/month)"]})]}),e.jsxs(te,{spacing:2,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ts,{sx:{fontSize:20,color:D(h.name)}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Restore Time:"})," ",pe(h.restore_time_hours)]})]}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Wt,{sx:{fontSize:20,color:D(h.name)}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Retrieval:"})," ",h.free_retrieval_gb>0?`${h.free_retrieval_gb} GB free every ${h.retrieval_period_months} months`:"Unlimited retrievals"]})]})]}),e.jsx(we,{severity:"info",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Subscription Terms:"})," This plan will be active for 1 year from the date of purchase. You can cancel anytime, but no refunds will be provided for unused time."]})})]})}),e.jsxs(sr,{sx:{p:3,pt:1},children:[e.jsx(U,{onClick:()=>x(!1),variant:"outlined",fullWidth:!0,sx:{mr:1},children:"Cancel"}),e.jsx(U,{onClick:()=>R(h),variant:"contained",disabled:m,startIcon:m?e.jsx(Qt,{size:20}):e.jsx($e,{}),fullWidth:!0,sx:{ml:1},children:m?"Processing Payment...":"Pay & Subscribe"})]})]})]})},Ln=()=>{const r=St(),[t,s]=u.useState(null),[n,i]=u.useState(null),[o,a]=u.useState(!0),[d,c]=u.useState(null),[h,g]=u.useState(!1),[f,x]=u.useState(!1);u.useEffect(()=>{C()},[]);const C=()=>w(Y,null,function*(){try{a(!0),c(null);const[D,se]=yield Promise.allSettled([Ut.getCurrentPlan().catch(le=>{var pe;if(((pe=le.response)==null?void 0:pe.status)===404)return{data:null};throw le}),Ut.getUsageStats()]);if(D.status==="fulfilled"){const le=D.value.data;le&&le.is_free_tier?s(null):s(le)}else D.status==="rejected"&&(console.error("Error loading current plan:",D.reason),s(null));se.status==="fulfilled"?i(se.value.data):se.status==="rejected"&&(console.error("Error loading usage stats:",se.reason),i(null))}catch(D){console.error("Error loading plan data:",D),c("Failed to load plan information")}finally{a(!1)}}),m=()=>w(Y,null,function*(){x(!0),yield C(),x(!1)}),y=D=>{s({plan:D}),g(!1),C()},E=D=>{switch(D){case"deep_freeze":return e.jsx(_t,{sx:{fontSize:32,color:"#94a3b8"}});case"flexible_archive":return e.jsx(Fr,{sx:{fontSize:32,color:"#60a5fa"}});case"instant_archive":return e.jsx($r,{sx:{fontSize:32,color:"#34d399"}});default:return e.jsx(gt,{sx:{fontSize:32}})}},T=D=>{switch(D){case"deep_freeze":return"#94a3b8";case"flexible_archive":return"#60a5fa";case"instant_archive":return"#34d399";default:return r.palette.primary.main}},b=D=>{switch(D){case"deep_freeze":return"🌙 Hibernate (Deep Freeze Tier)";case"flexible_archive":return"🌤️ Smart Hibernate (Flexible Archive Tier)";case"instant_archive":return"⚡ Quick Hibernate (Instant Archive Tier)";default:return"Hibernation Plan"}},$=D=>{const se=D/1073741824;return se>=1e3?`${(se/1024).toFixed(1)} TB`:`${se.toFixed(1)} GB`},_=D=>{const se=D/1073741824;return se>=1e3?`${(se/1024).toFixed(2)} TB`:`${se.toFixed(2)} GB`};if(o)return e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(Qt,{})});if(d)return e.jsx(we,{severity:"error",sx:{mb:2},children:d});if(!t)return e.jsxs(p,{sx:{p:3},children:[e.jsx(l,{variant:"h4",sx:{mb:3,textAlign:"center",fontWeight:700},children:"Storage Dashboard"}),(n==null?void 0:n.is_free_tier)&&e.jsxs(ce,{elevation:3,sx:{p:4,mb:4,borderRadius:2,border:"2px solid #6b7280",bgcolor:"rgba(107, 114, 128, 0.05)"},children:[e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(gt,{sx:{fontSize:40,color:"#6b7280"}}),e.jsxs(p,{children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,color:"#6b7280"},children:"Free Tier - 15GB"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Upload and manage files up to 15GB for free"})]})]}),e.jsx(ge,{label:"Free Tier",color:"primary",icon:e.jsx($e,{}),sx:{fontSize:"1rem",height:32,px:1}})]}),e.jsxs(A,{container:!0,spacing:3,children:[e.jsxs(A,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Storage Usage"}),e.jsxs(te,{spacing:1,children:[e.jsxs(l,{variant:"body1",children:["Used: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_gb)||0," GB"]})," / ",(n==null?void 0:n.storage_limit_gb)||15," GB"]}),e.jsxs(l,{variant:"body1",children:["Percentage: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_percentage)||0,"%"]})]}),e.jsxs(p,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Storage Usage"}),e.jsx(He,{variant:"determinate",value:(n==null?void 0:n.storage_used_percentage)||0,sx:{height:8,borderRadius:4,bgcolor:"rgba(107, 114, 128, 0.1)","& .MuiLinearProgress-bar":{bgcolor:"#6b7280"}}})]})]})]}),e.jsxs(A,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Upgrade Options"}),e.jsxs(te,{spacing:1,children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Up to 1TB storage capacity"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Advanced hibernation features"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Priority support"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Cost-effective archival storage"})]})]})]}),e.jsx(p,{mt:4,display:"flex",justifyContent:"center",children:e.jsx(U,{variant:"contained",size:"large",onClick:()=>g(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5,bgcolor:"#6b7280","&:hover":{bgcolor:"#4b5563"}},children:"Upgrade to Hibernation Plan"})})]}),!(n!=null&&n.is_free_tier)&&e.jsx(we,{severity:"info",sx:{mb:3},children:"You don't have an active hibernation plan. Choose a plan to start storing your data efficiently."}),e.jsx(p,{sx:{textAlign:"center",mb:4},children:e.jsx(U,{variant:"contained",size:"large",onClick:()=>g(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5},children:"View Available Plans"})}),e.jsxs(bt,{open:h,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(jt,{children:"Choose Your Hibernation Plan"}),e.jsx(vt,{children:e.jsx(es,{onPlanSelect:y,onClose:()=>g(!1)})})]})]});if(o)return e.jsx(p,{sx:{p:3,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsx(Qt,{size:60})});if(!t)return e.jsxs(p,{sx:{p:3},children:[e.jsx(l,{variant:"h4",sx:{mb:3,textAlign:"center",fontWeight:700},children:"Storage Dashboard"}),(n==null?void 0:n.is_free_tier)&&e.jsxs(ce,{elevation:3,sx:{p:4,mb:4,borderRadius:2,border:"2px solid #6b7280",bgcolor:"rgba(107, 114, 128, 0.05)"},children:[e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(gt,{sx:{fontSize:40,color:"#6b7280"}}),e.jsxs(p,{children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,color:"#6b7280"},children:"Free Tier - 15GB"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Upload and manage files up to 15GB for free"})]})]}),e.jsx(ge,{label:"Free Tier",color:"primary",icon:e.jsx($e,{}),sx:{fontSize:"1rem",height:32,px:1}})]}),e.jsxs(A,{container:!0,spacing:3,children:[e.jsxs(A,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Storage Usage"}),e.jsxs(te,{spacing:1,children:[e.jsxs(l,{variant:"body1",children:["Used: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_gb)||0," GB"]})," / ",(n==null?void 0:n.storage_limit_gb)||15," GB"]}),e.jsxs(l,{variant:"body1",children:["Percentage: ",e.jsxs("strong",{children:[(n==null?void 0:n.storage_used_percentage)||0,"%"]})]}),e.jsxs(p,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Storage Usage"}),e.jsx(He,{variant:"determinate",value:(n==null?void 0:n.storage_used_percentage)||0,sx:{height:8,borderRadius:4,bgcolor:"rgba(107, 114, 128, 0.1)","& .MuiLinearProgress-bar":{bgcolor:"#6b7280"}}})]})]})]}),e.jsxs(A,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Upgrade Options"}),e.jsxs(te,{spacing:1,children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Up to 1TB storage capacity"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Advanced hibernation features"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Priority support"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"• Cost-effective archival storage"})]})]})]}),e.jsx(p,{mt:4,display:"flex",justifyContent:"center",children:e.jsx(U,{variant:"contained",size:"large",onClick:()=>g(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5,bgcolor:"#6b7280","&:hover":{bgcolor:"#4b5563"}},children:"Upgrade to Hibernation Plan"})})]}),!(n!=null&&n.is_free_tier)&&e.jsx(we,{severity:"info",sx:{mb:3},children:"You don't have an active hibernation plan. Choose a plan to start storing your data efficiently."}),e.jsx(p,{sx:{textAlign:"center",mb:4},children:e.jsx(U,{variant:"contained",size:"large",onClick:()=>g(!0),sx:{textTransform:"none",fontWeight:600,px:4,py:1.5},children:"View Available Plans"})}),e.jsxs(bt,{open:h,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(jt,{children:e.jsx(l,{variant:"h5",sx:{fontWeight:700},children:"Choose Your Hibernation Plan"})}),e.jsx(vt,{children:e.jsx(es,{onPlanSelect:y,currentPlan:t,onClose:()=>g(!1)})})]})]});const R=t.plan,z=T(R.name);return e.jsxs(p,{sx:{p:3},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:700},children:"Hibernation Plan Dashboard"}),e.jsx(U,{startIcon:e.jsx(er,{}),onClick:m,disabled:f,sx:{textTransform:"none"},children:f?"Refreshing...":"Refresh"})]}),e.jsxs(A,{container:!0,spacing:3,children:[e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsx(Oe,{sx:{p:3},children:e.jsxs(te,{spacing:2,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(p,{sx:{p:1.5,borderRadius:"50%",bgcolor:v(z,.1)},children:E(R.name)}),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600},children:b(R.name)}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[$(R.storage_size_bytes)," Storage"]})]})]}),e.jsx(tr,{}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Annual Price"}),e.jsxs(l,{variant:"h6",sx:{fontWeight:600},children:["₹",R.annual_price_inr]})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Monthly Cost"}),e.jsxs(l,{variant:"body1",children:["₹",R.user_cost_inr]})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Restore Time"}),e.jsx(ge,{label:R.restore_time_hours===0?"Instant":`${R.restore_time_hours} hours`,size:"small",sx:{bgcolor:v(z,.1),color:z}})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Free Retrieval"}),e.jsx(l,{variant:"body2",children:R.free_retrieval_gb>0?`${R.free_retrieval_gb} GB/${R.retrieval_period_months===1?"month":`${R.retrieval_period_months} months`}`:"Unlimited"})]}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(on,{}),onClick:()=>g(!0),sx:{textTransform:"none",borderColor:z,color:z},children:"Change Plan"})]})})})}),n&&e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{p:3},children:[e.jsx(l,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Usage Statistics"}),e.jsxs(te,{spacing:3,children:[e.jsxs(p,{children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Storage Used"}),e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:[_(n.storage_used_bytes)," / ",_(n.storage_limit_bytes)]})]}),e.jsx(He,{variant:"determinate",value:n.storage_used_percentage,sx:{height:8,borderRadius:4,bgcolor:v(z,.1),"& .MuiLinearProgress-bar":{bgcolor:z,borderRadius:4}}}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[n.storage_used_percentage.toFixed(1),"% used"]})]}),R.free_retrieval_gb>0&&e.jsxs(p,{children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Retrieval Used"}),e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:[n.retrieval_used_gb.toFixed(1)," / ",n.retrieval_limit_gb," GB"]})]}),e.jsx(He,{variant:"determinate",value:n.retrieval_used_gb/n.retrieval_limit_gb*100,sx:{height:8,borderRadius:4,bgcolor:v("#f59e0b",.1),"& .MuiLinearProgress-bar":{bgcolor:"#f59e0b",borderRadius:4}}}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[n.retrieval_remaining_gb.toFixed(1)," GB remaining"]})]}),e.jsxs(p,{sx:{p:2,bgcolor:v("#f59e0b",.05),borderRadius:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Plan Expires"}),e.jsx(l,{variant:"body1",sx:{fontWeight:600},children:new Date(n.plan_expires_at).toLocaleDateString()}),n.is_expired&&e.jsx(we,{severity:"warning",sx:{mt:1},children:"Plan has expired"})]})]})]})})})]}),e.jsxs(bt,{open:h,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(jt,{children:"Change Hibernation Plan"}),e.jsx(vt,{children:e.jsx(es,{currentPlan:t,onPlanSelect:y,onClose:()=>g(!1)})})]})]})},za="modulepreload",Ua=function(r){return"/"+r},Qs={},js=function(t,s,n){if(!s||s.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=Ua(o),o in Qs)return;Qs[o]=!0;const a=o.endsWith(".css"),d=a?'[rel="stylesheet"]':"";if(!!n)for(let g=i.length-1;g>=0;g--){const f=i[g];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":za,a||(h.as="script",h.crossOrigin=""),h.href=o,document.head.appendChild(h),a)return new Promise((g,f)=>{h.addEventListener("load",g),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},Bt={UPLOADED:"uploaded",ARCHIVING:"archiving",ARCHIVED:"archived",RESTORING:"restoring",RESTORED:"restored",FAILED:"failed"},en={[Bt.UPLOADED]:{name:"Awake",emoji:"☀️",color:"#4CAF50",description:"File is active and accessible",actionText:"Archive",actionIcon:"AcUnit",canArchive:!0,canRestore:!1,canDownload:!0,canDelete:!0},[Bt.ARCHIVING]:{name:"Falling Asleep",emoji:"🌙",color:"#FF9800",description:"File is being archived to cold storage",actionText:"Cancel",actionIcon:"Stop",canArchive:!1,canRestore:!1,canDownload:!1,canDelete:!1,isProcessing:!0},[Bt.ARCHIVED]:{name:"Hibernating",emoji:"❄️",color:"#2196F3",description:"File is in cold storage (cheaper)",actionText:"Restore",actionIcon:"CloudUpload",canArchive:!1,canRestore:!0,canDownload:!1,canDelete:!0},[Bt.RESTORING]:{name:"Waking Up",emoji:"🌅",color:"#9C27B0",description:"File is being restored from cold storage",actionText:"Cancel",actionIcon:"Stop",canArchive:!1,canRestore:!1,canDownload:!1,canDelete:!1,isProcessing:!0},[Bt.RESTORED]:{name:"Awake",emoji:"☀️",color:"#4CAF50",description:"File is restored and accessible",actionText:"Archive",actionIcon:"AcUnit",canArchive:!0,canRestore:!1,canDownload:!0,canDelete:!0},[Bt.FAILED]:{name:"Error",emoji:"⚠️",color:"#F44336",description:"Operation failed",actionText:"Retry",actionIcon:"Refresh",canArchive:!0,canRestore:!0,canDownload:!1,canDelete:!0,isError:!0}},ur=r=>en[r]||en[Bt.UPLOADED];class La{constructor(){this.algorithm="AES-GCM",this.keyLength=256,this.ivLength=12,this.pbkdf2Iterations=1e5,this.saltLength=32}deriveKey(t,s){return w(this,null,function*(){const i=new TextEncoder().encode(t),o=yield crypto.subtle.importKey("raw",i,"PBKDF2",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"PBKDF2",salt:s,iterations:this.pbkdf2Iterations,hash:"SHA-256"},o,{name:this.algorithm,length:this.keyLength},!1,["encrypt","decrypt"])})}generateSalt(){return crypto.getRandomValues(new Uint8Array(this.saltLength))}generateIV(){return crypto.getRandomValues(new Uint8Array(this.ivLength))}encryptFile(t,s){return w(this,null,function*(){try{const n=this.generateSalt(),i=this.generateIV(),o=yield this.deriveKey(s,n),a=yield crypto.subtle.encrypt({name:this.algorithm,iv:i},o,t),d={algorithm:this.algorithm,keyLength:this.keyLength,ivLength:this.ivLength,pbkdf2Iterations:this.pbkdf2Iterations,salt:Array.from(n),iv:Array.from(i),version:"1.0",timestamp:Date.now()};return{encryptedData:a,metadata:d}}catch(n){throw console.error("Encryption failed:",n),new Error(`Encryption failed: ${n.message}`)}})}decryptFile(t,s,n){return w(this,null,function*(){try{if(!s||!s.salt||!s.iv)throw new Error("Invalid encryption metadata");const i=new Uint8Array(s.salt),o=new Uint8Array(s.iv),a=yield this.deriveKey(n,i);return yield crypto.subtle.decrypt({name:this.algorithm,iv:o},a,t)}catch(i){throw console.error("Decryption failed:",i),new Error(`Decryption failed: ${i.message}`)}})}encryptFileObject(t,s){return w(this,null,function*(){try{const n=yield t.arrayBuffer(),{encryptedData:i,metadata:o}=yield this.encryptFile(n,s);return{encryptedFile:new File([i],`encrypted_${t.name}`,{type:"application/octet-stream",lastModified:t.lastModified}),metadata:o}}catch(n){throw console.error("File encryption failed:",n),new Error(`File encryption failed: ${n.message}`)}})}decryptFileObject(t,s,n){return w(this,null,function*(){try{const i=yield t.arrayBuffer(),o=yield this.decryptFile(i,s,n),a=t.name.replace("encrypted_","");return new File([o],a,{type:s.originalType||"application/octet-stream",lastModified:t.lastModified})}catch(i){throw console.error("File decryption failed:",i),new Error(`File decryption failed: ${i.message}`)}})}verifyEncryption(t){return w(this,null,function*(){try{const s=new TextEncoder().encode("Glacier Archival E2E Encryption Test"),{encryptedData:n,metadata:i}=yield this.encryptFile(s,t),o=yield this.decryptFile(n,i,t),a=new TextDecoder().decode(s),d=new TextDecoder().decode(o);return a===d}catch(s){return console.error("Encryption verification failed:",s),!1}})}getEncryptionInfo(){return{algorithm:this.algorithm,keyLength:this.keyLength,pbkdf2Iterations:this.pbkdf2Iterations,features:["AES-GCM 256-bit encryption","PBKDF2 key derivation (100,000 iterations)","Random IV for each file","Authentication tags for integrity","Zero-knowledge architecture","Open source implementation"],securityLevel:"Military-grade",compliance:["FIPS 140-2","Common Criteria"]}}}class Oa{constructor(){this.encryption=new La,this.isEncryptionEnabled=!1,this.masterPassword=null,this.encryptionCache=new Map}ensureInitialized(){return w(this,null,function*(){try{if(this.isEnabled())return!0;let t=null;try{t=window.localStorage.getItem("dh_master_key")}catch(s){}if(!t){const s=new Uint8Array(32);(window.crypto||window.msCrypto).getRandomValues(s),t=Array.from(s).map(n=>n.toString(16).padStart(2,"0")).join("");try{window.localStorage.setItem("dh_master_key",t)}catch(n){}}return yield this.initializeEncryption(t),!0}catch(t){return!1}})}initializeEncryption(t){return w(this,null,function*(){try{if(!t||t.length<8)throw new Error("Master password must be at least 8 characters");if(!(yield this.encryption.verifyEncryption(t)))throw new Error("Encryption verification failed");return this.masterPassword=t,this.isEncryptionEnabled=!0,console.log("E2E Encryption initialized successfully"),!0}catch(s){throw console.error("Encryption initialization failed:",s),this.isEncryptionEnabled=!1,this.masterPassword=null,s}})}disableEncryption(){this.isEncryptionEnabled=!1,this.masterPassword=null,this.encryptionCache.clear(),console.log("E2E Encryption disabled")}isEnabled(){return this.isEncryptionEnabled&&!!this.masterPassword}encryptFileForUpload(t,s=null){return w(this,null,function*(){if(!this.isEnabled())throw new Error("Encryption not initialized");try{s&&s(0,"Starting encryption...");const n={originalName:t.name,originalType:t.type,originalSize:t.size,originalLastModified:t.lastModified};s&&s(25,"Reading file data...");const{encryptedFile:i,metadata:o}=yield this.encryption.encryptFileObject(t,this.masterPassword);return s&&s(75,"Finalizing encryption..."),o.originalMetadata=n,this.encryptionCache.set(t.name,o),s&&s(100,"Encryption complete"),console.log(`File encrypted: ${t.name} (${t.size} → ${i.size} bytes)`),{encryptedFile:i,metadata:o}}catch(n){throw console.error("File encryption failed:",n),new Error(`Encryption failed: ${n.message}`)}})}decryptFileAfterDownload(t,s,n=null){return w(this,null,function*(){if(!this.isEnabled())throw new Error("Encryption not initialized");try{n&&n(0,"Starting decryption..."),n&&n(25,"Reading encrypted data...");const i=yield this.encryption.decryptFileObject(t,s,this.masterPassword);if(n&&n(75,"Restoring file properties..."),s.originalMetadata){const o=s.originalMetadata;Object.defineProperty(i,"name",{value:o.originalName,writable:!1}),Object.defineProperty(i,"type",{value:o.originalType,writable:!1})}return n&&n(100,"Decryption complete"),console.log(`File decrypted: ${t.name} (${t.size} → ${i.size} bytes)`),i}catch(i){throw console.error("File decryption failed:",i),new Error(`Decryption failed: ${i.message}`)}})}getEncryptionMetadata(t){return this.encryptionCache.get(t)||null}storeEncryptionMetadata(t,s){this.encryptionCache.set(t,s)}clearEncryptionMetadata(t){this.encryptionCache.delete(t)}getEncryptionStatus(){const t=this.encryption.getEncryptionInfo();return{enabled:this.isEnabled(),initialized:!!this.masterPassword,algorithm:t.algorithm,keyLength:t.keyLength,features:t.features,securityLevel:t.securityLevel,compliance:t.compliance,cachedFiles:this.encryptionCache.size}}testEncryption(){return w(this,null,function*(){if(!this.isEnabled())throw new Error("Encryption not initialized");try{const t=Date.now(),s="Glacier Archival E2E Encryption Test - "+new Date().toISOString(),n=new File([s],"test.txt",{type:"text/plain"}),{encryptedFile:i,metadata:o}=yield this.encryptFileForUpload(n),a=yield this.decryptFileAfterDownload(i,o),c=Date.now()-t,g=(yield a.text())===s;return{success:g,duration:c,originalSize:n.size,encryptedSize:i.size,decryptedSize:a.size,compressionRatio:(i.size/n.size).toFixed(2),message:g?"Encryption test passed":"Encryption test failed"}}catch(t){return{success:!1,error:t.message,message:"Encryption test failed"}}})}getMemoryUsage(){return{cacheSize:this.encryptionCache.size,cacheKeys:Array.from(this.encryptionCache.keys()),memoryEstimate:this.encryptionCache.size*1024}}clearCache(){this.encryptionCache.clear(),console.log("Encryption cache cleared")}}const Xe=new Oa,$a={EXPEDITED:{label:"Quick Wake-Up",emoji:"⚡",time:"1-5 minutes",description:"Fastest restore option",cost:"High",technical:"Expedited"},STANDARD:{label:"Standard Wake-Up",emoji:"🌅",time:"3-5 hours",description:"Default restore option",cost:"Standard",technical:"Standard"},BULK:{label:"Slow Wake-Up",emoji:"🌄",time:"5-12 hours",description:"Cheapest restore option",cost:"Lowest",technical:"Bulk"}},Ba=(r,t=!1)=>{const[s,n]=u.useState(!1),[i,o]=u.useState(!1),[a,d]=u.useState(null),[c,h]=u.useState(!1),[g,f]=u.useState(null),x=_=>w(Y,null,function*(){try{const R=yield Pe.downloadFile(_.id),{download_url:z,filename:D,file_size:se,is_encrypted:le,encryption_metadata:pe}=R.data;f({filename:D,file_size:se,is_encrypted:le,encryption_metadata:pe}),h(!0);const Te=yield fetch(z);if(!Te.ok)throw new Error(`Failed to download file: ${Te.status}`);const de=yield Te.blob();let Ze=de,Ce=D;if(le&&pe&&Xe.isEnabled())try{const Be=new File([de],D,{type:de.type}),F=yield Xe.decryptFileAfterDownload(Be,pe,(be,re)=>{});Ze=F,Ce=F.name}catch(Be){throw console.error(`Decryption failed for ${D}:`,Be),new Error(`Decryption failed: ${Be.message}`)}else if(le&&!Xe.isEnabled())throw new Error("File is encrypted but encryption service is not enabled. Please set up your master password first.");const L=window.URL.createObjectURL(Ze),Qe=document.createElement("a");return Qe.href=L,Qe.download=Ce,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe),window.URL.revokeObjectURL(L),h(!1),{success:!0,message:`Download started for ${Ce}${le?" (decrypted)":""}`}}catch(R){throw console.error("Download failed:",R),h(!1),R}}),C=_=>w(Y,null,function*(){var R,z;try{return _.status==="archived"?{success:!1,message:"File is already hibernated ❄️"}:_.status==="archiving"?{success:!1,message:"File is already hibernating... 🌙"}:_.status!=="uploaded"&&_.status!=="restored"?{success:!1,message:`Cannot hibernate file in ${_.status} state`}:(yield Pe.archiveFile(_.id),{success:!0,message:`❄️ ${_.original_filename} is now hibernating!`})}catch(D){console.error("Archive failed:",D);const se=((z=(R=D.response)==null?void 0:R.data)==null?void 0:z.error)||D.message||"Archive failed";throw alert(`Failed to hibernate file: ${se}`),D}}),m=_=>w(Y,null,function*(){return d(_),o(!0),{success:!0,message:"Restore dialog opened"}}),y=_=>w(Y,null,function*(){try{const R=yield Pe.restoreFile(a.id,_),D=`🌅 Wake-up initiated! Your file will be ready in ${$a[_.toUpperCase()].time}.`;return o(!1),d(null),r&&(yield r()),{success:!0,message:D}}catch(R){throw console.error("Error restoring file:",R),R}}),E=(_,R=!1)=>w(Y,null,function*(){if(!R&&!window.confirm(`🗑️ Delete "${_.original_filename}"?

This will permanently delete the file from:
• Database records
• S3 storage
• Glacier archives (if any)

This action cannot be undone.`))return{success:!1,message:"Delete cancelled"};try{return yield Pe.deleteFile(_.id),r&&(yield r()),{success:!0,message:`🗑️ ${_.original_filename} deleted successfully`}}catch(z){throw console.error("Delete failed:",z),z}});return{loading:s,restoreDialogOpen:i,restoreFile:a,setRestoreDialogOpen:o,setRestoreFile:d,downloadDialogOpen:c,downloadInfo:g,setDownloadDialogOpen:h,setDownloadInfo:f,handleDownload:x,handleArchive:C,handleRestore:m,handleConfirmRestore:y,handleDelete:E,handleBulkAction:(_,R)=>w(Y,null,function*(){try{switch(n(!0),_){case"archive":yield Promise.all(R.map(D=>Pe.archiveFile(D.id)));break;case"restore":yield Promise.all(R.map(D=>Pe.restoreFile(D.id,"Standard")));break;case"download":for(const D of R)yield x(D);break;case"delete":window.confirm(`Are you sure you want to delete ${R.length} files?

This will permanently delete all selected files from:
• Database records
• S3 storage
• Glacier archives (if any)

This action cannot be undone.`)&&(yield Promise.all(R.map(D=>E(D,!0))));break;default:console.warn("Unknown bulk action:",_)}return r&&(yield r(t)),{success:!0,message:`Bulk ${_} completed`}}catch(z){throw console.error(`Error performing bulk ${_}:`,z),z}finally{n(!1)}}),handleHibernationSuggestion:_=>w(Y,null,function*(){try{yield Pe.archiveFile(_.id);const R=`❄️ ${_.original_filename} is now hibernating! You'll save money on storage costs.`;return r&&(yield r(t)),{success:!0,message:R}}catch(R){throw console.error("Error hibernating file:",R),R}}),handleFileAction:(_,R)=>w(Y,null,function*(){try{n(!0);let z;switch(R){case"download":z=yield x(_);break;case"archive":z=yield C(_);break;case"restore":z=yield m(_);break;case"delete":z=yield E(_);break;default:console.warn("Unknown action:",R),z={success:!1,message:`Unknown action: ${R}`}}return z}catch(z){throw console.error(`Error performing ${R} action:`,z),z}finally{n(!1)}})}},Ma=({error:r,onDismiss:t,onUpgrade:s})=>{const n=Et(),i=()=>{s?s():n("/plans")},o=()=>{t&&t()};if(!r)return null;const a=r.type==="STORAGE_LIMIT_EXCEEDED",d=r.currentPlan||r.plan_required;return e.jsx(we,{severity:"error",sx:{mb:3,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.05)"},action:e.jsxs(te,{direction:"row",spacing:1,children:[e.jsx(U,{color:"inherit",size:"small",onClick:o,sx:{fontWeight:600,borderRadius:2,px:2,py:1},children:"Dismiss"}),(a||d)&&e.jsx(U,{variant:"contained",size:"small",onClick:i,sx:{fontWeight:600,borderRadius:2,px:2,py:1,bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:"Upgrade Plan"})]}),children:e.jsxs(p,{children:[e.jsx(l,{variant:"body1",sx:{fontWeight:500,mb:1},children:r.message}),(r.currentUsageGB||r.current_usage_gb)&&e.jsxs(p,{sx:{mt:2},children:[e.jsxs(te,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Current Usage:"}),e.jsx(ge,{label:`${r.currentUsageGB||r.current_usage_gb}GB`,size:"small",color:"primary",variant:"outlined"})]}),r.remainingGB!==void 0&&e.jsxs(te,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Remaining Space:"}),e.jsx(ge,{label:`${r.remainingGB}GB`,size:"small",color:parseFloat(r.remainingGB)>0?"success":"error",variant:"outlined"})]}),r.plan_limit_gb&&e.jsxs(p,{sx:{mt:2},children:[e.jsxs(te,{direction:"row",justifyContent:"space-between",sx:{mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Storage Usage"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[r.current_usage_gb,"GB / ",r.plan_limit_gb,"GB"]})]}),e.jsx(He,{variant:"determinate",value:r.current_usage_gb/r.plan_limit_gb*100,sx:{height:8,borderRadius:4,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:parseFloat(r.current_usage_gb)/parseFloat(r.plan_limit_gb)>.8?"error.main":"primary.main"}}})]})]}),(a||d)&&e.jsx(l,{variant:"body2",sx:{mt:2,opacity:.8},children:r.upgrade_message||"Upgrade to a hibernation plan to get more storage space and continue uploading."})]})})};class Na{constructor(){this.dbName="GlacierArchivalDB",this.version=1,this.db=null}init(){return w(this,null,function*(){return new Promise((t,s)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=()=>s(n.error),n.onsuccess=()=>{this.db=n.result,t(this.db)},n.onupgradeneeded=i=>{const o=i.target.result;if(!o.objectStoreNames.contains("files")){const a=o.createObjectStore("files",{keyPath:"id"});a.createIndex("userId","userId",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1})}if(!o.objectStoreNames.contains("uploads")){const a=o.createObjectStore("uploads",{keyPath:"id"});a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("retryCount","retryCount",{unique:!1})}o.objectStoreNames.contains("metadata")||o.createObjectStore("metadata",{keyPath:"key"})}})})}storeFile(n){return w(this,arguments,function*(t,s={}){return this.db||(yield this.init()),new Promise((i,o)=>{const d=this.db.transaction(["files"],"readwrite").objectStore("files"),c={id:Date.now()+Math.random(),name:t.name,type:t.type,size:t.size,data:t,metadata:ve(k({},s),{timestamp:Date.now(),userId:s.userId||"anonymous"})},h=d.add(c);h.onsuccess=()=>i(c.id),h.onerror=()=>o(h.error)})})}getFile(t){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const a=this.db.transaction(["files"],"readonly").objectStore("files").get(t);a.onsuccess=()=>s(a.result),a.onerror=()=>n(a.error)})})}getUserFiles(t){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const d=this.db.transaction(["files"],"readonly").objectStore("files").index("userId").getAll(t);d.onsuccess=()=>s(d.result),d.onerror=()=>n(d.error)})})}deleteFile(t){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const a=this.db.transaction(["files"],"readwrite").objectStore("files").delete(t);a.onsuccess=()=>s(),a.onerror=()=>n(a.error)})})}storeUploadQueueItem(t){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const o=this.db.transaction(["uploads"],"readwrite").objectStore("uploads"),a=ve(k({id:Date.now()+Math.random()},t),{timestamp:Date.now(),retryCount:0}),d=o.add(a);d.onsuccess=()=>s(a.id),d.onerror=()=>n(d.error)})})}getQueuedUploads(){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const o=this.db.transaction(["uploads"],"readonly").objectStore("uploads").getAll();o.onsuccess=()=>t(o.result),o.onerror=()=>s(o.error)})})}removeQueuedUpload(t){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const a=this.db.transaction(["uploads"],"readwrite").objectStore("uploads").delete(t);a.onsuccess=()=>s(),a.onerror=()=>n(a.error)})})}storeMetadata(t,s){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((n,i)=>{const d=this.db.transaction(["metadata"],"readwrite").objectStore("metadata").put({key:t,value:s,timestamp:Date.now()});d.onsuccess=()=>n(),d.onerror=()=>i(d.error)})})}getMetadata(t){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((s,n)=>{const a=this.db.transaction(["metadata"],"readonly").objectStore("metadata").get(t);a.onsuccess=()=>{var d;return s((d=a.result)==null?void 0:d.value)},a.onerror=()=>n(a.error)})})}getStorageUsage(){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const o=this.db.transaction(["files"],"readonly").objectStore("files").getAll();o.onsuccess=()=>{const a=o.result,d=a.reduce((c,h)=>c+h.size,0);t({fileCount:a.length,totalSize:d,totalSizeMB:Math.round(d/(1024*1024)*100)/100})},o.onerror=()=>s(o.error)})})}clearAll(){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const n=this.db.transaction(["files","uploads","metadata"],"readwrite");n.objectStore("files").clear(),n.objectStore("uploads").clear(),n.objectStore("metadata").clear(),n.oncomplete=()=>t(),n.onerror=()=>s(n.error)})})}clearUploadQueue(){return w(this,null,function*(){return this.db||(yield this.init()),new Promise((t,s)=>{const o=this.db.transaction(["uploads"],"readwrite").objectStore("uploads").clear();o.onsuccess=()=>t(),o.onerror=()=>s(o.error)})})}exportData(){return w(this,null,function*(){this.db||(yield this.init());const t=yield this.getUserFiles("all"),s=yield this.getQueuedUploads();return{files:t,uploads:s,exportDate:new Date().toISOString()}})}importData(t){return w(this,null,function*(){this.db||(yield this.init());try{for(const s of t.files||[])yield this.storeFile(s.data,s.metadata);for(const s of t.uploads||[])yield this.storeUploadQueueItem(s);return!0}catch(s){return console.error("Error importing data:",s),!1}})}}const It=new Na;class Ha{constructor(){this.queue=[],this.subscribers=new Set,this.isRunning=!1,this.concurrent=xr.maxConcurrentUploads,this.activeCount=0,this.initialized=!1,this._emitThrottled=this._throttle(this._emit.bind(this),200),this.activeWorkers=new Set,this._uploadSessionActive=!1,this._currentSessionTotal=0,this._cumulativeCompleted=0,this._cumulativeFailed=0,this._cumulativeCancelled=0}_throttle(t,s){let n,i=0;return function(...o){const a=Date.now();a-i>s?(t.apply(this,o),i=a):(clearTimeout(n),n=setTimeout(()=>{t.apply(this,o),i=Date.now()},s-(a-i)))}}init(){return w(this,null,function*(){if(this.initialized)return;yield It.init();const t=yield It.getQueuedUploads();this.queue=(t||[]).map(s=>({id:s.id,file:s.file||null,relativePath:s.relativePath||"",status:s.status||"queued",progress:s.progress||0,s3Key:s.s3Key||"",error:void 0})),this.initialized=!0,this._emit()})}subscribe(t){this.subscribers.add(t);try{t(this.getState())}catch(s){}return()=>this.subscribers.delete(t)}getState(){const t=new Map,s=new Map;let n=0,i=0,o=0,a=0,d=0,c=0;for(const b of this.queue){t.set(b.status,(t.get(b.status)||0)+1);const $=b.operationType||"upload";s.set($,(s.get($)||0)+1),$==="upload"&&(c+=1,b.status==="queued"?i+=1:b.status==="uploading"?o+=1:b.status==="failed"?a+=1:b.status==="completed"&&(d+=1)),n+=b.size||0}const h=t.get("queued")||0,g=t.get("uploading")||0,f=t.get("failed")||0,x=t.get("completed")||0,C=s.get("delete")||0,m=t.get("deleting")||0,y=this.queue.slice(-50).map(b=>({id:b.id,relativePath:b.relativePath,status:b.status,progress:b.progress,s3Key:b.s3Key,error:b.error,name:b.name,operationType:b.operationType||"upload"})),E=this.queue.filter(b=>b.operationType==="delete").slice(-10).map(b=>({id:b.id,status:b.status,progress:b.progress,completedFiles:b.completedFiles,totalFiles:b.totalFiles,error:b.error}));return{isRunning:g>0,activeCount:g,total:this.queue.length,queued:h,inProgress:g,failed:f,completed:x,uploadTotal:this._uploadSessionActive?this._currentSessionTotal:c,uploadQueued:i,uploadInProgress:o,uploadFailed:this._uploadSessionActive?this._cumulativeFailed:a,uploadCancelled:this._uploadSessionActive?this._cumulativeCancelled:t.get("cancelled")||0,uploadCompleted:this._uploadSessionActive?this._cumulativeCompleted:d,items:y,deleteOperations:E,deleteOperationsCount:C,deleteInProgress:m,totalSize:n,percentage:this.queue.length>0?Math.round(x/this.queue.length*100):0}}_cleanupCompletedItems(){if(this._uploadSessionActive)return;const t=1e4;if(this.queue.length>t){const s=this.queue.filter(n=>n.status==="completed");if(s.length>0){s.sort((i,o)=>i.id.localeCompare(o.id));const n=s.slice(0,Math.min(s.length,this.queue.length-t));this.queue=this.queue.filter(i=>!n.includes(i))}}}cleanupCompletedItems(){this._cleanupCompletedItems()}startUploadSession(t){this._uploadSessionActive=!0,this._currentSessionTotal=t,this._cumulativeCompleted=0,this._cumulativeFailed=0,this._cumulativeCancelled=0}endUploadSession(){return w(this,null,function*(){this._uploadSessionActive=!1,this._currentSessionTotal=0,this._cumulativeCompleted=0,this._cumulativeFailed=0,this._cumulativeCancelled=0;try{const t=this.queue.filter(s=>s.status==="completed"&&s.fileId).map(s=>s.fileId);if(t.length>0){const{mediaAPI:s}=yield js(()=>Promise.resolve().then(()=>Cn),void 0);yield s.markUploadComplete(t)}}catch(t){console.error("Failed to mark upload as complete:",t)}this._cleanupCompletedItems()})}incrementCompleted(){this._cumulativeCompleted+=1,this._emitThrottled()}incrementFailed(){this._cumulativeFailed=(this._cumulativeFailed||0)+1,this._emitThrottled()}incrementCancelled(){this._cumulativeCancelled=(this._cumulativeCancelled||0)+1,this._emitThrottled()}addPlaceholder(t,s=""){const n=`ext_${Date.now()}_${Math.random().toString(16).slice(2)}`,i={id:n,file:null,relativePath:s,status:"queued",progress:0,s3Key:"",error:void 0,name:t,operationType:"upload"};return this.queue.push(i),this._emitThrottled(),n}addPlaceholdersBatch(t){const s=[],n=Date.now(),i=t.map((o,a)=>({id:`ext_${n}_${a}_${Math.random().toString(16).slice(2)}`,file:null,relativePath:o.relativePath||"",status:"queued",progress:0,s3Key:"",error:void 0,name:o.name,size:o.size||0,operationType:"upload"}));return this.queue.push(...i),s.push(...i.map(o=>o.id)),this._emitThrottled(),s}addDeleteOperation(t,s="delete"){const n=`del_${Date.now()}_${Math.random().toString(16).slice(2)}`,i={id:n,file:null,relativePath:"",status:"queued",progress:0,s3Key:"",error:void 0,name:`${s} operation`,operationType:s,fileIds:t,totalFiles:t.length,completedFiles:0};return this.queue.push(i),this._emitThrottled(),n}updatePlaceholder(t,{status:s,progress:n,error:i}){const o=this.queue.find(a=>a.id===t);o&&(typeof s=="string"&&(o.status=s),typeof n=="number"&&(o.progress=n),i!==void 0&&(o.error=i),this._emit())}updateDeleteOperation(t,{status:s,progress:n,completedFiles:i,error:o}){const a=this.queue.find(d=>d.id===t);a&&(typeof s=="string"&&(a.status=s),typeof n=="number"&&(a.progress=n),typeof i=="number"&&(a.completedFiles=i),o!==void 0&&(a.error=o),this._emit())}addFile(n){return w(this,arguments,function*(t,{relativePath:s=""}={}){yield this.init();const i=Date.now()+Math.random(),o={id:i,file:t,relativePath:s,status:"queued",progress:0,s3Key:""};return this.queue.push(o),yield It.storeUploadQueueItem({id:i,relativePath:s,status:"queued",progress:0}),this._emit(),this.isRunning&&this._tick(),i})}start(){this.isRunning=!0,this._emit(),this._tick()}pause(){this.isRunning=!1,this._emit()}cancel(t){return w(this,null,function*(){yield this.init(),this.queue=this.queue.filter(s=>s.id!==t),yield It.removeQueuedUpload(t),this._emit()})}clearAll(){return w(this,null,function*(){yield this.init(),this.queue=[],yield It.clearUploadQueue(),this._emit()})}registerWorker(t){this.activeWorkers.add(t)}unregisterWorker(t){this.activeWorkers.delete(t)}cancelAllUploads(){return w(this,null,function*(){yield this.init(),this.queue.forEach(t=>{t.operationType==="upload"&&(t.status==="queued"||t.status==="uploading")&&(t.status="cancelled",t.progress=0,t.error="Upload cancelled")}),this.activeCount=0,this.isRunning=!1,this.activeWorkers.forEach(t=>{try{t.postMessage({type:"cancel"}),setTimeout(()=>{t.terminate()},100)}catch(s){console.warn("Error cancelling worker:",s)}}),this.activeWorkers.clear(),yield It.clearUploadQueue(),this._emit(),window.dispatchEvent(new CustomEvent("cancelAllUploads")),window.dispatchEvent(new CustomEvent("cancelUpload"))})}_tick(){return w(this,null,function*(){if(this.isRunning)for(;this.activeCount<this.concurrent;){const t=this.queue.find(s=>s.status==="queued");if(!t)break;this._upload(t).catch(()=>{})}})}_upload(t){return w(this,null,function*(){this.activeCount+=1,t.status="uploading",t.progress=0,yield this._persistItem(t),this._emitThrottled();try{const n=(yield Pe.getPresignedUrls({files:[{filename:t.file.name,fileType:t.file.type||"application/octet-stream",fileSize:t.file.size||0,relativePath:t.relativePath||""}]})).data.results[0],{url:i,fields:o}=n.presignedUrl||{},a=n.s3Key,d=n.fileId,c=new FormData;Object.entries(o||{}).forEach(([h,g])=>c.append(h,g)),c.append("file",t.file),yield this._xhrPost(i,c,h=>{t.progress=h,this._emitThrottled()}),t.status="completed",t.progress=100,t.s3Key=a,t.fileId=d,yield this._persistItem(t),this._emitThrottled(),this._cumulativeCompleted+=1}catch(s){t.status="failed",t.error=(s==null?void 0:s.message)||String(s),yield this._persistItem(t),this._emitThrottled()}finally{this.activeCount-=1,t.status==="completed"&&(yield It.removeQueuedUpload(t.id),this.queue=this.queue.filter(s=>s.id!==t.id),this._emitThrottled()),this.isRunning&&this._tick()}})}bulkUpload(t,s=""){return w(this,null,function*(){if(yield this.init(),t.length!==0){this.startUploadSession(t.length);try{const n=xr.bulkBatchSize,i=[];for(let o=0;o<t.length;o+=n)i.push(t.slice(o,o+n));for(let o=0;o<i.length;o++){const a=i[o],d=a.map(f=>({filename:f.name,fileType:f.type||"application/octet-stream",fileSize:f.size||0,relativePath:s})),c=yield Pe.getPresignedUrls({files:d}),{results:h}=c.data,g=a.map((f,x)=>{const C=`bulk_${Date.now()}_${o}_${x}_${Math.random().toString(16).slice(2)}`,m=h[x];return{id:C,file:f,relativePath:s,status:"queued",progress:0,s3Key:m.s3Key,presignedUrl:m.presignedUrl,fileId:m.fileId,error:void 0,operationType:"upload"}});this.queue.push(...g),this._emitThrottled(),o<i.length-1&&(yield new Promise(f=>setTimeout(f,100)))}this.start()}catch(n){console.error("Bulk upload failed:",n),this.queue.forEach(i=>{i.operationType==="upload"&&i.status==="queued"&&(i.status="failed",i.error=n.message||"Bulk upload failed")}),this._emit()}finally{this.endUploadSession()}}})}_bulkUploadItem(t){return w(this,null,function*(){t.status="uploading",t.progress=0,this._emit();try{const{url:s,fields:n}=t.presignedUrl||{};if(!s||!n)throw new Error("Invalid presigned URL response");const i=new FormData;Object.entries(n).forEach(([o,a])=>i.append(o,a)),i.append("file",t.file),yield this._xhrPost(s,i,o=>{t.progress=o,this._emitThrottled()}),t.status="completed",t.progress=100,this._emit()}catch(s){t.status="failed",t.error=s.message||"Upload failed",this._emit()}})}_xhrPost(t,s,n){return new Promise((i,o)=>{const a=new XMLHttpRequest;a.open("POST",t,!0),a.upload.onprogress=d=>{if(!d.lengthComputable)return;const c=Math.round(d.loaded/d.total*100);try{n==null||n(c)}catch(h){}},a.onload=()=>{a.status>=200&&a.status<300?i():o(new Error(`Upload failed with status ${a.status}`))},a.onerror=()=>o(new Error("Network error during upload")),a.send(s)})}_persistItem(t){return w(this,null,function*(){yield It.storeUploadQueueItem({id:t.id,relativePath:t.relativePath,status:t.status,progress:t.progress,s3Key:t.s3Key||""})})}_emit(){const t=this.getState();this.subscribers.forEach(s=>{try{s(t)}catch(n){}})}_emitThrottled(){this._throttleTimer||(this._throttleTimer=setTimeout(()=>{this._throttleTimer=null,this._emit()},200))}}const G=new Ha,nt=(r,t=2)=>{if(r===0)return"0 Bytes";const s=1024,n=t<0?0:t,i=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(r)/Math.log(s));return parseFloat((r/Math.pow(s,o)).toFixed(n))+" "+i[o]},Ga=r=>{const t=[];return r.size>tt.MAX_FILE_SIZE&&t.push({type:"FILE_SIZE_EXCEEDED",message:gr.FILE_SIZE_EXCEEDED,details:`File "${r.name}" is ${nt(r.size)}, maximum allowed is ${nt(tt.MAX_FILE_SIZE)}`}),r.name.length>255&&t.push({type:"FILENAME_TOO_LONG",message:"Filename too long",details:`File "${r.name}" has ${r.name.length} characters, maximum allowed is 255`}),{isValid:t.length===0,errors:t}},hs=r=>{const t=[],s=[];let n=0,i=0;return r.length>tt.MAX_FILES&&t.push({type:"TOO_MANY_FILES",message:gr.TOO_MANY_FILES,details:`Selected ${r.length} files, maximum allowed is ${tt.MAX_FILES}`}),r.forEach((o,a)=>{const d=Ga(o);d.isValid?(i++,n+=o.size):t.push(...d.errors)}),n>tt.MAX_TOTAL_SIZE&&t.push({type:"TOTAL_SIZE_EXCEEDED",message:gr.TOTAL_SIZE_EXCEEDED,details:`Total size is ${nt(n)}, maximum allowed is ${nt(tt.MAX_TOTAL_SIZE)}`}),n>tt.MAX_SESSION_SIZE&&t.push({type:"SESSION_SIZE_EXCEEDED",message:gr.SESSION_SIZE_EXCEEDED,details:`Session size is ${nt(n)}, maximum allowed is ${nt(tt.MAX_SESSION_SIZE)}`}),n>tt.MEMORY_LIMIT&&s.push({type:"MEMORY_LIMIT_WARNING",message:"Large upload detected",details:`Uploading ${nt(n)}. This may take a while.`}),{isValid:t.length===0,errors:t,warnings:s,stats:{totalFiles:r.length,validFiles:i,invalidFiles:r.length-i,totalSize:n,averageFileSize:i>0?n/i:0}}},tn=r=>w(Y,null,function*(){try{const{hibernationAPI:t}=yield js(()=>Promise.resolve().then(()=>Cn),void 0),n=(yield t.getStorageUsage()).data;if(n.current_usage_bytes+r>n.limit_bytes){const o=n.current_usage_gb,a=r/Xt(1024,3),d=n.remaining_gb;return{canUpload:!1,error:{type:"STORAGE_LIMIT_EXCEEDED",message:`Storage limit exceeded! You've used ${o}GB of your ${n.limit_gb}GB ${n.plan_type==="free_tier"?"free tier":n.plan_name}. This upload would add ${a.toFixed(1)}GB, but you only have ${d}GB remaining.`,details:`Current usage: ${nt(n.current_usage_bytes)}, adding ${nt(r)} would exceed the ${nt(n.limit_bytes)} limit`,currentUsageGB:o,fileSizeGB:a.toFixed(1),remainingGB:d,planType:n.plan_type,planName:n.plan_name,limitGB:n.limit_gb,upgradeRequired:!0}}}return{canUpload:!0,remainingSpace:n.remaining_bytes-r,storageData:n}}catch(t){console.error("Error checking storage limit:",t);const s=15*1024*1024*1024,n=r/Xt(1024,3);return r>s?{canUpload:!1,error:{type:"STORAGE_LIMIT_EXCEEDED",message:`File size ${n.toFixed(1)}GB exceeds the 15GB free tier limit. Please upgrade to a hibernation plan.`,details:`File size: ${nt(r)}, Free tier limit: ${nt(s)}`,fileSizeGB:n.toFixed(1),upgradeRequired:!0}}:{canUpload:!0,remainingSpace:s-r}}}),rn=r=>{const t=hs(r).stats;return t.totalSize>tt.MEMORY_LIMIT?"streaming":t.totalFiles>100?"batched":"standard"},sn=(r,t=8)=>r>=t?{canStart:!1,error:{type:"CONCURRENT_UPLOAD_LIMIT",message:gr.CONCURRENT_UPLOAD_LIMIT,details:`Currently ${r} uploads in progress, maximum allowed is ${t}`}}:{canStart:!0,remainingSlots:t-r},On=({onUploadComplete:r,onUploadProgress:t,defaultRelativePath:s=""})=>{const[n,i]=u.useState(!1),[o,a]=u.useState(0),[d,c]=u.useState(""),[h,g]=u.useState([]),[f,x]=u.useState([]),[C,m]=u.useState(!1),[y,E]=u.useState(null),[T,b]=u.useState([]),[$,_]=u.useState([]),[R,z]=u.useState(null),[D,se]=u.useState("standard"),[le,pe]=u.useState(null),[Te,de]=u.useState(!1),[Ze,Ce]=u.useState([]),[L,Qe]=u.useState(!1),M=u.useRef(null),Be=u.useRef(null);u.useRef(null);const F=u.useRef(!1);u.useEffect(()=>{const j=()=>{const N=Xe.getEncryptionStatus();Qe(N.enabled)};j();const W=setInterval(j,1e3);return()=>clearInterval(W)},[]);const be=u.useCallback(j=>w(Y,null,function*(){if(F.current||n){console.warn("Cannot select files while upload is in progress");return}const W=Array.from(j.target.files);if(W.length!==0){if(W.length>tt.MAX_FILES){b([{type:"file_count_exceeded",message:"🚫 Too many files selected!",details:`You selected ${W.length.toLocaleString()} files, but the maximum allowed is ${tt.MAX_FILES.toLocaleString()} files to prevent browser slowdown.`,solution:"💡 Please split your directory into smaller batches of 100,000 files or less.",icon:"⚠️"}]),c(`❌ Selection cancelled: ${W.length.toLocaleString()} files exceeds limit`);return}c("Validating files...");try{const N=hs(W);if(!N.isValid){b(N.errors),_(N.warnings),c(`Validation failed: ${N.errors.length} errors found`);return}const ne=yield tn(N.stats.totalSize);if(!ne.canUpload){b([ne.error]),c("Storage limit exceeded");return}const oe=sn(0);if(!oe.canStart){b([oe.error]),c("Too many concurrent uploads");return}const Ee=rn(W);se(Ee);const J=[{directory:"Individual Files",files:W.map(ue=>({file:ue,name:ue.name,size:ue.size,type:ue.type,relativePath:s})),isDirectory:!1}];g(J),b([]),_(N.warnings),z(ne),c(`Ready to upload ${N.stats.validFiles} files (${nt(N.stats.totalSize)})`)}catch(N){console.error("File validation error:",N),b([{type:"VALIDATION_ERROR",message:"File validation failed",details:N.message}]),c("Validation failed")}}}),[s]),re=u.useCallback(j=>w(Y,null,function*(){if(F.current||n){console.warn("Cannot select directories while upload is in progress");return}const W=Array.from(j.target.files);if(W.length!==0){if(W.length>tt.MAX_FILES){b([{type:"directory_count_exceeded",message:"🚫 Directory too large!",details:`This directory contains ${W.length.toLocaleString()} files, but the maximum allowed is ${tt.MAX_FILES.toLocaleString()} files to prevent browser slowdown.`,solution:"💡 Please split this directory into smaller folders of 100,000 files or less.",icon:"📁"}]),c(`❌ Directory rejected: ${W.length.toLocaleString()} files exceeds limit`);return}c("Validating directory...");try{const N=hs(W);if(!N.isValid){b(N.errors),_(N.warnings),c(`Validation failed: ${N.errors.length} errors found`);return}const ne=yield tn(N.stats.totalSize);if(!ne.canUpload){b([ne.error]),c("Storage limit exceeded");return}const oe=sn(0);if(!oe.canStart){b([oe.error]),c("Too many concurrent uploads");return}const Ee=rn(W);se(Ee),c("Indexing selected directory...");const J=ue=>w(Y,null,function*(){const he=new Map,qe=xr.mainBatchSize,Z=ue.length;for(let xe=0;xe<Z;xe+=qe){const _e=ue.slice(xe,xe+qe);for(const Ye of _e){const Ue=Ye.webkitRelativePath.split("/"),Ne=Ue.pop(),fe=Ue.join("/");he.has(fe)||he.set(fe,[]),he.get(fe).push({file:Ye,name:Ne,size:Ye.size,type:Ye.type,relativePath:s?`${s}/${fe}`:fe})}const at=Math.min(xe+qe,Z);c(`Indexing files... ${at}/${Z} (${Math.round(at/Z*100)}%)`),yield new Promise(Ye=>setTimeout(Ye,0))}return he});try{const ue=yield J(W),he=[];ue.forEach((qe,Z)=>{he.push({directory:Z,files:qe,isDirectory:!0})}),g(he),b([]),_(N.warnings),z(ne),c(`Ready to upload ${W.length} files from ${ue.size} directories`)}catch(ue){console.error("Error processing files:",ue),b([{type:"PROCESSING_ERROR",message:"Error processing files",details:ue.message}]),c("Error processing files. Please try again.")}}catch(N){console.error("Directory validation error:",N),b([{type:"VALIDATION_ERROR",message:"Directory validation failed",details:N.message}]),c("Validation failed")}}}),[s]),[st,Me]=u.useState(!1),Lt=u.useCallback(j=>{j.preventDefault(),j.stopPropagation(),Me(!0)},[]),Vt=u.useCallback(j=>{j.preventDefault(),j.stopPropagation(),Me(!1)},[]),vs=u.useCallback(j=>{if(j.preventDefault(),j.stopPropagation(),Me(!1),F.current||n){console.warn("Cannot drop files while upload is in progress");return}const W=Array.from(j.dataTransfer.files);if(W.length===0)return;if(Array.from(j.dataTransfer.items).some(oe=>oe.kind==="file"&&oe.webkitGetAsEntry&&oe.webkitGetAsEntry().isDirectory)){c('Please use "Select Folder" button for directory uploads');return}be({target:{files:W}})},[be]),jr=()=>w(Y,null,function*(){var j;try{const W=h.reduce((J,ue)=>J+ue.files.length,0),N=h.map(J=>({directory:J.directory,fileCount:J.files.length}));c(`Creating upload session for ${W} files...`);const ne=En.createSession({rootDirectory:((j=h[0])==null?void 0:j.directory)||"upload",totalFiles:W,directoryStructure:N}),oe=new Promise((J,ue)=>{setTimeout(()=>ue(new Error("Session creation timeout")),3e4)}),Ee=yield Promise.race([ne,oe]);return E(Ee.data.sessionId),Ee.data.sessionId}catch(W){throw console.error("Failed to create upload session:",W),W}}),ws=j=>w(Y,null,function*(){const N=[],ne=j.length;for(let oe=0;oe<ne;oe+=1e3){const Ee=j.slice(oe,oe+1e3),J=G.addPlaceholdersBatch(Ee);N.push(...J);const ue=Math.min(oe+1e3,ne);c(`Creating placeholders... ${ue}/${ne} (${Math.round(ue/ne*100)}%)`),yield new Promise(he=>setTimeout(he,0))}return N}),Yt=u.useCallback(()=>{de(!0),c("Cancelling upload...");try{le&&le.abort(),Ze.forEach(j=>{try{j.postMessage({type:"cancel"}),setTimeout(()=>{j.terminate()},100)}catch(W){console.warn("Error cancelling worker:",W)}}),Ce([]),x([]),G.clearAll().catch(j=>{console.warn("Error clearing upload manager:",j)}),G.cleanupCompletedItems()}catch(j){console.error("Error during cancellation:",j)}finally{G.endUploadSession(),i(!1),de(!1),c("Upload cancelled"),pe(null),F.current=!1}},[le,Ze]);u.useEffect(()=>{const j=()=>{n&&Yt()};return window.addEventListener("cancelAllUploads",j),()=>{window.removeEventListener("cancelAllUploads",j)}},[n,Yt]);const Gr=()=>w(Y,null,function*(){if(h.length===0)return;if(F.current||n){console.warn("Upload already in progress, ignoring duplicate request");return}F.current=!0;try{yield G.clearAll(),Ce([])}catch(W){console.warn("Error clearing previous upload state:",W)}const j=new AbortController;pe(j),i(!0),de(!1),a(0),x([]),c("Creating upload session...");try{const W=h.reduce((Z,xe)=>Z+xe.files.length,0);G.startUploadSession(W);const N=yield jr();c("Preparing files for upload..."),c("Preparing file list..."),c(`Prepared ${W} files for upload`),c("Starting uploads..."),c("Starting streaming upload...");const ne=yield qr(h,N,W,j);if(j.signal.aborted)return;x(ne);const oe=ne.filter(Z=>Z.success).length,Ee=ne.length-oe,J=Math.max(0,W-(oe+Ee));G._cumulativeCompleted=oe,G._cumulativeFailed=Ee+J,G._cumulativeCancelled=G._cumulativeCancelled||0,G._currentSessionTotal=W,G._emitThrottled();const ue=ne.filter(Z=>!Z.success),he=ne.filter(Z=>Z.success),qe=he.reduce((Z,xe)=>Z+(xe.fileSize||0),0);if(qt.trackFileUpload(he.length,qe,"web"),Pa(`Upload completed: ${he.length} successful, ${ue.length} failed`,"upload",ue.length>0?"warning":"info",{successful_count:he.length,failed_count:ue.length,total_size_mb:Math.round(qe/(1024*1024))}),he.length>0)try{const Z=rr.baseURL.replace("/api/","/api"),xe=Je.getAccessToken(),_e=yield fetch(`${Z}/media-files/complete_upload_batch/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},credentials:"include",body:JSON.stringify({completed_files:he.length})});if(_e.ok){const at=yield _e.json()}else console.error("[DirectoryUploader] Final complete_upload_batch failed with status:",_e.status)}catch(Z){console.error("[DirectoryUploader] Final complete_upload_batch error:",Z)}ue.length>0?(c(`Upload completed with ${ue.length} failures`),m(!0),qt.trackError("upload_error",`${ue.length} files failed`,"file_upload"),Un(new Error(`Upload failed: ${ue.length} files failed`),{tags:{component:"DirectoryUploader",action:"file_upload"},extra:{failed_count:ue.length,successful_count:he.length,total_files:h.reduce((Z,xe)=>Z+xe.files.length,0)}}),r&&r(),i(!1),de(!1),pe(null),F.current=!1):(c(`Upload completed! ${he.length} files uploaded successfully`),r&&r(),i(!1),de(!1),pe(null),F.current=!1),G.cleanupCompletedItems(),G.endUploadSession(),setTimeout(()=>{g([]),x([])},100)}catch(W){W.name==="AbortError"?c("Upload cancelled"):(console.error("Upload failed:",W),c(`Upload failed: ${W.message}`))}finally{G.endUploadSession(),i(!1),de(!1),pe(null),F.current=!1}}),qr=(j,W,N,ne)=>w(Y,null,function*(){const oe=xr.webWorkerBatchSize;let Ee=0,J=[];for(const ue of j){const he=ue.files,qe=Math.ceil(he.length/oe);for(let Z=0;Z<qe;Z++){if(ne.signal.aborted){const Ne=new Error("Upload cancelled");throw Ne.name="AbortError",Ne}const xe=Z*oe,_e=Math.min(xe+oe,he.length),at=he.slice(xe,_e),Ye=at.map(Ne=>ve(k({},Ne),{directory:ue.directory})),Ge=yield ws(Ye);Ee+=at.length,(Ee%50===0||Ee===N)&&c(`Uploading ${Ee}/${N} files (${Math.round(Ee/N*100)}%)`);const Ue=yield Vr(Ye,W,ne,Ge);J.push(...Ue),at.length=0,Ye.length=0,yield new Promise(Ne=>setTimeout(Ne,10))}}return J}),Vr=(j,W,N,ne)=>w(Y,null,function*(){return new Promise((oe,Ee)=>{const J=new Worker("/upload-worker.js"),ue=[...Ze,J];if(Ce(ue),G.registerWorker(J),N.signal.aborted){J.terminate();const Z=new Error("Upload cancelled");Z.name="AbortError",Ee(Z);return}J.postMessage({type:"upload",files:j,sessionId:W,batchSize:xr.webWorkerBatchSize,accessToken:Je.getAccessToken(),apiBaseUrl:rr.baseURL.replace("/api/","/api")});const he=()=>{J.postMessage({type:"cancel"}),setTimeout(()=>{J.terminate(),Ce(xe=>xe.filter(_e=>_e!==J)),G.unregisterWorker(J);const Z=new Error("Upload cancelled");Z.name="AbortError",Ee(Z)},100)};N.signal.addEventListener("abort",he);let qe=[];J.onmessage=Z=>w(Y,null,function*(){const Ye=Z.data,{type:xe,data:_e}=Ye,at=Ps(Ye,["type","data"]);if(xe==="progress"){if(_e&&_e.placeholderId){const{placeholderId:Ge,progress:Ue,status:Ne,fileIndex:fe}=_e;fe!==void 0&&ne[fe]&&G.updatePlaceholder(ne[fe],{progress:Ue||0,status:Ne||"uploading"})}if(_e&&_e.results&&(qe=[...qe,..._e.results]),_e&&_e.progress>=100){const Ge=Array.isArray(_e==null?void 0:_e.results)?_e.results:[],Ue=new Map;j.forEach((fe,Ct)=>{const Fe=`${fe.relativePath||""}/${fe.name}`;Ue.set(Fe,ne[Ct])}),Ge.forEach(fe=>{const Ct=`${fe.path||""}/${fe.file||""}`,Fe=Ue.get(Ct);Fe&&(fe.success?G.updatePlaceholder(Fe,{status:"completed",progress:100}):G.updatePlaceholder(Fe,{status:fe.error==="Upload cancelled"?"cancelled":"failed",progress:0,error:fe.error})),fe.success?G.incrementCompleted():fe.error==="Upload cancelled"?G.incrementCancelled():G.incrementFailed()});const Ne=new Set(Ge.map(fe=>`${fe.path||""}/${fe.file||""}`));j.forEach((fe,Ct)=>{const Fe=`${fe.relativePath||""}/${fe.name}`;if(!Ne.has(Fe)){const kt=Ue.get(Fe);kt&&G.updatePlaceholder(kt,{status:"failed",progress:0,error:"No result from worker"}),G.incrementFailed()}}),x(fe=>[...fe,...Ge]),J.terminate(),Ce(fe=>fe.filter(Ct=>Ct!==J)),G.unregisterWorker(J),N.signal.removeEventListener("abort",he),oe(Ge)}}else if(xe==="complete")J.terminate(),Ce(Ge=>Ge.filter(Ue=>Ue!==J)),G.unregisterWorker(J),N.signal.removeEventListener("abort",he),oe(qe);else if(xe==="cancelled")ne.forEach(Ge=>{G.updatePlaceholder(Ge,{status:"cancelled",progress:0,error:"Upload cancelled"}),G.incrementCancelled()}),J.terminate(),Ce(Ge=>Ge.filter(Ue=>Ue!==J)),G.unregisterWorker(J),N.signal.removeEventListener("abort",he),oe([]);else if(xe==="error"){const Ge=_e&&_e.error||"Worker error";ne.forEach(Ue=>{G.updatePlaceholder(Ue,{status:"failed",progress:0,error:Ge}),G.incrementFailed()}),J.terminate(),Ce(Ue=>Ue.filter(Ne=>Ne!==J)),G.unregisterWorker(J),N.signal.removeEventListener("abort",he),oe([])}}),J.onerror=Z=>{J.terminate(),Ce(xe=>xe.filter(_e=>_e!==J)),G.unregisterWorker(J),N.signal.removeEventListener("abort",he),ne.forEach(xe=>{G.updatePlaceholder(xe,{status:"failed",progress:0,error:(Z==null?void 0:Z.message)||"Worker error"}),G.incrementFailed()}),oe([])}})}),dr=()=>{g([]),a(0),c(""),x([]),m(!1),E(null),M.current&&(M.current.value=""),Be.current&&(Be.current.value="")},Yr=j=>{if(j===0)return"0 Bytes";const W=1024,N=["Bytes","KB","MB","GB"],ne=Math.floor(Math.log(j)/Math.log(W));return parseFloat((j/Math.pow(W,ne)).toFixed(2))+" "+N[ne]};return e.jsxs(p,{sx:{maxWidth:800,mx:"auto",p:2},children:[e.jsx(Le,{children:e.jsxs(Oe,{children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:"File & Directory Upload"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Upload individual files or entire directories while preserving folder structure"}),e.jsxs(p,{sx:{border:"2px dashed",borderColor:st?"primary.main":n?"warning.main":h.length>0?"success.main":"grey.300",borderRadius:2,p:4,textAlign:"center",bgcolor:st?"primary.50":n?"warning.light":h.length>0?"success.light":"grey.50",opacity:n?.7:1,pointerEvents:n?"none":"auto",transition:"all 0.3s ease",cursor:n?"not-allowed":"pointer",transform:st?"scale(1.02)":"scale(1)","&:hover":{borderColor:n?"warning.main":h.length>0?"success.main":"primary.main",bgcolor:n?"warning.light":h.length>0?"success.main":"primary.50",transform:n?"none":"translateY(-2px)",boxShadow:n?"none":2}},onDragOver:Lt,onDragLeave:Vt,onDrop:vs,children:[e.jsx("input",{ref:M,type:"file",multiple:!0,disabled:n,onChange:be,style:{display:"none"}}),e.jsx("input",{ref:Be,type:"file",multiple:!0,webkitdirectory:"",directory:"",disabled:n,onChange:re,style:{display:"none"}}),st?e.jsxs(p,{children:[e.jsx(rt,{sx:{fontSize:48,mb:2,color:"primary.main"}}),e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600},children:"Drop Files Here"}),e.jsx(l,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"Release to upload your files"})]}):h.length>0?e.jsxs(p,{children:[e.jsx($e,{sx:{fontSize:48,mb:2,color:"success.main"}}),e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{color:"success.main",fontWeight:600},children:"Files Ready for Upload"}),e.jsxs(l,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:[h.reduce((j,W)=>j+W.files.length,0)," files from ",h.length," folders selected"]}),e.jsxs(p,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(U,{variant:"outlined",startIcon:e.jsx(er,{}),onClick:()=>{var j;F.current||n||(j=M.current)==null||j.click()},disabled:n,sx:{minWidth:150},children:"Add More Files"}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(hr,{}),onClick:()=>{var j;F.current||n||(j=Be.current)==null||j.click()},disabled:n,sx:{minWidth:150},children:"Add Folder"})]})]}):e.jsxs(p,{children:[e.jsx(rt,{sx:{fontSize:48,mb:2,color:"primary.main"}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Upload Your Files"}),e.jsx(l,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"Choose files or folders to upload to your secure storage"}),e.jsxs(p,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(U,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:()=>{var j;F.current||n||(j=M.current)==null||j.click()},disabled:n,sx:{minWidth:150,py:1.5},children:"Select Files"}),e.jsx(U,{variant:"contained",startIcon:e.jsx(hr,{}),onClick:()=>{var j;F.current||n||(j=Be.current)==null||j.click()},disabled:n,sx:{minWidth:150,py:1.5},children:"Select Folder"})]}),e.jsx(l,{variant:"caption",sx:{mt:3,display:"block",color:"text.secondary"},children:"Or drag & drop files/folders here"})]})]}),h.length>0&&e.jsxs(p,{sx:{mt:3},children:[e.jsxs(l,{variant:"h6",gutterBottom:!0,children:["Selected Files (",h.reduce((j,W)=>j+W.files.length,0)," files)",h.some(j=>j.isDirectory)&&" - Directory Structure Preserved"]}),e.jsx(xt,{sx:{maxHeight:300,overflow:"auto"},children:h.map((j,W)=>e.jsxs(fr.Fragment,{children:[e.jsxs(Re,{children:[e.jsx(Ie,{children:j.isDirectory?e.jsx(hr,{color:"primary"}):e.jsx(Nt,{color:"secondary"})}),e.jsx(De,{primary:j.directory,secondary:`${j.files.length} files${j.isDirectory?" (directory)":" (individual files)"}`})]}),j.files.map((N,ne)=>e.jsxs(Re,{sx:{pl:4},children:[e.jsx(Ie,{children:e.jsx(Nt,{color:"action"})}),e.jsx(De,{primary:N.name,secondary:Yr(N.size)})]},ne))]},W))})]}),T.length>0&&e.jsx(p,{sx:{mt:2},children:T.map((j,W)=>j.type==="STORAGE_LIMIT_EXCEEDED"?e.jsx(Ma,{error:j,onDismiss:()=>{b(N=>N.filter((ne,oe)=>oe!==W))},onUpgrade:()=>{window.location.href="/plans"}},W):e.jsxs(we,{severity:"error",sx:{mb:1},children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600},children:j.message}),j.details&&e.jsx(l,{variant:"caption",sx:{display:"block",mt:.5},children:j.details})]},W))}),$.length>0&&e.jsx(we,{severity:"info",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[$[0].message,": ",$[0].details]})}),h.length>0&&!n&&T.length===0&&e.jsx(ce,{sx:{p:3,mt:2,bgcolor:"grey.50",border:"1px solid",borderColor:"grey.200"},children:e.jsxs(te,{spacing:2,children:[e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(rt,{sx:{fontSize:48,color:"primary.main",mb:1}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:.5},children:"Ready to Upload"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[h.reduce((j,W)=>j+W.files.length,0)," files from ",h.length," folders"]})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-around",py:2,bgcolor:"white",borderRadius:1},children:[e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:h.reduce((j,W)=>j+W.files.length,0)}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Files"})]}),e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:h.length}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Folders"})]}),e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:L?"🔒":"🔓"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:L?"Encrypted":"Standard"})]})]}),e.jsx(U,{variant:"contained",size:"large",fullWidth:!0,onClick:Gr,disabled:n||T.length>0,sx:{py:1.5,fontSize:"1.1rem",fontWeight:600},children:n?"Uploading...":"Start Upload"})]})}),n&&e.jsxs(p,{sx:{mt:3,p:{xs:2,sm:3},bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider",boxShadow:1},children:[e.jsx(l,{variant:"body2",gutterBottom:!0,sx:{fontWeight:600,fontSize:{xs:"0.875rem",sm:"1rem"},color:"text.primary"},children:d}),e.jsx(He,{variant:"determinate",value:isNaN(o)?0:o,sx:{mb:2,height:{xs:8,sm:6},borderRadius:{xs:4,sm:3},bgcolor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:{xs:4,sm:3},background:"linear-gradient(90deg, #1976d2 0%, #42a5f5 100%)"}}}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[isNaN(o)?"0.0":o.toFixed(1),"% complete"]}),e.jsxs(l,{variant:"body2",color:"primary.main",sx:{fontWeight:600,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[h.reduce((j,W)=>j+W.files.length,0)," files"]})]})]}),e.jsxs(p,{sx:{mt:3,display:"flex",gap:{xs:1,sm:2},flexDirection:{xs:"column",sm:"row"}},children:[n&&e.jsx(U,{variant:"outlined",color:"error",onClick:Yt,disabled:Te,startIcon:e.jsx(ti,{}),fullWidth:!0,sx:{py:{xs:1.5,sm:1},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:600},children:Te?"Cancelling...":"Cancel Upload"}),e.jsx(U,{variant:"outlined",onClick:()=>{if(F.current||n){console.warn("Cannot reset while upload is in progress");return}dr()},disabled:n,startIcon:e.jsx(er,{}),fullWidth:!0,sx:{py:{xs:1.5,sm:1},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:600},children:"Reset"})]})]})}),e.jsxs(bt,{open:C,onClose:()=>m(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(jt,{children:"Upload Results"}),e.jsxs(vt,{children:[e.jsxs(p,{sx:{mb:2},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Summary"}),e.jsxs(p,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(ge,{icon:e.jsx($e,{}),label:`${f.filter(j=>j.success).length} Successful`,color:"success"}),e.jsx(ge,{icon:e.jsx(dt,{}),label:`${f.filter(j=>!j.success).length} Failed`,color:"error"})]})]}),e.jsx(tr,{sx:{my:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"File Details"}),e.jsx(xt,{sx:{maxHeight:400,overflow:"auto"},children:f.map((j,W)=>e.jsxs(Re,{children:[e.jsx(Ie,{children:j.success?e.jsx($e,{color:"success"}):e.jsx(dt,{color:"error"})}),e.jsx(De,{primary:j.file,secondary:j.success?j.path:j.error})]},W))})]}),e.jsx(sr,{children:e.jsx(U,{onClick:()=>m(!1),children:"Close"})})]})]})},qa=({open:r,onClose:t,downloadInfo:s})=>{const[n,i]=u.useState(0),[o,a]=u.useState(""),[d,c]=u.useState(!1),[h,g]=u.useState(null),[f,x]=u.useState(!1);u.useEffect(()=>{r&&s&&(i(0),a("Starting download..."),c(!1),g(null),x(!1))},[r,s]);const C=()=>{d||t()},m=()=>{let y=0;const E=setInterval(()=>{y+=Math.random()*10,y>=90&&(y=90,clearInterval(E),a("Preparing download...")),i(y)},300)};return u.useEffect(()=>{r&&s&&m()},[r,s]),u.useEffect(()=>{s!=null&&s.downloadComplete&&(i(100),x(!0),a("Download complete!"))},[s==null?void 0:s.downloadComplete]),s?e.jsxs(bt,{open:r,onClose:C,maxWidth:"sm",fullWidth:!0,children:[e.jsx(jt,{children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Zt,{color:"primary"}),e.jsx(l,{variant:"h6",children:"Downloading File"})]})}),e.jsxs(vt,{children:[e.jsxs(p,{sx:{mb:2},children:[e.jsx(l,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1},children:s.isBulkDownload?`Bulk Download (${s.fileCount} files)`:s.filename}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.isBulkDownload?`${s.fileCount} files • Total size: ${(s.file_size/(1024*1024)).toFixed(2)} MB`:`Size: ${(s.file_size/(1024*1024)).toFixed(2)} MB`})]}),s.is_encrypted&&e.jsxs(we,{severity:"info",sx:{mb:2},icon:e.jsx(wt,{}),children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:["🔒 Encrypted File",s.isBulkDownload?"s":""]}),e.jsx(l,{variant:"body2",children:s.isBulkDownload?"Some files will be automatically decrypted during download.":"This file will be automatically decrypted during download."}),e.jsxs(p,{sx:{display:"flex",gap:1,mt:1},children:[e.jsx(ge,{label:"AES-GCM 256-bit",size:"small",color:"primary"}),e.jsx(ge,{label:"E2E Encrypted",size:"small",color:"success"})]})]}),h&&e.jsxs(we,{severity:"error",sx:{mb:2},icon:e.jsx(dt,{}),children:[e.jsx(l,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:"Download Failed"}),e.jsx(l,{variant:"body2",children:h})]}),f&&e.jsxs(we,{severity:"success",sx:{mb:2},icon:e.jsx($e,{}),children:[e.jsx(l,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:"Download Complete"}),e.jsx(l,{variant:"body2",children:s.isBulkDownload?s.is_encrypted?"Files downloaded and decrypted successfully!":"Files downloaded successfully!":s.is_encrypted?"File downloaded and decrypted successfully!":"File downloaded successfully!"})]}),e.jsxs(p,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",sx:{mb:1},children:o}),e.jsx(He,{variant:"determinate",value:n,sx:{height:8,borderRadius:4}}),e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[n.toFixed(1),"% complete"]})]}),d&&e.jsxs(p,{sx:{mt:2},children:[e.jsx(l,{variant:"body2",sx:{mb:1},children:"Decrypting file..."}),e.jsx(He,{variant:"indeterminate",sx:{height:4,borderRadius:2}})]})]}),e.jsx(sr,{children:e.jsx(U,{onClick:C,disabled:d,children:f?"Close":"Cancel"})})]}):null},$n=u.memo(({currentFolder:r,onFolderSelect:t,showFolderDetails:s,setShowFolderDetails:n,searchQuery:i,setSearchQuery:o,setShowUploadArea:a,hasUploadOperations:d,onCreateFolder:c,getSelectedCount:h,filteredFiles:g,currentFolderSubfolders:f,selectAll:x,clearSelection:C,onRefresh:m,handleBulkDownload:y,handleBulkHibernate:E,handleBulkWakeUp:T,handleBulkDelete:b})=>{const $=St();return e.jsx(p,{sx:{borderBottom:`1px solid ${v($.palette.divider,.1)}`,bgcolor:v("#ffffff",.5)},children:e.jsx(p,{sx:{px:0,pt:1.5,pb:1},children:e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",sx:{flexWrap:"nowrap",gap:1,overflowX:"auto"},children:[e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",sx:{flex:"0 0 auto",whiteSpace:"nowrap"},children:[e.jsx(ri,{fontSize:"small",sx:{color:"text.secondary",cursor:"pointer"},onClick:()=>{t("root")}}),r!=="root"&&r.split("/").filter(_=>_!=="root").map((_,R,z)=>{const D=z.slice(0,R+1).join("/");return e.jsxs(fr.Fragment,{children:[e.jsx(si,{fontSize:"small",sx:{color:"text.secondary"}}),e.jsx(l,{variant:"body2",sx:{color:R===z.length-1?"primary.main":"text.secondary",fontWeight:R===z.length-1?600:400,cursor:"pointer","&:hover":{textDecoration:"underline"},whiteSpace:"nowrap"},onClick:()=>{t(D)},children:_})]},D)})]}),e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",sx:{flex:"0 0 auto",whiteSpace:"nowrap"},children:[r!=="root"&&e.jsx(pt,{title:"Folder Details",children:e.jsx(Ve,{size:"small",onClick:()=>n(!0),children:e.jsx(an,{fontSize:"small"})})}),e.jsx(ot,{size:"small",placeholder:"Search files...",value:i,onChange:_=>o(_.target.value),sx:{minWidth:{xs:160,md:240}}}),e.jsx(pt,{title:"Upload Files",children:e.jsx(U,{size:"small",startIcon:e.jsx(rt,{}),onClick:()=>a(!0),disabled:d,sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:"Upload"})}),e.jsx(pt,{title:"Create Folder",children:e.jsx(U,{size:"small",startIcon:e.jsx(ni,{}),onClick:c,sx:{textTransform:"none",fontWeight:600},children:"New Folder"})}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",mr:1},children:[e.jsx(Ar,{checked:h()>0&&h()===g.length+f.length,indeterminate:h()>0&&h()<g.length+f.length,onChange:_=>{_.target.checked?x():C()},size:"small",sx:{color:"primary.main","&.Mui-checked":{color:"primary.main"}}}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary",ml:.5},children:"Select All"})]}),e.jsx(pt,{title:"Refresh",children:e.jsx(Ve,{onClick:m,size:"small",sx:{flex:"0 0 auto"},children:e.jsx(er,{fontSize:"small"})})}),h()>0&&e.jsxs(e.Fragment,{children:[e.jsx(pt,{title:`Download ${h()} items`,children:e.jsx(Ve,{onClick:y,size:"small",sx:{bgcolor:v("#3b82f6",.1),"&:hover":{bgcolor:v("#3b82f6",.2)}},children:e.jsx(Zt,{sx:{color:"#3b82f6"}})})}),e.jsx(pt,{title:`Hibernate ${h()} items`,children:e.jsx(Ve,{onClick:E,size:"small",sx:{bgcolor:v("#a78bfa",.1),"&:hover":{bgcolor:v("#a78bfa",.2)}},children:e.jsx(xs,{sx:{color:"#a78bfa"}})})}),e.jsx(pt,{title:`Wake up ${h()} items`,children:e.jsx(Ve,{onClick:T,size:"small",sx:{bgcolor:v("#fbbf24",.1),"&:hover":{bgcolor:v("#fbbf24",.2)}},children:e.jsx(Br,{sx:{color:"#fbbf24"}})})}),e.jsx(pt,{title:`Delete ${h()} items`,children:e.jsx(Ve,{onClick:b,size:"small",sx:{bgcolor:v("#ef4444",.1),"&:hover":{bgcolor:v("#ef4444",.2)}},children:e.jsx(Gt,{sx:{color:"#ef4444"}})})})]})]})]})})})});$n.displayName="FileGridToolbar";const Va=({filteredFiles:r,encryptionEnabled:t})=>{const s=St();return r.length===0?null:e.jsx(ce,{sx:{p:2.5,mb:3,bgcolor:"background.paper",border:`1px solid ${v(s.palette.divider,.1)}`},children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(l,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:"📊 File Status Summary"}),e.jsx(p,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(ge,{icon:e.jsx(wt,{}),label:"E2E Encryption Enabled",size:"small",color:"success",variant:"outlined"})}),(()=>{const n=r.reduce((i,o)=>(i[o.status]=(i[o.status]||0)+1,i),{});return e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(ge,{label:`Hibernated: ${n.archived||0}`,size:"small",sx:{bgcolor:v("#94a3b8",.15),color:"#475569",fontWeight:600}}),e.jsx(ge,{label:`Hibernating: ${n.archiving||0}`,size:"small",sx:{bgcolor:v("#a78bfa",.15),color:"#6b21a8",fontWeight:600}}),e.jsx(ge,{label:`Awake Mode: ${(n.uploaded||0)+(n.restored||0)}`,size:"small",sx:{bgcolor:v("#60a5fa",.15),color:"#0c4a6e",fontWeight:600}})]})})()]})})},Bn=u.memo(({uploadManagerState:r,bulkOperationStatus:t,bulkOperationType:s})=>{const i=(r.deleteOperations||[]).find(o=>o&&o.status==="deleting");if(i){const o=i.totalFiles||0,a=i.completedFiles||0;if(o>0){const c=o>0?Math.round(a/o*100):0,h=o-a;return e.jsx(rs,{in:!0,timeout:150,children:e.jsx(p,{sx:{px:{xs:2,md:3},pt:1.5},children:e.jsxs(ce,{sx:{p:2,border:`1px solid ${v("#f59e0b",.2)}`,background:`linear-gradient(135deg, ${v("#f59e0b",.05)} 0%, ${v("#f59e0b",.02)} 100%)`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.15s ease"},children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(p,{sx:{p:1,borderRadius:"50%",bgcolor:v("#f59e0b",.1),display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Gt,{sx:{color:"#f59e0b",fontSize:20}})}),e.jsxs(p,{sx:{flex:1},children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:600,color:"#f59e0b"},children:["🗑️ Deleting ",h," of ",o," files"]}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[a," completed • ",h," remaining"]})]}),e.jsxs(l,{variant:"caption",sx:{fontWeight:600,color:"#f59e0b",bgcolor:v("#f59e0b",.1),px:1.5,py:.5,borderRadius:1},children:[c,"%"]})]}),e.jsx(He,{variant:"determinate",value:c,sx:{mt:1.5,height:8,borderRadius:4,bgcolor:v("#f59e0b",.1),"& .MuiLinearProgress-bar":{bgcolor:"#f59e0b",borderRadius:4}}})]})})})}}if(t==="completed"){let o="Operation completed successfully!",a=$e,d="#374151",c="#f3f4f6",h="#6b7280";return s==="delete"?(o="Deletion Completed Successfully!",a=$e,d="#374151",c="#f3f4f6",h="#6b7280"):s==="hibernate"?(o="Hibernation Completed Successfully!",a=xs,d="#6d28d9",c="#f5f3ff",h="#a78bfa"):s==="restore"&&(o="Restore Initiated Successfully!",a=Br,d="#b45309",c="#fffbeb",h="#f59e0b"),e.jsx(p,{sx:{px:{xs:2,md:3},mb:4},children:e.jsx(ce,{sx:{p:2.5,bgcolor:v(c,.6),border:"1px solid",borderColor:h},children:e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(a,{sx:{color:d}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:d},children:o})]})})})}if(t==="error"){let o="Operation failed",a=dt,d="#991b1b",c="#fee2e2",h="#ef4444";return s==="delete"?o="Some files failed to delete":s==="hibernate"?o="Hibernation failed - Active hibernation plan required":s==="restore"&&(o="Restore failed"),e.jsx(p,{sx:{px:{xs:2,md:3},mb:4},children:e.jsx(ce,{sx:{p:2.5,bgcolor:v(c,.3),border:"1px solid",borderColor:h},children:e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(a,{sx:{color:d}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:d},children:o})]})})})}if(t==="partial"){let o="Operation completed with some failures",a=dt,d="#b45309",c="#fffbeb",h="#f59e0b";return s==="hibernate"&&(o="Hibernation completed with some failures - Check hibernation plan"),e.jsx(p,{sx:{px:{xs:2,md:3},mb:4},children:e.jsx(ce,{sx:{p:2.5,bgcolor:v(c,.3),border:"1px solid",borderColor:h},children:e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(a,{sx:{color:d}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:d},children:o})]})})})}return null});Bn.displayName="BulkOperationProgress";const Ya=ii`
  0%, 100% { box-shadow: 0 0 10px rgba(167, 139, 250, 0.2); }
  50% { box-shadow: 0 0 20px rgba(167, 139, 250, 0.4); }
`,Mn=u.memo(({currentFolderSubfolders:r,filteredFiles:t,selectedFolders:s,selectedFiles:n,toggleFolderSelection:i,toggleFileSelection:o,onFolderClick:a,onFileClick:d,handleFolderToggle:c,formatFileSize:h,getFolderStatus:g})=>e.jsxs(A,{container:!0,spacing:2,children:[r.map(f=>e.jsx(A,{item:!0,xs:12,sm:6,md:3,lg:2,xl:2,children:e.jsx(rs,{in:!0,timeout:300,children:e.jsxs(Le,{sx:k({height:"100%",cursor:"pointer",transition:"all 0.3s",background:"background.paper",border:`1px solid ${v("#60a5fa",.2)}`,position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${v("#60a5fa",.2)}`,borderColor:"#60a5fa"}},s.has(f.path)&&{borderColor:"#60a5fa",bgcolor:v("#60a5fa",.1)}),onClick:x=>{x.target.type!=="checkbox"&&(a(f.path),c(f.path))},children:[e.jsx(p,{sx:{position:"absolute",top:8,right:8,zIndex:1},onClick:x=>x.stopPropagation(),children:e.jsx(Ar,{checked:s.has(f.path),onChange:()=>i(f.path),size:"small",sx:{color:"#60a5fa","&.Mui-checked":{color:"#60a5fa"}}})}),e.jsx(Oe,{sx:{px:1.5,py:1.5},children:e.jsxs(te,{spacing:1.5,children:[e.jsx(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:80,borderRadius:2,background:`linear-gradient(135deg, ${v("#60a5fa",.1)}, ${v("#a78bfa",.1)})`},children:e.jsx(hr,{sx:{fontSize:48,color:"#60a5fa"}})}),e.jsxs(p,{children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600,mb:.25,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f.name}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{lineHeight:1},children:[f.fileCount," files • ",h(f.size)]})]}),(()=>{const x=g(f.path);return x?e.jsx(ge,{icon:x.icon,label:x.label,size:"small",sx:{bgcolor:v(x.color,.1),color:x.color,fontWeight:600,borderRadius:1.5,border:`1px solid ${v(x.color,.3)}`,fontSize:"0.75rem",height:24}}):null})()]})})]})})},`folder-${f.path}`)),t.map(f=>{const x=ur(f.status),C=["archiving","restoring"].includes(f.status);return e.jsx(A,{item:!0,xs:12,sm:6,md:3,lg:2,xl:2,children:e.jsx(rs,{in:!0,timeout:300,children:e.jsxs(Le,{sx:k(k({height:"100%",cursor:"pointer",transition:"all 0.3s",background:"background.paper",border:`1px solid ${v(x.color,.2)}`,position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${v(x.color,.2)}`,borderColor:x.color}},x.glow&&{animation:`${Ya} 2s infinite`,boxShadow:`0 0 20px ${v(x.color,.3)}`}),n.has(f.id)&&{borderColor:x.color,bgcolor:v(x.color,.1)}),onClick:m=>{m.target.type!=="checkbox"&&d(f)},children:[e.jsx(p,{sx:{position:"absolute",top:8,right:8,zIndex:1},onClick:m=>m.stopPropagation(),children:e.jsx(Ar,{checked:n.has(f.id),onChange:()=>o(f.id),size:"small",sx:{color:x.color,"&.Mui-checked":{color:x.color}}})}),e.jsx(Oe,{children:e.jsxs(te,{spacing:1.5,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:80,borderRadius:2,background:`linear-gradient(135deg, ${v(x.color,.1)} 0%, ${v(x.color,.05)} 100%)`,position:"relative",overflow:"hidden"},children:[e.jsx(Nt,{sx:k({fontSize:48,color:x.color},x.animation&&{animation:`${x.animation} 2s infinite`})}),C&&e.jsx(He,{sx:{position:"absolute",bottom:0,left:0,right:0,height:3,bgcolor:v(x.color,.1),"& .MuiLinearProgress-bar":{bgcolor:x.color}}})]}),e.jsx(pt,{title:f.original_filename,children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f.original_filename}),f.is_encrypted&&e.jsx(pt,{title:"Encrypted with E2E encryption",children:e.jsx(wt,{sx:{fontSize:12,color:"success.main"}})})]})}),e.jsx(te,{spacing:0,children:e.jsx(l,{variant:"caption",color:"text.secondary",sx:{lineHeight:1},children:h(f.file_size)})}),e.jsx(ge,{icon:x.icon,label:x.label,size:"small",sx:{bgcolor:v(x.color,.1),color:x.color,fontWeight:600,borderRadius:1.5}})]})})]})})},f.id)})]}));Mn.displayName="FileGrid";const Nn=u.memo(({selectedFile:r,onClose:t,formatFileSize:s,formatDate:n,handleDownload:i,handleArchive:o,handleRestore:a,handleDelete:d,loadFiles:c,uploadManagerState:h})=>{const g=St();return r?e.jsx(oi,{direction:"left",in:!!r,mountOnEnter:!0,unmountOnExit:!0,children:e.jsxs(ce,{elevation:0,sx:{width:{xs:"100%",lg:320},height:{xs:"auto",lg:"100%"},maxHeight:{xs:"400px",lg:"none"},borderRadius:0,borderLeft:{xs:"none",lg:`1px solid ${v(g.palette.divider,.1)}`},borderTop:{xs:`1px solid ${v(g.palette.divider,.1)}`,lg:"none"},background:"background.paper",display:"flex",flexDirection:"column",p:3,gap:2,flexShrink:0,overflow:"auto"},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700},children:"File Details"}),e.jsx(Ve,{size:"small",onClick:t,children:e.jsx(ln,{})})]}),e.jsx(p,{sx:{height:150,borderRadius:2,background:`linear-gradient(135deg, ${v("#60a5fa",.1)} 0%, ${v("#a78bfa",.1)} 100%)`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Nt,{sx:{fontSize:64,color:"#60a5fa"}})}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,wordBreak:"break-word"},children:r.original_filename}),e.jsx(tr,{}),e.jsxs(te,{spacing:2,children:[e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Size"}),e.jsx(l,{variant:"body2",children:s(r.file_size)})]}),e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Uploaded"}),e.jsx(l,{variant:"body2",children:n(r.uploaded_at)})]}),e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Status"}),e.jsx(ge,{icon:ur(r.status).icon,label:ur(r.status).label,size:"small",sx:{mt:.5,bgcolor:v(ur(r.status).color,.1),color:ur(r.status).color,fontWeight:600}})]}),r.glacier_archive_id&&e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Archive ID"}),e.jsx(l,{variant:"caption",sx:{display:"block",mt:.5,fontFamily:"monospace",bgcolor:v("#f1f5f9",.5),p:1,borderRadius:1,wordBreak:"break-all"},children:r.glacier_archive_id})]})]}),(()=>{const f=h.items||[],x=(r==null?void 0:r.relative_path)||"";if(!x)return null;const m=f.filter(D=>D.operationType==="upload"||!D.operationType).filter(D=>{const se=D.relativePath||"";return se===x||se.startsWith(x+"/")||se.startsWith(x)}),y=m.length,E=m.filter(D=>D.status==="completed").length,T=m.filter(D=>D.status==="uploading").length,b=m.filter(D=>D.status==="queued").length,$=y>0&&(T>0||b>0),_=y>0?Math.round(m.reduce((D,se)=>D+(se.progress||0),0)/y):0,R=y>0?Math.max(_,Math.round(E/y*100)):0,z=T===0&&b>0;return!$&&R===0?null:e.jsxs(p,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"Upload Status"}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,sx:{mt:.5},children:[e.jsx(rt,{sx:{color:"#60a5fa"}}),e.jsx(l,{variant:"body2",sx:{fontWeight:600},children:z?"Starting uploads…":`Uploading ${Math.max(Math.floor((y-E)/100)*100,0)} of ${y} files`})]}),z?e.jsx(He,{variant:"indeterminate",sx:{mt:1,height:8,borderRadius:4}}):e.jsxs(e.Fragment,{children:[e.jsx(He,{variant:"determinate",value:R,sx:{mt:1,height:8,borderRadius:4}}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[R,"% complete • ",T," in progress • ",b," queued • ",E," completed"]})]})]})})(),e.jsx(tr,{}),e.jsxs(te,{spacing:1,children:[e.jsx(U,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Zt,{}),sx:{textTransform:"none",fontWeight:600},onClick:()=>i(r),children:"Download"}),r.status==="uploaded"&&e.jsx(U,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(xs,{}),onClick:()=>w(Y,null,function*(){try{yield o(r),c(!0)}catch(f){console.error("Hibernate failed:",f)}}),sx:{textTransform:"none",fontWeight:600,color:"#a78bfa",borderColor:"#a78bfa"},children:"Hibernate"}),r.status==="archived"&&e.jsx(U,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Br,{}),onClick:()=>w(Y,null,function*(){try{yield a(r),yield c(!0)}catch(f){console.error("Wake failed:",f)}}),sx:{textTransform:"none",fontWeight:600,color:"#fbbf24",borderColor:"#fbbf24"},children:"Wake Up"}),e.jsx(U,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Ir,{}),sx:{textTransform:"none",fontWeight:600},children:"Share"}),e.jsx(U,{fullWidth:!0,variant:"outlined",color:"error",startIcon:e.jsx(Gt,{}),onClick:()=>w(Y,null,function*(){try{yield d(r),t(),c(!0)}catch(f){console.error("Delete failed:",f)}}),sx:{textTransform:"none",fontWeight:600},children:"Delete"})]})]})}):null});Nn.displayName="FileDetailsPanel";const Hn=u.memo(({open:r,onClose:t,currentFolder:s})=>s==="root"?null:e.jsx(ai,{anchor:"right",open:r,onClose:t,sx:{zIndex:n=>n.zIndex.drawer+1},children:e.jsxs(p,{sx:{width:{xs:320,sm:360},p:3,display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:700},children:"Folder Details"}),e.jsx(Ve,{size:"small",onClick:t,children:e.jsx(ln,{})})]}),e.jsx(p,{sx:{height:120,borderRadius:2,background:`linear-gradient(135deg, ${v("#60a5fa",.1)} 0%, ${v("#a78bfa",.1)} 100%)`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(hr,{sx:{fontSize:64,color:"#60a5fa"}})}),e.jsx(l,{variant:"body1",sx:{fontWeight:600,wordBreak:"break-word"},children:s}),e.jsx(tr,{})]})}));Hn.displayName="FolderDetailsDrawer";const Gn=u.memo(({open:r,count:t,onClose:s,onConfirm:n})=>e.jsxs(bt,{open:r,onClose:s,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(jt,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Gt,{color:"error"}),"Confirm Bulk Delete"]}),e.jsxs(vt,{children:[e.jsxs(l,{variant:"body1",children:["Are you sure you want to delete ",e.jsx("strong",{children:t})," items?"]}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This action cannot be undone. All selected files and folders will be permanently removed."})]}),e.jsxs(sr,{children:[e.jsx(U,{onClick:s,color:"inherit",children:"Cancel"}),e.jsxs(U,{onClick:n,color:"error",variant:"contained",startIcon:e.jsx(Gt,{}),children:["Delete ",t," Items"]})]})]}));Gn.displayName="BulkDeleteDialog";const nn=r=>{if(!r)return"0 B";const t=1024,s=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(r)/Math.log(t));return`${parseFloat((r/Math.pow(t,n)).toFixed(2))} ${s[n]}`},Ka=r=>new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),Xa=u.memo(({uploadManagerState:r,files:t})=>{const s=(r==null?void 0:r.uploadTotal)||0,n=(r==null?void 0:r.uploadCompleted)||0,i=(r==null?void 0:r.uploadFailed)||0,o=(r==null?void 0:r.uploadCancelled)||0,a=(r==null?void 0:r.uploadInProgress)||0,d=(r==null?void 0:r.uploadQueued)||0,h=((t==null?void 0:t.filter(T=>T.status==="uploading"))||[]).length>0,g=n+i+o,f=Math.min(g,s),x=Math.min(f+10,s),C=s>0?Math.floor(x/s*100):0,m=s>0&&(a>0||d>0);if(!((h||m)&&C<100))return null;const E=()=>{G.cancelAllUploads()};return e.jsx(p,{sx:{px:{xs:2,md:3},pt:1.5},children:e.jsx(ce,{sx:{p:2,border:"1px solid #e0e0e0"},children:e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(rt,{sx:{color:"#60a5fa"}}),e.jsxs(p,{sx:{flex:1},children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:["📤 Uploading ",x,"/",s," files (",C,"%)",(i>0||o>0)&&e.jsxs(l,{component:"span",variant:"caption",sx:{ml:1,color:"text.secondary"},children:[i>0?`(${i} failed`:"(",o>0?`${i>0?", ":""}${o} cancelled`:"",")"]})]}),e.jsx(He,{variant:"determinate",value:C,sx:{mt:1,height:8,borderRadius:4}})]}),e.jsx(U,{variant:"outlined",color:"error",size:"small",onClick:E,sx:{minWidth:"auto"},children:"Cancel"})]})})})}),Ja=({onFileSelect:r,onFolderSelect:t,globalSearchQuery:s,isActive:n})=>{St();const[i,o]=u.useState([]),[a,d]=u.useState([]),[c,h]=u.useState("root"),[g,f]=u.useState(new Set(["root"]));u.useState(new Set);const[x,C]=u.useState(new Set),[m,y]=u.useState(new Set),[E,T]=u.useState(""),[b,$]=u.useState(0),[_,R]=u.useState(null),[z,D]=u.useState(!1),[se,le]=u.useState(!0),[pe,Te]=u.useState(!1);u.useState(!1);const[de,Ze]=u.useState({total:0,completed:0,inProgress:0,queued:0}),[Ce,L]=u.useState({open:!1,count:0}),[Qe,M]=u.useState({}),[Be,F]=u.useState(null),[be,re]=u.useState({current:0,total:0}),[st,Me]=u.useState(null),[Lt,Vt]=u.useState({}),[vs,jr]=u.useState(0),[ws,Yt]=u.useState(""),[Gr,qr]=u.useState(!1),Vr=!1,dr=u.useMemo(()=>de.uploadInProgress>0,[de.uploadInProgress]);u.useMemo(()=>dr?{title:"Upload in progress...",subtitle:"Please wait for current upload to complete"}:{title:b===0?"No active files":"No hibernated files",subtitle:b===0?"Click here or drag files to upload":"Hibernate some files to see them here"},[dr,b]);const{handleArchive:Yr,handleDelete:j,handleDownload:W,downloadDialogOpen:N,downloadInfo:ne,setDownloadDialogOpen:oe,setDownloadInfo:Ee}=Ba(Fe,!0),J=u.useCallback(S=>{C(H=>{const P=new Set(H);return P.has(S)?P.delete(S):P.add(S),P})},[]),ue=u.useCallback(S=>{y(H=>{const P=new Set(H);return P.has(S)?P.delete(S):P.add(S),P})},[]),he=u.useCallback(()=>{C(new Set),y(new Set)},[]),qe=u.useCallback(()=>x.size+m.size,[x.size,m.size]),Z=u.useCallback(()=>i.filter(S=>x.has(S.id)),[i,x]),xe=u.useCallback(()=>a.filter(S=>m.has(S.path)),[a,m]),_e=(S,H)=>{const P=[];for(const V of H){const O=i.filter(q=>{var I;return(I=q.relative_path)==null?void 0:I.startsWith(V.path)}).filter(q=>q.status==="archiving");O.length>0&&P.push({type:"folder_has_hibernating_files",folder:V.name,hibernatingCount:O.length,hibernatingFiles:O.map(q=>q.original_filename)})}const Q=S.filter(V=>V.status==="archiving");return Q.length>0&&P.push({type:"files_already_hibernating",hibernatingFiles:Q.map(V=>V.original_filename)}),P},at=u.useMemo(()=>{const S=new Map;return a.forEach(H=>{const P=H.path;let Q=[],V=H.statusCounts;if(!V&&(Q=i.filter(K=>{var X;return(X=K.relative_path)==null?void 0:X.startsWith(P)}),Q.length===0)){S.set(P,null);return}const ee=V||Q.reduce((K,X)=>(K[X.status]=(K[X.status]||0)+1,K),{}),O=V?Object.values(ee).reduce((K,X)=>K+X,0):Q.length,q=ee.archived||0,I=ee.archiving||0,ae=ee.restoring||0,Ae=(ee.uploaded||0)+(ee.restored||0),je=(q+I)/O;if(ae>0){S.set(P,{type:"restoring",count:ae,total:O,icon:e.jsx(Br,{sx:{fontSize:14}}),color:"#fbbf24",label:`${ae} waking`});return}je>=.5?S.set(P,{type:"hibernated",count:q,total:O,icon:e.jsx(_t,{sx:{fontSize:14}}),color:"#94a3b8",label:`${q}/${O} hibernated`}):I>0?S.set(P,{type:"hibernating",count:I,total:O,icon:e.jsx(ts,{sx:{fontSize:14}}),color:"#a78bfa",label:`${I} hibernating`}):je>0?S.set(P,{type:"mixed",count:q,total:O,icon:e.jsx(_t,{sx:{fontSize:14}}),color:"#64748b",label:`${q}/${O} hibernated`}):S.set(P,{type:"active",count:Ae,total:O,icon:e.jsx($e,{sx:{fontSize:14}}),color:"#22c55e",label:"Active"})}),S},[i,a]),Ye=u.useCallback(S=>at.get(S)||null,[at]),Ge=()=>w(Y,null,function*(){var ee,O;const S=Z(),H=xe(),P=_e(S,H);if(P.length>0){let q=`❄️ Cannot hibernate due to conflicts:

`;P.forEach(I=>{I.type==="folder_has_hibernating_files"?(q+=`• Folder "${I.folder}" has ${I.hibernatingCount} files already hibernating
`,q+=`  Files: ${I.hibernatingFiles.slice(0,3).join(", ")}${I.hibernatingFiles.length>3?"...":""}

`):I.type==="files_already_hibernating"&&(q+=`• ${I.hibernatingFiles.length} selected files are already hibernating
`,q+=`  Files: ${I.hibernatingFiles.slice(0,3).join(", ")}${I.hibernatingFiles.length>3?"...":""}

`)}),q+="Please wait for current hibernation to complete or select different files/folders.",alert(q);return}const Q=[...S];for(const q of H)try{const I=yield Pe.getFiles({folder:q.path,paginate:!1});I.data&&Array.isArray(I.data.files)&&Q.push(...I.data.files)}catch(I){}const V=Q.filter(q=>q.status==="uploaded"||q.status==="restored");if(V.length===0){alert('No files available for hibernation. Files must be in "uploaded" or "restored" state.');return}try{const q=yield Ut.getCurrentPlan(),I=q==null?void 0:q.data;if(!I||I.is_free_tier){Me("hibernate"),F("error");return}}catch(q){Me("hibernate"),F("error");return}Me("hibernate"),F("in_progress"),M({}),V.forEach(q=>{M(I=>ve(k({},I),{[q.id]:{status:"pending",progress:0}}))});try{let q=0,I=0,ae=!1;const Ae=10,je=[];for(let K=0;K<V.length;K+=Ae)je.push(V.slice(K,K+Ae));re({current:0,total:je.length});for(let K=0;K<je.length;K++){const X=je[K];re({current:K+1,total:je.length}),X.forEach(ie=>{M(ke=>ve(k({},ke),{[ie.id]:{status:"in_progress",progress:50}}))});const ye=X.map(ie=>ie.id);try{const ie=yield Pe.bulkArchiveFiles(ye),ke=((ee=ie==null?void 0:ie.data)==null?void 0:ee.failed_files)||[],me=new Set(ke.map(Se=>Se.id));X.forEach(Se=>{me.has(Se.id)?(M(et=>ve(k({},et),{[Se.id]:{status:"error",progress:0}})),I++):(M(et=>ve(k({},et),{[Se.id]:{status:"completed",progress:100}})),q++)})}catch(ie){((O=ie==null?void 0:ie.response)==null?void 0:O.status)===402&&(ae=!0),X.forEach(ke=>{M(me=>ve(k({},me),{[ke.id]:{status:"error",progress:0}})),I++})}if(ae){F("error");break}K<je.length-1&&(yield new Promise(ie=>setTimeout(ie,1e3)))}I>0&&q===0?F("error"):I>0?F("partial"):F("completed"),setTimeout(()=>{he(),Fe(!0),F(null),M({}),Me(null)},2e3)}catch(q){console.error("Bulk hibernation failed:",q),F("error"),setTimeout(()=>{F(null),M({}),Me(null)},3e3)}}),Ue=()=>w(Y,null,function*(){const S=Z(),H=xe();try{const P=S.filter(V=>V.status==="archived").map(V=>V.id);for(const V of H)try{const ee=yield Pe.getFiles({folder:V.path,paginate:!1});ee.data&&Array.isArray(ee.data.files)&&ee.data.files.forEach(O=>{O.status==="archived"&&P.push(O.id)})}catch(ee){}const Q=25;for(let V=0;V<P.length;V+=Q){const ee=P.slice(V,V+Q);ee.length>0&&(yield Pe.bulkRestoreFiles(ee,"Standard"),yield new Promise(O=>setTimeout(O,500)))}he(),Fe(!0)}catch(P){console.error("Bulk wake up failed:",P)}}),Ne=()=>w(Y,null,function*(){if(Ne.active)return;Ne.active=!0;const S=Date.now(),H={current:0},P=Z(),Q=xe();if(P.length===0&&Q.length===0)return;const V=[...P];for(const O of Q)try{const q=yield Pe.getFiles({folder:O.path,paginate:!1});q.data&&Array.isArray(q.data.files)&&V.push(...q.data.files)}catch(q){}const ee=V.filter(O=>O.status==="uploaded"||O.status==="restored");if(ee.length===0){alert('No files available for download. Files must be in "uploaded" or "restored" state.');return}try{Ee({filename:`bulk_download_${Date.now()}.zip`,file_size:ee.reduce((X,ye)=>X+ye.file_size,0),is_encrypted:ee.some(X=>X.is_encrypted),encryption_metadata:null,isBulkDownload:!0,fileCount:ee.length}),oe(!0);const O=ee.map(X=>X.id),I=(yield Pe.bulkDownloadFiles(O)).data.download_urls;let ae=I.length>10&&typeof Worker!="undefined",Ae;if(ae)try{Ae=yield new Promise((X,ye)=>{const ie=new Worker(`/download-worker.js?v=${Date.now()}`);let ke=0,me=0;ie.onmessage=Se=>{const{type:et,payload:We}=Se.data;if(et==="PROGRESS"){const wr=Date.now(),Ot=Math.max(H.current,Math.min(99,We.progress||0));(Ot-ke>=1||wr-me>=100)&&(H.current=Ot,ke=Ot,me=wr,Ee($t=>ve(k({},$t),{progress:Ot,message:We.message})))}else et==="COMPLETE"?(ie.terminate(),X(We.zipBlob)):et==="ERROR"&&(ie.terminate(),ye(new dt(We.error)))},ie.onerror=Se=>{ie.terminate(),ye(Se)},ie.postMessage({type:"START_DOWNLOAD",payload:{downloadUrls:I,encryptionKey:Xe.isEnabled()?!0:null,sessionId:S}})})}catch(X){console.warn("Worker failed, falling back to main thread:",X),ae=!1}if(!ae){const X=(yield js(()=>import("./utils-76a9f601.js").then(me=>me.j),["assets/utils-76a9f601.js","assets/vendor-950dbbc1.js"])).default,ye=new X,ie=5,ke=[];for(let me=0;me<I.length;me+=ie){const et=I.slice(me,me+ie).map((We,wr)=>w(Y,null,function*(){const Ot=me+wr;if(We.error){console.error(`Download failed for ${We.filename}: ${We.error}`);return}try{const $t=yield fetch(We.download_url);if(!$t.ok)throw new dt(`Failed to download ${We.filename}: ${$t.status}`);let _r=yield $t.blob(),Kr=We.filename;if(We.is_encrypted&&We.encryption_metadata&&Xe.isEnabled())try{const Kt=new File([_r],We.filename,{type:_r.type}),Ss=yield Xe.decryptFileAfterDownload(Kt,We.encryption_metadata);_r=Ss,Kr=Ss.name}catch(Kt){throw console.error(`Decryption failed for ${We.filename}:`,Kt),new dt(`Decryption failed for ${We.filename}: ${Kt.message}`)}else if(We.is_encrypted&&!Xe.isEnabled())throw new dt(`File ${We.filename} is encrypted but encryption service is not enabled.`);const _s=We.relative_path||"",Kn=_s?`${_s}/${Kr}`:Kr;ye.file(Kn,_r);const Xn=Math.round((Ot+1)/I.length*90);Ee(Kt=>ve(k({},Kt),{progress:Xn,message:`Processing ${Ot+1}/${I.length} files...`}))}catch($t){console.error(`Failed to process ${We.filename}:`,$t)}}));ke.push(...et)}yield Promise.all(ke),Ee(me=>ve(k({},me),{progress:Math.max(H.current,95),message:"Creating ZIP..."})),Ae=yield ye.generateAsync({type:"blob"})}const je=window.URL.createObjectURL(Ae),K=document.createElement("a");K.href=je,K.download=`download_${Date.now()}.zip`,K.style.display="none",document.body.appendChild(K),K.click(),setTimeout(()=>{document.body.removeChild(K),window.URL.revokeObjectURL(je)},2e3),Ee(X=>ve(k({},X),{progress:100,downloadComplete:!0})),setTimeout(()=>{oe(!1),he()},3e3)}catch(O){oe(!1),alert(`Bulk download failed: ${O.message}`)}finally{Ne.active=!1}}),fe=()=>{const S=Z(),H=xe();if(S.length===0&&H.length===0)return;const P=H.reduce((V,ee)=>V+(ee.fileCount||0),0),Q=S.length+P;L({open:!0,count:Q})},Ct=()=>w(Y,null,function*(){const S=Z(),H=xe();L({open:!1,count:0});const P=[...S];for(const ee of H)try{const O=yield Pe.getFiles({folder:ee.path,paginate:!1});O.data&&Array.isArray(O.data.files)&&P.push(...O.data.files)}catch(O){console.error(`Error fetching files for folder ${ee.path}:`,O)}const Q=P.map(ee=>ee.id),V=G.addDeleteOperation(Q,"delete");Me("delete"),F("in_progress"),M({}),P.forEach(ee=>{M(O=>ve(k({},O),{[ee.id]:{status:"pending",progress:0}}))});try{G.updateDeleteOperation(V,{status:"deleting",progress:0,completedFiles:0});const ee=1e3,O=[];for(let ae=0;ae<Q.length;ae+=ee)O.push(Q.slice(ae,ae+ee));re({current:0,total:O.length});let q=0,I=0;for(let ae=0;ae<O.length;ae++){const Ae=O[ae];try{re({current:ae+1,total:O.length}),M(ke=>{const me=k({},ke);return Ae.forEach(Se=>{me[Se]={status:"in_progress",progress:50}}),me});const je=yield Pe.bulkDeleteFiles(Ae),{summary:K,failed_files:X}=je.data;q+=K.successfully_deleted,I+=K.failed_deletions||0,Ae.forEach(ke=>{const me=X?X.find(Se=>Se.file_id===ke):null;M(me?Se=>ve(k({},Se),{[ke]:{status:"error",progress:0}}):Se=>ve(k({},Se),{[ke]:{status:"completed",progress:100}}))});const ye=q+I,ie=Math.round(ye/Q.length*100);G.updateDeleteOperation(V,{status:"uploading",progress:ie,completedFiles:ye}),ae<O.length-1&&(yield new Promise(ke=>setTimeout(ke,100)))}catch(je){console.error(`Batch ${ae+1} failed:`,je),Ae.forEach(K=>{M(X=>ve(k({},X),{[K]:{status:"error",progress:0}}))}),I+=Ae.length}}F("completed"),G.updateDeleteOperation(V,{status:"completed",progress:100,completedFiles:q+I}),setTimeout(()=>w(Y,null,function*(){he(),yield Fe(!0);try{const ae=yield Pe.getFolderStructure(!0)}catch(ae){console.error("[Bulk Delete] Failed to refresh folder structure:",ae)}F(null),M({}),Me(null),G.queue=G.queue.filter(ae=>ae.id!==V),G._emit()}),2e3)}catch(ee){console.error("Bulk delete failed:",ee),F("error"),G.updateDeleteOperation(V,{status:"failed",progress:0,error:ee.message}),setTimeout(()=>{F(null),M({}),Me(null),G.queue=G.queue.filter(O=>O.id!==V),G._emit()},3e3)}});u.useEffect(()=>{Fe()},[]),u.useEffect(()=>{n&&Fe(!0)},[n]),u.useEffect(()=>{const S=setTimeout(()=>{Fe(!0)},100);return()=>clearTimeout(S)},[c,E]),u.useEffect(()=>{const S=()=>{const P=Xe.getEncryptionStatus();qr(P.enabled)};S();const H=setInterval(S,5e3);return()=>clearInterval(H)},[]),u.useEffect(()=>{let S,H=0;const P=500;return G.init().then(()=>{const Q=G.getState();Q&&Ze(Q),S=G.subscribe(V=>{if(!V)return;const ee=Date.now(),O=V.uploadInProgress>0||V.uploadQueued>0,q=de.uploadInProgress>0||de.uploadQueued>0;(O!==q||ee-H>=P)&&(H=ee,Ze(V))})}),()=>{S==null||S()}},[]),u.useEffect(()=>{const S=de;if(!S)return;if(S.uploadTotal>0&&S.uploadInProgress===0&&S.uploadQueued===0){const P=setTimeout(()=>w(Y,null,function*(){yield G.clearAll(),pe||Fe(!0)}),1200);return()=>clearTimeout(P)}},[de==null?void 0:de.uploadTotal,de==null?void 0:de.uploadInProgress,de==null?void 0:de.uploadQueued,pe]),u.useEffect(()=>{const S=setTimeout(()=>{T(s||"")},100);return()=>clearTimeout(S)},[s]);function Fe(S=!1){return w(this,null,function*(){if(!(se&&!S))try{if(le(!0),!Je.getAccessToken()){console.error("No authentication token found"),o([]),d([]);return}const P=yield Pe.getFiles({folder:c==="root"?"root":c,search:(E==null?void 0:E.trim())||"",paginate:!1,cacheBust:S?Date.now():void 0});if(P.status!==200){console.error("API returned non-200 status:",P.status),o([]),d([]);return}let Q=[],V=[];P.data&&Array.isArray(P.data.files)?(Q=P.data.files,V=P.data.folders||[]):Array.isArray(P.data)?Q=P.data:P.data&&Array.isArray(P.data.data)&&(Q=P.data.data),Array.isArray(Q)||(Q=[]);const ee=V.map(I=>({id:`folder_${I.name}`,original_filename:I.name,file_type:"folder",file_size:I.size||0,relative_path:I.relative_path,status:"uploaded",uploaded_at:new Date().toISOString(),fileCount:I.fileCount,size:I.size||0}));Q=[...Q,...ee];const O=new Map,q=[];if(Q.forEach(I=>{if(I.file_type==="folder"){const K=(I.relative_path||"").split("/").filter(X=>X!=="");if(K.length===0||K.length===1&&K[0]===I.original_filename){const X=I.original_filename;O.set(X,{name:I.original_filename,path:X,parent:"root",fileCount:I.fileCount||0,size:I.size||0,isCalculated:!1})}else{let X="root";K.forEach((ie,ke)=>{const me=X==="root"?ie:`${X}/${ie}`;O.has(me)||O.set(me,{name:ie,path:me,parent:X,fileCount:0,size:0,isCalculated:!0}),X=me});const ye=O.get(X);ye&&(ye.fileCount=I.fileCount||ye.fileCount||0,ye.size=I.size||ye.size||0,ye.isCalculated=!1)}return}const Ae=(I.relative_path||I.s3_key||"").split("/").filter(je=>je!=="");if(Ae.length===0)q.push(I);else{let je="root";Ae.forEach((K,X)=>{const ye=je==="root"?K:`${je}/${K}`;O.has(ye)||O.set(ye,{name:K,path:ye,parent:je,fileCount:0,size:0}),je=ye}),q.push(I)}}),Q.forEach(I=>{if(I.file_type==="folder")return;const Ae=(I.relative_path||I.s3_key||"").split("/").filter(K=>K!=="");let je="root";Ae.forEach((K,X)=>{const ye=je==="root"?K:`${je}/${K}`,ie=O.get(ye);ie&&(ie.isCalculated||!ie.fileCount&&!ie.size)&&(ie.fileCount+=1,ie.size+=I.file_size||0),je=ye})}),c==="root"&&Q.length>0&&Q.every(I=>I.file_type==="folder")){const I=Q.filter(ae=>ae.file_type==="folder"&&(!ae.relative_path||ae.relative_path==="")).map(ae=>w(this,null,function*(){try{const K=((yield Pe.getFiles({folder:ae.original_filename,search:"",paginate:!1})).data.files||[]).filter(Se=>Se.file_type!=="folder"),X=K.length,ye=K.filter(Se=>Se.file_type!=="folder").reduce((Se,et)=>Se+(et.file_size||0),0),ie=K.reduce((Se,et)=>(Se[et.status]=(Se[et.status]||0)+1,Se),{}),ke=ae.original_filename,me=O.get(ke);return me&&(me.fileCount=X,me.size=ye,me.statusCounts=ie),{folderPath:ke,fileCount:X,size:ye,statusCounts:ie}}catch(Ae){return console.error(`Error getting stats for folder ${ae.original_filename}:`,Ae),{folderPath:ae.original_filename,fileCount:0,size:0,statusCounts:{}}}}));yield Promise.all(I)}o(q),d(Array.from(O.values()))}catch(H){console.error("Error loading files:",H)}finally{le(!1)}})}const kt=u.useMemo(()=>{if(!i||i.length===0)return[];let S=i;if(E){const H=E.toLowerCase();S=i.filter(P=>{const Q=(P.original_filename||"").toLowerCase(),V=(P.relative_path||P.s3_key||"").toLowerCase();return Q.includes(H)||V.includes(H)})}else S=S.filter(H=>{const P=H.relative_path||"";return c==="root"?!P||P==="":P===c});return S},[i,b,E,c]),vr=u.useMemo(()=>{if(E)return[];let S;return c==="root"?S=a.filter(H=>H.parent==="root"):S=a.filter(H=>H.parent===c),S},[a,c,E]),Vn=u.useCallback(()=>{const S=new Set(kt.map(P=>P.id)),H=new Set(vr.map(P=>P.path));C(S),y(H)},[kt,vr]),Yn=u.useCallback(S=>{f(H=>{const P=new Set(H);return P.has(S)?P.delete(S):P.add(S),P})},[]);return e.jsxs(p,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},height:"calc(100vh - 100px)",bgcolor:"background.default",borderRadius:0,overflow:"hidden",position:"relative"},children:[Vr,e.jsxs(p,{sx:{flex:1,display:"flex",flexDirection:"column",position:"relative",minWidth:0,overflow:"hidden"},children:[e.jsx($n,{currentFolder:c,onFolderSelect:S=>{h(S),t==null||t(S)},showFolderDetails:z,setShowFolderDetails:D,searchQuery:E,setSearchQuery:T,setShowUploadArea:Te,hasUploadOperations:dr,onCreateFolder:u.useCallback(()=>w(Y,null,function*(){var H,P;const S=prompt("Enter folder name:");if(S&&S.trim())try{const Q=yield Pe.createFolder(S.trim(),c==="root"?"":c);alert(`Folder "${S.trim()}" created successfully!`),yield Fe(!0)}catch(Q){const V=((P=(H=Q.response)==null?void 0:H.data)==null?void 0:P.error)||"Failed to create folder";alert(`Error: ${V}`)}}),[c]),getSelectedCount:qe,filteredFiles:kt,currentFolderSubfolders:vr,selectAll:Vn,clearSelection:he,onRefresh:Fe,handleBulkDownload:Ne,handleBulkHibernate:Ge,handleBulkWakeUp:Ue,handleBulkDelete:fe}),e.jsx(Xa,{uploadManagerState:de,files:i}),e.jsx(Bn,{uploadManagerState:de,bulkOperationStatus:Be,bulkOperationType:st}),e.jsxs(p,{sx:{flex:1,overflow:"auto",pt:{xs:2,md:3},pr:{xs:2,md:2},pb:{xs:2,md:3},pl:{xs:2,md:3}},children:[e.jsx(Va,{filteredFiles:kt,encryptionEnabled:Gr}),pe?e.jsxs(p,{children:[e.jsx(p,{sx:{mb:4,p:2.5,bgcolor:v("#f0f9ff",.5),borderRadius:2},children:e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(rt,{sx:{color:"#60a5fa"}}),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600},children:"Upload Files"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Uploading to: ",e.jsx("strong",{children:c==="root"?"Root Directory":c})]})]}),e.jsx(p,{sx:{flex:1}}),e.jsx(Ve,{onClick:()=>Te(!1),sx:{bgcolor:v("#ef4444",.1),"&:hover":{bgcolor:v("#ef4444",.2)}},children:e.jsx(cn,{sx:{color:"#ef4444"}})})]})}),e.jsx(On,{open:!0,onClose:()=>Te(!1),onUploadComplete:()=>{Te(!1),jr(0),Yt(""),Fe(!0)},onUploadProgress:(S,H)=>{Vt(P=>ve(k({},P),{[H]:S})),typeof H=="string"&&H.includes("files")&&(jr(Math.round(S)),Yt(H))},defaultRelativePath:c==="root"?"":c})]}):null,!pe&&se?e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(He,{sx:{width:"50%"}})}):pe?null:e.jsx(Mn,{currentFolderSubfolders:vr,filteredFiles:kt,selectedFolders:m,selectedFiles:x,toggleFolderSelection:ue,toggleFileSelection:J,onFolderClick:S=>{h(S),t==null||t(S)},onFileClick:S=>{R(S),r==null||r(S,"view")},handleFolderToggle:Yn,formatFileSize:nn,getFolderStatus:Ye})]})]}),e.jsx(Nn,{selectedFile:_,onClose:()=>R(null),formatFileSize:nn,formatDate:Ka,handleDownload:W,handleArchive:Yr,handleRestore:S=>w(Y,null,function*(){yield Pe.restoreFile(S.id,"Standard"),yield Fe(!0)}),handleDelete:j,loadFiles:Fe,uploadManagerState:de}),e.jsx(Hn,{open:z&&!_,onClose:()=>D(!1),currentFolder:c}),e.jsx(Gn,{open:Ce.open,count:Ce.count,onClose:()=>L({open:!1,count:0}),onConfirm:Ct}),e.jsx(qa,{open:N,onClose:()=>oe(!1),downloadInfo:ne})]})},Za=r=>!r||typeof r!="string"?"":r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/<iframe[^>]*>.*?<\/iframe>/gi,"").replace(/<object[^>]*>.*?<\/object>/gi,"").replace(/<embed[^>]*>.*?<\/embed>/gi,"").replace(/<form[^>]*>.*?<\/form>/gi,"").replace(/<input[^>]*>/gi,"").replace(/<textarea[^>]*>.*?<\/textarea>/gi,"").replace(/<select[^>]*>.*?<\/select>/gi,"").replace(/<link[^>]*>/gi,"").replace(/<meta[^>]*>/gi,"").replace(/<style[^>]*>.*?<\/style>/gi,"").replace(/<base[^>]*>/gi,"").replace(/<applet[^>]*>.*?<\/applet>/gi,"").replace(/<param[^>]*>/gi,"").replace(/<blink[^>]*>.*?<\/blink>/gi,"").replace(/<marquee[^>]*>.*?<\/marquee>/gi,"").replace(/<keygen[^>]*>/gi,"").replace(/<isindex[^>]*>/gi,"").replace(/<listing[^>]*>.*?<\/listing>/gi,"").replace(/<plaintext[^>]*>.*?<\/plaintext>/gi,"").replace(/<xmp[^>]*>.*?<\/xmp>/gi,"").replace(/<xml[^>]*>.*?<\/xml>/gi,"").replace(/<svg[^>]*>.*?<\/svg>/gi,"").replace(/<math[^>]*>.*?<\/math>/gi,"").substring(0,1e3),Qa=({open:r,file:t,onClose:s,onAction:n,loading:i=!1})=>{const[o,a]=u.useState(0),[d,c]=u.useState(null),[h,g]=u.useState(!1);u.useEffect(()=>(t&&r&&f(),()=>{d&&URL.revokeObjectURL(d)}),[t,r]);const f=()=>w(Y,null,function*(){if(t){g(!0);try{(t.file_type.startsWith("image/")||t.file_type.startsWith("video/"))&&c("/api/placeholder/400/300")}catch($){console.error("Error generating preview:",$)}finally{g(!1)}}}),x=$=>{const _=$.file_type.toLowerCase();return _.startsWith("image/")?e.jsx(ci,{color:"primary",sx:{fontSize:48}}):_.startsWith("video/")?e.jsx(di,{color:"secondary",sx:{fontSize:48}}):_.startsWith("audio/")?e.jsx(ui,{color:"success",sx:{fontSize:48}}):_.includes("pdf")||_.includes("document")?e.jsx(Rs,{color:"error",sx:{fontSize:48}}):_.includes("text")||_.includes("code")?e.jsx(dn,{color:"info",sx:{fontSize:48}}):_.includes("zip")||_.includes("archive")?e.jsx(Pt,{color:"warning",sx:{fontSize:48}}):e.jsx(Nt,{color:"action",sx:{fontSize:48}})},C=$=>{switch($){case"uploaded":return e.jsx(pr,{color:"success"});case"archiving":return e.jsx(Ds,{color:"warning"});case"archived":return e.jsx(Pt,{color:"info"});case"restoring":return e.jsx(Ds,{color:"warning"});case"restored":return e.jsx(pr,{color:"success"});case"failed":return e.jsx(hi,{color:"error"});default:return e.jsx(rt,{color:"action"})}},m=$=>{switch($){case"uploaded":return"success";case"archiving":return"warning";case"archived":return"info";case"restoring":return"warning";case"restored":return"success";case"failed":return"error";default:return"default"}},y=$=>{if($===0)return"0 Bytes";const _=1024,R=["Bytes","KB","MB","GB","TB"],z=Math.floor(Math.log($)/Math.log(_));return parseFloat(($/Math.pow(_,z)).toFixed(2))+" "+R[z]},E=$=>new Date($).toLocaleString(),T=$=>{n&&n(t,$)},b=($,_)=>{a(_)};return t?e.jsxs(bt,{open:r,onClose:s,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"90vh"}},children:[e.jsx(jt,{children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2},children:[x(t),e.jsxs(p,{children:[e.jsx(l,{variant:"h6",noWrap:!0,sx:{maxWidth:400},children:t.original_filename}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(ge,{icon:C(t.status),label:t.status,color:m(t.status),size:"small"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:y(t.file_size)})]})]})]}),e.jsx(Ve,{onClick:s,children:e.jsx(cn,{})})]})}),e.jsxs(vt,{sx:{p:0},children:[e.jsx(p,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(ps,{value:o,onChange:b,children:[e.jsx(Jt,{label:"Preview"}),e.jsx(Jt,{label:"Details"}),e.jsx(Jt,{label:"History"}),e.jsx(Jt,{label:"Actions"})]})}),e.jsxs(p,{sx:{p:3},children:[o===0&&e.jsxs(p,{children:[e.jsx(ce,{sx:{p:3,textAlign:"center",mb:3},children:h?e.jsxs(p,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(He,{sx:{width:"100%"}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Loading preview..."})]}):t.file_type.startsWith("image/")?e.jsxs(p,{children:[e.jsx("img",{src:d||"/api/placeholder/400/300",alt:Za(t.original_filename),style:{maxWidth:"100%",maxHeight:400,objectFit:"contain",borderRadius:8},onError:$=>{$.target.style.display="none",$.target.nextSibling.style.display="block"}}),e.jsx(p,{sx:{display:"none",mt:2},children:e.jsx(we,{severity:"info",children:"Preview not available for this image"})})]}):t.file_type.startsWith("video/")?e.jsx(p,{children:e.jsxs("video",{controls:!0,style:{maxWidth:"100%",maxHeight:400,borderRadius:8},children:[e.jsx("source",{src:d||"/api/placeholder/400/300",type:t.file_type}),"Your browser does not support the video tag."]})}):e.jsxs(p,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[x(t),e.jsx(l,{variant:"h6",color:"text.secondary",children:"Preview not available"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"This file type cannot be previewed"})]})}),e.jsxs(A,{container:!0,spacing:2,children:[e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsx(U,{variant:"outlined",startIcon:e.jsx(Zt,{}),fullWidth:!0,onClick:()=>T("download"),children:"Download"})}),t.status==="uploaded"&&e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsx(U,{variant:"outlined",startIcon:e.jsx(Pt,{}),fullWidth:!0,onClick:()=>T("archive"),children:"Put to Sleep"})}),t.status==="archived"&&e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsx(U,{variant:"outlined",startIcon:e.jsx(Er,{}),fullWidth:!0,onClick:()=>T("restore"),children:"Restore"})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsx(U,{variant:"outlined",startIcon:e.jsx(Ir,{}),fullWidth:!0,onClick:()=>T("share"),children:"Share"})})]})]}),o===1&&e.jsxs(p,{children:[e.jsxs(A,{container:!0,spacing:3,children:[e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx(Le,{children:e.jsxs(Oe,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"File Information"}),e.jsxs(xt,{dense:!0,children:[e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx(Nt,{})}),e.jsx(De,{primary:"Filename",secondary:t.original_filename})]}),e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx(gt,{})}),e.jsx(De,{primary:"Size",secondary:y(t.file_size)})]}),e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx(Rs,{})}),e.jsx(De,{primary:"Type",secondary:t.file_type})]}),e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx(li,{})}),e.jsx(De,{primary:"Uploaded",secondary:E(t.uploaded_at)})]}),t.archived_at&&e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx(Pt,{})}),e.jsx(De,{primary:"Archived",secondary:E(t.archived_at)})]})]})]})})}),e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx(Le,{children:e.jsxs(Oe,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Status & Metadata"}),e.jsxs(xt,{dense:!0,children:[e.jsxs(Re,{children:[e.jsx(Ie,{children:C(t.status)}),e.jsx(De,{primary:"Status",secondary:t.status}),e.jsx(ge,{label:t.status,color:m(t.status),size:"small"})]}),t.checksum&&e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx($e,{})}),e.jsx(De,{primary:"Checksum",secondary:t.checksum})]}),t.glacier_archive_id&&e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx(Pt,{})}),e.jsx(De,{primary:"Glacier ID",secondary:t.glacier_archive_id})]}),t.restore_tier&&e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx($r,{})}),e.jsx(De,{primary:"Restore Tier",secondary:t.restore_tier})]})]})]})})})]}),t.description&&e.jsx(Le,{sx:{mt:3},children:e.jsxs(Oe,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Description"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:t.description})]})})]}),o===2&&e.jsxs(p,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"File History"}),e.jsxs(xt,{children:[e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx(rt,{color:"primary"})}),e.jsx(De,{primary:"File uploaded",secondary:E(t.uploaded_at)})]}),t.status==="archived"&&e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx(Pt,{color:"info"})}),e.jsx(De,{primary:"File archived",secondary:t.archived_at?E(t.archived_at):"Recently"})]}),t.status==="restored"&&e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsx(Er,{color:"success"})}),e.jsx(De,{primary:"File restored",secondary:"Recently"})]})]})]}),o===3&&e.jsxs(p,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Available Actions"}),e.jsxs(A,{container:!0,spacing:2,children:[e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Zt,{color:"primary",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Download"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Download this file to your device"}),e.jsx(U,{variant:"contained",startIcon:e.jsx(Zt,{}),fullWidth:!0,onClick:()=>T("download"),children:"Download"})]})})}),t.status==="uploaded"&&e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Pt,{color:"info",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Archive"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Move file to Glacier for long-term storage"}),e.jsx(U,{variant:"contained",startIcon:e.jsx(Pt,{}),fullWidth:!0,onClick:()=>T("archive"),children:"Archive"})]})})}),t.status==="archived"&&e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Er,{color:"warning",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Restore"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Restore file from Glacier (takes 3-5 hours)"}),e.jsx(U,{variant:"contained",startIcon:e.jsx(Er,{}),fullWidth:!0,onClick:()=>T("restore"),children:"Restore"})]})})}),e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Ir,{color:"success",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Share"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Generate a shareable link"}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(Ir,{}),fullWidth:!0,onClick:()=>T("share"),children:"Share"})]})})}),e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Is,{color:"action",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Rename"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Change the filename"}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(Is,{}),fullWidth:!0,onClick:()=>T("rename"),children:"Rename"})]})})}),e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Le,{sx:{height:"100%"},children:e.jsxs(Oe,{sx:{textAlign:"center"},children:[e.jsx(Gt,{color:"error",sx:{fontSize:48,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Delete"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Permanently delete this file"}),e.jsx(U,{variant:"outlined",color:"error",startIcon:e.jsx(Gt,{}),fullWidth:!0,onClick:()=>T("delete"),children:"Delete"})]})})})]})]})]})]}),e.jsx(sr,{children:e.jsx(U,{onClick:s,children:"Close"})})]}):null},el=({open:r,onClose:t,onPasswordSet:s})=>{const[n,i]=u.useState(""),[o,a]=u.useState(""),[d,c]=u.useState(!1),[h,g]=u.useState(!1),[f,x]=u.useState(!1),[C,m]=u.useState(""),[y,E]=u.useState(!1),[T,b]=u.useState(0),[$,_]=u.useState(""),[R,z]=u.useState(null),D=le=>w(Y,null,function*(){if(le.preventDefault(),m(""),z(null),!n){m("Password is required");return}if(n.length<8){m("Password must be at least 8 characters long");return}if(n!==o){m("Passwords do not match");return}E(!0),b(0),_("Initializing encryption...");try{b(25),_("Setting up encryption keys..."),yield Xe.initializeEncryption(n),b(50),_("Testing encryption...");const pe=yield Xe.testEncryption();if(z(pe),!pe.success)throw new dt(pe.error||"Encryption test failed");b(75),_("Finalizing setup..."),f&&(localStorage.setItem("encryption_enabled","true"),localStorage.setItem("encryption_initialized",Date.now().toString())),b(100),_("Encryption ready!"),yield new Promise(Te=>setTimeout(Te,500)),s(n),i(""),a(""),t()}catch(pe){console.error("Encryption initialization failed:",pe),m(`Encryption setup failed: ${pe.message}`),Xe.disableEncryption()}finally{E(!1),b(0),_("")}}),se=()=>{y||(i(""),a(""),m(""),z(null),t())};return e.jsxs(bt,{open:r,onClose:se,maxWidth:"sm",fullWidth:!0,children:[e.jsx(jt,{children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Wt,{color:"primary"}),e.jsx(l,{variant:"h6",children:"Set Master Password"})]})}),e.jsxs(vt,{children:[e.jsxs(we,{severity:"info",sx:{mb:2},children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1},children:"🔒 True End-to-End Encryption"}),e.jsxs(l,{variant:"body2",sx:{mb:1},children:["Your master password encrypts all files using ",e.jsx("strong",{children:"AES-GCM 256-bit encryption"})," before upload. Only you can decrypt them - not even we can access your files."]}),e.jsxs(p,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:[e.jsx(ge,{label:"AES-GCM 256-bit",size:"small",color:"primary"}),e.jsx(ge,{label:"PBKDF2 (100k iterations)",size:"small",color:"primary"}),e.jsx(ge,{label:"Zero-Knowledge",size:"small",color:"primary"}),e.jsx(ge,{label:"Open Source",size:"small",color:"success"})]}),e.jsx(l,{variant:"body2",sx:{mt:1,fontStyle:"italic"},children:"Choose a strong password and keep it safe - it cannot be recovered if lost."})]}),C&&e.jsx(we,{severity:"error",sx:{mb:2},children:C}),R&&e.jsxs(we,{severity:R.success?"success":"error",sx:{mb:2},icon:R.success?e.jsx($e,{}):e.jsx(dt,{}),children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1},children:R.success?"✅ Encryption Test Passed":"❌ Encryption Test Failed"}),e.jsx(l,{variant:"body2",children:R.message}),R.success&&e.jsxs(l,{variant:"body2",sx:{mt:1},children:["Duration: ",R.duration,"ms | Compression: ",R.compressionRatio,"x"]})]}),y&&e.jsxs(p,{sx:{mb:2},children:[e.jsx(l,{variant:"body2",sx:{mb:1},children:$}),e.jsx(He,{variant:"determinate",value:T,sx:{height:8,borderRadius:4}})]}),e.jsxs(p,{component:"form",onSubmit:D,children:[e.jsx(ot,{fullWidth:!0,label:"Master Password",type:d?"text":"password",value:n,onChange:le=>i(le.target.value),margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(Cr,{position:"start",children:e.jsx(wt,{})}),endAdornment:e.jsx(Cr,{position:"end",children:e.jsx(Ve,{onClick:()=>c(!d),edge:"end",children:d?e.jsx(Ts,{}):e.jsx(Wr,{})})})},helperText:"Minimum 8 characters, used to derive encryption keys",disabled:y}),e.jsx(ot,{fullWidth:!0,label:"Confirm Password",type:h?"text":"password",value:o,onChange:le=>a(le.target.value),margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(Cr,{position:"start",children:e.jsx(wt,{})}),endAdornment:e.jsx(Cr,{position:"end",children:e.jsx(Ve,{onClick:()=>g(!h),edge:"end",children:h?e.jsx(Ts,{}):e.jsx(Wr,{})})})},disabled:y}),e.jsx(pi,{control:e.jsx(Ar,{checked:f,onChange:le=>x(le.target.checked),disabled:y}),label:"Remember password for this session (not recommended for shared devices)",sx:{mt:2}})]})]}),e.jsxs(sr,{children:[e.jsx(U,{onClick:se,disabled:y,children:"Cancel"}),e.jsx(U,{onClick:D,variant:"contained",color:"primary",disabled:!n||!o||y,startIcon:y?e.jsx(Wt,{}):e.jsx(wt,{}),children:y?"Setting Up Encryption...":"Enable E2E Encryption"})]})]})},qn=()=>{const r=St(),[t,s]=u.useState("security"),n=c=>(h,g)=>{s(g?c:!1)},i=[{service:"Google Drive",storage:"1 TB",monthlyPrice:"₹1,300",keyNotes:"Simple, but costly"},{service:"Dropbox",storage:"1 TB",monthlyPrice:"₹1,500",keyNotes:"Smooth, but pricey"},{service:"OneDrive",storage:"1 TB",monthlyPrice:"₹1,250",keyNotes:"Great for Office users"},{service:"☁️ DataHibernate",storage:"1 TB",monthlyPrice:"₹249",keyNotes:`✅ Same AWS reliability
✅ End-to-End Encrypted
✅ Transparent, Indian pricing`}],o=[{icon:e.jsx(wt,{}),title:"True End-to-End Encryption",description:"AES-GCM 256-bit encryption with PBKDF2 key derivation. Files are encrypted before upload - even we cannot decrypt them.",details:["Military-grade AES-GCM 256-bit encryption","PBKDF2 with 100,000 iterations","Random IV per file prevents pattern analysis","Authentication tags ensure integrity","Zero-knowledge architecture"]},{icon:e.jsx(dn,{}),title:"Open Source Encryption",description:"Our encryption code is completely open source, allowing security audits and building trust through transparency.",details:["Full source code available on GitHub","Security researchers can audit the code","No hidden backdoors or vulnerabilities","Community-driven security improvements","Transparent implementation"]},{icon:e.jsx(vi,{}),title:"Master Password Protection",description:"Your master password is never stored on our servers. Keys are derived client-side using industry-standard algorithms.",details:["Password never leaves your device","Keys derived using PBKDF2","No key storage on servers","Client-side encryption only","Password cannot be recovered if lost"]},{icon:e.jsx(wi,{}),title:"Secure Infrastructure",description:"Built on AWS infrastructure with additional security layers and compliance certifications.",details:["AWS S3 with server-side encryption","HTTPS/TLS for all communications","SOC 2 Type II compliance","GDPR compliant data handling","Regular security audits"]}],a=[{icon:e.jsx(pr,{}),title:"99.99% Uptime SLA",description:"Built on AWS infrastructure with redundancy and failover mechanisms.",details:["Multi-region data replication","Automatic failover systems","24/7 monitoring and alerting","99.99% uptime guarantee","Disaster recovery protocols"]},{icon:e.jsx(gt,{}),title:"Glacier Deep Archive",description:"Long-term storage with automatic tiering to reduce costs while maintaining accessibility.",details:["Automatic tiering to Glacier","Instant retrieval for hot data","Cost-effective cold storage","Data integrity verification","Automated lifecycle management"]},{icon:e.jsx($r,{}),title:"High Performance",description:"Optimized for speed with CDN integration and parallel processing.",details:["Global CDN for fast downloads","Parallel upload processing","Streaming uploads for large files","Optimized data compression","Smart caching mechanisms"]}],d=[{icon:e.jsx(Xr,{}),title:"Zero-Knowledge Architecture",description:"We cannot see your files, even if we wanted to. Only you have the keys to decrypt your data.",details:["Server never sees plaintext data","No access to encryption keys","Cannot decrypt user files","Privacy by design","Legal protection for users"]},{icon:e.jsx(ss,{}),title:"GDPR Compliant",description:"Full compliance with privacy regulations including GDPR, CCPA, and other data protection laws.",details:["Right to be forgotten","Data portability","Consent management","Privacy by design","Regular compliance audits"]},{icon:e.jsx(Wr,{}),title:"Transparent Operations",description:"Open about our practices, policies, and any data processing activities.",details:["Open source code","Transparent privacy policy","Regular security reports","Community oversight","No hidden data collection"]}];return e.jsxs(p,{sx:{flex:1,overflow:"auto",pt:{xs:2,md:3},pr:{xs:2,md:2},pb:{xs:2,md:3},pl:{xs:2,md:3}},children:[e.jsx(ce,{sx:{p:2.5,mb:3,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:700,mb:2,color:"text.primary"},children:"Why Choose Data Hibernate?"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",maxWidth:600,mx:"auto"},children:"Save money while keeping your files safe. Simple, secure, and affordable cloud storage."})]})}),e.jsxs(A,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(A,{item:!0,xs:12,md:3,children:e.jsxs(ce,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(Wt,{sx:{fontSize:48,color:"#60a5fa",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Secure"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Your files are encrypted and safe"})]})}),e.jsx(A,{item:!0,xs:12,md:3,children:e.jsxs(ce,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(Xr,{sx:{fontSize:48,color:"#a78bfa",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Private"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"We can't see your files - only you can"})]})}),e.jsx(A,{item:!0,xs:12,md:3,children:e.jsxs(ce,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(pr,{sx:{fontSize:48,color:"#94a3b8",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Reliable"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Built on AWS - same reliability as big companies"})]})}),e.jsx(A,{item:!0,xs:12,md:3,children:e.jsxs(ce,{sx:{height:"100%",textAlign:"center",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(xi,{sx:{fontSize:48,color:"#10b981",mb:2}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Low Cost"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Save up to 80% compared to Google Drive & Dropbox"})]})})]}),e.jsxs(ce,{sx:{p:2.5,mb:3,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:"💰 Compare & Save Instantly"}),e.jsx(gi,{component:ce,variant:"outlined",children:e.jsxs(fi,{children:[e.jsx(mi,{children:e.jsxs(Fs,{sx:{bgcolor:"grey.50"},children:[e.jsx(Rt,{sx:{fontWeight:600},children:"Service"}),e.jsx(Rt,{sx:{fontWeight:600},children:"Storage"}),e.jsx(Rt,{sx:{fontWeight:600},children:"Monthly Price (1 TB)"}),e.jsx(Rt,{sx:{fontWeight:600},children:"Key Notes"})]})}),e.jsx(yi,{children:i.map((c,h)=>e.jsxs(Fs,{sx:{bgcolor:c.service==="☁️ DataHibernate"?v(r.palette.success.main,.1):"inherit","&:hover":{bgcolor:v(r.palette.primary.main,.05)}},children:[e.jsx(Rt,{sx:{fontWeight:c.service==="☁️ DataHibernate"?600:"normal"},children:c.service}),e.jsx(Rt,{children:c.storage}),e.jsx(Rt,{sx:{fontWeight:c.service==="☁️ DataHibernate"?600:"normal"},children:c.monthlyPrice}),e.jsx(Rt,{children:e.jsx(l,{variant:"body2",sx:{whiteSpace:"pre-line"},children:c.keyNotes})})]},c.service))})]})}),e.jsx(we,{severity:"success",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Save up to 80% compared to Google Drive and Dropbox!"}),"Plus you get the same AWS reliability with end-to-end encryption."]})})]}),e.jsxs(A,{container:!0,spacing:3,children:[e.jsx(A,{item:!0,xs:12,md:6,children:e.jsxs(ce,{sx:{height:"100%",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(Wt,{sx:{color:"#60a5fa"}}),"Security Features"]}),o.map((c,h)=>e.jsxs(As,{expanded:t===`security-${h}`,onChange:n(`security-${h}`),sx:{mb:1},children:[e.jsx(Ws,{expandIcon:e.jsx(zs,{}),children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.icon,e.jsx(l,{variant:"subtitle1",sx:{fontWeight:500},children:c.title})]})}),e.jsxs(Us,{children:[e.jsx(l,{variant:"body2",sx:{mb:2},children:c.description}),e.jsx(xt,{dense:!0,children:c.details.map((g,f)=>e.jsxs(Re,{sx:{py:.5},children:[e.jsx(Ie,{sx:{minWidth:32},children:e.jsx($e,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(De,{primary:g,primaryTypographyProps:{variant:"body2"}})]},f))})]})]},h))]})}),e.jsx(A,{item:!0,xs:12,md:6,children:e.jsxs(ce,{sx:{height:"100%",p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(pr,{sx:{color:"#94a3b8"}}),"Reliability Features"]}),a.map((c,h)=>e.jsxs(As,{expanded:t===`reliability-${h}`,onChange:n(`reliability-${h}`),sx:{mb:1},children:[e.jsx(Ws,{expandIcon:e.jsx(zs,{}),children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.icon,e.jsx(l,{variant:"subtitle1",sx:{fontWeight:500},children:c.title})]})}),e.jsxs(Us,{children:[e.jsx(l,{variant:"body2",sx:{mb:2},children:c.description}),e.jsx(xt,{dense:!0,children:c.details.map((g,f)=>e.jsxs(Re,{sx:{py:.5},children:[e.jsx(Ie,{sx:{minWidth:32},children:e.jsx($e,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(De,{primary:g,primaryTypographyProps:{variant:"body2"}})]},f))})]})]},h))]})}),e.jsx(A,{item:!0,xs:12,children:e.jsxs(ce,{sx:{p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(Xr,{sx:{color:"#a78bfa"}}),"Privacy Features"]}),e.jsx(A,{container:!0,spacing:2,children:d.map((c,h)=>e.jsx(A,{item:!0,xs:12,md:4,children:e.jsxs(p,{sx:{p:2,border:`1px solid ${v(r.palette.divider,.2)}`,borderRadius:1},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.icon,e.jsx(l,{variant:"subtitle1",sx:{fontWeight:500},children:c.title})]}),e.jsx(l,{variant:"body2",sx:{mb:2},children:c.description}),e.jsx(xt,{dense:!0,children:c.details.map((g,f)=>e.jsxs(Re,{sx:{py:.5},children:[e.jsx(Ie,{sx:{minWidth:32},children:e.jsx($e,{sx:{fontSize:16,color:"success.main"}})}),e.jsx(De,{primary:g,primaryTypographyProps:{variant:"body2"}})]},f))})]})},h))})]})})]}),e.jsxs(ce,{sx:{mt:4,p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`},children:[e.jsxs(l,{variant:"h5",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center",gap:1,color:"text.primary"},children:[e.jsx(Jr,{sx:{color:"#60a5fa"}}),"Open Source E2E Encryption"]}),e.jsxs(A,{container:!0,spacing:3,children:[e.jsxs(A,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Why Open Source?"}),e.jsxs(xt,{children:[e.jsxs(Re,{sx:{py:.5},children:[e.jsx(Ie,{sx:{minWidth:32},children:e.jsx(Wr,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(De,{primary:"Transparency - Users can verify the encryption implementation",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(Re,{sx:{py:.5},children:[e.jsx(Ie,{sx:{minWidth:32},children:e.jsx(bi,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(De,{primary:"Security Audits - Researchers can review and improve the code",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(Re,{sx:{py:.5},children:[e.jsx(Ie,{sx:{minWidth:32},children:e.jsx(ss,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(De,{primary:"Trust Building - No hidden backdoors or vulnerabilities",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(Re,{sx:{py:.5},children:[e.jsx(Ie,{sx:{minWidth:32},children:e.jsx(ji,{sx:{fontSize:16,color:"#60a5fa"}})}),e.jsx(De,{primary:"Community Contributions - Security improvements from the community",primaryTypographyProps:{variant:"body2"}})]})]})]}),e.jsxs(A,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Technical Implementation"}),e.jsxs(p,{sx:{bgcolor:"background.paper",p:2,borderRadius:1,border:`1px solid ${v(r.palette.divider,.2)}`},children:[e.jsx(l,{variant:"body2",component:"pre",sx:{fontFamily:"monospace",fontSize:"0.875rem",mb:2},children:`// Core Encryption Library
class GlacierEncryption {
  constructor() {
    this.algorithm = 'AES-GCM';
    this.keyLength = 256;
    this.pbkdf2Iterations = 100000;
  }
  
  async encryptFile(fileData, password) {
    const salt = this.generateSalt();
    const iv = this.generateIV();
    const key = await this.deriveKey(password, salt);
    
    return await crypto.subtle.encrypt({
      name: this.algorithm,
      iv: iv
    }, key, fileData);
  }
}`}),e.jsx(U,{variant:"outlined",startIcon:e.jsx(Jr,{}),href:"https://github.com/your-org/datahibernate-encryption",target:"_blank",sx:{mt:1},children:"View Source Code"})]})]})]}),e.jsx(we,{severity:"info",sx:{mt:3},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Coming Soon:"})," The complete E2E encryption source code will be available on GitHub for public review and contribution. This includes the core encryption library, key derivation functions, and all security-related components."]})})]}),e.jsxs(ce,{sx:{mt:4,p:2.5,bgcolor:"background.paper",border:`1px solid ${v(r.palette.divider,.1)}`,textAlign:"center"},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Ready to Secure Your Data?"}),e.jsx(l,{variant:"body1",sx:{mb:3,color:"text.secondary"},children:"Join thousands of users who trust Data Hibernate for their most sensitive data"}),e.jsxs(te,{direction:"row",spacing:2,justifyContent:"center",children:[e.jsx(U,{variant:"contained",size:"large",startIcon:e.jsx(rt,{}),children:"Start Uploading"}),e.jsx(U,{variant:"outlined",size:"large",startIcon:e.jsx(Jr,{}),children:"View on GitHub"})]})]})]})},tl=()=>{var Qe;const r=St(),t=un(r.breakpoints.down("md")),[s,n]=u.useState("overview"),[i,o]=u.useState(null),[a,d]=u.useState(null),[c,h]=u.useState(!0),[g,f]=u.useState(null),[x,C]=u.useState(""),[m,y]=u.useState(!1),[E,T]=u.useState(!1),[b,$]=u.useState(null),_=[{id:"overview",label:"Overview",icon:e.jsx(gt,{}),view:"overview"},{id:"hibernate",label:"Data Manager",icon:e.jsx(_t,{}),view:"hibernate"},{id:"plans",label:"Plans",icon:e.jsx(rt,{}),view:"plans"},{id:"why",label:"Why Data Hibernate",icon:e.jsx(an,{}),view:"why"}];u.useEffect(()=>{R(),w(Y,null,function*(){yield Xe.ensureInitialized(),z()});const M=window.location.hash.substring(1);M&&["overview","hibernate","plans","why"].includes(M)&&n(M)},[]);const R=()=>w(Y,null,function*(){try{const M=yield zt.getUser();d(M.data)}catch(M){console.error("Error loading user data:",M)}finally{h(!1)}}),z=()=>{const M=Xe.getEncryptionStatus();y(M.enabled),$(M)},D=()=>{},se=M=>{z(),T(!1)},le=()=>w(Y,null,function*(){try{Je.clearTokens(),window.location.href="/login"}catch(M){({}).VITE_DEBUG==="true"&&console.error("Error during logout:",M),window.location.href="/login"}}),pe=M=>{f(M.currentTarget)},Te=()=>{f(null)},de=(M,Be)=>w(Y,null,function*(){Be==="view"&&o(M)}),Ze=M=>{},Ce=()=>{switch(s){case"overview":return e.jsx(Zs,{});case"hibernate":return e.jsx(Ja,{onFileSelect:de,onFolderSelect:Ze,globalSearchQuery:x,isActive:s==="hibernate"});case"plans":return e.jsx(Ln,{});case"why":return e.jsx(qn,{});default:return e.jsx(Zs,{})}},L=(M,Be)=>{n(Be)};return c?e.jsx(p,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(He,{sx:{width:"100%",maxWidth:400}})}):e.jsxs(p,{sx:{display:"flex",flexDirection:"column",height:"100vh",bgcolor:"grey.50"},children:[e.jsx(_i,{position:"static",elevation:1,sx:{bgcolor:"white",color:"text.primary"},children:e.jsxs(Si,{sx:{minHeight:{xs:56,sm:64},px:{xs:1,sm:2},flexWrap:{xs:"wrap",sm:"nowrap"}},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",mr:{xs:2,sm:4},minWidth:{xs:"auto",sm:"auto"}},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:{xs:28,sm:32},height:{xs:28,sm:32},mr:{xs:1,sm:1.5},borderRadius:1}}),e.jsx(l,{variant:"h6",component:"div",sx:{fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.25rem"},display:{xs:"none",sm:"block"}},children:"Data Hibernate"})]}),e.jsx(ps,{value:s,onChange:L,sx:{flexGrow:1,"& .MuiTab-root":{minHeight:{xs:40,sm:48},fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},textTransform:"none",fontWeight:600},"& .MuiTabs-indicator":{height:{xs:2,sm:3}}},variant:t?"scrollable":"standard",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:_.map(M=>e.jsx(Jt,{value:M.view,label:M.label,icon:M.icon,iconPosition:"start",sx:{minHeight:{xs:40,sm:48},fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},"& .MuiSvgIcon-root":{fontSize:{xs:"1rem",sm:"1.25rem"}}}},M.id))}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:{xs:.5,sm:1},ml:{xs:1,sm:2}},children:[e.jsx(Ve,{color:"inherit",onClick:D,title:m?"Disable E2E Encryption":"Enable E2E Encryption",size:"small",sx:{color:m?"success.main":"text.secondary","&:hover":{bgcolor:m?"success.light":"action.hover"},p:{xs:.5,sm:1}},children:m?e.jsx(wt,{}):e.jsx(hn,{})}),e.jsx(Ve,{color:"inherit",size:"small",sx:{p:{xs:.5,sm:1}},children:e.jsx(Ei,{badgeContent:0,color:"error",children:e.jsx(Ci,{})})}),e.jsx(Ve,{color:"inherit",onClick:pe,size:"small",sx:{p:{xs:.5,sm:1}},children:e.jsx(ki,{sx:{width:{xs:28,sm:32},height:{xs:28,sm:32},bgcolor:"primary.main",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:((Qe=a==null?void 0:a.username)==null?void 0:Qe.charAt(0))||"U"})})]})]})}),e.jsx(p,{sx:{flexGrow:1,overflow:"auto",bgcolor:"grey.50"},children:Ce()}),g&&e.jsxs(Pi,{anchorEl:g,open:!!g,onClose:Te,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(Ls,{onClick:Te,children:[e.jsx(on,{sx:{mr:1}}),"Settings"]}),e.jsxs(Ls,{onClick:le,children:[e.jsx(Ri,{sx:{mr:1}}),"Logout"]})]}),i&&e.jsx(Qa,{file:i,open:!!i,onClose:()=>o(null)}),e.jsx(el,{open:E,onClose:()=>T(!1),onPasswordSet:se})]})},rl=()=>{const[r]=Sn(),t=Et(),[s,n]=u.useState("verifying"),[i,o]=u.useState(""),[a,d]=u.useState(""),[c,h]=u.useState(!1),g=r.get("token");u.useEffect(()=>{g?f(g):(n("error"),o("No verification token provided"))},[g]);const f=y=>w(Y,null,function*(){var E,T;try{const b=yield zt.verifyEmail({token:y});n("success"),o(b.data.message)}catch(b){const $=((T=(E=b.response)==null?void 0:E.data)==null?void 0:T.error)||"Verification failed";$.includes("expired")?(n("expired"),o("Your verification link has expired. Please request a new verification email.")):(n("error"),o($))}}),x=()=>w(Y,null,function*(){var y,E;if(!a){o("Please enter your email address");return}h(!0);try{yield zt.resendVerification({email:a}),o("Verification email sent! Please check your inbox.")}catch(T){o(((E=(y=T.response)==null?void 0:y.data)==null?void 0:E.error)||"Failed to resend verification email")}finally{h(!1)}}),C=()=>{switch(s){case"success":return e.jsx($e,{color:"success",sx:{fontSize:60}});case"error":case"expired":return e.jsx(Ii,{color:"error",sx:{fontSize:60}});default:return e.jsx(Qt,{size:60})}},m=()=>{switch(s){case"success":return"success";case"error":case"expired":return"error";default:return"info"}};return e.jsx(Le,{sx:{maxWidth:500,mx:"auto",mt:8},children:e.jsxs(Oe,{children:[e.jsx(p,{sx:{textAlign:"center",mb:3},children:C()}),e.jsx(l,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Email Verification"}),i&&e.jsx(we,{severity:m(),sx:{mb:3},children:i}),s==="success"&&e.jsx(p,{sx:{textAlign:"center"},children:e.jsx(U,{variant:"contained",onClick:()=>t("/login"),sx:{mt:2},children:"Go to Login"})}),(s==="error"||s==="expired")&&e.jsxs(p,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s==="expired"?"Your verification link has expired. Enter your email address to get a new verification email.":"Didn't receive the email? Enter your email address to resend the verification email."}),e.jsx(ot,{fullWidth:!0,label:"Email Address",type:"email",value:a,onChange:y=>d(y.target.value),sx:{mb:2}}),e.jsx(U,{fullWidth:!0,variant:"contained",startIcon:e.jsx(er,{}),onClick:x,disabled:c,children:c?"Sending...":"Resend Verification Email"}),e.jsx(U,{fullWidth:!0,variant:"outlined",onClick:()=>t("/login"),sx:{mt:1},children:"Back to Login"})]}),s==="verifying"&&e.jsx(l,{variant:"body2",color:"text.secondary",align:"center",children:"Verifying your email address..."})]})})},sl=()=>{const[r,t]=u.useState(!1);u.useEffect(()=>{const i=()=>{const a=Xe.getEncryptionStatus();t(a.enabled)};i();const o=setInterval(i,1e3);return()=>clearInterval(o)},[]);const s=i=>{const o=i.filter(d=>d.success),a=i.filter(d=>!d.success);alert(`Upload completed! ${o.length} files uploaded successfully, ${a.length} failed.`)},n=(i,o)=>{};return e.jsx("div",{className:"min-h-screen bg-gray-100 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Data Hibernate Platform"}),e.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"Upload your files directly to S3"}),e.jsx(p,{sx:{display:"flex",justifyContent:"center",mb:2},children:r?e.jsx(ge,{icon:e.jsx(wt,{}),label:"E2E Encryption Enabled",color:"success",variant:"outlined",sx:{fontWeight:600}}):e.jsx(ge,{icon:e.jsx(hn,{}),label:"E2E Encryption Disabled",color:"default",variant:"outlined",sx:{fontWeight:600}})}),!r&&e.jsx(we,{severity:"info",sx:{maxWidth:600,mx:"auto",mb:4},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"🔓 E2E Encryption Disabled"}),e.jsx("br",{}),"Files will be uploaded without encryption. Enable E2E encryption from the dashboard for maximum security."]})})]}),e.jsx(On,{onUploadComplete:s,onUploadProgress:n})]})})},nl=()=>{const r=St();un(r.breakpoints.down("md"));const t=[{icon:e.jsx(_t,{sx:{fontSize:40,color:"#4f46e5"}}),title:"Deep Hibernate",subtitle:"🌙 Long-term archival storage",features:["Stored safely in AWS Glacier Deep Archive","Ultra-low cost for long-term data","Restore in ~12 hours","10 GB free retrieval every 6 months"],pricing:[{storage:"100 GB",price:"₹599/year"},{storage:"1 TB",price:"₹2,999/year"}],description:"Perfect for memories, backups, and data you rarely need",color:"#1976d2",gradient:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",lightColor:"#e3f2fd",darkColor:"#1565c0",bgColor:"#f8fafc",textColor:"#1e293b"},{icon:e.jsx(Fr,{sx:{fontSize:40,color:"#2563eb"}}),title:"Smart Hibernate",subtitle:"🌤️ Flexible retrieval storage",features:["Stored on AWS Glacier Flexible Retrieval","Retrieve anytime within hours","Includes 10 GB free per month","Extra retrieval at ₹2/GB"],pricing:[{storage:"100 GB",price:"₹1,079/year"},{storage:"1 TB",price:"₹4,799/year"}],description:"Balance between cost and accessibility for regular backups",color:"#1976d2",gradient:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",lightColor:"#e3f2fd",darkColor:"#1565c0",bgColor:"#f8fafc",textColor:"#1e293b"}],s=[{icon:e.jsx(ss,{}),text:"Built on AWS — Trusted globally"},{icon:e.jsx(Ti,{}),text:"Up to 80% cheaper than big tech storage"},{icon:e.jsx(Fi,{}),text:"No confusing tech — just simple plans"},{icon:e.jsx(Ai,{}),text:"Made for India — affordable, reliable, transparent"},{icon:e.jsx(Wi,{}),text:"You pay once. We take care of the rest."}];return e.jsxs(p,{sx:{minHeight:"100vh",bgcolor:"grey.50"},children:[e.jsx(ce,{elevation:0,sx:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",py:{xs:8,md:12},borderRadius:0,position:"relative",overflow:"hidden"},children:e.jsx(ct,{maxWidth:"lg",children:e.jsxs(A,{container:!0,spacing:4,alignItems:"center",children:[e.jsx(A,{item:!0,xs:12,md:6,children:e.jsxs(p,{sx:{textAlign:{xs:"center",md:"left"}},children:[e.jsx(ge,{icon:e.jsx(rt,{}),label:"💤 DataHibernate",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",mb:3,fontSize:"1.1rem",fontWeight:600,borderRadius:3}}),e.jsx(l,{variant:"h1",sx:{fontSize:{xs:"2.5rem",md:"3.5rem"},fontWeight:800,lineHeight:1.2,mb:3},children:"Upload. Forget. Sleep Easy."}),e.jsx(l,{variant:"h5",sx:{fontSize:{xs:"1.2rem",md:"1.5rem"},fontWeight:300,mb:4,opacity:.9},children:"Your memories deserve rest, too."}),e.jsx(l,{variant:"body1",sx:{fontSize:"1.1rem",mb:4,opacity:.8,lineHeight:1.6},children:"A secure, long-term cloud vault built for people who don't want to think about storage ever again. Whether it's old photos, work archives, or personal backups — just upload once and let it sleep in peace."}),e.jsxs(te,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(U,{variant:"contained",size:"large",endIcon:e.jsx(Os,{}),sx:{bgcolor:"white",color:"#1976d2",px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.2)","&:hover":{bgcolor:"rgba(255,255,255,0.9)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.3)"}},onClick:()=>window.location.href="/login",children:"Get Started"}),e.jsx(U,{variant:"outlined",size:"large",sx:{borderColor:"white",color:"white",px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:3,"&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},onClick:()=>window.location.href="/why",children:"Why Choose Us?"})]})]})}),e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx(p,{sx:{textAlign:"center"},children:e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate Logo",sx:{width:{xs:200,md:300},height:"auto",filter:"drop-shadow(0 10px 20px rgba(0,0,0,0.3))"}})})})]})})}),e.jsxs(ct,{maxWidth:"lg",sx:{py:8},children:[e.jsxs(p,{sx:{textAlign:"center",mb:6},children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Choose Your Hibernation Plan"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",maxWidth:700,mx:"auto",lineHeight:1.6},children:"Select the perfect storage solution for your data needs. Each plan offers different balance between cost, storage capacity, and retrieval speed."})]}),e.jsx(A,{container:!0,spacing:4,children:t.map((n,i)=>e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx(Le,{sx:{height:"100%",position:"relative",border:`2px solid ${v(n.color,.15)}`,borderRadius:4,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)","&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:`0 20px 60px ${v(n.color,.25)}`,borderColor:n.color}},children:e.jsx(Oe,{sx:{p:4},children:e.jsxs(te,{spacing:4,children:[e.jsxs(p,{sx:{textAlign:"center"},children:[e.jsx(p,{sx:{p:3,borderRadius:"50%",bgcolor:n.lightColor,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${n.color}`,mx:"auto",width:80,height:80,mb:3},children:fr.cloneElement(n.icon,{sx:{fontSize:40,color:n.color}})}),e.jsx(l,{variant:"h4",sx:{fontWeight:800,mb:2,color:n.textColor},children:n.title}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",lineHeight:1.5},children:n.description})]}),e.jsx(xt,{dense:!0,children:n.features.map((o,a)=>e.jsxs(Re,{sx:{px:0},children:[e.jsx(Ie,{sx:{minWidth:36},children:e.jsx($e,{sx:{color:n.color,fontSize:20}})}),e.jsx(De,{primary:o,primaryTypographyProps:{fontSize:"0.9rem"}})]},a))}),e.jsx(p,{sx:{textAlign:"center",p:3,bgcolor:n.lightColor,borderRadius:3,border:`1px solid ${v(n.color,.2)}`},children:n.pricing.map((o,a)=>e.jsxs(p,{sx:{mb:a===0?2:0},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:800,mb:1,color:n.textColor},children:o.price}),e.jsxs(l,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:[o.storage," Storage"]})]},a))}),e.jsx(U,{fullWidth:!0,variant:"contained",sx:{bgcolor:n.color,borderRadius:3,py:3,fontSize:"1.1rem",fontWeight:700,textTransform:"none",boxShadow:`0 4px 16px ${v(n.color,.2)}`,transition:"all 0.3s ease","&:hover":{bgcolor:n.darkColor,transform:"translateY(-2px)",boxShadow:`0 8px 24px ${v(n.color,.3)}`}},children:"Choose Plan"})]})})})},i))})]}),e.jsx(ce,{elevation:0,sx:{bgcolor:"#f8fafc",py:8,borderRadius:0},children:e.jsxs(ct,{maxWidth:"lg",children:[e.jsx(p,{sx:{textAlign:"center",mb:6},children:e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Why Choose DataHibernate?"})}),e.jsx(A,{container:!0,spacing:4,children:s.map((n,i)=>e.jsx(A,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(ce,{sx:{p:4,textAlign:"center",height:"100%",borderRadius:3,transition:"all 0.3s ease",border:"1px solid rgba(0,0,0,0.05)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 32px rgba(0,0,0,0.15)"}},children:[e.jsx(p,{sx:{color:"#1976d2",mb:3},children:fr.cloneElement(n.icon,{sx:{fontSize:48}})}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#1e293b"},children:n.text})]})},i))})]})}),e.jsx(ct,{maxWidth:"lg",sx:{py:8},children:e.jsxs(A,{container:!0,spacing:6,alignItems:"center",children:[e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate",sx:{width:"100%",maxWidth:400,height:"auto",mx:"auto",display:"block",filter:"drop-shadow(0 8px 16px rgba(0,0,0,0.1))"}})}),e.jsxs(A,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800,color:"#1e293b"},children:"Your Data's Second Home"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",lineHeight:1.6,mb:3},children:"From family albums to startup archives — DataHibernate ensures your files are sleeping safely in the cloud, ready whenever you need them again."}),e.jsx(l,{variant:"body1",sx:{fontSize:"1.1rem",lineHeight:1.7,mb:4,color:"text.secondary"},children:"Think of it as hibernation for your data — calm, secure, and waiting patiently for your call."}),e.jsxs(te,{direction:"row",spacing:2,flexWrap:"wrap",children:[e.jsx(ge,{icon:e.jsx(Wt,{}),label:"Secure",sx:{bgcolor:"#e0e7ff",color:"#4f46e5",fontWeight:600,borderRadius:3}}),e.jsx(ge,{icon:e.jsx(gt,{}),label:"Reliable",sx:{bgcolor:"#dbeafe",color:"#2563eb",fontWeight:600,borderRadius:3}}),e.jsx(ge,{icon:e.jsx(Di,{}),label:"Affordable",sx:{bgcolor:"#dcfce7",color:"#16a34a",fontWeight:600,borderRadius:3}}),e.jsx(ge,{icon:e.jsx($r,{}),label:"Fast",sx:{bgcolor:"#fef3c7",color:"#d97706",fontWeight:600,borderRadius:3}})]})]})]})}),e.jsx(ce,{elevation:0,sx:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",py:8,textAlign:"center",borderRadius:0},children:e.jsxs(ct,{maxWidth:"md",children:[e.jsx(l,{variant:"h3",sx:{mb:3,fontWeight:800},children:"🔒 Start Your Hibernate Journey Today"}),e.jsxs(l,{variant:"h6",sx:{mb:4,opacity:.9,lineHeight:1.6},children:["Choose your plan → Upload → Relax.",e.jsx("br",{}),"No hidden charges. No monthly stress.",e.jsx("br",{}),"Just pure, long-term peace."]}),e.jsx(U,{variant:"contained",size:"large",endIcon:e.jsx(Os,{}),sx:{bgcolor:"white",color:"#1976d2",px:6,py:2,fontSize:"1.2rem",fontWeight:600,borderRadius:3,boxShadow:"0 4px 16px rgba(0,0,0,0.2)","&:hover":{bgcolor:"rgba(255,255,255,0.9)",transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.3)"}},onClick:()=>window.location.href="/login",children:"Get Started →"})]})}),e.jsx(ce,{elevation:0,sx:{bgcolor:"#1e293b",color:"white",py:6,borderRadius:0},children:e.jsxs(ct,{maxWidth:"lg",children:[e.jsxs(A,{container:!0,spacing:4,children:[e.jsxs(A,{item:!0,xs:12,md:6,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(p,{component:"img",src:"/icon.svg",alt:"DataHibernate",sx:{width:48,height:48,mr:2}}),e.jsx(l,{variant:"h5",sx:{fontWeight:800},children:"DataHibernate"})]}),e.jsx(l,{variant:"body1",sx:{color:"#94a3b8",mb:3,lineHeight:1.6},children:"Secure, affordable cloud storage for your digital memories. Built for India, trusted globally."})]}),e.jsxs(A,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h6",sx:{mb:3,fontWeight:700},children:"Quick Links"}),e.jsxs(te,{direction:"row",spacing:3,flexWrap:"wrap",children:[e.jsx(it,{href:"/login",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Login"}),e.jsx(it,{href:"/register",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Register"}),e.jsx(it,{href:"/why",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Why Choose Us"}),e.jsx(it,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Privacy Policy"}),e.jsx(it,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Terms of Service"}),e.jsx(it,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Support"}),e.jsx(it,{href:"#",sx:{color:"#94a3b8",textDecoration:"none","&:hover":{color:"white"}},children:"Contact"})]})]})]}),e.jsx(tr,{sx:{my:4,borderColor:"#334155"}}),e.jsx(l,{variant:"body2",sx:{color:"#94a3b8",textAlign:"center"},children:"© 2024 DataHibernate. All rights reserved. Built with ❤️ for digital peace of mind."})]})})]})},il=zi({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'}}),ol=()=>{const r=lr();return u.useEffect(()=>{const t=document.title||"Data Hibernate",s=r.pathname;qt.trackPageView(t,s)},[r]),null},al=()=>e.jsxs(Ui,{theme:il,children:[e.jsx(Li,{}),e.jsx(ct,{maxWidth:!1,disableGutters:!0,children:e.jsx(p,{sx:{minHeight:"100vh"},children:e.jsxs(Ao,{children:[e.jsx(ol,{}),e.jsxs(Po,{children:[e.jsx(lt,{path:"/",element:e.jsx(nl,{})}),e.jsx(lt,{path:"/login",element:e.jsx(Ra,{})}),e.jsx(lt,{path:"/register",element:e.jsx(Ia,{})}),e.jsx(lt,{path:"/forgot-password",element:e.jsx(Da,{})}),e.jsx(lt,{path:"/reset-password",element:e.jsx(Ta,{})}),e.jsx(lt,{path:"/why",element:e.jsx(qn,{})}),e.jsx(lt,{path:"/verify-email",element:e.jsx(rl,{})}),e.jsx(lt,{path:"/dashboard",element:e.jsx(Qr,{children:e.jsx(tl,{})})}),e.jsx(lt,{path:"/upload",element:e.jsx(Qr,{children:e.jsx(sl,{})})}),e.jsx(lt,{path:"/plans",element:e.jsx(Qr,{children:e.jsx(Ln,{})})})]})]})})})]});"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(r=>{r.forEach(t=>{t.unregister()})});const ll=pn(document.getElementById("root"));ll.render(e.jsx(al,{}))});export default cl();
